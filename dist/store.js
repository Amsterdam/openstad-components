/*! For license information please see store.js.LICENSE.txt */
window.OpenStadComponents=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=82)}({108:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},11:function(t,e,r){t.exports=r(54).Promise},12:function(t,e,r){"use strict";(function(t){function n(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o(t){return!!t&&!!t[B]}function i(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return!e||e===Object.prototype}(t)||Array.isArray(t)||!!t[X]||!!t.constructor[X]||d(t)||p(t))}function u(t,e,r){void 0===r&&(r=!1),0===c(t)?(r?Object.keys:G)(t).forEach((function(n){r&&"symbol"==typeof n||e(n,t[n],t)})):t.forEach((function(r,n){return e(n,r,t)}))}function c(t){var e=t[B];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:d(t)?2:p(t)?3:0}function a(t,e){return 2===c(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function f(t,e){return 2===c(t)?t.get(e):t[e]}function s(t,e,r){var n=c(t);2===n?t.set(e,r):3===n?(t.delete(e),t.add(r)):t[e]=r}function l(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function d(t){return q&&t instanceof Map}function p(t){return z&&t instanceof Set}function h(t){return t.o||t.t}function y(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=J(t);delete e[B];for(var r=G(e),n=0;n<r.length;n++){var o=r[n],i=e[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[o]})}return Object.create(Object.getPrototypeOf(t),e)}function v(t,e){return void 0===e&&(e=!1),g(t)||o(t)||!i(t)||(c(t)>1&&(t.set=t.add=t.clear=t.delete=b),Object.freeze(t),e&&u(t,(function(t,e){return v(e,!0)}),!0)),t}function b(){n(2)}function g(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function m(t){var e=$[t];return e||n(18,t),e}function w(t,e){$[t]||($[t]=e)}function O(){return K}function j(t,e){e&&(m("Patches"),t.u=[],t.s=[],t.v=e)}function _(t){P(t),t.p.forEach(S),t.p=null}function P(t){t===K&&(K=t.l)}function A(t){return K={p:[],l:K,h:t,m:!0,_:0}}function S(t){var e=t[B];0===e.i||1===e.i?e.j():e.g=!0}function E(t,e){e._=e.p.length;var r=e.p[0],o=void 0!==t&&t!==r;return e.h.O||m("ES5").S(e,t,o),o?(r[B].P&&(_(e),n(4)),i(t)&&(t=x(e,t),e.l||I(e,t)),e.u&&m("Patches").M(r[B],t,e.u,e.s)):t=x(e,r,[]),_(e),e.u&&e.v(e.u,e.s),t!==Y?t:void 0}function x(t,e,r){if(g(e))return e;var n=e[B];if(!n)return u(e,(function(o,i){return T(t,n,e,o,i,r)}),!0),e;if(n.A!==t)return e;if(!n.P)return I(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=y(n.k):n.o;u(3===n.i?new Set(o):o,(function(e,i){return T(t,n,o,e,i,r)})),I(t,o,!1),r&&t.u&&m("Patches").R(n,r,t.u,t.s)}return n.o}function T(t,e,r,n,u,c){if(o(u)){var f=x(t,u,c&&e&&3!==e.i&&!a(e.D,n)?c.concat(n):void 0);if(s(r,n,f),!o(f))return;t.m=!1}if(i(u)&&!g(u)){if(!t.h.N&&t._<1)return;x(t,u),e&&e.A.l||I(t,u)}}function I(t,e,r){void 0===r&&(r=!1),t.h.N&&t.m&&v(e,r)}function k(t,e){var r=t[B];return(r?h(r):t)[e]}function R(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function C(t){t.P||(t.P=!0,t.l&&C(t.l))}function D(t){t.o||(t.o=y(t.t))}function N(t,e,r){var n=d(e)?m("MapSet").T(e,r):p(e)?m("MapSet").F(e,r):t.O?function(t,e){var r=Array.isArray(t),n={i:r?1:0,A:e?e.A:O(),P:!1,I:!1,D:{},l:e,t:t,k:null,o:null,j:null,C:!1},o=n,i=H;r&&(o=[n],i=Q);var u=Proxy.revocable(o,i),c=u.revoke,a=u.proxy;return n.k=a,n.j=c,a}(e,r):m("ES5").J(e,r);return(r?r.A:O()).p.push(n),n}function M(t){return o(t)||n(22,t),function t(e){if(!i(e))return e;var r,n=e[B],o=c(e);if(n){if(!n.P&&(n.i<4||!m("ES5").K(n)))return n.t;n.I=!0,r=F(e,o),n.I=!1}else r=F(e,o);return u(r,(function(e,o){n&&f(n.t,e)===o||s(r,e,t(o))})),3===o?new Set(r):r}(t)}function F(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return y(t)}function L(){function t(t,e){var r=i[t];return r?r.enumerable=e:i[t]=r={configurable:!0,enumerable:e,get:function(){var e=this[B];return H.get(e,t)},set:function(e){var r=this[B];H.set(r,t,e)}},r}function e(t){for(var e=t.length-1;e>=0;e--){var o=t[e][B];if(!o.P)switch(o.i){case 5:n(o)&&C(o);break;case 4:r(o)&&C(o)}}}function r(t){for(var e=t.t,r=t.k,n=G(r),o=n.length-1;o>=0;o--){var i=n[o];if(i!==B){var u=e[i];if(void 0===u&&!a(e,i))return!0;var c=r[i],f=c&&c[B];if(f?f.t!==u:!l(c,u))return!0}}var s=!!e[B];return n.length!==G(e).length+(s?0:1)}function n(t){var e=t.k;if(e.length!==t.t.length)return!0;var r=Object.getOwnPropertyDescriptor(e,e.length-1);return!(!r||r.get)}var i={};w("ES5",{J:function(e,r){var n=Array.isArray(e),o=function(e,r){if(e){for(var n=Array(r.length),o=0;o<r.length;o++)Object.defineProperty(n,""+o,t(o,!0));return n}var i=J(r);delete i[B];for(var u=G(i),c=0;c<u.length;c++){var a=u[c];i[a]=t(a,e||!!i[a].enumerable)}return Object.create(Object.getPrototypeOf(r),i)}(n,e),i={i:n?5:4,A:r?r.A:O(),P:!1,I:!1,D:{},l:r,t:e,k:o,o:null,g:!1,C:!1};return Object.defineProperty(o,B,{value:i,writable:!0}),o},S:function(t,r,i){i?o(r)&&r[B].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var r=e[B];if(r){var o=r.t,i=r.k,c=r.D,f=r.i;if(4===f)u(i,(function(e){e!==B&&(void 0!==o[e]||a(o,e)?c[e]||t(i[e]):(c[e]=!0,C(r)))})),u(o,(function(t){void 0!==i[t]||a(i,t)||(c[t]=!1,C(r))}));else if(5===f){if(n(r)&&(C(r),c.length=!0),i.length<o.length)for(var s=i.length;s<o.length;s++)c[s]=!1;else for(var l=o.length;l<i.length;l++)c[l]=!0;for(var d=Math.min(i.length,o.length),p=0;p<d;p++)void 0===c[p]&&t(i[p])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?r(t):n(t)}})}r.d(e,"a",(function(){return M})),r.d(e,"c",(function(){return L})),r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return i}));var W,K,U="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),q="undefined"!=typeof Map,z="undefined"!=typeof Set,V="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Y=U?Symbol.for("immer-nothing"):((W={})["immer-nothing"]=!0,W),X=U?Symbol.for("immer-draftable"):"__$immer_draftable",B=U?Symbol.for("immer-state"):"__$immer_state",G=("undefined"!=typeof Symbol&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames),J=Object.getOwnPropertyDescriptors||function(t){var e={};return G(t).forEach((function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})),e},$={},H={get:function(t,e){if(e===B)return t;var r=h(t);if(!a(r,e))return function(t,e,r){var n,o=R(e,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(t.k):void 0}(t,r,e);var n=r[e];return t.I||!i(n)?n:n===k(t.t,e)?(D(t),t.o[e]=N(t.A.h,n,t)):n},has:function(t,e){return e in h(t)},ownKeys:function(t){return Reflect.ownKeys(h(t))},set:function(t,e,r){var n=R(h(t),e);if(null==n?void 0:n.set)return n.set.call(t.k,r),!0;if(!t.P){var o=k(h(t),e),i=null==o?void 0:o[B];if(i&&i.t===r)return t.o[e]=r,t.D[e]=!1,!0;if(l(r,o)&&(void 0!==r||a(t.t,e)))return!0;D(t),C(t)}return t.o[e]=r,t.D[e]=!0,!0},deleteProperty:function(t,e){return void 0!==k(t.t,e)||e in t.t?(t.D[e]=!1,D(t),C(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=h(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:n.enumerable,value:r[e]}:n},defineProperty:function(){n(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){n(12)}},Q={};u(H,(function(t,e){Q[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),Q.deleteProperty=function(t,e){return H.deleteProperty.call(this,t[0],e)},Q.set=function(t,e,r){return H.set.call(this,t[0],e,r,t[0])};var Z=new(function(){function e(t){this.O=V,this.N=!0,"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var r=e.prototype;return r.produce=function(e,r,o){if("function"==typeof e&&"function"!=typeof r){var u=r;r=e;var c=this;return function(t){var e=this;void 0===t&&(t=u);for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return c.produce(t,(function(t){var n;return(n=r).call.apply(n,[e,t].concat(o))}))}}var a;if("function"!=typeof r&&n(6),void 0!==o&&"function"!=typeof o&&n(7),i(e)){var f=A(this),s=N(this,e,void 0),l=!0;try{a=r(s),l=!1}finally{l?_(f):P(f)}return void 0!==t&&a instanceof t?a.then((function(t){return j(f,o),E(t,f)}),(function(t){throw _(f),t})):(j(f,o),E(a,f))}if(!e||"object"!=typeof e){if((a=r(e))===Y)return;return void 0===a&&(a=e),this.N&&v(a,!0),a}n(21,e)},r.produceWithPatches=function(t,e){var r,n,o=this;return"function"==typeof t?function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o.produceWithPatches(e,(function(e){return t.apply(void 0,[e].concat(n))}))}:[this.produce(t,e,(function(t,e){r=t,n=e})),r,n]},r.createDraft=function(t){i(t)||n(8),o(t)&&(t=M(t));var e=A(this),r=N(this,t,void 0);return r[B].C=!0,P(e),r},r.finishDraft=function(t,e){var r=(t&&t[B]).A;return j(r,e),E(void 0,r)},r.setAutoFreeze=function(t){this.N=t},r.setUseProxies=function(t){t&&!V&&n(20),this.O=t},r.applyPatches=function(t,e){var r;for(r=e.length-1;r>=0;r--){var n=e[r];if(0===n.path.length&&"replace"===n.op){t=n.value;break}}var i=m("Patches").$;return o(t)?i(t,e):this.produce(t,(function(t){return i(t,e.slice(r+1))}))},e}()),tt=Z.produce;Z.produceWithPatches.bind(Z),Z.setAutoFreeze.bind(Z),Z.setUseProxies.bind(Z),Z.applyPatches.bind(Z),Z.createDraft.bind(Z),Z.finishDraft.bind(Z);e.b=tt}).call(this,r(11))},18:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return v})),r.d(e,"b",(function(){return _})),r.d(e,"c",(function(){return m}));var n=r(12),o=r(8),i=(r(26),r(80));function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t,e,r){return(s=f()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&a(o,r.prototype),o}).apply(null,arguments)}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return s(t,arguments,c(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,t)})(t)}var d="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?o.d:o.d.apply(null,arguments)};function p(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}var h=function(t){var e,r;function n(){return t.apply(this,arguments)||this}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=n.prototype;return o.concat=function(){for(var e,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return s(n,(e=t.prototype.concat).call.apply(e,[this].concat(o)))},o.prepend=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?s(n,e[0].concat(this)):s(n,e.concat(this))},n}(l(Array));function y(){return function(t){return function(t){void 0===t&&(t={});var e=t,r=e.thunk,n=void 0===r||r,o=(e.immutableCheck,e.serializableCheck,new h);n&&("boolean"==typeof n?o.push(i.a):o.push(i.a.withExtraArgument(n.extraArgument)));0;return o}(t)}}function v(t){var e,r=y(),n=t||{},i=n.reducer,c=void 0===i?void 0:i,a=n.middleware,f=void 0===a?r():a,s=n.devTools,l=void 0===s||s,h=n.preloadedState,v=void 0===h?void 0:h,b=n.enhancers,g=void 0===b?void 0:b;if("function"==typeof c)e=c;else{if(!p(c))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');e=Object(o.c)(c)}var m=o.a.apply(void 0,"function"==typeof f?f(r):f),w=o.d;l&&(w=d(u({trace:!1},"object"==typeof l&&l)));var O=[m];Array.isArray(g)?O=[m].concat(g):"function"==typeof g&&(O=g(O));var j=w.apply(void 0,O);return Object(o.e)(e,v,j)}function b(t,e){function r(){if(e){var r=e.apply(void 0,arguments);if(!r)throw new Error("prepareAction did not return an object");return u({type:t,payload:r.payload},"meta"in r&&{meta:r.meta},{},"error"in r&&{error:r.error})}return{type:t,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(e){return e.type===t},r}function g(t){var e,r={},n=[],o={addCase:function(t,e){var n="string"==typeof t?t:t.type;if(n in r)throw new Error("addCase cannot be called with two reducers for the same action type");return r[n]=e,o},addMatcher:function(t,e){return n.push({matcher:t,reducer:e}),o},addDefaultCase:function(t){return e=t,o}};return t(o),[r,n,e]}function m(t){var e=t.name,r=t.initialState;if(!e)throw new Error("`name` is a required option for createSlice");var o=t.reducers||{},i=void 0===t.extraReducers?[]:"function"==typeof t.extraReducers?g(t.extraReducers):[t.extraReducers],c=i[0],a=void 0===c?{}:c,f=i[1],s=void 0===f?[]:f,l=i[2],d=void 0===l?void 0:l,p=Object.keys(o),h={},y={},v={};p.forEach((function(t){var r,n,i=o[t],u=e+"/"+t;"reducer"in i?(r=i.reducer,n=i.prepare):r=i,h[t]=r,y[u]=r,v[t]=n?b(u,n):b(u)}));var m=function(t,e,r,o){void 0===r&&(r=[]);var i="function"==typeof e?g(e):[e,r,o],u=i[0],c=i[1],a=i[2];return function(e,r){void 0===e&&(e=t);var o=[u[r.type]].concat(c.filter((function(t){return(0,t.matcher)(r)})).map((function(t){return t.reducer})));return 0===o.filter((function(t){return!!t})).length&&(o=[a]),o.reduce((function(t,e){if(e){if(Object(n.d)(t)){var o=e(t,r);return void 0===o?t:o}if(Object(n.e)(t))return Object(n.b)(t,(function(t){return e(t,r)}));var i=e(t,r);if(void 0===i){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return i}return t}),e)}}(r,u({},a,{},y),s,d);return{name:e,reducer:m,actions:v,caseReducers:h}}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var w=["name","message","stack","code"],O=function(t){this.payload=t,this.name="RejectWithValue",this.message="Rejected"},j=function(t){if("object"==typeof t&&null!==t){var e={},r=w,n=Array.isArray(r),o=0;for(r=n?r:r[Symbol.iterator]();;){var i;if(n){if(o>=r.length)break;i=r[o++]}else{if((o=r.next()).done)break;i=o.value}var u=i;"string"==typeof t[u]&&(e[u]=t[u])}return e}return{message:String(t)}};function _(e,r,n){var o=b(e+"/fulfilled",(function(t,e,r){return{payload:t,meta:{arg:r,requestId:e,requestStatus:"fulfilled"}}})),i=b(e+"/pending",(function(t,e){return{payload:void 0,meta:{arg:e,requestId:t,requestStatus:"pending"}}})),u=b(e+"/rejected",(function(t,e,r){var o=t instanceof O,i=!!t&&"AbortError"===t.name,u=!!t&&"ConditionError"===t.name;return{payload:t instanceof O?t.payload:void 0,error:(n&&n.serializeError||j)(t||"Rejected"),meta:{arg:r,requestId:e,rejectedWithValue:o,requestStatus:"rejected",aborted:i,condition:u}}})),c="undefined"!=typeof AbortController?AbortController:function(){function t(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return t.prototype.abort=function(){0},t}();return Object.assign((function(e){return function(a,f,s){var l,d=function(t){void 0===t&&(t=21);for(var e="",r=t;r--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e}(),p=new c,h=new t((function(t,e){return p.signal.addEventListener("abort",(function(){return e({name:"AbortError",message:l||"Aborted"})}))})),y=!1;var v=function(){try{var c,l=function(t){return v?t:(n&&!n.dispatchConditionRejection&&u.match(c)&&c.meta.condition||a(c),c)},v=!1,b=function(t,e){try{var r=t()}catch(t){return e(t)}return r&&r.then?r.then(void 0,e):r}((function(){if(n&&n.condition&&!1===n.condition(e,{getState:f,extra:s}))throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return y=!0,a(i(d,e)),t.resolve(t.race([h,t.resolve(r(e,{dispatch:a,getState:f,extra:s,requestId:d,signal:p.signal,rejectWithValue:function(t){return new O(t)}})).then((function(t){return t instanceof O?u(t,d,e):o(t,d,e)}))])).then((function(t){c=t}))}),(function(t){c=u(t,d,e)}));return t.resolve(b&&b.then?b.then(l):l(b))}catch(e){return t.reject(e)}}();return Object.assign(v,{abort:function(t){y&&(l=t,p.abort())},requestId:d,arg:e})}}),{pending:i,rejected:u,fulfilled:o,typePrefix:e})}Object(n.c)()}).call(this,r(11))},23:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},24:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n,o=r(18),i=r(96),u=Object(o.c)({name:"ideas",initialState:{ideas:[]},reducers:{setIdeas:function(t,e){t.ideas=e.payload},addIdea:function(t,e){var r=e.payload;t.ideas.push(r)},removeIdea:function(t,e){t.ideas.splice(t.ideas.findIndex((function(t){return t.id===e.payload})),1)}},extraReducers:function(t){t.addCase(i.a.fulfilled,(function(t,e){t.ideas=e.payload}))}}),c=((n=u.actions).setIdeas,n.addIdea);e.b=u.reducer},26:function(t,e,r){"use strict";function n(t,e){return t===e}function o(t,e,r){if(null===e||null===r||e.length!==r.length)return!1;for(var n=e.length,o=0;o<n;o++)if(!t(e[o],r[o]))return!1;return!0}function i(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every((function(t){return"function"==typeof t}))){var r=e.map((function(t){return typeof t})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return e}r.d(e,"a",(function(){return u}));var u=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var u=0,c=n.pop(),a=i(n),f=t.apply(void 0,[function(){return u++,c.apply(null,arguments)}].concat(r)),s=t((function(){for(var t=[],e=a.length,r=0;r<e;r++)t.push(a[r].apply(null,arguments));return f.apply(null,t)}));return s.resultFunc=c,s.dependencies=a,s.recomputations=function(){return u},s.resetRecomputations=function(){return u=0},s}}((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=null,i=null;return function(){return o(e,r,arguments)||(i=t.apply(null,arguments)),r=arguments,i}}))},54:function(t,e,r){(function(e,n){var o;o=function(){"use strict";function t(t){return"function"==typeof t}var o=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,u=void 0,c=void 0,a=function(t,e){y[i]=t,y[i+1]=e,2===(i+=2)&&(c?c(v):O())},f="undefined"!=typeof window?window:void 0,s=f||{},l=s.MutationObserver||s.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(v,1)}}var y=new Array(1e3);function v(){for(var t=0;t<i;t+=2)(0,y[t])(y[t+1]),y[t]=void 0,y[t+1]=void 0;i=0}var b,g,m,w,O=void 0;function j(t,e){var r=arguments,n=this,o=new this.constructor(A);void 0===o[P]&&K(o);var i,u=n._state;return u?(i=r[u-1],a((function(){return L(u,o,i,n._result)}))):D(n,o,t,e),o}function _(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(A);return I(e,t),e}d?O=function(){return e.nextTick(v)}:l?(g=0,m=new l(v),w=document.createTextNode(""),m.observe(w,{characterData:!0}),O=function(){w.data=g=++g%2}):p?((b=new MessageChannel).port1.onmessage=v,O=function(){return b.port2.postMessage(0)}):O=void 0===f?function(){try{var t=r(56);return u=t.runOnLoop||t.runOnContext,function(){u(v)}}catch(t){return h()}}():h();var P=Math.random().toString(36).substring(16);function A(){}var S=void 0,E=new M;function x(t){try{return t.then}catch(t){return E.error=t,E}}function T(e,r,n){r.constructor===e.constructor&&n===j&&r.constructor.resolve===_?function(t,e){1===e._state?R(t,e._result):2===e._state?C(t,e._result):D(e,void 0,(function(e){return I(t,e)}),(function(e){return C(t,e)}))}(e,r):n===E?C(e,E.error):void 0===n?R(e,r):t(n)?function(t,e,r){a((function(t){var n=!1,o=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,(function(r){n||(n=!0,e!==r?I(t,r):R(t,r))}),(function(e){n||(n=!0,C(t,e))}),t._label);!n&&o&&(n=!0,C(t,o))}),t)}(e,r,n):R(e,r)}function I(t,e){var r;t===e?C(t,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(r=e)||"object"==typeof r&&null!==r?T(t,e,x(e)):R(t,e)}function k(t){t._onerror&&t._onerror(t._result),N(t)}function R(t,e){t._state===S&&(t._result=e,t._state=1,0!==t._subscribers.length&&a(N,t))}function C(t,e){t._state===S&&(t._state=2,t._result=e,a(k,t))}function D(t,e,r,n){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+1]=r,o[i+2]=n,0===i&&t._state&&a(N,t)}function N(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,o=void 0,i=t._result,u=0;u<e.length;u+=3)n=e[u],o=e[u+r],n?L(r,n,o,i):o(i);t._subscribers.length=0}}function M(){this.error=null}var F=new M;function L(e,r,n,o){var i=t(n),u=void 0,c=void 0,a=void 0,f=void 0;if(i){if((u=function(t,e){try{return t(e)}catch(t){return F.error=t,F}}(n,o))===F?(f=!0,c=u.error,u=null):a=!0,r===u)return void C(r,new TypeError("A promises callback cannot return that same promise."))}else u=o,a=!0;r._state!==S||(i&&a?I(r,u):f?C(r,c):1===e?R(r,u):2===e&&C(r,u))}var W=0;function K(t){t[P]=W++,t._state=void 0,t._result=void 0,t._subscribers=[]}function U(t,e){this._instanceConstructor=t,this.promise=new t(A),this.promise[P]||K(this.promise),o(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&R(this.promise,this._result))):C(this.promise,new Error("Array Methods must be provided an Array"))}function q(t){this[P]=W++,this._result=this._state=void 0,this._subscribers=[],A!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof q?function(t,e){try{e((function(e){I(t,e)}),(function(e){C(t,e)}))}catch(e){C(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function z(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=q}return U.prototype._enumerate=function(){for(var t=this.length,e=this._input,r=0;this._state===S&&r<t;r++)this._eachEntry(e[r],r)},U.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===_){var o=x(t);if(o===j&&t._state!==S)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(r===q){var i=new r(A);T(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new r((function(e){return e(t)})),e)}else this._willSettleAt(n(t),e)},U.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===S&&(this._remaining--,2===t?C(n,r):this._result[e]=r),0===this._remaining&&R(n,this._result)},U.prototype._willSettleAt=function(t,e){var r=this;D(t,void 0,(function(t){return r._settledAt(1,e,t)}),(function(t){return r._settledAt(2,e,t)}))},q.all=function(t){return new U(this,t).promise},q.race=function(t){var e=this;return o(t)?new e((function(r,n){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(r,n)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},q.resolve=_,q.reject=function(t){var e=new this(A);return C(e,t),e},q._setScheduler=function(t){c=t},q._setAsap=function(t){a=t},q._asap=a,q.prototype={constructor:q,then:j,catch:function(t){return this.then(null,t)}},z(),q.polyfill=z,q.Promise=q,q},t.exports=o()}).call(this,r(55),r(23))},55:function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:u}catch(t){n=u}}();var a,f=[],s=!1,l=-1;function d(){s&&a&&(s=!1,a.length?f=a.concat(f):l=-1,f.length&&p())}function p(){if(!s){var t=c(d);s=!0;for(var e=f.length;e;){for(a=f,f=[];++l<e;)a&&a[l].run();l=-1,e=f.length}a=null,s=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];f.push(new h(t,e)),1!==f.length||s||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},56:function(t,e){},8:function(t,e,r){"use strict";r.d(e,"a",(function(){return v})),r.d(e,"b",(function(){return l})),r.d(e,"c",(function(){return f})),r.d(e,"d",(function(){return y})),r.d(e,"e",(function(){return c}));var n=r(81),o=function(){return Math.random().toString(36).substring(7).split("").join(".")},i={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function u(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function c(t,e,r){var o;if("function"==typeof e&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof e&&void 0===r&&(r=e,e=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(c)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var a=t,f=e,s=[],l=s,d=!1;function p(){l===s&&(l=s.slice())}function h(){if(d)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return f}function y(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(d)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var e=!0;return p(),l.push(t),function(){if(e){if(d)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");e=!1,p();var r=l.indexOf(t);l.splice(r,1),s=null}}}function v(t){if(!u(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,f=a(f,t)}finally{d=!1}for(var e=s=l,r=0;r<e.length;r++){(0,e[r])()}return t}function b(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");a=t,v({type:i.REPLACE})}function g(){var t,e=y;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function r(){t.next&&t.next(h())}return r(),{unsubscribe:e(r)}}})[n.a]=function(){return this},t}return v({type:i.INIT}),(o={dispatch:v,subscribe:y,getState:h,replaceReducer:b})[n.a]=g,o}function a(t,e){var r=e&&e.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function f(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++){var o=e[n];0,"function"==typeof t[o]&&(r[o]=t[o])}var u,c=Object.keys(r);try{!function(t){Object.keys(t).forEach((function(e){var r=t[e];if(void 0===r(void 0,{type:i.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:i.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+i.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(t){u=t}return function(t,e){if(void 0===t&&(t={}),u)throw u;for(var n=!1,o={},i=0;i<c.length;i++){var f=c[i],s=r[f],l=t[f],d=s(l,e);if(void 0===d){var p=a(f,e);throw new Error(p)}o[f]=d,n=n||d!==l}return(n=n||c.length!==Object.keys(t).length)?o:t}}function s(t,e){return function(){return e(t.apply(this,arguments))}}function l(t,e){if("function"==typeof t)return s(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var r={};for(var n in t){var o=t[n];"function"==typeof o&&(r[n]=s(o,e))}return r}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t,e){var r=Object.keys(t);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(t)),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(r,!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function v(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return function(){var r=t.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=e.map((function(t){return t(o)}));return h({},r,{dispatch:n=y.apply(void 0,i)(r.dispatch)})}}}},80:function(t,e,r){"use strict";function n(t){return function(e){var r=e.dispatch,n=e.getState;return function(e){return function(o){return"function"==typeof o?o(r,n,t):e(o)}}}}var o=n();o.withExtraArgument=n,e.a=o},81:function(t,e,r){"use strict";(function(t,n){var o,i=r(95);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:n;var u=Object(i.a)(o);e.a=u}).call(this,r(23),r(108)(t))},82:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return a})),r.d(e,"OpenstadStore",(function(){return a}));var n=r(18),o=r(8),i=Object(n.c)({name:"config",initialState:{api:{}},reducers:{}}).reducer,u=r(24),c=Object(o.c)({config:i,ideas:u.b}),a=function(t){return Object(n.a)({reducer:c,preloadedState:t})}},95:function(t,e,r){"use strict";function n(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}r.d(e,"a",(function(){return n}))},96:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return u}));var n=r(18),o=function(e,r,n,o){return new(n||(n=t))((function(t,i){function u(t){try{a(o.next(t))}catch(t){i(t)}}function c(t){try{a(o.throw(t))}catch(t){i(t)}}function a(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(u,c)}a((o=o.apply(e,r||[])).next())}))},i=function(t,e){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},u=Object(n.b)("ideas/fetchIdeas",(function(t,e){var r=e.getState;return o(void 0,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return console.log("fetch ideas async"),t=r(),[4,fetch(t.config.api+"/site/"+t.config.siteId+"/idea?includeVoteCount=1&includeArgsCount=1&includeUser=1")];case 1:return[2,e.sent().json()]}}))}))}))}).call(this,r(11))}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9PcGVuU3RhZENvbXBvbmVudHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vT3BlblN0YWRDb21wb25lbnRzLyh3ZWJwYWNrKS9idWlsZGluL2hhcm1vbnktbW9kdWxlLmpzIiwid2VicGFjazovL09wZW5TdGFkQ29tcG9uZW50cy8uL25vZGVfbW9kdWxlcy9lczYtcHJvbWlzZS1wcm9taXNlL2luZGV4LmpzIiwid2VicGFjazovL09wZW5TdGFkQ29tcG9uZW50cy8uL25vZGVfbW9kdWxlcy9pbW1lci9kaXN0L2ltbWVyLmVzbS5qcyIsIndlYnBhY2s6Ly9PcGVuU3RhZENvbXBvbmVudHMvLi9ub2RlX21vZHVsZXMvQHJlZHV4anMvdG9vbGtpdC9kaXN0L3JlZHV4LXRvb2xraXQuZXNtLmpzIiwid2VicGFjazovL09wZW5TdGFkQ29tcG9uZW50cy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vT3BlblN0YWRDb21wb25lbnRzLy4vc3JjL3N0b3JlL3NyYy9mZWF0dXJlcy9pZGVhcy9pZGVhc1NsaWNlLnRzIiwid2VicGFjazovL09wZW5TdGFkQ29tcG9uZW50cy8uL25vZGVfbW9kdWxlcy9yZXNlbGVjdC9lcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9PcGVuU3RhZENvbXBvbmVudHMvLi9ub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9lczYtcHJvbWlzZS5qcyIsIndlYnBhY2s6Ly9PcGVuU3RhZENvbXBvbmVudHMvLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovL09wZW5TdGFkQ29tcG9uZW50cy8uL25vZGVfbW9kdWxlcy9yZWR1eC9lcy9yZWR1eC5qcyIsIndlYnBhY2s6Ly9PcGVuU3RhZENvbXBvbmVudHMvLi9ub2RlX21vZHVsZXMvcmVkdXgtdGh1bmsvZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vT3BlblN0YWRDb21wb25lbnRzLy4vbm9kZV9tb2R1bGVzL3N5bWJvbC1vYnNlcnZhYmxlL2VzL2luZGV4LmpzIiwid2VicGFjazovL09wZW5TdGFkQ29tcG9uZW50cy8uL3NyYy9zdG9yZS9zcmMvZmVhdHVyZXMvY29uZmlnL2NvbmZpZ1NsaWNlLnRzIiwid2VicGFjazovL09wZW5TdGFkQ29tcG9uZW50cy8uL3NyYy9zdG9yZS9zcmMvcmVkdWNlcnMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vT3BlblN0YWRDb21wb25lbnRzLy4vc3JjL3N0b3JlL2luZGV4LnRzIiwid2VicGFjazovL09wZW5TdGFkQ29tcG9uZW50cy8uL25vZGVfbW9kdWxlcy9zeW1ib2wtb2JzZXJ2YWJsZS9lcy9wb255ZmlsbC5qcyIsIndlYnBhY2s6Ly9PcGVuU3RhZENvbXBvbmVudHMvLi9zcmMvc3RvcmUvc3JjL2ZlYXR1cmVzL2lkZWFzL21pZGRsZXdhcmVzLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwib3JpZ2luYWxNb2R1bGUiLCJ3ZWJwYWNrUG9seWZpbGwiLCJjaGlsZHJlbiIsIlByb21pc2UiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJBcnJheSIsImUiLCJFcnJvciIsIm1hcCIsImpvaW4iLCJRIiwiZ2V0UHJvdG90eXBlT2YiLCJpc0FycmF5IiwiTCIsImNvbnN0cnVjdG9yIiwidiIsImtleXMiLCJaIiwiZm9yRWFjaCIsInUiLCJoYXMiLCJhIiwiZiIsInNldCIsImRlbGV0ZSIsImFkZCIsIlgiLCJNYXAiLCJxIiwiU2V0Iiwic2xpY2UiLCJ0dCIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwieSIsImNsZWFyIiwiaCIsImZyZWV6ZSIsImlzRnJvemVuIiwiYiIsIm50IiwiXyIsIlUiLCJqIiwiZyIsInciLCJTIiwiTyIsIlAiLCJNIiwieCIsIkgiLCJBIiwiSSIsImsiLCJSIiwiRCIsImNvbmNhdCIsIk4iLCJ6IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiRSIsIlQiLCJGIiwiQyIsInJ0IiwiZXQiLCJQcm94eSIsInJldm9jYWJsZSIsInJldm9rZSIsInByb3h5IiwiSiIsInB1c2giLCJLIiwiZnJvbSIsInRoaXMiLCJNYXRoIiwibWluIiwiRyIsIlciLCJCIiwiUmVmbGVjdCIsImZvciIsIml0ZXJhdG9yIiwib3duS2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsImdldE93blByb3BlcnR5TmFtZXMiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzIiwiZGVsZXRlUHJvcGVydHkiLCJzZXRQcm90b3R5cGVPZiIsImFwcGx5Iiwib3QiLCJ1c2VQcm94aWVzIiwic2V0VXNlUHJveGllcyIsImF1dG9GcmVlemUiLCJzZXRBdXRvRnJlZXplIiwicHJvZHVjZSIsInByb2R1Y2VXaXRoUGF0Y2hlcyIsInRoZW4iLCJjcmVhdGVEcmFmdCIsImZpbmlzaERyYWZ0IiwiYXBwbHlQYXRjaGVzIiwicGF0aCIsIm9wIiwiJCIsInV0IiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJzb3VyY2UiLCJfZ2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfc2V0UHJvdG90eXBlT2YiLCJpc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QiLCJjb25zdHJ1Y3QiLCJzaGFtIiwiRGF0ZSIsInRvU3RyaW5nIiwiX2NvbnN0cnVjdCIsIlBhcmVudCIsImFyZ3MiLCJDbGFzcyIsImluc3RhbmNlIiwiRnVuY3Rpb24iLCJfd3JhcE5hdGl2ZVN1cGVyIiwiX2NhY2hlIiwidW5kZWZpbmVkIiwiZm4iLCJpbmRleE9mIiwiVHlwZUVycm9yIiwiV3JhcHBlciIsImNvbXBvc2VXaXRoRGV2VG9vbHMiLCJ3aW5kb3ciLCJfX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9DT01QT1NFX18iLCJpc1BsYWluT2JqZWN0IiwicHJvdG8iLCJNaWRkbGV3YXJlQXJyYXkiLCJfQXJyYXkiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJfcHJvdG8iLCJfQXJyYXkkcHJvdG90eXBlJGNvbmMiLCJfbGVuIiwiYXJyIiwiX2tleSIsInByZXBlbmQiLCJfbGVuMiIsIl9rZXkyIiwiY3VycnlHZXREZWZhdWx0TWlkZGxld2FyZSIsIm9wdGlvbnMiLCJfb3B0aW9ucyIsIl9vcHRpb25zJHRodW5rIiwidGh1bmsiLCJtaWRkbGV3YXJlQXJyYXkiLCJpbW11dGFibGVDaGVjayIsInNlcmlhbGl6YWJsZUNoZWNrIiwid2l0aEV4dHJhQXJndW1lbnQiLCJleHRyYUFyZ3VtZW50IiwiZ2V0RGVmYXVsdE1pZGRsZXdhcmUiLCJjb25maWd1cmVTdG9yZSIsInJvb3RSZWR1Y2VyIiwiY3VycmllZEdldERlZmF1bHRNaWRkbGV3YXJlIiwiX3JlZiIsIl9yZWYkcmVkdWNlciIsInJlZHVjZXIiLCJfcmVmJG1pZGRsZXdhcmUiLCJtaWRkbGV3YXJlIiwiX3JlZiRkZXZUb29scyIsImRldlRvb2xzIiwiX3JlZiRwcmVsb2FkZWRTdGF0ZSIsInByZWxvYWRlZFN0YXRlIiwiX3JlZiRlbmhhbmNlcnMiLCJlbmhhbmNlcnMiLCJtaWRkbGV3YXJlRW5oYW5jZXIiLCJmaW5hbENvbXBvc2UiLCJ0cmFjZSIsInN0b3JlRW5oYW5jZXJzIiwiY29tcG9zZWRFbmhhbmNlciIsImNyZWF0ZUFjdGlvbiIsInR5cGUiLCJwcmVwYXJlQWN0aW9uIiwiYWN0aW9uQ3JlYXRvciIsInByZXBhcmVkIiwicGF5bG9hZCIsIm1ldGEiLCJlcnJvciIsIm1hdGNoIiwiYWN0aW9uIiwiZXhlY3V0ZVJlZHVjZXJCdWlsZGVyQ2FsbGJhY2siLCJidWlsZGVyQ2FsbGJhY2siLCJkZWZhdWx0Q2FzZVJlZHVjZXIiLCJhY3Rpb25zTWFwIiwiYWN0aW9uTWF0Y2hlcnMiLCJidWlsZGVyIiwiYWRkQ2FzZSIsInR5cGVPckFjdGlvbkNyZWF0b3IiLCJhZGRNYXRjaGVyIiwibWF0Y2hlciIsImFkZERlZmF1bHRDYXNlIiwiY3JlYXRlU2xpY2UiLCJpbml0aWFsU3RhdGUiLCJyZWR1Y2VycyIsImV4dHJhUmVkdWNlcnMiLCJfcmVmJCIsIl9yZWYkMiIsIl9yZWYkMyIsInJlZHVjZXJOYW1lcyIsInNsaWNlQ2FzZVJlZHVjZXJzQnlOYW1lIiwic2xpY2VDYXNlUmVkdWNlcnNCeVR5cGUiLCJhY3Rpb25DcmVhdG9ycyIsInJlZHVjZXJOYW1lIiwiY2FzZVJlZHVjZXIiLCJwcmVwYXJlQ2FsbGJhY2siLCJtYXliZVJlZHVjZXJXaXRoUHJlcGFyZSIsInByZXBhcmUiLCJtYXBPckJ1aWxkZXJDYWxsYmFjayIsImZpbmFsQWN0aW9uTWF0Y2hlcnMiLCJmaW5hbERlZmF1bHRDYXNlUmVkdWNlciIsInN0YXRlIiwiY2FzZVJlZHVjZXJzIiwiZmlsdGVyIiwiX3JlZjIiLCJfcmVmMyIsImNyIiwicmVkdWNlIiwicHJldmlvdXNTdGF0ZSIsInJlc3VsdCIsImRyYWZ0IiwiX3Jlc3VsdCIsImNyZWF0ZVJlZHVjZXIiLCJhY3Rpb25zIiwiYXN5bmNJdGVyYXRvciIsImNvbW1vblByb3BlcnRpZXMiLCJSZWplY3RXaXRoVmFsdWUiLCJtZXNzYWdlIiwibWluaVNlcmlhbGl6ZUVycm9yIiwic2ltcGxlRXJyb3IiLCJfaXRlcmF0b3IiLCJfaXNBcnJheSIsIl9pIiwibmV4dCIsImRvbmUiLCJTdHJpbmciLCJjcmVhdGVBc3luY1RodW5rIiwidHlwZVByZWZpeCIsInBheWxvYWRDcmVhdG9yIiwiZnVsZmlsbGVkIiwicmVxdWVzdElkIiwiYXJnIiwicmVxdWVzdFN0YXR1cyIsInBlbmRpbmciLCJyZWplY3RlZCIsInJlamVjdGVkV2l0aFZhbHVlIiwiYWJvcnRlZCIsImNvbmRpdGlvbiIsInNlcmlhbGl6ZUVycm9yIiwiQUMiLCJBYm9ydENvbnRyb2xsZXIiLCJfY2xhc3MiLCJzaWduYWwiLCJhZGRFdmVudExpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCIsIm9uYWJvcnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYWJvcnQiLCJkaXNwYXRjaCIsImdldFN0YXRlIiwiZXh0cmEiLCJhYm9ydFJlYXNvbiIsInNpemUiLCJpZCIsInJhbmRvbSIsIm5hbm9pZCIsImFib3J0Q29udHJvbGxlciIsImFib3J0ZWRQcm9taXNlIiwicmVqZWN0Iiwic3RhcnRlZCIsInByb21pc2UiLCJmaW5hbEFjdGlvbiIsIl90ZW1wMyIsIl9leGl0MiIsImRpc3BhdGNoQ29uZGl0aW9uUmVqZWN0aW9uIiwiX3RlbXA0IiwiYm9keSIsInJlY292ZXIiLCJfY2F0Y2giLCJyZXNvbHZlIiwicmFjZSIsInJlamVjdFdpdGhWYWx1ZSIsIl9Qcm9taXNlJHJhY2UiLCJlcnIiLCJyZWFzb24iLCJpZGVhc1NsaWNlIiwiaWRlYXMiLCJzZXRJZGVhcyIsImFkZElkZWEiLCJpZGVhIiwicmVtb3ZlSWRlYSIsInNwbGljZSIsImZpbmRJbmRleCIsImRlZmF1bHRFcXVhbGl0eUNoZWNrIiwiYXJlQXJndW1lbnRzU2hhbGxvd2x5RXF1YWwiLCJlcXVhbGl0eUNoZWNrIiwicHJldiIsImdldERlcGVuZGVuY2llcyIsImZ1bmNzIiwiZGVwZW5kZW5jaWVzIiwiZXZlcnkiLCJkZXAiLCJkZXBlbmRlbmN5VHlwZXMiLCJjcmVhdGVTZWxlY3RvciIsIm1lbW9pemUiLCJtZW1vaXplT3B0aW9ucyIsInJlY29tcHV0YXRpb25zIiwicmVzdWx0RnVuYyIsInBvcCIsIm1lbW9pemVkUmVzdWx0RnVuYyIsInNlbGVjdG9yIiwicGFyYW1zIiwicmVzZXRSZWNvbXB1dGF0aW9ucyIsImNyZWF0ZVNlbGVjdG9yQ3JlYXRvciIsImZ1bmMiLCJsYXN0QXJncyIsImxhc3RSZXN1bHQiLCJmYWN0b3J5IiwiaXNGdW5jdGlvbiIsImxlbiIsInZlcnR4TmV4dCIsImN1c3RvbVNjaGVkdWxlckZuIiwiYXNhcCIsImNhbGxiYWNrIiwicXVldWUiLCJmbHVzaCIsInNjaGVkdWxlRmx1c2giLCJicm93c2VyV2luZG93IiwiYnJvd3Nlckdsb2JhbCIsIkJyb3dzZXJNdXRhdGlvbk9ic2VydmVyIiwiTXV0YXRpb25PYnNlcnZlciIsIldlYktpdE11dGF0aW9uT2JzZXJ2ZXIiLCJpc05vZGUiLCJzZWxmIiwicHJvY2VzcyIsImlzV29ya2VyIiwiVWludDhDbGFtcGVkQXJyYXkiLCJpbXBvcnRTY3JpcHRzIiwiTWVzc2FnZUNoYW5uZWwiLCJ1c2VTZXRUaW1lb3V0IiwiZ2xvYmFsU2V0VGltZW91dCIsInNldFRpbWVvdXQiLCJjaGFubmVsIiwiaXRlcmF0aW9ucyIsIm9ic2VydmVyIiwibm9kZSIsIm9uRnVsZmlsbG1lbnQiLCJvblJlamVjdGlvbiIsIl9hcmd1bWVudHMiLCJwYXJlbnQiLCJjaGlsZCIsIm5vb3AiLCJQUk9NSVNFX0lEIiwibWFrZVByb21pc2UiLCJfc3RhdGUiLCJpbnZva2VDYWxsYmFjayIsInN1YnNjcmliZSIsIl9yZXNvbHZlIiwibmV4dFRpY2siLCJkb2N1bWVudCIsImNyZWF0ZVRleHROb2RlIiwib2JzZXJ2ZSIsImNoYXJhY3RlckRhdGEiLCJkYXRhIiwicG9ydDEiLCJvbm1lc3NhZ2UiLCJwb3J0MiIsInBvc3RNZXNzYWdlIiwidmVydHgiLCJydW5Pbkxvb3AiLCJydW5PbkNvbnRleHQiLCJhdHRlbXB0VmVydHgiLCJzdWJzdHJpbmciLCJQRU5ESU5HIiwiR0VUX1RIRU5fRVJST1IiLCJFcnJvck9iamVjdCIsImdldFRoZW4iLCJoYW5kbGVNYXliZVRoZW5hYmxlIiwibWF5YmVUaGVuYWJsZSIsInRoZW4kJCIsInRoZW5hYmxlIiwiZnVsZmlsbCIsIl9yZWplY3QiLCJoYW5kbGVPd25UaGVuYWJsZSIsInNlYWxlZCIsImZ1bGZpbGxtZW50SGFuZGxlciIsInJlamVjdGlvbkhhbmRsZXIiLCJ0cnlUaGVuIiwiX2xhYmVsIiwiaGFuZGxlRm9yZWlnblRoZW5hYmxlIiwicHVibGlzaFJlamVjdGlvbiIsIl9vbmVycm9yIiwicHVibGlzaCIsIl9zdWJzY3JpYmVycyIsInN1YnNjcmliZXJzIiwic2V0dGxlZCIsImRldGFpbCIsIlRSWV9DQVRDSF9FUlJPUiIsImhhc0NhbGxiYWNrIiwic3VjY2VlZGVkIiwiZmFpbGVkIiwidHJ5Q2F0Y2giLCJFbnVtZXJhdG9yIiwiQ29uc3RydWN0b3IiLCJpbnB1dCIsIl9pbnN0YW5jZUNvbnN0cnVjdG9yIiwiX2lucHV0IiwiX3JlbWFpbmluZyIsIl9lbnVtZXJhdGUiLCJyZXNvbHZlciIsIm5lZWRzUmVzb2x2ZXIiLCJpbml0aWFsaXplUHJvbWlzZSIsIm5lZWRzTmV3IiwicG9seWZpbGwiLCJsb2NhbCIsImdsb2JhbCIsInByb21pc2VUb1N0cmluZyIsImNhc3QiLCJfZWFjaEVudHJ5IiwiZW50cnkiLCJyZXNvbHZlJCQiLCJfdGhlbiIsIl9zZXR0bGVkQXQiLCJfd2lsbFNldHRsZUF0IiwiZW51bWVyYXRvciIsImFsbCIsImVudHJpZXMiLCJfc2V0U2NoZWR1bGVyIiwic2NoZWR1bGVGbiIsIl9zZXRBc2FwIiwiYXNhcEZuIiwiX2FzYXAiLCJjYWNoZWRTZXRUaW1lb3V0IiwiY2FjaGVkQ2xlYXJUaW1lb3V0IiwiZGVmYXVsdFNldFRpbW91dCIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwiY2xlYXJUaW1lb3V0IiwiY3VycmVudFF1ZXVlIiwiZHJhaW5pbmciLCJxdWV1ZUluZGV4IiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5RdWV1ZSIsInRpbWVvdXQiLCJydW4iLCJtYXJrZXIiLCJydW5DbGVhclRpbWVvdXQiLCJJdGVtIiwiYXJyYXkiLCJ0aXRsZSIsImJyb3dzZXIiLCJlbnYiLCJhcmd2IiwidmVyc2lvbiIsInZlcnNpb25zIiwib24iLCJhZGRMaXN0ZW5lciIsIm9uY2UiLCJvZmYiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImVtaXQiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdGVuZXJzIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJyYW5kb21TdHJpbmciLCJzcGxpdCIsIkFjdGlvblR5cGVzIiwiSU5JVCIsIlJFUExBQ0UiLCJQUk9CRV9VTktOT1dOX0FDVElPTiIsIm9iaiIsImNyZWF0ZVN0b3JlIiwiZW5oYW5jZXIiLCJjdXJyZW50UmVkdWNlciIsImN1cnJlbnRTdGF0ZSIsImN1cnJlbnRMaXN0ZW5lcnMiLCJuZXh0TGlzdGVuZXJzIiwiaXNEaXNwYXRjaGluZyIsImVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMiLCJsaXN0ZW5lciIsImlzU3Vic2NyaWJlZCIsImluZGV4IiwicmVwbGFjZVJlZHVjZXIiLCJuZXh0UmVkdWNlciIsIm9ic2VydmFibGUiLCJvdXRlclN1YnNjcmliZSIsIm9ic2VydmVTdGF0ZSIsInVuc3Vic2NyaWJlIiwiZ2V0VW5kZWZpbmVkU3RhdGVFcnJvck1lc3NhZ2UiLCJhY3Rpb25UeXBlIiwiY29tYmluZVJlZHVjZXJzIiwicmVkdWNlcktleXMiLCJmaW5hbFJlZHVjZXJzIiwic2hhcGVBc3NlcnRpb25FcnJvciIsImZpbmFsUmVkdWNlcktleXMiLCJhc3NlcnRSZWR1Y2VyU2hhcGUiLCJoYXNDaGFuZ2VkIiwibmV4dFN0YXRlIiwicHJldmlvdXNTdGF0ZUZvcktleSIsIm5leHRTdGF0ZUZvcktleSIsImVycm9yTWVzc2FnZSIsImJpbmRBY3Rpb25DcmVhdG9yIiwiYmluZEFjdGlvbkNyZWF0b3JzIiwiYm91bmRBY3Rpb25DcmVhdG9ycyIsIl9kZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGVPbmx5Iiwic3ltIiwiX29iamVjdFNwcmVhZDIiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiY29tcG9zZSIsImFwcGx5TWlkZGxld2FyZSIsIm1pZGRsZXdhcmVzIiwic3RvcmUiLCJfZGlzcGF0Y2giLCJtaWRkbGV3YXJlQVBJIiwiY2hhaW4iLCJjcmVhdGVUaHVua01pZGRsZXdhcmUiLCJyb290IiwiYXBpIiwiY29uZmlnIiwic3ltYm9sT2JzZXJ2YWJsZVBvbnlmaWxsIiwiZmV0Y2hJZGVhcyIsInVzZXJJZCIsImNvbnNvbGUiLCJsb2ciLCJmZXRjaCIsInNpdGVJZCIsImpzb24iXSwibWFwcGluZ3MiOiI7c0NBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBMERmLE9BckRBRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZB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RzdCbUYsRUFBS3JELE1BTXBCLElBQUluQyxFQUFRMFgsSUFDWjFYLEVBQU1JLGtCQUFvQnNYLEVBRVgsTyxpQ0NuQmYsa0JBR0lDLEVBSEosUUFNRUEsRUFEa0Isb0JBQVQvTCxLQUNGQSxLQUNvQixvQkFBWGhOLE9BQ1RBLFlBQ29CLElBQVhrUyxFQUNUQSxFQUVBeGMsRUFLVCxJQUFJb1EsRUFBUyxZQUFTaVQsR0FDUCxRLDRLQ1BBLEVBTkssWUFBWSxDQUM5QjdpQixLQUFNLFNBQ05rTyxhQUptQixDQUFFNFUsSUFBSyxJQUsxQjNVLFNBQVUsS0FHc0IsUSxRQ0FuQixFQVBLLFlBQWdCLENBQ2xDNFUsT0FBUSxFQUNSaFAsTUFBTyxNQ0ZIeU8sRUFBUSxTQUFDcFcsR0FDYixPQUFPLFlBQWUsQ0FDcEJOLFFBQVMsRUFDVE0sZUFBYyxNLGdDQ1BILFNBQVM0VyxFQUF5QkgsR0FDaEQsSUFBSWpULEVBQ0FwUCxFQUFTcWlCLEVBQUtyaUIsT0FhbEIsTUFYc0IsbUJBQVhBLEVBQ05BLEVBQU9vZ0IsV0FDVmhSLEVBQVNwUCxFQUFPb2dCLFlBRWhCaFIsRUFBU3BQLEVBQU8sY0FDaEJBLEVBQU9vZ0IsV0FBYWhSLEdBR3JCQSxFQUFTLGVBR0hBLEVBZlIsbUMsazZDQ0dhcVQsRUFBYSxZQUN4QixvQkFDQSxTQUFPQyxFQUFRLEcsSUFBRTlRLEVBQVEsVyxrR0FHTixPQUZqQitRLFFBQVFDLElBQUkscUJBQ05oVSxFQUFRZ0QsSUFDRyxHQUFNaVIsTUFBVWpVLEVBQU0yVCxPQUFPRCxJQUFHLFNBQVkxVCxFQUFNMlQsT0FBT08sT0FBTSw4RCxPQUVoRixNQUFPLENBQVAsRUFGaUIsU0FFREMsb0IiLCJmaWxlIjoic3RvcmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gODIpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvcmlnaW5hbE1vZHVsZSkge1xuXHRpZiAoIW9yaWdpbmFsTW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdHZhciBtb2R1bGUgPSBPYmplY3QuY3JlYXRlKG9yaWdpbmFsTW9kdWxlKTtcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcblx0XHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJsb2FkZWRcIiwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBtb2R1bGUubDtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImlkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJleHBvcnRzXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWVcblx0XHR9KTtcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0fVxuXHRyZXR1cm4gbW9kdWxlO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnZXM2LXByb21pc2UnKS5Qcm9taXNlO1xuIiwiZnVuY3Rpb24gdCh0KXtmb3IodmFyIG49YXJndW1lbnRzLmxlbmd0aCxyPUFycmF5KG4+MT9uLTE6MCksZT0xO2U8bjtlKyspcltlLTFdPWFyZ3VtZW50c1tlXTtpZihcInByb2R1Y3Rpb25cIiE9PXByb2Nlc3MuZW52Lk5PREVfRU5WKXt2YXIgaT1ZW3RdLG89aT9cImZ1bmN0aW9uXCI9PXR5cGVvZiBpP2kuYXBwbHkobnVsbCxyKTppOlwidW5rbm93biBlcnJvciBucjogXCIrdDt0aHJvdyBFcnJvcihcIltJbW1lcl0gXCIrbyl9dGhyb3cgRXJyb3IoXCJbSW1tZXJdIG1pbmlmaWVkIGVycm9yIG5yOiBcIit0KyhyLmxlbmd0aD9cIiBcIityLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuXCInXCIrdCtcIidcIn0pKS5qb2luKFwiLFwiKTpcIlwiKStcIi4gRmluZCB0aGUgZnVsbCBlcnJvciBhdDogaHR0cHM6Ly9iaXQubHkvM2NYRUtXZlwiKX1mdW5jdGlvbiBuKHQpe3JldHVybiEhdCYmISF0W1FdfWZ1bmN0aW9uIHIodCl7cmV0dXJuISF0JiYoZnVuY3Rpb24odCl7aWYoIXR8fFwib2JqZWN0XCIhPXR5cGVvZiB0KXJldHVybiExO3ZhciBuPU9iamVjdC5nZXRQcm90b3R5cGVPZih0KTtyZXR1cm4hbnx8bj09PU9iamVjdC5wcm90b3R5cGV9KHQpfHxBcnJheS5pc0FycmF5KHQpfHwhIXRbTF18fCEhdC5jb25zdHJ1Y3RvcltMXXx8cyh0KXx8dih0KSl9ZnVuY3Rpb24gZShyKXtyZXR1cm4gbihyKXx8dCgyMyxyKSxyW1FdLnR9ZnVuY3Rpb24gaSh0LG4scil7dm9pZCAwPT09ciYmKHI9ITEpLDA9PT1vKHQpPyhyP09iamVjdC5rZXlzOlopKHQpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ImJlwic3ltYm9sXCI9PXR5cGVvZiBlfHxuKGUsdFtlXSx0KX0pKTp0LmZvckVhY2goKGZ1bmN0aW9uKHIsZSl7cmV0dXJuIG4oZSxyLHQpfSkpfWZ1bmN0aW9uIG8odCl7dmFyIG49dFtRXTtyZXR1cm4gbj9uLmk+Mz9uLmktNDpuLmk6QXJyYXkuaXNBcnJheSh0KT8xOnModCk/Mjp2KHQpPzM6MH1mdW5jdGlvbiB1KHQsbil7cmV0dXJuIDI9PT1vKHQpP3QuaGFzKG4pOk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pfWZ1bmN0aW9uIGEodCxuKXtyZXR1cm4gMj09PW8odCk/dC5nZXQobik6dFtuXX1mdW5jdGlvbiBmKHQsbixyKXt2YXIgZT1vKHQpOzI9PT1lP3Quc2V0KG4scik6Mz09PWU/KHQuZGVsZXRlKG4pLHQuYWRkKHIpKTp0W25dPXJ9ZnVuY3Rpb24gYyh0LG4pe3JldHVybiB0PT09bj8wIT09dHx8MS90PT0xL246dCE9dCYmbiE9bn1mdW5jdGlvbiBzKHQpe3JldHVybiBYJiZ0IGluc3RhbmNlb2YgTWFwfWZ1bmN0aW9uIHYodCl7cmV0dXJuIHEmJnQgaW5zdGFuY2VvZiBTZXR9ZnVuY3Rpb24gcCh0KXtyZXR1cm4gdC5vfHx0LnR9ZnVuY3Rpb24gbCh0KXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KTt2YXIgbj10dCh0KTtkZWxldGUgbltRXTtmb3IodmFyIHI9WihuKSxlPTA7ZTxyLmxlbmd0aDtlKyspe3ZhciBpPXJbZV0sbz1uW2ldOyExPT09by53cml0YWJsZSYmKG8ud3JpdGFibGU9ITAsby5jb25maWd1cmFibGU9ITApLChvLmdldHx8by5zZXQpJiYobltpXT17Y29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLGVudW1lcmFibGU6by5lbnVtZXJhYmxlLHZhbHVlOnRbaV19KX1yZXR1cm4gT2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YodCksbil9ZnVuY3Rpb24gZCh0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0hMSkseSh0KXx8bih0KXx8IXIodCk/dDoobyh0KT4xJiYodC5zZXQ9dC5hZGQ9dC5jbGVhcj10LmRlbGV0ZT1oKSxPYmplY3QuZnJlZXplKHQpLGUmJmkodCwoZnVuY3Rpb24odCxuKXtyZXR1cm4gZChuLCEwKX0pLCEwKSx0KX1mdW5jdGlvbiBoKCl7dCgyKX1mdW5jdGlvbiB5KHQpe3JldHVybiBudWxsPT10fHxcIm9iamVjdFwiIT10eXBlb2YgdHx8T2JqZWN0LmlzRnJvemVuKHQpfWZ1bmN0aW9uIGIobil7dmFyIHI9bnRbbl07cmV0dXJuIHJ8fHQoMTgsbikscn1mdW5jdGlvbiBtKHQsbil7bnRbdF18fChudFt0XT1uKX1mdW5jdGlvbiBfKCl7cmV0dXJuXCJwcm9kdWN0aW9uXCI9PT1wcm9jZXNzLmVudi5OT0RFX0VOVnx8VXx8dCgwKSxVfWZ1bmN0aW9uIGoodCxuKXtuJiYoYihcIlBhdGNoZXNcIiksdC51PVtdLHQucz1bXSx0LnY9bil9ZnVuY3Rpb24gZyh0KXt3KHQpLHQucC5mb3JFYWNoKFMpLHQucD1udWxsfWZ1bmN0aW9uIHcodCl7dD09PVUmJihVPXQubCl9ZnVuY3Rpb24gTyh0KXtyZXR1cm4gVT17cDpbXSxsOlUsaDp0LG06ITAsXzowfX1mdW5jdGlvbiBTKHQpe3ZhciBuPXRbUV07MD09PW4uaXx8MT09PW4uaT9uLmooKTpuLmc9ITB9ZnVuY3Rpb24gUChuLGUpe2UuXz1lLnAubGVuZ3RoO3ZhciBpPWUucFswXSxvPXZvaWQgMCE9PW4mJm4hPT1pO3JldHVybiBlLmguT3x8YihcIkVTNVwiKS5TKGUsbixvKSxvPyhpW1FdLlAmJihnKGUpLHQoNCkpLHIobikmJihuPU0oZSxuKSxlLmx8fHgoZSxuKSksZS51JiZiKFwiUGF0Y2hlc1wiKS5NKGlbUV0sbixlLnUsZS5zKSk6bj1NKGUsaSxbXSksZyhlKSxlLnUmJmUudihlLnUsZS5zKSxuIT09SD9uOnZvaWQgMH1mdW5jdGlvbiBNKHQsbixyKXtpZih5KG4pKXJldHVybiBuO3ZhciBlPW5bUV07aWYoIWUpcmV0dXJuIGkobiwoZnVuY3Rpb24oaSxvKXtyZXR1cm4gQSh0LGUsbixpLG8scil9KSwhMCksbjtpZihlLkEhPT10KXJldHVybiBuO2lmKCFlLlApcmV0dXJuIHgodCxlLnQsITApLGUudDtpZighZS5JKXtlLkk9ITAsZS5BLl8tLTt2YXIgbz00PT09ZS5pfHw1PT09ZS5pP2Uubz1sKGUuayk6ZS5vO2koMz09PWUuaT9uZXcgU2V0KG8pOm8sKGZ1bmN0aW9uKG4saSl7cmV0dXJuIEEodCxlLG8sbixpLHIpfSkpLHgodCxvLCExKSxyJiZ0LnUmJmIoXCJQYXRjaGVzXCIpLlIoZSxyLHQudSx0LnMpfXJldHVybiBlLm99ZnVuY3Rpb24gQShlLGksbyxhLGMscyl7aWYoXCJwcm9kdWN0aW9uXCIhPT1wcm9jZXNzLmVudi5OT0RFX0VOViYmYz09PW8mJnQoNSksbihjKSl7dmFyIHY9TShlLGMscyYmaSYmMyE9PWkuaSYmIXUoaS5ELGEpP3MuY29uY2F0KGEpOnZvaWQgMCk7aWYoZihvLGEsdiksIW4odikpcmV0dXJuO2UubT0hMX1pZihyKGMpJiYheShjKSl7aWYoIWUuaC5OJiZlLl88MSlyZXR1cm47TShlLGMpLGkmJmkuQS5sfHx4KGUsYyl9fWZ1bmN0aW9uIHgodCxuLHIpe3ZvaWQgMD09PXImJihyPSExKSx0LmguTiYmdC5tJiZkKG4scil9ZnVuY3Rpb24geih0LG4pe3ZhciByPXRbUV07cmV0dXJuKHI/cChyKTp0KVtuXX1mdW5jdGlvbiBJKHQsbil7aWYobiBpbiB0KWZvcih2YXIgcj1PYmplY3QuZ2V0UHJvdG90eXBlT2YodCk7cjspe3ZhciBlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocixuKTtpZihlKXJldHVybiBlO3I9T2JqZWN0LmdldFByb3RvdHlwZU9mKHIpfX1mdW5jdGlvbiBrKHQpe3QuUHx8KHQuUD0hMCx0LmwmJmsodC5sKSl9ZnVuY3Rpb24gRSh0KXt0Lm98fCh0Lm89bCh0LnQpKX1mdW5jdGlvbiBSKHQsbixyKXt2YXIgZT1zKG4pP2IoXCJNYXBTZXRcIikuVChuLHIpOnYobik/YihcIk1hcFNldFwiKS5GKG4scik6dC5PP2Z1bmN0aW9uKHQsbil7dmFyIHI9QXJyYXkuaXNBcnJheSh0KSxlPXtpOnI/MTowLEE6bj9uLkE6XygpLFA6ITEsSTohMSxEOnt9LGw6bix0OnQsazpudWxsLG86bnVsbCxqOm51bGwsQzohMX0saT1lLG89cnQ7ciYmKGk9W2VdLG89ZXQpO3ZhciB1PVByb3h5LnJldm9jYWJsZShpLG8pLGE9dS5yZXZva2UsZj11LnByb3h5O3JldHVybiBlLms9ZixlLmo9YSxmfShuLHIpOmIoXCJFUzVcIikuSihuLHIpO3JldHVybihyP3IuQTpfKCkpLnAucHVzaChlKSxlfWZ1bmN0aW9uIEQoZSl7cmV0dXJuIG4oZSl8fHQoMjIsZSksZnVuY3Rpb24gdChuKXtpZighcihuKSlyZXR1cm4gbjt2YXIgZSx1PW5bUV0sYz1vKG4pO2lmKHUpe2lmKCF1LlAmJih1Lmk8NHx8IWIoXCJFUzVcIikuSyh1KSkpcmV0dXJuIHUudDt1Lkk9ITAsZT1OKG4sYyksdS5JPSExfWVsc2UgZT1OKG4sYyk7cmV0dXJuIGkoZSwoZnVuY3Rpb24obixyKXt1JiZhKHUudCxuKT09PXJ8fGYoZSxuLHQocikpfSkpLDM9PT1jP25ldyBTZXQoZSk6ZX0oZSl9ZnVuY3Rpb24gTih0LG4pe3N3aXRjaChuKXtjYXNlIDI6cmV0dXJuIG5ldyBNYXAodCk7Y2FzZSAzOnJldHVybiBBcnJheS5mcm9tKHQpfXJldHVybiBsKHQpfWZ1bmN0aW9uIFQoKXtmdW5jdGlvbiByKHQsbil7dmFyIHI9c1t0XTtyZXR1cm4gcj9yLmVudW1lcmFibGU9bjpzW3RdPXI9e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOm4sZ2V0OmZ1bmN0aW9uKCl7dmFyIG49dGhpc1tRXTtyZXR1cm5cInByb2R1Y3Rpb25cIiE9PXByb2Nlc3MuZW52Lk5PREVfRU5WJiZmKG4pLHJ0LmdldChuLHQpfSxzZXQ6ZnVuY3Rpb24obil7dmFyIHI9dGhpc1tRXTtcInByb2R1Y3Rpb25cIiE9PXByb2Nlc3MuZW52Lk5PREVfRU5WJiZmKHIpLHJ0LnNldChyLHQsbil9fSxyfWZ1bmN0aW9uIGUodCl7Zm9yKHZhciBuPXQubGVuZ3RoLTE7bj49MDtuLS0pe3ZhciByPXRbbl1bUV07aWYoIXIuUClzd2l0Y2goci5pKXtjYXNlIDU6YShyKSYmayhyKTticmVhaztjYXNlIDQ6byhyKSYmayhyKX19fWZ1bmN0aW9uIG8odCl7Zm9yKHZhciBuPXQudCxyPXQuayxlPVoociksaT1lLmxlbmd0aC0xO2k+PTA7aS0tKXt2YXIgbz1lW2ldO2lmKG8hPT1RKXt2YXIgYT1uW29dO2lmKHZvaWQgMD09PWEmJiF1KG4sbykpcmV0dXJuITA7dmFyIGY9cltvXSxzPWYmJmZbUV07aWYocz9zLnQhPT1hOiFjKGYsYSkpcmV0dXJuITB9fXZhciB2PSEhbltRXTtyZXR1cm4gZS5sZW5ndGghPT1aKG4pLmxlbmd0aCsodj8wOjEpfWZ1bmN0aW9uIGEodCl7dmFyIG49dC5rO2lmKG4ubGVuZ3RoIT09dC50Lmxlbmd0aClyZXR1cm4hMDt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sbi5sZW5ndGgtMSk7cmV0dXJuISghcnx8ci5nZXQpfWZ1bmN0aW9uIGYobil7bi5nJiZ0KDMsSlNPTi5zdHJpbmdpZnkocChuKSkpfXZhciBzPXt9O20oXCJFUzVcIix7SjpmdW5jdGlvbih0LG4pe3ZhciBlPUFycmF5LmlzQXJyYXkodCksaT1mdW5jdGlvbih0LG4pe2lmKHQpe2Zvcih2YXIgZT1BcnJheShuLmxlbmd0aCksaT0wO2k8bi5sZW5ndGg7aSsrKU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiXCIraSxyKGksITApKTtyZXR1cm4gZX12YXIgbz10dChuKTtkZWxldGUgb1tRXTtmb3IodmFyIHU9WihvKSxhPTA7YTx1Lmxlbmd0aDthKyspe3ZhciBmPXVbYV07b1tmXT1yKGYsdHx8ISFvW2ZdLmVudW1lcmFibGUpfXJldHVybiBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihuKSxvKX0oZSx0KSxvPXtpOmU/NTo0LEE6bj9uLkE6XygpLFA6ITEsSTohMSxEOnt9LGw6bix0OnQsazppLG86bnVsbCxnOiExLEM6ITF9O3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxRLHt2YWx1ZTpvLHdyaXRhYmxlOiEwfSksaX0sUzpmdW5jdGlvbih0LHIsbyl7bz9uKHIpJiZyW1FdLkE9PT10JiZlKHQucCk6KHQudSYmZnVuY3Rpb24gdChuKXtpZihuJiZcIm9iamVjdFwiPT10eXBlb2Ygbil7dmFyIHI9bltRXTtpZihyKXt2YXIgZT1yLnQsbz1yLmssZj1yLkQsYz1yLmk7aWYoND09PWMpaShvLChmdW5jdGlvbihuKXtuIT09USYmKHZvaWQgMCE9PWVbbl18fHUoZSxuKT9mW25dfHx0KG9bbl0pOihmW25dPSEwLGsocikpKX0pKSxpKGUsKGZ1bmN0aW9uKHQpe3ZvaWQgMCE9PW9bdF18fHUobyx0KXx8KGZbdF09ITEsayhyKSl9KSk7ZWxzZSBpZig1PT09Yyl7aWYoYShyKSYmKGsociksZi5sZW5ndGg9ITApLG8ubGVuZ3RoPGUubGVuZ3RoKWZvcih2YXIgcz1vLmxlbmd0aDtzPGUubGVuZ3RoO3MrKylmW3NdPSExO2Vsc2UgZm9yKHZhciB2PWUubGVuZ3RoO3Y8by5sZW5ndGg7disrKWZbdl09ITA7Zm9yKHZhciBwPU1hdGgubWluKG8ubGVuZ3RoLGUubGVuZ3RoKSxsPTA7bDxwO2wrKyl2b2lkIDA9PT1mW2xdJiZ0KG9bbF0pfX19fSh0LnBbMF0pLGUodC5wKSl9LEs6ZnVuY3Rpb24odCl7cmV0dXJuIDQ9PT10Lmk/byh0KTphKHQpfX0pfWZ1bmN0aW9uIEYoKXtmdW5jdGlvbiBlKHQpe2lmKCFyKHQpKXJldHVybiB0O2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHQubWFwKGUpO2lmKHModCkpcmV0dXJuIG5ldyBNYXAoQXJyYXkuZnJvbSh0LmVudHJpZXMoKSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm5bdFswXSxlKHRbMV0pXX0pKSk7aWYodih0KSlyZXR1cm4gbmV3IFNldChBcnJheS5mcm9tKHQpLm1hcChlKSk7dmFyIG49T2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpO2Zvcih2YXIgaSBpbiB0KW5baV09ZSh0W2ldKTtyZXR1cm4gbn1mdW5jdGlvbiBmKHQpe3JldHVybiBuKHQpP2UodCk6dH12YXIgYz1cImFkZFwiO20oXCJQYXRjaGVzXCIseyQ6ZnVuY3Rpb24obixyKXtyZXR1cm4gci5mb3JFYWNoKChmdW5jdGlvbihyKXtmb3IodmFyIGk9ci5wYXRoLHU9ci5vcCxmPW4scz0wO3M8aS5sZW5ndGgtMTtzKyspe3ZhciB2PW8oZikscD1pW3NdOzAhPT12JiYxIT09dnx8XCJfX3Byb3RvX19cIiE9PXAmJlwiY29uc3RydWN0b3JcIiE9PXB8fHQoMjQpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGYmJlwicHJvdG90eXBlXCI9PT1wJiZ0KDI0KSxcIm9iamVjdFwiIT10eXBlb2YoZj1hKGYscCkpJiZ0KDE1LGkuam9pbihcIi9cIikpfXZhciBsPW8oZiksZD1lKHIudmFsdWUpLGg9aVtpLmxlbmd0aC0xXTtzd2l0Y2godSl7Y2FzZVwicmVwbGFjZVwiOnN3aXRjaChsKXtjYXNlIDI6cmV0dXJuIGYuc2V0KGgsZCk7Y2FzZSAzOnQoMTYpO2RlZmF1bHQ6cmV0dXJuIGZbaF09ZH1jYXNlIGM6c3dpdGNoKGwpe2Nhc2UgMTpyZXR1cm4gZi5zcGxpY2UoaCwwLGQpO2Nhc2UgMjpyZXR1cm4gZi5zZXQoaCxkKTtjYXNlIDM6cmV0dXJuIGYuYWRkKGQpO2RlZmF1bHQ6cmV0dXJuIGZbaF09ZH1jYXNlXCJyZW1vdmVcIjpzd2l0Y2gobCl7Y2FzZSAxOnJldHVybiBmLnNwbGljZShoLDEpO2Nhc2UgMjpyZXR1cm4gZi5kZWxldGUoaCk7Y2FzZSAzOnJldHVybiBmLmRlbGV0ZShyLnZhbHVlKTtkZWZhdWx0OnJldHVybiBkZWxldGUgZltoXX1kZWZhdWx0OnQoMTcsdSl9fSkpLG59LFI6ZnVuY3Rpb24odCxuLHIsZSl7c3dpdGNoKHQuaSl7Y2FzZSAwOmNhc2UgNDpjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHQsbixyLGUpe3ZhciBvPXQudCxzPXQubztpKHQuRCwoZnVuY3Rpb24odCxpKXt2YXIgdj1hKG8sdCkscD1hKHMsdCksbD1pP3Uobyx0KT9cInJlcGxhY2VcIjpjOlwicmVtb3ZlXCI7aWYodiE9PXB8fFwicmVwbGFjZVwiIT09bCl7dmFyIGQ9bi5jb25jYXQodCk7ci5wdXNoKFwicmVtb3ZlXCI9PT1sP3tvcDpsLHBhdGg6ZH06e29wOmwscGF0aDpkLHZhbHVlOnB9KSxlLnB1c2gobD09PWM/e29wOlwicmVtb3ZlXCIscGF0aDpkfTpcInJlbW92ZVwiPT09bD97b3A6YyxwYXRoOmQsdmFsdWU6Zih2KX06e29wOlwicmVwbGFjZVwiLHBhdGg6ZCx2YWx1ZTpmKHYpfSl9fSkpfSh0LG4scixlKTtjYXNlIDU6Y2FzZSAxOnJldHVybiBmdW5jdGlvbih0LG4scixlKXt2YXIgaT10LnQsbz10LkQsdT10Lm87aWYodS5sZW5ndGg8aS5sZW5ndGgpe3ZhciBhPVt1LGldO2k9YVswXSx1PWFbMV07dmFyIHM9W2Uscl07cj1zWzBdLGU9c1sxXX1mb3IodmFyIHY9MDt2PGkubGVuZ3RoO3YrKylpZihvW3ZdJiZ1W3ZdIT09aVt2XSl7dmFyIHA9bi5jb25jYXQoW3ZdKTtyLnB1c2goe29wOlwicmVwbGFjZVwiLHBhdGg6cCx2YWx1ZTpmKHVbdl0pfSksZS5wdXNoKHtvcDpcInJlcGxhY2VcIixwYXRoOnAsdmFsdWU6ZihpW3ZdKX0pfWZvcih2YXIgbD1pLmxlbmd0aDtsPHUubGVuZ3RoO2wrKyl7dmFyIGQ9bi5jb25jYXQoW2xdKTtyLnB1c2goe29wOmMscGF0aDpkLHZhbHVlOmYodVtsXSl9KX1pLmxlbmd0aDx1Lmxlbmd0aCYmZS5wdXNoKHtvcDpcInJlcGxhY2VcIixwYXRoOm4uY29uY2F0KFtcImxlbmd0aFwiXSksdmFsdWU6aS5sZW5ndGh9KX0odCxuLHIsZSk7Y2FzZSAzOnJldHVybiBmdW5jdGlvbih0LG4scixlKXt2YXIgaT10LnQsbz10Lm8sdT0wO2kuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYoIW8uaGFzKHQpKXt2YXIgaT1uLmNvbmNhdChbdV0pO3IucHVzaCh7b3A6XCJyZW1vdmVcIixwYXRoOmksdmFsdWU6dH0pLGUudW5zaGlmdCh7b3A6YyxwYXRoOmksdmFsdWU6dH0pfXUrK30pKSx1PTAsby5mb3JFYWNoKChmdW5jdGlvbih0KXtpZighaS5oYXModCkpe3ZhciBvPW4uY29uY2F0KFt1XSk7ci5wdXNoKHtvcDpjLHBhdGg6byx2YWx1ZTp0fSksZS51bnNoaWZ0KHtvcDpcInJlbW92ZVwiLHBhdGg6byx2YWx1ZTp0fSl9dSsrfSkpfSh0LG4scixlKX19LE06ZnVuY3Rpb24odCxuLHIsZSl7ci5wdXNoKHtvcDpcInJlcGxhY2VcIixwYXRoOltdLHZhbHVlOm59KSxlLnB1c2goe29wOlwicmVwbGFjZVwiLHBhdGg6W10sdmFsdWU6dC50fSl9fSl9ZnVuY3Rpb24gQygpe2Z1bmN0aW9uIG4odCxuKXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWEodCxuKSx0LnByb3RvdHlwZT0oci5wcm90b3R5cGU9bi5wcm90b3R5cGUsbmV3IHIpfWZ1bmN0aW9uIGUodCl7dC5vfHwodC5EPW5ldyBNYXAsdC5vPW5ldyBNYXAodC50KSl9ZnVuY3Rpb24gbyh0KXt0Lm98fCh0Lm89bmV3IFNldCx0LnQuZm9yRWFjaCgoZnVuY3Rpb24obil7aWYocihuKSl7dmFyIGU9Uih0LkEuaCxuLHQpO3QucC5zZXQobixlKSx0Lm8uYWRkKGUpfWVsc2UgdC5vLmFkZChuKX0pKSl9ZnVuY3Rpb24gdShuKXtuLmcmJnQoMyxKU09OLnN0cmluZ2lmeShwKG4pKSl9dmFyIGE9ZnVuY3Rpb24odCxuKXtyZXR1cm4oYT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxuKXt0Ll9fcHJvdG9fXz1ufXx8ZnVuY3Rpb24odCxuKXtmb3IodmFyIHIgaW4gbiluLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1uW3JdKX0pKHQsbil9LGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsbil7cmV0dXJuIHRoaXNbUV09e2k6MixsOm4sQTpuP24uQTpfKCksUDohMSxJOiExLG86dm9pZCAwLEQ6dm9pZCAwLHQ6dCxrOnRoaXMsQzohMSxnOiExfSx0aGlzfW4odCxNYXApO3ZhciBvPXQucHJvdG90eXBlO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkobyxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHAodGhpc1tRXSkuc2l6ZX19KSxvLmhhcz1mdW5jdGlvbih0KXtyZXR1cm4gcCh0aGlzW1FdKS5oYXModCl9LG8uc2V0PWZ1bmN0aW9uKHQsbil7dmFyIHI9dGhpc1tRXTtyZXR1cm4gdShyKSxwKHIpLmhhcyh0KSYmcChyKS5nZXQodCk9PT1ufHwoZShyKSxrKHIpLHIuRC5zZXQodCwhMCksci5vLnNldCh0LG4pLHIuRC5zZXQodCwhMCkpLHRoaXN9LG8uZGVsZXRlPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLmhhcyh0KSlyZXR1cm4hMTt2YXIgbj10aGlzW1FdO3JldHVybiB1KG4pLGUobiksayhuKSxuLkQuc2V0KHQsITEpLG4uby5kZWxldGUodCksITB9LG8uY2xlYXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzW1FdO3UodCkscCh0KS5zaXplJiYoZSh0KSxrKHQpLHQuRD1uZXcgTWFwLGkodC50LChmdW5jdGlvbihuKXt0LkQuc2V0KG4sITEpfSkpLHQuby5jbGVhcigpKX0sby5mb3JFYWNoPWZ1bmN0aW9uKHQsbil7dmFyIHI9dGhpcztwKHRoaXNbUV0pLmZvckVhY2goKGZ1bmN0aW9uKGUsaSl7dC5jYWxsKG4sci5nZXQoaSksaSxyKX0pKX0sby5nZXQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpc1tRXTt1KG4pO3ZhciBpPXAobikuZ2V0KHQpO2lmKG4uSXx8IXIoaSkpcmV0dXJuIGk7aWYoaSE9PW4udC5nZXQodCkpcmV0dXJuIGk7dmFyIG89UihuLkEuaCxpLG4pO3JldHVybiBlKG4pLG4uby5zZXQodCxvKSxvfSxvLmtleXM9ZnVuY3Rpb24oKXtyZXR1cm4gcCh0aGlzW1FdKS5rZXlzKCl9LG8udmFsdWVzPWZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLHI9dGhpcy5rZXlzKCk7cmV0dXJuKHQ9e30pW1ZdPWZ1bmN0aW9uKCl7cmV0dXJuIG4udmFsdWVzKCl9LHQubmV4dD1mdW5jdGlvbigpe3ZhciB0PXIubmV4dCgpO3JldHVybiB0LmRvbmU/dDp7ZG9uZTohMSx2YWx1ZTpuLmdldCh0LnZhbHVlKX19LHR9LG8uZW50cmllcz1mdW5jdGlvbigpe3ZhciB0LG49dGhpcyxyPXRoaXMua2V5cygpO3JldHVybih0PXt9KVtWXT1mdW5jdGlvbigpe3JldHVybiBuLmVudHJpZXMoKX0sdC5uZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9ci5uZXh0KCk7aWYodC5kb25lKXJldHVybiB0O3ZhciBlPW4uZ2V0KHQudmFsdWUpO3JldHVybntkb25lOiExLHZhbHVlOlt0LnZhbHVlLGVdfX0sdH0sb1tWXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVudHJpZXMoKX0sdH0oKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LG4pe3JldHVybiB0aGlzW1FdPXtpOjMsbDpuLEE6bj9uLkE6XygpLFA6ITEsSTohMSxvOnZvaWQgMCx0OnQsazp0aGlzLHA6bmV3IE1hcCxnOiExLEM6ITF9LHRoaXN9bih0LFNldCk7dmFyIHI9dC5wcm90b3R5cGU7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwic2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcCh0aGlzW1FdKS5zaXplfX0pLHIuaGFzPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXNbUV07cmV0dXJuIHUobiksbi5vPyEhbi5vLmhhcyh0KXx8ISghbi5wLmhhcyh0KXx8IW4uby5oYXMobi5wLmdldCh0KSkpOm4udC5oYXModCl9LHIuYWRkPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXNbUV07cmV0dXJuIHUobiksdGhpcy5oYXModCl8fChvKG4pLGsobiksbi5vLmFkZCh0KSksdGhpc30sci5kZWxldGU9ZnVuY3Rpb24odCl7aWYoIXRoaXMuaGFzKHQpKXJldHVybiExO3ZhciBuPXRoaXNbUV07cmV0dXJuIHUobiksbyhuKSxrKG4pLG4uby5kZWxldGUodCl8fCEhbi5wLmhhcyh0KSYmbi5vLmRlbGV0ZShuLnAuZ2V0KHQpKX0sci5jbGVhcj1mdW5jdGlvbigpe3ZhciB0PXRoaXNbUV07dSh0KSxwKHQpLnNpemUmJihvKHQpLGsodCksdC5vLmNsZWFyKCkpfSxyLnZhbHVlcz1mdW5jdGlvbigpe3ZhciB0PXRoaXNbUV07cmV0dXJuIHUodCksbyh0KSx0Lm8udmFsdWVzKCl9LHIuZW50cmllcz1mdW5jdGlvbigpe3ZhciB0PXRoaXNbUV07cmV0dXJuIHUodCksbyh0KSx0Lm8uZW50cmllcygpfSxyLmtleXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZXMoKX0scltWXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlcygpfSxyLmZvckVhY2g9ZnVuY3Rpb24odCxuKXtmb3IodmFyIHI9dGhpcy52YWx1ZXMoKSxlPXIubmV4dCgpOyFlLmRvbmU7KXQuY2FsbChuLGUudmFsdWUsZS52YWx1ZSx0aGlzKSxlPXIubmV4dCgpfSx0fSgpO20oXCJNYXBTZXRcIix7VDpmdW5jdGlvbih0LG4pe3JldHVybiBuZXcgZih0LG4pfSxGOmZ1bmN0aW9uKHQsbil7cmV0dXJuIG5ldyBjKHQsbil9fSl9ZnVuY3Rpb24gSigpe1QoKSxDKCksRigpfWZ1bmN0aW9uIEsodCl7cmV0dXJuIHR9ZnVuY3Rpb24gJCh0KXtyZXR1cm4gdH12YXIgRyxVLFc9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbChcInhcIiksWD1cInVuZGVmaW5lZFwiIT10eXBlb2YgTWFwLHE9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFNldCxCPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBQcm94eSYmdm9pZCAwIT09UHJveHkucmV2b2NhYmxlJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgUmVmbGVjdCxIPVc/U3ltYm9sLmZvcihcImltbWVyLW5vdGhpbmdcIik6KChHPXt9KVtcImltbWVyLW5vdGhpbmdcIl09ITAsRyksTD1XP1N5bWJvbC5mb3IoXCJpbW1lci1kcmFmdGFibGVcIik6XCJfXyRpbW1lcl9kcmFmdGFibGVcIixRPVc/U3ltYm9sLmZvcihcImltbWVyLXN0YXRlXCIpOlwiX18kaW1tZXJfc3RhdGVcIixWPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcnx8XCJAQGl0ZXJhdG9yXCIsWT17MDpcIklsbGVnYWwgc3RhdGVcIiwxOlwiSW1tZXIgZHJhZnRzIGNhbm5vdCBoYXZlIGNvbXB1dGVkIHByb3BlcnRpZXNcIiwyOlwiVGhpcyBvYmplY3QgaGFzIGJlZW4gZnJvemVuIGFuZCBzaG91bGQgbm90IGJlIG11dGF0ZWRcIiwzOmZ1bmN0aW9uKHQpe3JldHVyblwiQ2Fubm90IHVzZSBhIHByb3h5IHRoYXQgaGFzIGJlZW4gcmV2b2tlZC4gRGlkIHlvdSBwYXNzIGFuIG9iamVjdCBmcm9tIGluc2lkZSBhbiBpbW1lciBmdW5jdGlvbiB0byBhbiBhc3luYyBwcm9jZXNzPyBcIit0fSw0OlwiQW4gaW1tZXIgcHJvZHVjZXIgcmV0dXJuZWQgYSBuZXcgdmFsdWUgKmFuZCogbW9kaWZpZWQgaXRzIGRyYWZ0LiBFaXRoZXIgcmV0dXJuIGEgbmV3IHZhbHVlICpvciogbW9kaWZ5IHRoZSBkcmFmdC5cIiw1OlwiSW1tZXIgZm9yYmlkcyBjaXJjdWxhciByZWZlcmVuY2VzXCIsNjpcIlRoZSBmaXJzdCBvciBzZWNvbmQgYXJndW1lbnQgdG8gYHByb2R1Y2VgIG11c3QgYmUgYSBmdW5jdGlvblwiLDc6XCJUaGUgdGhpcmQgYXJndW1lbnQgdG8gYHByb2R1Y2VgIG11c3QgYmUgYSBmdW5jdGlvbiBvciB1bmRlZmluZWRcIiw4OlwiRmlyc3QgYXJndW1lbnQgdG8gYGNyZWF0ZURyYWZ0YCBtdXN0IGJlIGEgcGxhaW4gb2JqZWN0LCBhbiBhcnJheSwgb3IgYW4gaW1tZXJhYmxlIG9iamVjdFwiLDk6XCJGaXJzdCBhcmd1bWVudCB0byBgZmluaXNoRHJhZnRgIG11c3QgYmUgYSBkcmFmdCByZXR1cm5lZCBieSBgY3JlYXRlRHJhZnRgXCIsMTA6XCJUaGUgZ2l2ZW4gZHJhZnQgaXMgYWxyZWFkeSBmaW5hbGl6ZWRcIiwxMTpcIk9iamVjdC5kZWZpbmVQcm9wZXJ0eSgpIGNhbm5vdCBiZSB1c2VkIG9uIGFuIEltbWVyIGRyYWZ0XCIsMTI6XCJPYmplY3Quc2V0UHJvdG90eXBlT2YoKSBjYW5ub3QgYmUgdXNlZCBvbiBhbiBJbW1lciBkcmFmdFwiLDEzOlwiSW1tZXIgb25seSBzdXBwb3J0cyBkZWxldGluZyBhcnJheSBpbmRpY2VzXCIsMTQ6XCJJbW1lciBvbmx5IHN1cHBvcnRzIHNldHRpbmcgYXJyYXkgaW5kaWNlcyBhbmQgdGhlICdsZW5ndGgnIHByb3BlcnR5XCIsMTU6ZnVuY3Rpb24odCl7cmV0dXJuXCJDYW5ub3QgYXBwbHkgcGF0Y2gsIHBhdGggZG9lc24ndCByZXNvbHZlOiBcIit0fSwxNjonU2V0cyBjYW5ub3QgaGF2ZSBcInJlcGxhY2VcIiBwYXRjaGVzLicsMTc6ZnVuY3Rpb24odCl7cmV0dXJuXCJVbnN1cHBvcnRlZCBwYXRjaCBvcGVyYXRpb246IFwiK3R9LDE4OmZ1bmN0aW9uKHQpe3JldHVyblwiVGhlIHBsdWdpbiBmb3IgJ1wiK3QrXCInIGhhcyBub3QgYmVlbiBsb2FkZWQgaW50byBJbW1lci4gVG8gZW5hYmxlIHRoZSBwbHVnaW4sIGltcG9ydCBhbmQgY2FsbCBgZW5hYmxlXCIrdCtcIigpYCB3aGVuIGluaXRpYWxpemluZyB5b3VyIGFwcGxpY2F0aW9uLlwifSwyMDpcIkNhbm5vdCB1c2UgcHJveGllcyBpZiBQcm94eSwgUHJveHkucmV2b2NhYmxlIG9yIFJlZmxlY3QgYXJlIG5vdCBhdmFpbGFibGVcIiwyMTpmdW5jdGlvbih0KXtyZXR1cm5cInByb2R1Y2UgY2FuIG9ubHkgYmUgY2FsbGVkIG9uIHRoaW5ncyB0aGF0IGFyZSBkcmFmdGFibGU6IHBsYWluIG9iamVjdHMsIGFycmF5cywgTWFwLCBTZXQgb3IgY2xhc3NlcyB0aGF0IGFyZSBtYXJrZWQgd2l0aCAnW2ltbWVyYWJsZV06IHRydWUnLiBHb3QgJ1wiK3QrXCInXCJ9LDIyOmZ1bmN0aW9uKHQpe3JldHVyblwiJ2N1cnJlbnQnIGV4cGVjdHMgYSBkcmFmdCwgZ290OiBcIit0fSwyMzpmdW5jdGlvbih0KXtyZXR1cm5cIidvcmlnaW5hbCcgZXhwZWN0cyBhIGRyYWZ0LCBnb3Q6IFwiK3R9LDI0OlwiUGF0Y2hpbmcgcmVzZXJ2ZWQgYXR0cmlidXRlcyBsaWtlIF9fcHJvdG9fXywgcHJvdG90eXBlIGFuZCBjb25zdHJ1Y3RvciBpcyBub3QgYWxsb3dlZFwifSxaPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBSZWZsZWN0JiZSZWZsZWN0Lm93bktleXM/UmVmbGVjdC5vd25LZXlzOnZvaWQgMCE9PU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM/ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpKX06T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsdHQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnN8fGZ1bmN0aW9uKHQpe3ZhciBuPXt9O3JldHVybiBaKHQpLmZvckVhY2goKGZ1bmN0aW9uKHIpe25bcl09T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpfSkpLG59LG50PXt9LHJ0PXtnZXQ6ZnVuY3Rpb24odCxuKXtpZihuPT09USlyZXR1cm4gdDt2YXIgZT1wKHQpO2lmKCF1KGUsbikpcmV0dXJuIGZ1bmN0aW9uKHQsbixyKXt2YXIgZSxpPUkobixyKTtyZXR1cm4gaT9cInZhbHVlXCJpbiBpP2kudmFsdWU6bnVsbD09PShlPWkuZ2V0KXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jYWxsKHQuayk6dm9pZCAwfSh0LGUsbik7dmFyIGk9ZVtuXTtyZXR1cm4gdC5JfHwhcihpKT9pOmk9PT16KHQudCxuKT8oRSh0KSx0Lm9bbl09Uih0LkEuaCxpLHQpKTppfSxoYXM6ZnVuY3Rpb24odCxuKXtyZXR1cm4gbiBpbiBwKHQpfSxvd25LZXlzOmZ1bmN0aW9uKHQpe3JldHVybiBSZWZsZWN0Lm93bktleXMocCh0KSl9LHNldDpmdW5jdGlvbih0LG4scil7dmFyIGU9SShwKHQpLG4pO2lmKG51bGw9PWU/dm9pZCAwOmUuc2V0KXJldHVybiBlLnNldC5jYWxsKHQuayxyKSwhMDtpZighdC5QKXt2YXIgaT16KHAodCksbiksbz1udWxsPT1pP3ZvaWQgMDppW1FdO2lmKG8mJm8udD09PXIpcmV0dXJuIHQub1tuXT1yLHQuRFtuXT0hMSwhMDtpZihjKHIsaSkmJih2b2lkIDAhPT1yfHx1KHQudCxuKSkpcmV0dXJuITA7RSh0KSxrKHQpfXJldHVybiB0Lm9bbl09cix0LkRbbl09ITAsITB9LGRlbGV0ZVByb3BlcnR5OmZ1bmN0aW9uKHQsbil7cmV0dXJuIHZvaWQgMCE9PXoodC50LG4pfHxuIGluIHQudD8odC5EW25dPSExLEUodCksayh0KSk6ZGVsZXRlIHQuRFtuXSx0Lm8mJmRlbGV0ZSB0Lm9bbl0sITB9LGdldE93blByb3BlcnR5RGVzY3JpcHRvcjpmdW5jdGlvbih0LG4pe3ZhciByPXAodCksZT1SZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyLG4pO3JldHVybiBlP3t3cml0YWJsZTohMCxjb25maWd1cmFibGU6MSE9PXQuaXx8XCJsZW5ndGhcIiE9PW4sZW51bWVyYWJsZTplLmVudW1lcmFibGUsdmFsdWU6cltuXX06ZX0sZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24oKXt0KDExKX0sZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnQpfSxzZXRQcm90b3R5cGVPZjpmdW5jdGlvbigpe3QoMTIpfX0sZXQ9e307aShydCwoZnVuY3Rpb24odCxuKXtldFt0XT1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09YXJndW1lbnRzWzBdWzBdLG4uYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pKSxldC5kZWxldGVQcm9wZXJ0eT1mdW5jdGlvbihuLHIpe3JldHVyblwicHJvZHVjdGlvblwiIT09cHJvY2Vzcy5lbnYuTk9ERV9FTlYmJmlzTmFOKHBhcnNlSW50KHIpKSYmdCgxMykscnQuZGVsZXRlUHJvcGVydHkuY2FsbCh0aGlzLG5bMF0scil9LGV0LnNldD1mdW5jdGlvbihuLHIsZSl7cmV0dXJuXCJwcm9kdWN0aW9uXCIhPT1wcm9jZXNzLmVudi5OT0RFX0VOViYmXCJsZW5ndGhcIiE9PXImJmlzTmFOKHBhcnNlSW50KHIpKSYmdCgxNCkscnQuc2V0LmNhbGwodGhpcyxuWzBdLHIsZSxuWzBdKX07dmFyIGl0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt0aGlzLk89Qix0aGlzLk49ITAsXCJib29sZWFuXCI9PXR5cGVvZihudWxsPT10P3ZvaWQgMDp0LnVzZVByb3hpZXMpJiZ0aGlzLnNldFVzZVByb3hpZXModC51c2VQcm94aWVzKSxcImJvb2xlYW5cIj09dHlwZW9mKG51bGw9PXQ/dm9pZCAwOnQuYXV0b0ZyZWV6ZSkmJnRoaXMuc2V0QXV0b0ZyZWV6ZSh0LmF1dG9GcmVlemUpLHRoaXMucHJvZHVjZT10aGlzLnByb2R1Y2UuYmluZCh0aGlzKSx0aGlzLnByb2R1Y2VXaXRoUGF0Y2hlcz10aGlzLnByb2R1Y2VXaXRoUGF0Y2hlcy5iaW5kKHRoaXMpfXZhciBpPWUucHJvdG90eXBlO3JldHVybiBpLnByb2R1Y2U9ZnVuY3Rpb24obixlLGkpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4mJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpe3ZhciBvPWU7ZT1uO3ZhciB1PXRoaXM7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7dm9pZCAwPT09dCYmKHQ9byk7Zm9yKHZhciByPWFyZ3VtZW50cy5sZW5ndGgsaT1BcnJheShyPjE/ci0xOjApLGE9MTthPHI7YSsrKWlbYS0xXT1hcmd1bWVudHNbYV07cmV0dXJuIHUucHJvZHVjZSh0LChmdW5jdGlvbih0KXt2YXIgcjtyZXR1cm4ocj1lKS5jYWxsLmFwcGx5KHIsW24sdF0uY29uY2F0KGkpKX0pKX19dmFyIGE7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmdCg2KSx2b2lkIDAhPT1pJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBpJiZ0KDcpLHIobikpe3ZhciBmPU8odGhpcyksYz1SKHRoaXMsbix2b2lkIDApLHM9ITA7dHJ5e2E9ZShjKSxzPSExfWZpbmFsbHl7cz9nKGYpOncoZil9cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFByb21pc2UmJmEgaW5zdGFuY2VvZiBQcm9taXNlP2EudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIGooZixpKSxQKHQsZil9KSwoZnVuY3Rpb24odCl7dGhyb3cgZyhmKSx0fSkpOihqKGYsaSksUChhLGYpKX1pZighbnx8XCJvYmplY3RcIiE9dHlwZW9mIG4pe2lmKChhPWUobikpPT09SClyZXR1cm47cmV0dXJuIHZvaWQgMD09PWEmJihhPW4pLHRoaXMuTiYmZChhLCEwKSxhfXQoMjEsbil9LGkucHJvZHVjZVdpdGhQYXRjaGVzPWZ1bmN0aW9uKHQsbil7dmFyIHIsZSxpPXRoaXM7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdD9mdW5jdGlvbihuKXtmb3IodmFyIHI9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHI+MT9yLTE6MCksbz0xO288cjtvKyspZVtvLTFdPWFyZ3VtZW50c1tvXTtyZXR1cm4gaS5wcm9kdWNlV2l0aFBhdGNoZXMobiwoZnVuY3Rpb24obil7cmV0dXJuIHQuYXBwbHkodm9pZCAwLFtuXS5jb25jYXQoZSkpfSkpfTpbdGhpcy5wcm9kdWNlKHQsbiwoZnVuY3Rpb24odCxuKXtyPXQsZT1ufSkpLHIsZV19LGkuY3JlYXRlRHJhZnQ9ZnVuY3Rpb24oZSl7cihlKXx8dCg4KSxuKGUpJiYoZT1EKGUpKTt2YXIgaT1PKHRoaXMpLG89Uih0aGlzLGUsdm9pZCAwKTtyZXR1cm4gb1tRXS5DPSEwLHcoaSksb30saS5maW5pc2hEcmFmdD1mdW5jdGlvbihuLHIpe3ZhciBlPW4mJm5bUV07XCJwcm9kdWN0aW9uXCIhPT1wcm9jZXNzLmVudi5OT0RFX0VOViYmKGUmJmUuQ3x8dCg5KSxlLkkmJnQoMTApKTt2YXIgaT1lLkE7cmV0dXJuIGooaSxyKSxQKHZvaWQgMCxpKX0saS5zZXRBdXRvRnJlZXplPWZ1bmN0aW9uKHQpe3RoaXMuTj10fSxpLnNldFVzZVByb3hpZXM9ZnVuY3Rpb24obil7biYmIUImJnQoMjApLHRoaXMuTz1ufSxpLmFwcGx5UGF0Y2hlcz1mdW5jdGlvbih0LHIpe3ZhciBlO2ZvcihlPXIubGVuZ3RoLTE7ZT49MDtlLS0pe3ZhciBpPXJbZV07aWYoMD09PWkucGF0aC5sZW5ndGgmJlwicmVwbGFjZVwiPT09aS5vcCl7dD1pLnZhbHVlO2JyZWFrfX12YXIgbz1iKFwiUGF0Y2hlc1wiKS4kO3JldHVybiBuKHQpP28odCxyKTp0aGlzLnByb2R1Y2UodCwoZnVuY3Rpb24odCl7cmV0dXJuIG8odCxyLnNsaWNlKGUrMSkpfSkpfSxlfSgpLG90PW5ldyBpdCx1dD1vdC5wcm9kdWNlLGF0PW90LnByb2R1Y2VXaXRoUGF0Y2hlcy5iaW5kKG90KSxmdD1vdC5zZXRBdXRvRnJlZXplLmJpbmQob3QpLGN0PW90LnNldFVzZVByb3hpZXMuYmluZChvdCksc3Q9b3QuYXBwbHlQYXRjaGVzLmJpbmQob3QpLHZ0PW90LmNyZWF0ZURyYWZ0LmJpbmQob3QpLHB0PW90LmZpbmlzaERyYWZ0LmJpbmQob3QpO2V4cG9ydCBkZWZhdWx0IHV0O2V4cG9ydHtpdCBhcyBJbW1lcixzdCBhcyBhcHBseVBhdGNoZXMsSyBhcyBjYXN0RHJhZnQsJCBhcyBjYXN0SW1tdXRhYmxlLHZ0IGFzIGNyZWF0ZURyYWZ0LEQgYXMgY3VycmVudCxKIGFzIGVuYWJsZUFsbFBsdWdpbnMsVCBhcyBlbmFibGVFUzUsQyBhcyBlbmFibGVNYXBTZXQsRiBhcyBlbmFibGVQYXRjaGVzLHB0IGFzIGZpbmlzaERyYWZ0LGQgYXMgZnJlZXplLEwgYXMgaW1tZXJhYmxlLG4gYXMgaXNEcmFmdCxyIGFzIGlzRHJhZnRhYmxlLEggYXMgbm90aGluZyxlIGFzIG9yaWdpbmFsLHV0IGFzIHByb2R1Y2UsYXQgYXMgcHJvZHVjZVdpdGhQYXRjaGVzLGZ0IGFzIHNldEF1dG9GcmVlemUsY3QgYXMgc2V0VXNlUHJveGllc307XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbW1lci5lc20uanMubWFwXG4iLCJpbXBvcnQgY3JlYXRlTmV4dFN0YXRlLCB7IGlzRHJhZnQsIGN1cnJlbnQsIGlzRHJhZnRhYmxlLCBlbmFibGVFUzUgfSBmcm9tICdpbW1lcic7XG5leHBvcnQgeyBkZWZhdWx0IGFzIGNyZWF0ZU5leHRTdGF0ZSwgY3VycmVudCwgZnJlZXplIH0gZnJvbSAnaW1tZXInO1xuaW1wb3J0IHsgY29tcG9zZSwgY29tYmluZVJlZHVjZXJzLCBhcHBseU1pZGRsZXdhcmUsIGNyZWF0ZVN0b3JlIH0gZnJvbSAncmVkdXgnO1xuZXhwb3J0ICogZnJvbSAncmVkdXgnO1xuaW1wb3J0IHsgY3JlYXRlU2VsZWN0b3IgfSBmcm9tICdyZXNlbGVjdCc7XG5leHBvcnQgeyBjcmVhdGVTZWxlY3RvciB9IGZyb20gJ3Jlc2VsZWN0JztcbmltcG9ydCB0aHVua01pZGRsZXdhcmUgZnJvbSAncmVkdXgtdGh1bmsnO1xuXG4vKipcclxuICogXCJEcmFmdC1TYWZlXCIgdmVyc2lvbiBvZiBgcmVzZWxlY3RgJ3MgYGNyZWF0ZVNlbGVjdG9yYDpcclxuICogSWYgYW4gYGltbWVyYC1kcmFmdGVkIG9iamVjdCBpcyBwYXNzZWQgaW50byB0aGUgcmVzdWx0aW5nIHNlbGVjdG9yJ3MgZmlyc3QgYXJndW1lbnQsXHJcbiAqIHRoZSBzZWxlY3RvciB3aWxsIGFjdCBvbiB0aGUgY3VycmVudCBkcmFmdCB2YWx1ZSwgaW5zdGVhZCBvZiByZXR1cm5pbmcgYSBjYWNoZWQgdmFsdWVcclxuICogdGhhdCBtaWdodCBiZSBwb3NzaWJseSBvdXRkYXRlZCBpZiB0aGUgZHJhZnQgaGFzIGJlZW4gbW9kaWZpZWQgc2luY2UuXHJcbiAqIEBwdWJsaWNcclxuICovXG5cbnZhciBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvciA9IGZ1bmN0aW9uIGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yKCkge1xuICB2YXIgc2VsZWN0b3IgPSBjcmVhdGVTZWxlY3Rvci5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7XG5cbiAgdmFyIHdyYXBwZWRTZWxlY3RvciA9IGZ1bmN0aW9uIHdyYXBwZWRTZWxlY3Rvcih2YWx1ZSkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCByZXN0ID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIHJlc3RbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxlY3Rvci5hcHBseSh2b2lkIDAsIFtpc0RyYWZ0KHZhbHVlKSA/IGN1cnJlbnQodmFsdWUpIDogdmFsdWVdLmNvbmNhdChyZXN0KSk7XG4gIH07XG5cbiAgcmV0dXJuIHdyYXBwZWRTZWxlY3Rvcjtcbn07XG5cbmZ1bmN0aW9uIF9leHRlbmRzKCkge1xuICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG5cbiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO1xuICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcbiAgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbn1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO1xuICB9O1xuICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pO1xufVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgICBvLl9fcHJvdG9fXyA9IHA7XG4gICAgcmV0dXJuIG87XG4gIH07XG5cbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTtcbn1cblxuZnVuY3Rpb24gaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7XG4gIGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7XG4gIGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7XG5cbiAgdHJ5IHtcbiAgICBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFJlZmxlY3QuY29uc3RydWN0KERhdGUsIFtdLCBmdW5jdGlvbiAoKSB7fSkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICBpZiAoaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkpIHtcbiAgICBfY29uc3RydWN0ID0gUmVmbGVjdC5jb25zdHJ1Y3Q7XG4gIH0gZWxzZSB7XG4gICAgX2NvbnN0cnVjdCA9IGZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICAgICAgdmFyIGEgPSBbbnVsbF07XG4gICAgICBhLnB1c2guYXBwbHkoYSwgYXJncyk7XG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSBGdW5jdGlvbi5iaW5kLmFwcGx5KFBhcmVudCwgYSk7XG4gICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgQ29uc3RydWN0b3IoKTtcbiAgICAgIGlmIChDbGFzcykgX3NldFByb3RvdHlwZU9mKGluc3RhbmNlLCBDbGFzcy5wcm90b3R5cGUpO1xuICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gX2NvbnN0cnVjdC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVGdW5jdGlvbihmbikge1xuICByZXR1cm4gRnVuY3Rpb24udG9TdHJpbmcuY2FsbChmbikuaW5kZXhPZihcIltuYXRpdmUgY29kZV1cIikgIT09IC0xO1xufVxuXG5mdW5jdGlvbiBfd3JhcE5hdGl2ZVN1cGVyKENsYXNzKSB7XG4gIHZhciBfY2FjaGUgPSB0eXBlb2YgTWFwID09PSBcImZ1bmN0aW9uXCIgPyBuZXcgTWFwKCkgOiB1bmRlZmluZWQ7XG5cbiAgX3dyYXBOYXRpdmVTdXBlciA9IGZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpIHtcbiAgICBpZiAoQ2xhc3MgPT09IG51bGwgfHwgIV9pc05hdGl2ZUZ1bmN0aW9uKENsYXNzKSkgcmV0dXJuIENsYXNzO1xuXG4gICAgaWYgKHR5cGVvZiBDbGFzcyAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBfY2FjaGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGlmIChfY2FjaGUuaGFzKENsYXNzKSkgcmV0dXJuIF9jYWNoZS5nZXQoQ2xhc3MpO1xuXG4gICAgICBfY2FjaGUuc2V0KENsYXNzLCBXcmFwcGVyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBXcmFwcGVyKCkge1xuICAgICAgcmV0dXJuIF9jb25zdHJ1Y3QoQ2xhc3MsIGFyZ3VtZW50cywgX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yKTtcbiAgICB9XG5cbiAgICBXcmFwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogV3JhcHBlcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gX3NldFByb3RvdHlwZU9mKFdyYXBwZXIsIENsYXNzKTtcbiAgfTtcblxuICByZXR1cm4gX3dyYXBOYXRpdmVTdXBlcihDbGFzcyk7XG59XG5cbi8qKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG52YXIgY29tcG9zZVdpdGhEZXZUb29scyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9DT01QT1NFX18gPyB3aW5kb3cuX19SRURVWF9ERVZUT09MU19FWFRFTlNJT05fQ09NUE9TRV9fIDogZnVuY3Rpb24gKCkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdvYmplY3QnKSByZXR1cm4gY29tcG9zZTtcbiAgcmV0dXJuIGNvbXBvc2UuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbn07XG5cbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHBhc3NlZCB2YWx1ZSBpcyBcInBsYWluXCIgb2JqZWN0LCBpLmUuIGFuIG9iamVjdCB3aG9zZVxyXG4gKiBwcm90b3lwZSBpcyB0aGUgcm9vdCBgT2JqZWN0LnByb3RvdHlwZWAuIFRoaXMgaW5jbHVkZXMgb2JqZWN0cyBjcmVhdGVkXHJcbiAqIHVzaW5nIG9iamVjdCBsaXRlcmFscywgYnV0IG5vdCBmb3IgaW5zdGFuY2UgZm9yIGNsYXNzIGluc3RhbmNlcy5cclxuICpcclxuICogQHBhcmFtIHthbnl9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgYXJndW1lbnQgYXBwZWFycyB0byBiZSBhIHBsYWluIG9iamVjdC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcgfHwgdmFsdWUgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgdmFyIHByb3RvID0gdmFsdWU7XG5cbiAgd2hpbGUgKE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90bykgIT09IG51bGwpIHtcbiAgICBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90byk7XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKSA9PT0gcHJvdG87XG59XG5cbmZ1bmN0aW9uIGdldFRpbWVNZWFzdXJlVXRpbHMobWF4RGVsYXksIGZuTmFtZSkge1xuICB2YXIgZWxhcHNlZCA9IDA7XG4gIHJldHVybiB7XG4gICAgbWVhc3VyZVRpbWU6IGZ1bmN0aW9uIG1lYXN1cmVUaW1lKGZuKSB7XG4gICAgICB2YXIgc3RhcnRlZCA9IERhdGUubm93KCk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdmFyIGZpbmlzaGVkID0gRGF0ZS5ub3coKTtcbiAgICAgICAgZWxhcHNlZCArPSBmaW5pc2hlZCAtIHN0YXJ0ZWQ7XG4gICAgICB9XG4gICAgfSxcbiAgICB3YXJuSWZFeGNlZWRlZDogZnVuY3Rpb24gd2FybklmRXhjZWVkZWQoKSB7XG4gICAgICBpZiAoZWxhcHNlZCA+IG1heERlbGF5KSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihmbk5hbWUgKyBcIiB0b29rIFwiICsgZWxhcHNlZCArIFwibXMsIHdoaWNoIGlzIG1vcmUgdGhhbiB0aGUgd2FybmluZyB0aHJlc2hvbGQgb2YgXCIgKyBtYXhEZWxheSArIFwibXMuIFxcbklmIHlvdXIgc3RhdGUgb3IgYWN0aW9ucyBhcmUgdmVyeSBsYXJnZSwgeW91IG1heSB3YW50IHRvIGRpc2FibGUgdGhlIG1pZGRsZXdhcmUgYXMgaXQgbWlnaHQgY2F1c2UgdG9vIG11Y2ggb2YgYSBzbG93ZG93biBpbiBkZXZlbG9wbWVudCBtb2RlLiBTZWUgaHR0cHM6Ly9yZWR1eC10b29sa2l0LmpzLm9yZy9hcGkvZ2V0RGVmYXVsdE1pZGRsZXdhcmUgZm9yIGluc3RydWN0aW9ucy5cXG5JdCBpcyBkaXNhYmxlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcywgc28geW91IGRvbid0IG5lZWQgdG8gd29ycnkgYWJvdXQgdGhhdC5cIik7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cbnZhciBNaWRkbGV3YXJlQXJyYXkgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9BcnJheSkge1xuICBfaW5oZXJpdHNMb29zZShNaWRkbGV3YXJlQXJyYXksIF9BcnJheSk7XG5cbiAgZnVuY3Rpb24gTWlkZGxld2FyZUFycmF5KCkge1xuICAgIHJldHVybiBfQXJyYXkuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IE1pZGRsZXdhcmVBcnJheS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCgpIHtcbiAgICB2YXIgX0FycmF5JHByb3RvdHlwZSRjb25jO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyciA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFycltfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX2NvbnN0cnVjdChNaWRkbGV3YXJlQXJyYXksIChfQXJyYXkkcHJvdG90eXBlJGNvbmMgPSBfQXJyYXkucHJvdG90eXBlLmNvbmNhdCkuY2FsbC5hcHBseShfQXJyYXkkcHJvdG90eXBlJGNvbmMsIFt0aGlzXS5jb25jYXQoYXJyKSkpO1xuICB9O1xuXG4gIF9wcm90by5wcmVwZW5kID0gZnVuY3Rpb24gcHJlcGVuZCgpIHtcbiAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyciA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgYXJyW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgfVxuXG4gICAgaWYgKGFyci5sZW5ndGggPT09IDEgJiYgQXJyYXkuaXNBcnJheShhcnJbMF0pKSB7XG4gICAgICByZXR1cm4gX2NvbnN0cnVjdChNaWRkbGV3YXJlQXJyYXksIGFyclswXS5jb25jYXQodGhpcykpO1xuICAgIH1cblxuICAgIHJldHVybiBfY29uc3RydWN0KE1pZGRsZXdhcmVBcnJheSwgYXJyLmNvbmNhdCh0aGlzKSk7XG4gIH07XG5cbiAgcmV0dXJuIE1pZGRsZXdhcmVBcnJheTtcbn0oXG4vKiNfX1BVUkVfXyovXG5fd3JhcE5hdGl2ZVN1cGVyKEFycmF5KSk7XG5cbnZhciBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nO1xudmFyIHByZWZpeCA9ICdJbnZhcmlhbnQgZmFpbGVkJzsgLy8gVGhyb3cgYW4gZXJyb3IgaWYgdGhlIGNvbmRpdGlvbiBmYWlsc1xuLy8gU3RyaXAgb3V0IGVycm9yIG1lc3NhZ2VzIGZvciBwcm9kdWN0aW9uXG4vLyA+IE5vdCBwcm92aWRpbmcgYW4gaW5saW5lIGRlZmF1bHQgYXJndW1lbnQgZm9yIG1lc3NhZ2UgYXMgdGhlIHJlc3VsdCBpcyBzbWFsbGVyXG5cbmZ1bmN0aW9uIGludmFyaWFudChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgaWYgKGNvbmRpdGlvbikge1xuICAgIHJldHVybjtcbiAgfSAvLyBDb25kaXRpb24gbm90IHBhc3NlZFxuICAvLyBJbiBwcm9kdWN0aW9uIHdlIHN0cmlwIHRoZSBtZXNzYWdlIGJ1dCBzdGlsbCB0aHJvd1xuXG5cbiAgaWYgKGlzUHJvZHVjdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihwcmVmaXgpO1xuICB9IC8vIFdoZW4gbm90IGluIHByb2R1Y3Rpb24gd2UgYWxsb3cgdGhlIG1lc3NhZ2UgdG8gcGFzcyB0aHJvdWdoXG4gIC8vICpUaGlzIGJsb2NrIHdpbGwgYmUgcmVtb3ZlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcypcblxuXG4gIHRocm93IG5ldyBFcnJvcihwcmVmaXggKyBcIjogXCIgKyAobWVzc2FnZSB8fCAnJykpO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnkob2JqLCBzZXJpYWxpemVyLCBpbmRlbnQsIGRlY3ljbGVyKSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmosIGdldFNlcmlhbGl6ZShzZXJpYWxpemVyLCBkZWN5Y2xlciksIGluZGVudCk7XG59XG5cbmZ1bmN0aW9uIGdldFNlcmlhbGl6ZShzZXJpYWxpemVyLCBkZWN5Y2xlcikge1xuICB2YXIgc3RhY2sgPSBbXSxcbiAgICAgIGtleXMgPSBbXTtcbiAgaWYgKCFkZWN5Y2xlcikgZGVjeWNsZXIgPSBmdW5jdGlvbiBkZWN5Y2xlcihfLCB2YWx1ZSkge1xuICAgIGlmIChzdGFja1swXSA9PT0gdmFsdWUpIHJldHVybiAnW0NpcmN1bGFyIH5dJztcbiAgICByZXR1cm4gJ1tDaXJjdWxhciB+LicgKyBrZXlzLnNsaWNlKDAsIHN0YWNrLmluZGV4T2YodmFsdWUpKS5qb2luKCcuJykgKyAnXSc7XG4gIH07XG4gIHJldHVybiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgIGlmIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgdGhpc1BvcyA9IHN0YWNrLmluZGV4T2YodGhpcyk7XG4gICAgICB+dGhpc1BvcyA/IHN0YWNrLnNwbGljZSh0aGlzUG9zICsgMSkgOiBzdGFjay5wdXNoKHRoaXMpO1xuICAgICAgfnRoaXNQb3MgPyBrZXlzLnNwbGljZSh0aGlzUG9zLCBJbmZpbml0eSwga2V5KSA6IGtleXMucHVzaChrZXkpO1xuICAgICAgaWYgKH5zdGFjay5pbmRleE9mKHZhbHVlKSkgdmFsdWUgPSBkZWN5Y2xlci5jYWxsKHRoaXMsIGtleSwgdmFsdWUpO1xuICAgIH0gZWxzZSBzdGFjay5wdXNoKHZhbHVlKTtcblxuICAgIHJldHVybiBzZXJpYWxpemVyID09IG51bGwgPyB2YWx1ZSA6IHNlcmlhbGl6ZXIuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTtcbiAgfTtcbn1cbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBgaXNJbW11dGFibGVgIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG5cbmZ1bmN0aW9uIGlzSW1tdXRhYmxlRGVmYXVsdCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnO1xufVxuZnVuY3Rpb24gdHJhY2tGb3JNdXRhdGlvbnMoaXNJbW11dGFibGUsIGlnbm9yZVBhdGhzLCBvYmopIHtcbiAgdmFyIHRyYWNrZWRQcm9wZXJ0aWVzID0gdHJhY2tQcm9wZXJ0aWVzKGlzSW1tdXRhYmxlLCBpZ25vcmVQYXRocywgb2JqKTtcbiAgcmV0dXJuIHtcbiAgICBkZXRlY3RNdXRhdGlvbnM6IGZ1bmN0aW9uIGRldGVjdE11dGF0aW9ucygpIHtcbiAgICAgIHJldHVybiBfZGV0ZWN0TXV0YXRpb25zKGlzSW1tdXRhYmxlLCBpZ25vcmVQYXRocywgdHJhY2tlZFByb3BlcnRpZXMsIG9iaik7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiB0cmFja1Byb3BlcnRpZXMoaXNJbW11dGFibGUsIGlnbm9yZVBhdGhzLCBvYmosIHBhdGgpIHtcbiAgaWYgKGlnbm9yZVBhdGhzID09PSB2b2lkIDApIHtcbiAgICBpZ25vcmVQYXRocyA9IFtdO1xuICB9XG5cbiAgaWYgKHBhdGggPT09IHZvaWQgMCkge1xuICAgIHBhdGggPSBbXTtcbiAgfVxuXG4gIHZhciB0cmFja2VkID0ge1xuICAgIHZhbHVlOiBvYmpcbiAgfTtcblxuICBpZiAoIWlzSW1tdXRhYmxlKG9iaikpIHtcbiAgICB0cmFja2VkLmNoaWxkcmVuID0ge307XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICB2YXIgY2hpbGRQYXRoID0gcGF0aC5jb25jYXQoa2V5KTtcblxuICAgICAgaWYgKGlnbm9yZVBhdGhzLmxlbmd0aCAmJiBpZ25vcmVQYXRocy5pbmRleE9mKGNoaWxkUGF0aC5qb2luKCcuJykpICE9PSAtMSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdHJhY2tlZC5jaGlsZHJlbltrZXldID0gdHJhY2tQcm9wZXJ0aWVzKGlzSW1tdXRhYmxlLCBpZ25vcmVQYXRocywgb2JqW2tleV0sIGNoaWxkUGF0aCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRyYWNrZWQ7XG59XG5cbmZ1bmN0aW9uIF9kZXRlY3RNdXRhdGlvbnMoaXNJbW11dGFibGUsIGlnbm9yZVBhdGhzLCB0cmFja2VkUHJvcGVydHksIG9iaiwgc2FtZVBhcmVudFJlZiwgcGF0aCkge1xuICBpZiAoaWdub3JlUGF0aHMgPT09IHZvaWQgMCkge1xuICAgIGlnbm9yZVBhdGhzID0gW107XG4gIH1cblxuICBpZiAoc2FtZVBhcmVudFJlZiA9PT0gdm9pZCAwKSB7XG4gICAgc2FtZVBhcmVudFJlZiA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKHBhdGggPT09IHZvaWQgMCkge1xuICAgIHBhdGggPSBbXTtcbiAgfVxuXG4gIHZhciBwcmV2T2JqID0gdHJhY2tlZFByb3BlcnR5ID8gdHJhY2tlZFByb3BlcnR5LnZhbHVlIDogdW5kZWZpbmVkO1xuICB2YXIgc2FtZVJlZiA9IHByZXZPYmogPT09IG9iajtcblxuICBpZiAoc2FtZVBhcmVudFJlZiAmJiAhc2FtZVJlZiAmJiAhTnVtYmVyLmlzTmFOKG9iaikpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd2FzTXV0YXRlZDogdHJ1ZSxcbiAgICAgIHBhdGg6IHBhdGhcbiAgICB9O1xuICB9XG5cbiAgaWYgKGlzSW1tdXRhYmxlKHByZXZPYmopIHx8IGlzSW1tdXRhYmxlKG9iaikpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd2FzTXV0YXRlZDogZmFsc2VcbiAgICB9O1xuICB9IC8vIEdhdGhlciBhbGwga2V5cyBmcm9tIHByZXYgKHRyYWNrZWQpIGFuZCBhZnRlciBvYmpzXG5cblxuICB2YXIga2V5c1RvRGV0ZWN0ID0ge307XG4gIE9iamVjdC5rZXlzKHRyYWNrZWRQcm9wZXJ0eS5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAga2V5c1RvRGV0ZWN0W2tleV0gPSB0cnVlO1xuICB9KTtcbiAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBrZXlzVG9EZXRlY3Rba2V5XSA9IHRydWU7XG4gIH0pO1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGtleXNUb0RldGVjdCk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgdmFyIGNoaWxkUGF0aCA9IHBhdGguY29uY2F0KGtleSk7XG5cbiAgICBpZiAoaWdub3JlUGF0aHMubGVuZ3RoICYmIGlnbm9yZVBhdGhzLmluZGV4T2YoY2hpbGRQYXRoLmpvaW4oJy4nKSkgIT09IC0xKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICB2YXIgcmVzdWx0ID0gX2RldGVjdE11dGF0aW9ucyhpc0ltbXV0YWJsZSwgaWdub3JlUGF0aHMsIHRyYWNrZWRQcm9wZXJ0eS5jaGlsZHJlbltrZXldLCBvYmpba2V5XSwgc2FtZVJlZiwgY2hpbGRQYXRoKTtcblxuICAgIGlmIChyZXN1bHQud2FzTXV0YXRlZCkge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHdhc011dGF0ZWQ6IGZhbHNlXG4gIH07XG59XG4vKipcclxuICogQ3JlYXRlcyBhIG1pZGRsZXdhcmUgdGhhdCBjaGVja3Mgd2hldGhlciBhbnkgc3RhdGUgd2FzIG11dGF0ZWQgaW4gYmV0d2VlblxyXG4gKiBkaXNwYXRjaGVzIG9yIGR1cmluZyBhIGRpc3BhdGNoLiBJZiBhbnkgbXV0YXRpb25zIGFyZSBkZXRlY3RlZCwgYW4gZXJyb3IgaXNcclxuICogdGhyb3duLlxyXG4gKlxyXG4gKiBAcGFyYW0gb3B0aW9ucyBNaWRkbGV3YXJlIG9wdGlvbnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cblxuZnVuY3Rpb24gY3JlYXRlSW1tdXRhYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAobmV4dCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgIHJldHVybiBuZXh0KGFjdGlvbik7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH07XG4gIH1cblxuICB2YXIgX29wdGlvbnMgPSBvcHRpb25zLFxuICAgICAgX29wdGlvbnMkaXNJbW11dGFibGUgPSBfb3B0aW9ucy5pc0ltbXV0YWJsZSxcbiAgICAgIGlzSW1tdXRhYmxlID0gX29wdGlvbnMkaXNJbW11dGFibGUgPT09IHZvaWQgMCA/IGlzSW1tdXRhYmxlRGVmYXVsdCA6IF9vcHRpb25zJGlzSW1tdXRhYmxlLFxuICAgICAgaWdub3JlZFBhdGhzID0gX29wdGlvbnMuaWdub3JlZFBhdGhzLFxuICAgICAgX29wdGlvbnMkd2FybkFmdGVyID0gX29wdGlvbnMud2FybkFmdGVyLFxuICAgICAgd2FybkFmdGVyID0gX29wdGlvbnMkd2FybkFmdGVyID09PSB2b2lkIDAgPyAzMiA6IF9vcHRpb25zJHdhcm5BZnRlcixcbiAgICAgIGlnbm9yZSA9IF9vcHRpb25zLmlnbm9yZTsgLy8gQWxpYXMgaWdub3JlLT5pZ25vcmVkUGF0aHMsIGJ1dCBwcmVmZXIgaWdub3JlZFBhdGhzIGlmIHByZXNlbnRcblxuICBpZ25vcmVkUGF0aHMgPSBpZ25vcmVkUGF0aHMgfHwgaWdub3JlO1xuICB2YXIgdHJhY2sgPSB0cmFja0Zvck11dGF0aW9ucy5iaW5kKG51bGwsIGlzSW1tdXRhYmxlLCBpZ25vcmVkUGF0aHMpO1xuICByZXR1cm4gZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgZ2V0U3RhdGUgPSBfcmVmLmdldFN0YXRlO1xuICAgIHZhciBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgdmFyIHRyYWNrZXIgPSB0cmFjayhzdGF0ZSk7XG4gICAgdmFyIHJlc3VsdDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5leHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHZhciBtZWFzdXJlVXRpbHMgPSBnZXRUaW1lTWVhc3VyZVV0aWxzKHdhcm5BZnRlciwgJ0ltbXV0YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZScpO1xuICAgICAgICBtZWFzdXJlVXRpbHMubWVhc3VyZVRpbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICAgICAgICByZXN1bHQgPSB0cmFja2VyLmRldGVjdE11dGF0aW9ucygpOyAvLyBUcmFjayBiZWZvcmUgcG90ZW50aWFsbHkgbm90IG1lZXRpbmcgdGhlIGludmFyaWFudFxuXG4gICAgICAgICAgdHJhY2tlciA9IHRyYWNrKHN0YXRlKTtcbiAgICAgICAgICAhIXJlc3VsdC53YXNNdXRhdGVkID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gaW52YXJpYW50KGZhbHNlLCBcIkEgc3RhdGUgbXV0YXRpb24gd2FzIGRldGVjdGVkIGJldHdlZW4gZGlzcGF0Y2hlcywgaW4gdGhlIHBhdGggJ1wiICsgKHJlc3VsdC5wYXRoIHx8IFtdKS5qb2luKCcuJykgKyBcIicuICBUaGlzIG1heSBjYXVzZSBpbmNvcnJlY3QgYmVoYXZpb3IuIChodHRwczovL3JlZHV4LmpzLm9yZy90cm91Ymxlc2hvb3RpbmcjbmV2ZXItbXV0YXRlLXJlZHVjZXItYXJndW1lbnRzKVwiKSA6IGludmFyaWFudChmYWxzZSkgOiB2b2lkIDA7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgZGlzcGF0Y2hlZEFjdGlvbiA9IG5leHQoYWN0aW9uKTtcbiAgICAgICAgbWVhc3VyZVV0aWxzLm1lYXN1cmVUaW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgICAgICAgcmVzdWx0ID0gdHJhY2tlci5kZXRlY3RNdXRhdGlvbnMoKTsgLy8gVHJhY2sgYmVmb3JlIHBvdGVudGlhbGx5IG5vdCBtZWV0aW5nIHRoZSBpbnZhcmlhbnRcblxuICAgICAgICAgIHRyYWNrZXIgPSB0cmFjayhzdGF0ZSk7XG4gICAgICAgICAgcmVzdWx0Lndhc011dGF0ZWQgJiYgKCEhcmVzdWx0Lndhc011dGF0ZWQgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyBpbnZhcmlhbnQoZmFsc2UsIFwiQSBzdGF0ZSBtdXRhdGlvbiB3YXMgZGV0ZWN0ZWQgaW5zaWRlIGEgZGlzcGF0Y2gsIGluIHRoZSBwYXRoOiBcIiArIChyZXN1bHQucGF0aCB8fCBbXSkuam9pbignLicpICsgXCIuIFRha2UgYSBsb29rIGF0IHRoZSByZWR1Y2VyKHMpIGhhbmRsaW5nIHRoZSBhY3Rpb24gXCIgKyBzdHJpbmdpZnkoYWN0aW9uKSArIFwiLiAoaHR0cHM6Ly9yZWR1eC5qcy5vcmcvdHJvdWJsZXNob290aW5nI25ldmVyLW11dGF0ZS1yZWR1Y2VyLWFyZ3VtZW50cylcIikgOiBpbnZhcmlhbnQoZmFsc2UpIDogdm9pZCAwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIG1lYXN1cmVVdGlscy53YXJuSWZFeGNlZWRlZCgpO1xuICAgICAgICByZXR1cm4gZGlzcGF0Y2hlZEFjdGlvbjtcbiAgICAgIH07XG4gICAgfTtcbiAgfTtcbn1cblxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcGFzc2VkIHZhbHVlIGlzIFwicGxhaW5cIiwgaS5lLiBhIHZhbHVlIHRoYXQgaXMgZWl0aGVyXHJcbiAqIGRpcmVjdGx5IEpTT04tc2VyaWFsaXphYmxlIChib29sZWFuLCBudW1iZXIsIHN0cmluZywgYXJyYXksIHBsYWluIG9iamVjdClcclxuICogb3IgYHVuZGVmaW5lZGAuXHJcbiAqXHJcbiAqIEBwYXJhbSB2YWwgVGhlIHZhbHVlIHRvIGNoZWNrLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG5mdW5jdGlvbiBpc1BsYWluKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCcgfHwgdmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2YWwgPT09ICdib29sZWFuJyB8fCB0eXBlb2YgdmFsID09PSAnbnVtYmVyJyB8fCBBcnJheS5pc0FycmF5KHZhbCkgfHwgaXNQbGFpbk9iamVjdCh2YWwpO1xufVxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cbmZ1bmN0aW9uIGZpbmROb25TZXJpYWxpemFibGVWYWx1ZSh2YWx1ZSwgcGF0aCwgaXNTZXJpYWxpemFibGUsIGdldEVudHJpZXMsIGlnbm9yZWRQYXRocykge1xuICBpZiAocGF0aCA9PT0gdm9pZCAwKSB7XG4gICAgcGF0aCA9IFtdO1xuICB9XG5cbiAgaWYgKGlzU2VyaWFsaXphYmxlID09PSB2b2lkIDApIHtcbiAgICBpc1NlcmlhbGl6YWJsZSA9IGlzUGxhaW47XG4gIH1cblxuICBpZiAoaWdub3JlZFBhdGhzID09PSB2b2lkIDApIHtcbiAgICBpZ25vcmVkUGF0aHMgPSBbXTtcbiAgfVxuXG4gIHZhciBmb3VuZE5lc3RlZFNlcmlhbGl6YWJsZTtcblxuICBpZiAoIWlzU2VyaWFsaXphYmxlKHZhbHVlKSkge1xuICAgIHJldHVybiB7XG4gICAgICBrZXlQYXRoOiBwYXRoLmpvaW4oJy4nKSB8fCAnPHJvb3Q+JyxcbiAgICAgIHZhbHVlOiB2YWx1ZVxuICAgIH07XG4gIH1cblxuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBlbnRyaWVzID0gZ2V0RW50cmllcyAhPSBudWxsID8gZ2V0RW50cmllcyh2YWx1ZSkgOiBPYmplY3QuZW50cmllcyh2YWx1ZSk7XG4gIHZhciBoYXNJZ25vcmVkUGF0aHMgPSBpZ25vcmVkUGF0aHMubGVuZ3RoID4gMDtcblxuICBmb3IgKHZhciBfaXRlcmF0b3IgPSBlbnRyaWVzLCBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXkoX2l0ZXJhdG9yKSwgX2kgPSAwLCBfaXRlcmF0b3IgPSBfaXNBcnJheSA/IF9pdGVyYXRvciA6IF9pdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdKCk7Oykge1xuICAgIHZhciBfcmVmO1xuXG4gICAgaWYgKF9pc0FycmF5KSB7XG4gICAgICBpZiAoX2kgPj0gX2l0ZXJhdG9yLmxlbmd0aCkgYnJlYWs7XG4gICAgICBfcmVmID0gX2l0ZXJhdG9yW19pKytdO1xuICAgIH0gZWxzZSB7XG4gICAgICBfaSA9IF9pdGVyYXRvci5uZXh0KCk7XG4gICAgICBpZiAoX2kuZG9uZSkgYnJlYWs7XG4gICAgICBfcmVmID0gX2kudmFsdWU7XG4gICAgfVxuXG4gICAgdmFyIF9yZWYyID0gX3JlZixcbiAgICAgICAgcHJvcGVydHkgPSBfcmVmMlswXSxcbiAgICAgICAgbmVzdGVkVmFsdWUgPSBfcmVmMlsxXTtcbiAgICB2YXIgbmVzdGVkUGF0aCA9IHBhdGguY29uY2F0KHByb3BlcnR5KTtcblxuICAgIGlmIChoYXNJZ25vcmVkUGF0aHMgJiYgaWdub3JlZFBhdGhzLmluZGV4T2YobmVzdGVkUGF0aC5qb2luKCcuJykpID49IDApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmICghaXNTZXJpYWxpemFibGUobmVzdGVkVmFsdWUpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBrZXlQYXRoOiBuZXN0ZWRQYXRoLmpvaW4oJy4nKSxcbiAgICAgICAgdmFsdWU6IG5lc3RlZFZhbHVlXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbmVzdGVkVmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3VuZE5lc3RlZFNlcmlhbGl6YWJsZSA9IGZpbmROb25TZXJpYWxpemFibGVWYWx1ZShuZXN0ZWRWYWx1ZSwgbmVzdGVkUGF0aCwgaXNTZXJpYWxpemFibGUsIGdldEVudHJpZXMsIGlnbm9yZWRQYXRocyk7XG5cbiAgICAgIGlmIChmb3VuZE5lc3RlZFNlcmlhbGl6YWJsZSkge1xuICAgICAgICByZXR1cm4gZm91bmROZXN0ZWRTZXJpYWxpemFibGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXHJcbiAqIENyZWF0ZXMgYSBtaWRkbGV3YXJlIHRoYXQsIGFmdGVyIGV2ZXJ5IHN0YXRlIGNoYW5nZSwgY2hlY2tzIGlmIHRoZSBuZXdcclxuICogc3RhdGUgaXMgc2VyaWFsaXphYmxlLiBJZiBhIG5vbi1zZXJpYWxpemFibGUgdmFsdWUgaXMgZm91bmQgd2l0aGluIHRoZVxyXG4gKiBzdGF0ZSwgYW4gZXJyb3IgaXMgcHJpbnRlZCB0byB0aGUgY29uc29sZS5cclxuICpcclxuICogQHBhcmFtIG9wdGlvbnMgTWlkZGxld2FyZSBvcHRpb25zLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVTZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUob3B0aW9ucykge1xuICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIG5leHQoYWN0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfTtcbiAgfVxuXG4gIHZhciBfb3B0aW9ucyA9IG9wdGlvbnMsXG4gICAgICBfb3B0aW9ucyRpc1NlcmlhbGl6YWIgPSBfb3B0aW9ucy5pc1NlcmlhbGl6YWJsZSxcbiAgICAgIGlzU2VyaWFsaXphYmxlID0gX29wdGlvbnMkaXNTZXJpYWxpemFiID09PSB2b2lkIDAgPyBpc1BsYWluIDogX29wdGlvbnMkaXNTZXJpYWxpemFiLFxuICAgICAgZ2V0RW50cmllcyA9IF9vcHRpb25zLmdldEVudHJpZXMsXG4gICAgICBfb3B0aW9ucyRpZ25vcmVkQWN0aW8gPSBfb3B0aW9ucy5pZ25vcmVkQWN0aW9ucyxcbiAgICAgIGlnbm9yZWRBY3Rpb25zID0gX29wdGlvbnMkaWdub3JlZEFjdGlvID09PSB2b2lkIDAgPyBbXSA6IF9vcHRpb25zJGlnbm9yZWRBY3RpbyxcbiAgICAgIF9vcHRpb25zJGlnbm9yZWRBY3RpbzIgPSBfb3B0aW9ucy5pZ25vcmVkQWN0aW9uUGF0aHMsXG4gICAgICBpZ25vcmVkQWN0aW9uUGF0aHMgPSBfb3B0aW9ucyRpZ25vcmVkQWN0aW8yID09PSB2b2lkIDAgPyBbJ21ldGEuYXJnJ10gOiBfb3B0aW9ucyRpZ25vcmVkQWN0aW8yLFxuICAgICAgX29wdGlvbnMkaWdub3JlZFBhdGhzID0gX29wdGlvbnMuaWdub3JlZFBhdGhzLFxuICAgICAgaWdub3JlZFBhdGhzID0gX29wdGlvbnMkaWdub3JlZFBhdGhzID09PSB2b2lkIDAgPyBbXSA6IF9vcHRpb25zJGlnbm9yZWRQYXRocyxcbiAgICAgIF9vcHRpb25zJHdhcm5BZnRlciA9IF9vcHRpb25zLndhcm5BZnRlcixcbiAgICAgIHdhcm5BZnRlciA9IF9vcHRpb25zJHdhcm5BZnRlciA9PT0gdm9pZCAwID8gMzIgOiBfb3B0aW9ucyR3YXJuQWZ0ZXI7XG4gIHJldHVybiBmdW5jdGlvbiAoc3RvcmVBUEkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5leHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIGlmIChpZ25vcmVkQWN0aW9ucy5sZW5ndGggJiYgaWdub3JlZEFjdGlvbnMuaW5kZXhPZihhY3Rpb24udHlwZSkgIT09IC0xKSB7XG4gICAgICAgICAgcmV0dXJuIG5leHQoYWN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtZWFzdXJlVXRpbHMgPSBnZXRUaW1lTWVhc3VyZVV0aWxzKHdhcm5BZnRlciwgJ1NlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZScpO1xuICAgICAgICBtZWFzdXJlVXRpbHMubWVhc3VyZVRpbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBmb3VuZEFjdGlvbk5vblNlcmlhbGl6YWJsZVZhbHVlID0gZmluZE5vblNlcmlhbGl6YWJsZVZhbHVlKGFjdGlvbiwgW10sIGlzU2VyaWFsaXphYmxlLCBnZXRFbnRyaWVzLCBpZ25vcmVkQWN0aW9uUGF0aHMpO1xuXG4gICAgICAgICAgaWYgKGZvdW5kQWN0aW9uTm9uU2VyaWFsaXphYmxlVmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBrZXlQYXRoID0gZm91bmRBY3Rpb25Ob25TZXJpYWxpemFibGVWYWx1ZS5rZXlQYXRoLFxuICAgICAgICAgICAgICAgIHZhbHVlID0gZm91bmRBY3Rpb25Ob25TZXJpYWxpemFibGVWYWx1ZS52YWx1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBIG5vbi1zZXJpYWxpemFibGUgdmFsdWUgd2FzIGRldGVjdGVkIGluIGFuIGFjdGlvbiwgaW4gdGhlIHBhdGg6IGBcIiArIGtleVBhdGggKyBcImAuIFZhbHVlOlwiLCB2YWx1ZSwgJ1xcblRha2UgYSBsb29rIGF0IHRoZSBsb2dpYyB0aGF0IGRpc3BhdGNoZWQgdGhpcyBhY3Rpb246ICcsIGFjdGlvbiwgJ1xcbihTZWUgaHR0cHM6Ly9yZWR1eC5qcy5vcmcvZmFxL2FjdGlvbnMjd2h5LXNob3VsZC10eXBlLWJlLWEtc3RyaW5nLW9yLWF0LWxlYXN0LXNlcmlhbGl6YWJsZS13aHktc2hvdWxkLW15LWFjdGlvbi10eXBlcy1iZS1jb25zdGFudHMpJywgJ1xcbihUbyBhbGxvdyBub24tc2VyaWFsaXphYmxlIHZhbHVlcyBzZWU6IGh0dHBzOi8vcmVkdXgtdG9vbGtpdC5qcy5vcmcvdXNhZ2UvdXNhZ2UtZ3VpZGUjd29ya2luZy13aXRoLW5vbi1zZXJpYWxpemFibGUtZGF0YSknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgcmVzdWx0ID0gbmV4dChhY3Rpb24pO1xuICAgICAgICBtZWFzdXJlVXRpbHMubWVhc3VyZVRpbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBzdGF0ZSA9IHN0b3JlQVBJLmdldFN0YXRlKCk7XG4gICAgICAgICAgdmFyIGZvdW5kU3RhdGVOb25TZXJpYWxpemFibGVWYWx1ZSA9IGZpbmROb25TZXJpYWxpemFibGVWYWx1ZShzdGF0ZSwgW10sIGlzU2VyaWFsaXphYmxlLCBnZXRFbnRyaWVzLCBpZ25vcmVkUGF0aHMpO1xuXG4gICAgICAgICAgaWYgKGZvdW5kU3RhdGVOb25TZXJpYWxpemFibGVWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIGtleVBhdGggPSBmb3VuZFN0YXRlTm9uU2VyaWFsaXphYmxlVmFsdWUua2V5UGF0aCxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGZvdW5kU3RhdGVOb25TZXJpYWxpemFibGVWYWx1ZS52YWx1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBIG5vbi1zZXJpYWxpemFibGUgdmFsdWUgd2FzIGRldGVjdGVkIGluIHRoZSBzdGF0ZSwgaW4gdGhlIHBhdGg6IGBcIiArIGtleVBhdGggKyBcImAuIFZhbHVlOlwiLCB2YWx1ZSwgXCJcXG5UYWtlIGEgbG9vayBhdCB0aGUgcmVkdWNlcihzKSBoYW5kbGluZyB0aGlzIGFjdGlvbiB0eXBlOiBcIiArIGFjdGlvbi50eXBlICsgXCIuXFxuKFNlZSBodHRwczovL3JlZHV4LmpzLm9yZy9mYXEvb3JnYW5pemluZy1zdGF0ZSNjYW4taS1wdXQtZnVuY3Rpb25zLXByb21pc2VzLW9yLW90aGVyLW5vbi1zZXJpYWxpemFibGUtaXRlbXMtaW4tbXktc3RvcmUtc3RhdGUpXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG1lYXN1cmVVdGlscy53YXJuSWZFeGNlZWRlZCgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9O1xuICB9O1xufVxuXG5mdW5jdGlvbiBpc0Jvb2xlYW4oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdib29sZWFuJztcbn1cblxuZnVuY3Rpb24gY3VycnlHZXREZWZhdWx0TWlkZGxld2FyZSgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGN1cnJpZWRHZXREZWZhdWx0TWlkZGxld2FyZShvcHRpb25zKSB7XG4gICAgcmV0dXJuIGdldERlZmF1bHRNaWRkbGV3YXJlKG9wdGlvbnMpO1xuICB9O1xufVxuLyoqXHJcbiAqIFJldHVybnMgYW55IGFycmF5IGNvbnRhaW5pbmcgdGhlIGRlZmF1bHQgbWlkZGxld2FyZSBpbnN0YWxsZWQgYnlcclxuICogYGNvbmZpZ3VyZVN0b3JlKClgLiBVc2VmdWwgaWYgeW91IHdhbnQgdG8gY29uZmlndXJlIHlvdXIgc3RvcmUgd2l0aCBhIGN1c3RvbVxyXG4gKiBgbWlkZGxld2FyZWAgYXJyYXkgYnV0IHN0aWxsIGtlZXAgdGhlIGRlZmF1bHQgc2V0LlxyXG4gKlxyXG4gKiBAcmV0dXJuIFRoZSBkZWZhdWx0IG1pZGRsZXdhcmUgdXNlZCBieSBgY29uZmlndXJlU3RvcmUoKWAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cbmZ1bmN0aW9uIGdldERlZmF1bHRNaWRkbGV3YXJlKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIHZhciBfb3B0aW9ucyA9IG9wdGlvbnMsXG4gICAgICBfb3B0aW9ucyR0aHVuayA9IF9vcHRpb25zLnRodW5rLFxuICAgICAgdGh1bmsgPSBfb3B0aW9ucyR0aHVuayA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHRodW5rLFxuICAgICAgX29wdGlvbnMkaW1tdXRhYmxlQ2hlID0gX29wdGlvbnMuaW1tdXRhYmxlQ2hlY2ssXG4gICAgICBpbW11dGFibGVDaGVjayA9IF9vcHRpb25zJGltbXV0YWJsZUNoZSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJGltbXV0YWJsZUNoZSxcbiAgICAgIF9vcHRpb25zJHNlcmlhbGl6YWJsZSA9IF9vcHRpb25zLnNlcmlhbGl6YWJsZUNoZWNrLFxuICAgICAgc2VyaWFsaXphYmxlQ2hlY2sgPSBfb3B0aW9ucyRzZXJpYWxpemFibGUgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRzZXJpYWxpemFibGU7XG4gIHZhciBtaWRkbGV3YXJlQXJyYXkgPSBuZXcgTWlkZGxld2FyZUFycmF5KCk7XG5cbiAgaWYgKHRodW5rKSB7XG4gICAgaWYgKGlzQm9vbGVhbih0aHVuaykpIHtcbiAgICAgIG1pZGRsZXdhcmVBcnJheS5wdXNoKHRodW5rTWlkZGxld2FyZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1pZGRsZXdhcmVBcnJheS5wdXNoKHRodW5rTWlkZGxld2FyZS53aXRoRXh0cmFBcmd1bWVudCh0aHVuay5leHRyYUFyZ3VtZW50KSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoaW1tdXRhYmxlQ2hlY2spIHtcbiAgICAgIC8qIFBST0RfU1RBUlRfUkVNT1ZFX1VNRCAqL1xuICAgICAgdmFyIGltbXV0YWJsZU9wdGlvbnMgPSB7fTtcblxuICAgICAgaWYgKCFpc0Jvb2xlYW4oaW1tdXRhYmxlQ2hlY2spKSB7XG4gICAgICAgIGltbXV0YWJsZU9wdGlvbnMgPSBpbW11dGFibGVDaGVjaztcbiAgICAgIH1cblxuICAgICAgbWlkZGxld2FyZUFycmF5LnVuc2hpZnQoY3JlYXRlSW1tdXRhYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlKGltbXV0YWJsZU9wdGlvbnMpKTtcbiAgICAgIC8qIFBST0RfU1RPUF9SRU1PVkVfVU1EICovXG4gICAgfVxuXG4gICAgaWYgKHNlcmlhbGl6YWJsZUNoZWNrKSB7XG4gICAgICB2YXIgc2VyaWFsaXphYmxlT3B0aW9ucyA9IHt9O1xuXG4gICAgICBpZiAoIWlzQm9vbGVhbihzZXJpYWxpemFibGVDaGVjaykpIHtcbiAgICAgICAgc2VyaWFsaXphYmxlT3B0aW9ucyA9IHNlcmlhbGl6YWJsZUNoZWNrO1xuICAgICAgfVxuXG4gICAgICBtaWRkbGV3YXJlQXJyYXkucHVzaChjcmVhdGVTZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUoc2VyaWFsaXphYmxlT3B0aW9ucykpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtaWRkbGV3YXJlQXJyYXk7XG59XG5cbnZhciBJU19QUk9EVUNUSU9OID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJztcbi8qKlxyXG4gKiBBIGZyaWVuZGx5IGFic3RyYWN0aW9uIG92ZXIgdGhlIHN0YW5kYXJkIFJlZHV4IGBjcmVhdGVTdG9yZSgpYCBmdW5jdGlvbi5cclxuICpcclxuICogQHBhcmFtIGNvbmZpZyBUaGUgc3RvcmUgY29uZmlndXJhdGlvbi5cclxuICogQHJldHVybnMgQSBjb25maWd1cmVkIFJlZHV4IHN0b3JlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG5mdW5jdGlvbiBjb25maWd1cmVTdG9yZShvcHRpb25zKSB7XG4gIHZhciBjdXJyaWVkR2V0RGVmYXVsdE1pZGRsZXdhcmUgPSBjdXJyeUdldERlZmF1bHRNaWRkbGV3YXJlKCk7XG5cbiAgdmFyIF9yZWYgPSBvcHRpb25zIHx8IHt9LFxuICAgICAgX3JlZiRyZWR1Y2VyID0gX3JlZi5yZWR1Y2VyLFxuICAgICAgcmVkdWNlciA9IF9yZWYkcmVkdWNlciA9PT0gdm9pZCAwID8gdW5kZWZpbmVkIDogX3JlZiRyZWR1Y2VyLFxuICAgICAgX3JlZiRtaWRkbGV3YXJlID0gX3JlZi5taWRkbGV3YXJlLFxuICAgICAgbWlkZGxld2FyZSA9IF9yZWYkbWlkZGxld2FyZSA9PT0gdm9pZCAwID8gY3VycmllZEdldERlZmF1bHRNaWRkbGV3YXJlKCkgOiBfcmVmJG1pZGRsZXdhcmUsXG4gICAgICBfcmVmJGRldlRvb2xzID0gX3JlZi5kZXZUb29scyxcbiAgICAgIGRldlRvb2xzID0gX3JlZiRkZXZUb29scyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWYkZGV2VG9vbHMsXG4gICAgICBfcmVmJHByZWxvYWRlZFN0YXRlID0gX3JlZi5wcmVsb2FkZWRTdGF0ZSxcbiAgICAgIHByZWxvYWRlZFN0YXRlID0gX3JlZiRwcmVsb2FkZWRTdGF0ZSA9PT0gdm9pZCAwID8gdW5kZWZpbmVkIDogX3JlZiRwcmVsb2FkZWRTdGF0ZSxcbiAgICAgIF9yZWYkZW5oYW5jZXJzID0gX3JlZi5lbmhhbmNlcnMsXG4gICAgICBlbmhhbmNlcnMgPSBfcmVmJGVuaGFuY2VycyA9PT0gdm9pZCAwID8gdW5kZWZpbmVkIDogX3JlZiRlbmhhbmNlcnM7XG5cbiAgdmFyIHJvb3RSZWR1Y2VyO1xuXG4gIGlmICh0eXBlb2YgcmVkdWNlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJvb3RSZWR1Y2VyID0gcmVkdWNlcjtcbiAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHJlZHVjZXIpKSB7XG4gICAgcm9vdFJlZHVjZXIgPSBjb21iaW5lUmVkdWNlcnMocmVkdWNlcik7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdcInJlZHVjZXJcIiBpcyBhIHJlcXVpcmVkIGFyZ3VtZW50LCBhbmQgbXVzdCBiZSBhIGZ1bmN0aW9uIG9yIGFuIG9iamVjdCBvZiBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIGNvbWJpbmVSZWR1Y2VycycpO1xuICB9XG5cbiAgdmFyIG1pZGRsZXdhcmVFbmhhbmNlciA9IGFwcGx5TWlkZGxld2FyZS5hcHBseSh2b2lkIDAsIHR5cGVvZiBtaWRkbGV3YXJlID09PSAnZnVuY3Rpb24nID8gbWlkZGxld2FyZShjdXJyaWVkR2V0RGVmYXVsdE1pZGRsZXdhcmUpIDogbWlkZGxld2FyZSk7XG4gIHZhciBmaW5hbENvbXBvc2UgPSBjb21wb3NlO1xuXG4gIGlmIChkZXZUb29scykge1xuICAgIGZpbmFsQ29tcG9zZSA9IGNvbXBvc2VXaXRoRGV2VG9vbHMoX2V4dGVuZHMoe1xuICAgICAgLy8gRW5hYmxlIGNhcHR1cmUgb2Ygc3RhY2sgdHJhY2VzIGZvciBkaXNwYXRjaGVkIFJlZHV4IGFjdGlvbnNcbiAgICAgIHRyYWNlOiAhSVNfUFJPRFVDVElPTlxuICAgIH0sIHR5cGVvZiBkZXZUb29scyA9PT0gJ29iamVjdCcgJiYgZGV2VG9vbHMpKTtcbiAgfVxuXG4gIHZhciBzdG9yZUVuaGFuY2VycyA9IFttaWRkbGV3YXJlRW5oYW5jZXJdO1xuXG4gIGlmIChBcnJheS5pc0FycmF5KGVuaGFuY2VycykpIHtcbiAgICBzdG9yZUVuaGFuY2VycyA9IFttaWRkbGV3YXJlRW5oYW5jZXJdLmNvbmNhdChlbmhhbmNlcnMpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbmhhbmNlcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBzdG9yZUVuaGFuY2VycyA9IGVuaGFuY2VycyhzdG9yZUVuaGFuY2Vycyk7XG4gIH1cblxuICB2YXIgY29tcG9zZWRFbmhhbmNlciA9IGZpbmFsQ29tcG9zZS5hcHBseSh2b2lkIDAsIHN0b3JlRW5oYW5jZXJzKTtcbiAgcmV0dXJuIGNyZWF0ZVN0b3JlKHJvb3RSZWR1Y2VyLCBwcmVsb2FkZWRTdGF0ZSwgY29tcG9zZWRFbmhhbmNlcik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFjdGlvbih0eXBlLCBwcmVwYXJlQWN0aW9uKSB7XG4gIGZ1bmN0aW9uIGFjdGlvbkNyZWF0b3IoKSB7XG4gICAgaWYgKHByZXBhcmVBY3Rpb24pIHtcbiAgICAgIHZhciBwcmVwYXJlZCA9IHByZXBhcmVBY3Rpb24uYXBwbHkodm9pZCAwLCBhcmd1bWVudHMpO1xuXG4gICAgICBpZiAoIXByZXBhcmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigncHJlcGFyZUFjdGlvbiBkaWQgbm90IHJldHVybiBhbiBvYmplY3QnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9leHRlbmRzKHtcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgcGF5bG9hZDogcHJlcGFyZWQucGF5bG9hZFxuICAgICAgfSwgJ21ldGEnIGluIHByZXBhcmVkICYmIHtcbiAgICAgICAgbWV0YTogcHJlcGFyZWQubWV0YVxuICAgICAgfSwge30sICdlcnJvcicgaW4gcHJlcGFyZWQgJiYge1xuICAgICAgICBlcnJvcjogcHJlcGFyZWQuZXJyb3JcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgcGF5bG9hZDogYXJndW1lbnRzLmxlbmd0aCA8PSAwID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzBdXG4gICAgfTtcbiAgfVxuXG4gIGFjdGlvbkNyZWF0b3IudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiXCIgKyB0eXBlO1xuICB9O1xuXG4gIGFjdGlvbkNyZWF0b3IudHlwZSA9IHR5cGU7XG5cbiAgYWN0aW9uQ3JlYXRvci5tYXRjaCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICByZXR1cm4gYWN0aW9uLnR5cGUgPT09IHR5cGU7XG4gIH07XG5cbiAgcmV0dXJuIGFjdGlvbkNyZWF0b3I7XG59XG5mdW5jdGlvbiBpc0ZTQShhY3Rpb24pIHtcbiAgcmV0dXJuIGlzUGxhaW5PYmplY3QoYWN0aW9uKSAmJiB0eXBlb2YgYWN0aW9uLnR5cGUgPT09ICdzdHJpbmcnICYmIE9iamVjdC5rZXlzKGFjdGlvbikuZXZlcnkoaXNWYWxpZEtleSk7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRLZXkoa2V5KSB7XG4gIHJldHVybiBbJ3R5cGUnLCAncGF5bG9hZCcsICdlcnJvcicsICdtZXRhJ10uaW5kZXhPZihrZXkpID4gLTE7XG59XG4vKipcclxuICogUmV0dXJucyB0aGUgYWN0aW9uIHR5cGUgb2YgdGhlIGFjdGlvbnMgY3JlYXRlZCBieSB0aGUgcGFzc2VkXHJcbiAqIGBjcmVhdGVBY3Rpb24oKWAtZ2VuZXJhdGVkIGFjdGlvbiBjcmVhdG9yIChhcmJpdHJhcnkgYWN0aW9uIGNyZWF0b3JzXHJcbiAqIGFyZSBub3Qgc3VwcG9ydGVkKS5cclxuICpcclxuICogQHBhcmFtIGFjdGlvbiBUaGUgYWN0aW9uIGNyZWF0b3Igd2hvc2UgYWN0aW9uIHR5cGUgdG8gZ2V0LlxyXG4gKiBAcmV0dXJucyBUaGUgYWN0aW9uIHR5cGUgdXNlZCBieSB0aGUgYWN0aW9uIGNyZWF0b3IuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cblxuZnVuY3Rpb24gZ2V0VHlwZShhY3Rpb25DcmVhdG9yKSB7XG4gIHJldHVybiBcIlwiICsgYWN0aW9uQ3JlYXRvcjtcbn1cblxuZnVuY3Rpb24gZXhlY3V0ZVJlZHVjZXJCdWlsZGVyQ2FsbGJhY2soYnVpbGRlckNhbGxiYWNrKSB7XG4gIHZhciBhY3Rpb25zTWFwID0ge307XG4gIHZhciBhY3Rpb25NYXRjaGVycyA9IFtdO1xuICB2YXIgZGVmYXVsdENhc2VSZWR1Y2VyO1xuICB2YXIgYnVpbGRlciA9IHtcbiAgICBhZGRDYXNlOiBmdW5jdGlvbiBhZGRDYXNlKHR5cGVPckFjdGlvbkNyZWF0b3IsIHJlZHVjZXIpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIC8qXHJcbiAgICAgICAgIHRvIGtlZXAgdGhlIGRlZmluaXRpb24gYnkgdGhlIHVzZXIgaW4gbGluZSB3aXRoIGFjdHVhbCBiZWhhdmlvcixcclxuICAgICAgICAgd2UgZW5mb3JjZSBgYWRkQ2FzZWAgdG8gYWx3YXlzIGJlIGNhbGxlZCBiZWZvcmUgY2FsbGluZyBgYWRkTWF0Y2hlcmBcclxuICAgICAgICAgYXMgbWF0Y2hpbmcgY2FzZXMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgbWF0Y2hlcnNcclxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKGFjdGlvbk1hdGNoZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BidWlsZGVyLmFkZENhc2VgIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBiZWZvcmUgY2FsbGluZyBgYnVpbGRlci5hZGRNYXRjaGVyYCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRlZmF1bHRDYXNlUmVkdWNlcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYGJ1aWxkZXIuYWRkQ2FzZWAgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGBidWlsZGVyLmFkZERlZmF1bHRDYXNlYCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciB0eXBlID0gdHlwZW9mIHR5cGVPckFjdGlvbkNyZWF0b3IgPT09ICdzdHJpbmcnID8gdHlwZU9yQWN0aW9uQ3JlYXRvciA6IHR5cGVPckFjdGlvbkNyZWF0b3IudHlwZTtcblxuICAgICAgaWYgKHR5cGUgaW4gYWN0aW9uc01hcCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FkZENhc2UgY2Fubm90IGJlIGNhbGxlZCB3aXRoIHR3byByZWR1Y2VycyBmb3IgdGhlIHNhbWUgYWN0aW9uIHR5cGUnKTtcbiAgICAgIH1cblxuICAgICAgYWN0aW9uc01hcFt0eXBlXSA9IHJlZHVjZXI7XG4gICAgICByZXR1cm4gYnVpbGRlcjtcbiAgICB9LFxuICAgIGFkZE1hdGNoZXI6IGZ1bmN0aW9uIGFkZE1hdGNoZXIobWF0Y2hlciwgcmVkdWNlcikge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKGRlZmF1bHRDYXNlUmVkdWNlcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYGJ1aWxkZXIuYWRkTWF0Y2hlcmAgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGBidWlsZGVyLmFkZERlZmF1bHRDYXNlYCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGFjdGlvbk1hdGNoZXJzLnB1c2goe1xuICAgICAgICBtYXRjaGVyOiBtYXRjaGVyLFxuICAgICAgICByZWR1Y2VyOiByZWR1Y2VyXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBidWlsZGVyO1xuICAgIH0sXG4gICAgYWRkRGVmYXVsdENhc2U6IGZ1bmN0aW9uIGFkZERlZmF1bHRDYXNlKHJlZHVjZXIpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmIChkZWZhdWx0Q2FzZVJlZHVjZXIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BidWlsZGVyLmFkZERlZmF1bHRDYXNlYCBjYW4gb25seSBiZSBjYWxsZWQgb25jZScpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHRDYXNlUmVkdWNlciA9IHJlZHVjZXI7XG4gICAgICByZXR1cm4gYnVpbGRlcjtcbiAgICB9XG4gIH07XG4gIGJ1aWxkZXJDYWxsYmFjayhidWlsZGVyKTtcbiAgcmV0dXJuIFthY3Rpb25zTWFwLCBhY3Rpb25NYXRjaGVycywgZGVmYXVsdENhc2VSZWR1Y2VyXTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUmVkdWNlcihpbml0aWFsU3RhdGUsIG1hcE9yQnVpbGRlckNhbGxiYWNrLCBhY3Rpb25NYXRjaGVycywgZGVmYXVsdENhc2VSZWR1Y2VyKSB7XG4gIGlmIChhY3Rpb25NYXRjaGVycyA9PT0gdm9pZCAwKSB7XG4gICAgYWN0aW9uTWF0Y2hlcnMgPSBbXTtcbiAgfVxuXG4gIHZhciBfcmVmID0gdHlwZW9mIG1hcE9yQnVpbGRlckNhbGxiYWNrID09PSAnZnVuY3Rpb24nID8gZXhlY3V0ZVJlZHVjZXJCdWlsZGVyQ2FsbGJhY2sobWFwT3JCdWlsZGVyQ2FsbGJhY2spIDogW21hcE9yQnVpbGRlckNhbGxiYWNrLCBhY3Rpb25NYXRjaGVycywgZGVmYXVsdENhc2VSZWR1Y2VyXSxcbiAgICAgIGFjdGlvbnNNYXAgPSBfcmVmWzBdLFxuICAgICAgZmluYWxBY3Rpb25NYXRjaGVycyA9IF9yZWZbMV0sXG4gICAgICBmaW5hbERlZmF1bHRDYXNlUmVkdWNlciA9IF9yZWZbMl07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgaWYgKHN0YXRlID09PSB2b2lkIDApIHtcbiAgICAgIHN0YXRlID0gaW5pdGlhbFN0YXRlO1xuICAgIH1cblxuICAgIHZhciBjYXNlUmVkdWNlcnMgPSBbYWN0aW9uc01hcFthY3Rpb24udHlwZV1dLmNvbmNhdChmaW5hbEFjdGlvbk1hdGNoZXJzLmZpbHRlcihmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICAgIHZhciBtYXRjaGVyID0gX3JlZjIubWF0Y2hlcjtcbiAgICAgIHJldHVybiBtYXRjaGVyKGFjdGlvbik7XG4gICAgfSkubWFwKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgdmFyIHJlZHVjZXIgPSBfcmVmMy5yZWR1Y2VyO1xuICAgICAgcmV0dXJuIHJlZHVjZXI7XG4gICAgfSkpO1xuXG4gICAgaWYgKGNhc2VSZWR1Y2Vycy5maWx0ZXIoZnVuY3Rpb24gKGNyKSB7XG4gICAgICByZXR1cm4gISFjcjtcbiAgICB9KS5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhc2VSZWR1Y2VycyA9IFtmaW5hbERlZmF1bHRDYXNlUmVkdWNlcl07XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhc2VSZWR1Y2Vycy5yZWR1Y2UoZnVuY3Rpb24gKHByZXZpb3VzU3RhdGUsIGNhc2VSZWR1Y2VyKSB7XG4gICAgICBpZiAoY2FzZVJlZHVjZXIpIHtcbiAgICAgICAgaWYgKGlzRHJhZnQocHJldmlvdXNTdGF0ZSkpIHtcbiAgICAgICAgICAvLyBJZiBpdCdzIGFscmVhZHkgYSBkcmFmdCwgd2UgbXVzdCBhbHJlYWR5IGJlIGluc2lkZSBhIGBjcmVhdGVOZXh0U3RhdGVgIGNhbGwsXG4gICAgICAgICAgLy8gbGlrZWx5IGJlY2F1c2UgdGhpcyBpcyBiZWluZyB3cmFwcGVkIGluIGBjcmVhdGVSZWR1Y2VyYCwgYGNyZWF0ZVNsaWNlYCwgb3IgbmVzdGVkXG4gICAgICAgICAgLy8gaW5zaWRlIGFuIGV4aXN0aW5nIGRyYWZ0LiBJdCdzIHNhZmUgdG8ganVzdCBwYXNzIHRoZSBkcmFmdCB0byB0aGUgbXV0YXRvci5cbiAgICAgICAgICB2YXIgZHJhZnQgPSBwcmV2aW91c1N0YXRlOyAvLyBXZSBjYW4gYXNzdW1lIHRoaXMgaXMgYWxyZWFkeSBhIGRyYWZ0XG5cbiAgICAgICAgICB2YXIgcmVzdWx0ID0gY2FzZVJlZHVjZXIoZHJhZnQsIGFjdGlvbik7XG5cbiAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBwcmV2aW91c1N0YXRlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gZWxzZSBpZiAoIWlzRHJhZnRhYmxlKHByZXZpb3VzU3RhdGUpKSB7XG4gICAgICAgICAgLy8gSWYgc3RhdGUgaXMgbm90IGRyYWZ0YWJsZSAoZXg6IGEgcHJpbWl0aXZlLCBzdWNoIGFzIDApLCB3ZSB3YW50IHRvIGRpcmVjdGx5XG4gICAgICAgICAgLy8gcmV0dXJuIHRoZSBjYXNlUmVkdWNlciBmdW5jIGFuZCBub3Qgd3JhcCBpdCB3aXRoIHByb2R1Y2UuXG4gICAgICAgICAgdmFyIF9yZXN1bHQgPSBjYXNlUmVkdWNlcihwcmV2aW91c1N0YXRlLCBhY3Rpb24pO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiBfcmVzdWx0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKHByZXZpb3VzU3RhdGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHByZXZpb3VzU3RhdGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IEVycm9yKCdBIGNhc2UgcmVkdWNlciBvbiBhIG5vbi1kcmFmdGFibGUgdmFsdWUgbXVzdCBub3QgcmV0dXJuIHVuZGVmaW5lZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBfcmVzdWx0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmUgY3JlYXRlTmV4dFN0YXRlKCkgcHJvZHVjZXMgYW4gSW1tdXRhYmxlPERyYWZ0PFM+PiByYXRoZXJcbiAgICAgICAgICAvLyB0aGFuIGFuIEltbXV0YWJsZTxTPiwgYW5kIFR5cGVTY3JpcHQgY2Fubm90IGZpbmQgb3V0IGhvdyB0byByZWNvbmNpbGVcbiAgICAgICAgICAvLyB0aGVzZSB0d28gdHlwZXMuXG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZU5leHRTdGF0ZShwcmV2aW91c1N0YXRlLCBmdW5jdGlvbiAoZHJhZnQpIHtcbiAgICAgICAgICAgIHJldHVybiBjYXNlUmVkdWNlcihkcmFmdCwgYWN0aW9uKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlvdXNTdGF0ZTtcbiAgICB9LCBzdGF0ZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFR5cGUkMShzbGljZSwgYWN0aW9uS2V5KSB7XG4gIHJldHVybiBzbGljZSArIFwiL1wiICsgYWN0aW9uS2V5O1xufVxuLyoqXHJcbiAqIEEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIGFuIGluaXRpYWwgc3RhdGUsIGFuIG9iamVjdCBmdWxsIG9mIHJlZHVjZXJcclxuICogZnVuY3Rpb25zLCBhbmQgYSBcInNsaWNlIG5hbWVcIiwgYW5kIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVzXHJcbiAqIGFjdGlvbiBjcmVhdG9ycyBhbmQgYWN0aW9uIHR5cGVzIHRoYXQgY29ycmVzcG9uZCB0byB0aGVcclxuICogcmVkdWNlcnMgYW5kIHN0YXRlLlxyXG4gKlxyXG4gKiBUaGUgYHJlZHVjZXJgIGFyZ3VtZW50IGlzIHBhc3NlZCB0byBgY3JlYXRlUmVkdWNlcigpYC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cblxuXG5mdW5jdGlvbiBjcmVhdGVTbGljZShvcHRpb25zKSB7XG4gIHZhciBuYW1lID0gb3B0aW9ucy5uYW1lLFxuICAgICAgaW5pdGlhbFN0YXRlID0gb3B0aW9ucy5pbml0aWFsU3RhdGU7XG5cbiAgaWYgKCFuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdgbmFtZWAgaXMgYSByZXF1aXJlZCBvcHRpb24gZm9yIGNyZWF0ZVNsaWNlJyk7XG4gIH1cblxuICB2YXIgcmVkdWNlcnMgPSBvcHRpb25zLnJlZHVjZXJzIHx8IHt9O1xuXG4gIHZhciBfcmVmID0gdHlwZW9mIG9wdGlvbnMuZXh0cmFSZWR1Y2VycyA9PT0gJ3VuZGVmaW5lZCcgPyBbXSA6IHR5cGVvZiBvcHRpb25zLmV4dHJhUmVkdWNlcnMgPT09ICdmdW5jdGlvbicgPyBleGVjdXRlUmVkdWNlckJ1aWxkZXJDYWxsYmFjayhvcHRpb25zLmV4dHJhUmVkdWNlcnMpIDogW29wdGlvbnMuZXh0cmFSZWR1Y2Vyc10sXG4gICAgICBfcmVmJCA9IF9yZWZbMF0sXG4gICAgICBleHRyYVJlZHVjZXJzID0gX3JlZiQgPT09IHZvaWQgMCA/IHt9IDogX3JlZiQsXG4gICAgICBfcmVmJDIgPSBfcmVmWzFdLFxuICAgICAgYWN0aW9uTWF0Y2hlcnMgPSBfcmVmJDIgPT09IHZvaWQgMCA/IFtdIDogX3JlZiQyLFxuICAgICAgX3JlZiQzID0gX3JlZlsyXSxcbiAgICAgIGRlZmF1bHRDYXNlUmVkdWNlciA9IF9yZWYkMyA9PT0gdm9pZCAwID8gdW5kZWZpbmVkIDogX3JlZiQzO1xuXG4gIHZhciByZWR1Y2VyTmFtZXMgPSBPYmplY3Qua2V5cyhyZWR1Y2Vycyk7XG4gIHZhciBzbGljZUNhc2VSZWR1Y2Vyc0J5TmFtZSA9IHt9O1xuICB2YXIgc2xpY2VDYXNlUmVkdWNlcnNCeVR5cGUgPSB7fTtcbiAgdmFyIGFjdGlvbkNyZWF0b3JzID0ge307XG4gIHJlZHVjZXJOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWR1Y2VyTmFtZSkge1xuICAgIHZhciBtYXliZVJlZHVjZXJXaXRoUHJlcGFyZSA9IHJlZHVjZXJzW3JlZHVjZXJOYW1lXTtcbiAgICB2YXIgdHlwZSA9IGdldFR5cGUkMShuYW1lLCByZWR1Y2VyTmFtZSk7XG4gICAgdmFyIGNhc2VSZWR1Y2VyO1xuICAgIHZhciBwcmVwYXJlQ2FsbGJhY2s7XG5cbiAgICBpZiAoJ3JlZHVjZXInIGluIG1heWJlUmVkdWNlcldpdGhQcmVwYXJlKSB7XG4gICAgICBjYXNlUmVkdWNlciA9IG1heWJlUmVkdWNlcldpdGhQcmVwYXJlLnJlZHVjZXI7XG4gICAgICBwcmVwYXJlQ2FsbGJhY2sgPSBtYXliZVJlZHVjZXJXaXRoUHJlcGFyZS5wcmVwYXJlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYXNlUmVkdWNlciA9IG1heWJlUmVkdWNlcldpdGhQcmVwYXJlO1xuICAgIH1cblxuICAgIHNsaWNlQ2FzZVJlZHVjZXJzQnlOYW1lW3JlZHVjZXJOYW1lXSA9IGNhc2VSZWR1Y2VyO1xuICAgIHNsaWNlQ2FzZVJlZHVjZXJzQnlUeXBlW3R5cGVdID0gY2FzZVJlZHVjZXI7XG4gICAgYWN0aW9uQ3JlYXRvcnNbcmVkdWNlck5hbWVdID0gcHJlcGFyZUNhbGxiYWNrID8gY3JlYXRlQWN0aW9uKHR5cGUsIHByZXBhcmVDYWxsYmFjaykgOiBjcmVhdGVBY3Rpb24odHlwZSk7XG4gIH0pO1xuXG4gIHZhciBmaW5hbENhc2VSZWR1Y2VycyA9IF9leHRlbmRzKHt9LCBleHRyYVJlZHVjZXJzLCB7fSwgc2xpY2VDYXNlUmVkdWNlcnNCeVR5cGUpO1xuXG4gIHZhciByZWR1Y2VyID0gY3JlYXRlUmVkdWNlcihpbml0aWFsU3RhdGUsIGZpbmFsQ2FzZVJlZHVjZXJzLCBhY3Rpb25NYXRjaGVycywgZGVmYXVsdENhc2VSZWR1Y2VyKTtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBuYW1lLFxuICAgIHJlZHVjZXI6IHJlZHVjZXIsXG4gICAgYWN0aW9uczogYWN0aW9uQ3JlYXRvcnMsXG4gICAgY2FzZVJlZHVjZXJzOiBzbGljZUNhc2VSZWR1Y2Vyc0J5TmFtZVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRJbml0aWFsRW50aXR5U3RhdGUoKSB7XG4gIHJldHVybiB7XG4gICAgaWRzOiBbXSxcbiAgICBlbnRpdGllczoge31cbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUluaXRpYWxTdGF0ZUZhY3RvcnkoKSB7XG4gIGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZShhZGRpdGlvbmFsU3RhdGUpIHtcbiAgICBpZiAoYWRkaXRpb25hbFN0YXRlID09PSB2b2lkIDApIHtcbiAgICAgIGFkZGl0aW9uYWxTdGF0ZSA9IHt9O1xuICAgIH1cblxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGdldEluaXRpYWxFbnRpdHlTdGF0ZSgpLCBhZGRpdGlvbmFsU3RhdGUpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRJbml0aWFsU3RhdGU6IGdldEluaXRpYWxTdGF0ZVxuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTZWxlY3RvcnNGYWN0b3J5KCkge1xuICBmdW5jdGlvbiBnZXRTZWxlY3RvcnMoc2VsZWN0U3RhdGUpIHtcbiAgICB2YXIgc2VsZWN0SWRzID0gZnVuY3Rpb24gc2VsZWN0SWRzKHN0YXRlKSB7XG4gICAgICByZXR1cm4gc3RhdGUuaWRzO1xuICAgIH07XG5cbiAgICB2YXIgc2VsZWN0RW50aXRpZXMgPSBmdW5jdGlvbiBzZWxlY3RFbnRpdGllcyhzdGF0ZSkge1xuICAgICAgcmV0dXJuIHN0YXRlLmVudGl0aWVzO1xuICAgIH07XG5cbiAgICB2YXIgc2VsZWN0QWxsID0gY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3Ioc2VsZWN0SWRzLCBzZWxlY3RFbnRpdGllcywgZnVuY3Rpb24gKGlkcywgZW50aXRpZXMpIHtcbiAgICAgIHJldHVybiBpZHMubWFwKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gZW50aXRpZXNbaWRdO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB2YXIgc2VsZWN0SWQgPSBmdW5jdGlvbiBzZWxlY3RJZChfLCBpZCkge1xuICAgICAgcmV0dXJuIGlkO1xuICAgIH07XG5cbiAgICB2YXIgc2VsZWN0QnlJZCA9IGZ1bmN0aW9uIHNlbGVjdEJ5SWQoZW50aXRpZXMsIGlkKSB7XG4gICAgICByZXR1cm4gZW50aXRpZXNbaWRdO1xuICAgIH07XG5cbiAgICB2YXIgc2VsZWN0VG90YWwgPSBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihzZWxlY3RJZHMsIGZ1bmN0aW9uIChpZHMpIHtcbiAgICAgIHJldHVybiBpZHMubGVuZ3RoO1xuICAgIH0pO1xuXG4gICAgaWYgKCFzZWxlY3RTdGF0ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2VsZWN0SWRzOiBzZWxlY3RJZHMsXG4gICAgICAgIHNlbGVjdEVudGl0aWVzOiBzZWxlY3RFbnRpdGllcyxcbiAgICAgICAgc2VsZWN0QWxsOiBzZWxlY3RBbGwsXG4gICAgICAgIHNlbGVjdFRvdGFsOiBzZWxlY3RUb3RhbCxcbiAgICAgICAgc2VsZWN0QnlJZDogY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3Ioc2VsZWN0RW50aXRpZXMsIHNlbGVjdElkLCBzZWxlY3RCeUlkKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgc2VsZWN0R2xvYmFsaXplZEVudGl0aWVzID0gY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3Ioc2VsZWN0U3RhdGUsIHNlbGVjdEVudGl0aWVzKTtcbiAgICByZXR1cm4ge1xuICAgICAgc2VsZWN0SWRzOiBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihzZWxlY3RTdGF0ZSwgc2VsZWN0SWRzKSxcbiAgICAgIHNlbGVjdEVudGl0aWVzOiBzZWxlY3RHbG9iYWxpemVkRW50aXRpZXMsXG4gICAgICBzZWxlY3RBbGw6IGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yKHNlbGVjdFN0YXRlLCBzZWxlY3RBbGwpLFxuICAgICAgc2VsZWN0VG90YWw6IGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yKHNlbGVjdFN0YXRlLCBzZWxlY3RUb3RhbCksXG4gICAgICBzZWxlY3RCeUlkOiBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihzZWxlY3RHbG9iYWxpemVkRW50aXRpZXMsIHNlbGVjdElkLCBzZWxlY3RCeUlkKVxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdldFNlbGVjdG9yczogZ2V0U2VsZWN0b3JzXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNpbmdsZUFyZ3VtZW50U3RhdGVPcGVyYXRvcihtdXRhdG9yKSB7XG4gIHZhciBvcGVyYXRvciA9IGNyZWF0ZVN0YXRlT3BlcmF0b3IoZnVuY3Rpb24gKF8sIHN0YXRlKSB7XG4gICAgcmV0dXJuIG11dGF0b3Ioc3RhdGUpO1xuICB9KTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG9wZXJhdGlvbihzdGF0ZSkge1xuICAgIHJldHVybiBvcGVyYXRvcihzdGF0ZSwgdW5kZWZpbmVkKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVN0YXRlT3BlcmF0b3IobXV0YXRvcikge1xuICByZXR1cm4gZnVuY3Rpb24gb3BlcmF0aW9uKHN0YXRlLCBhcmcpIHtcbiAgICBmdW5jdGlvbiBpc1BheWxvYWRBY3Rpb25Bcmd1bWVudChhcmcpIHtcbiAgICAgIHJldHVybiBpc0ZTQShhcmcpO1xuICAgIH1cblxuICAgIHZhciBydW5NdXRhdG9yID0gZnVuY3Rpb24gcnVuTXV0YXRvcihkcmFmdCkge1xuICAgICAgaWYgKGlzUGF5bG9hZEFjdGlvbkFyZ3VtZW50KGFyZykpIHtcbiAgICAgICAgbXV0YXRvcihhcmcucGF5bG9hZCwgZHJhZnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbXV0YXRvcihhcmcsIGRyYWZ0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGlzRHJhZnQoc3RhdGUpKSB7XG4gICAgICAvLyB3ZSBtdXN0IGFscmVhZHkgYmUgaW5zaWRlIGEgYGNyZWF0ZU5leHRTdGF0ZWAgY2FsbCwgbGlrZWx5IGJlY2F1c2VcbiAgICAgIC8vIHRoaXMgaXMgYmVpbmcgd3JhcHBlZCBpbiBgY3JlYXRlUmVkdWNlcmAgb3IgYGNyZWF0ZVNsaWNlYC5cbiAgICAgIC8vIEl0J3Mgc2FmZSB0byBqdXN0IHBhc3MgdGhlIGRyYWZ0IHRvIHRoZSBtdXRhdG9yLlxuICAgICAgcnVuTXV0YXRvcihzdGF0ZSk7IC8vIHNpbmNlIGl0J3MgYSBkcmFmdCwgd2UnbGwganVzdCByZXR1cm4gaXRcblxuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBAdHMtaWdub3JlIGNyZWF0ZU5leHRTdGF0ZSgpIHByb2R1Y2VzIGFuIEltbXV0YWJsZTxEcmFmdDxTPj4gcmF0aGVyXG4gICAgICAvLyB0aGFuIGFuIEltbXV0YWJsZTxTPiwgYW5kIFR5cGVTY3JpcHQgY2Fubm90IGZpbmQgb3V0IGhvdyB0byByZWNvbmNpbGVcbiAgICAgIC8vIHRoZXNlIHR3byB0eXBlcy5cbiAgICAgIHJldHVybiBjcmVhdGVOZXh0U3RhdGUoc3RhdGUsIHJ1bk11dGF0b3IpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0SWRWYWx1ZShlbnRpdHksIHNlbGVjdElkKSB7XG4gIHZhciBrZXkgPSBzZWxlY3RJZChlbnRpdHkpO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc29sZS53YXJuKCdUaGUgZW50aXR5IHBhc3NlZCB0byB0aGUgYHNlbGVjdElkYCBpbXBsZW1lbnRhdGlvbiByZXR1cm5lZCB1bmRlZmluZWQuJywgJ1lvdSBzaG91bGQgcHJvYmFibHkgcHJvdmlkZSB5b3VyIG93biBgc2VsZWN0SWRgIGltcGxlbWVudGF0aW9uLicsICdUaGUgZW50aXR5IHRoYXQgd2FzIHBhc3NlZDonLCBlbnRpdHksICdUaGUgYHNlbGVjdElkYCBpbXBsZW1lbnRhdGlvbjonLCBzZWxlY3RJZC50b1N0cmluZygpKTtcbiAgfVxuXG4gIHJldHVybiBrZXk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVVuc29ydGVkU3RhdGVBZGFwdGVyKHNlbGVjdElkKSB7XG4gIGZ1bmN0aW9uIGFkZE9uZU11dGFibHkoZW50aXR5LCBzdGF0ZSkge1xuICAgIHZhciBrZXkgPSBzZWxlY3RJZFZhbHVlKGVudGl0eSwgc2VsZWN0SWQpO1xuXG4gICAgaWYgKGtleSBpbiBzdGF0ZS5lbnRpdGllcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN0YXRlLmlkcy5wdXNoKGtleSk7XG4gICAgc3RhdGUuZW50aXRpZXNba2V5XSA9IGVudGl0eTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZE1hbnlNdXRhYmx5KGVudGl0aWVzLCBzdGF0ZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShlbnRpdGllcykpIHtcbiAgICAgIGVudGl0aWVzID0gT2JqZWN0LnZhbHVlcyhlbnRpdGllcyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gZW50aXRpZXMsIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheShfaXRlcmF0b3IpLCBfaSA9IDAsIF9pdGVyYXRvciA9IF9pc0FycmF5ID8gX2l0ZXJhdG9yIDogX2l0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XG4gICAgICB2YXIgX3JlZjtcblxuICAgICAgaWYgKF9pc0FycmF5KSB7XG4gICAgICAgIGlmIChfaSA+PSBfaXRlcmF0b3IubGVuZ3RoKSBicmVhaztcbiAgICAgICAgX3JlZiA9IF9pdGVyYXRvcltfaSsrXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9pID0gX2l0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKF9pLmRvbmUpIGJyZWFrO1xuICAgICAgICBfcmVmID0gX2kudmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBlbnRpdHkgPSBfcmVmO1xuICAgICAgYWRkT25lTXV0YWJseShlbnRpdHksIHN0YXRlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRBbGxNdXRhYmx5KGVudGl0aWVzLCBzdGF0ZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShlbnRpdGllcykpIHtcbiAgICAgIGVudGl0aWVzID0gT2JqZWN0LnZhbHVlcyhlbnRpdGllcyk7XG4gICAgfVxuXG4gICAgc3RhdGUuaWRzID0gW107XG4gICAgc3RhdGUuZW50aXRpZXMgPSB7fTtcbiAgICBhZGRNYW55TXV0YWJseShlbnRpdGllcywgc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlT25lTXV0YWJseShrZXksIHN0YXRlKSB7XG4gICAgcmV0dXJuIHJlbW92ZU1hbnlNdXRhYmx5KFtrZXldLCBzdGF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVNYW55TXV0YWJseShrZXlzLCBzdGF0ZSkge1xuICAgIHZhciBkaWRNdXRhdGUgPSBmYWxzZTtcbiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYgKGtleSBpbiBzdGF0ZS5lbnRpdGllcykge1xuICAgICAgICBkZWxldGUgc3RhdGUuZW50aXRpZXNba2V5XTtcbiAgICAgICAgZGlkTXV0YXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChkaWRNdXRhdGUpIHtcbiAgICAgIHN0YXRlLmlkcyA9IHN0YXRlLmlkcy5maWx0ZXIoZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBpZCBpbiBzdGF0ZS5lbnRpdGllcztcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUFsbE11dGFibHkoc3RhdGUpIHtcbiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCB7XG4gICAgICBpZHM6IFtdLFxuICAgICAgZW50aXRpZXM6IHt9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB0YWtlTmV3S2V5KGtleXMsIHVwZGF0ZSwgc3RhdGUpIHtcbiAgICB2YXIgb3JpZ2luYWwgPSBzdGF0ZS5lbnRpdGllc1t1cGRhdGUuaWRdO1xuICAgIHZhciB1cGRhdGVkID0gT2JqZWN0LmFzc2lnbih7fSwgb3JpZ2luYWwsIHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICB2YXIgbmV3S2V5ID0gc2VsZWN0SWRWYWx1ZSh1cGRhdGVkLCBzZWxlY3RJZCk7XG4gICAgdmFyIGhhc05ld0tleSA9IG5ld0tleSAhPT0gdXBkYXRlLmlkO1xuXG4gICAgaWYgKGhhc05ld0tleSkge1xuICAgICAga2V5c1t1cGRhdGUuaWRdID0gbmV3S2V5O1xuICAgICAgZGVsZXRlIHN0YXRlLmVudGl0aWVzW3VwZGF0ZS5pZF07XG4gICAgfVxuXG4gICAgc3RhdGUuZW50aXRpZXNbbmV3S2V5XSA9IHVwZGF0ZWQ7XG4gICAgcmV0dXJuIGhhc05ld0tleTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZU9uZU11dGFibHkodXBkYXRlLCBzdGF0ZSkge1xuICAgIHJldHVybiB1cGRhdGVNYW55TXV0YWJseShbdXBkYXRlXSwgc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTWFueU11dGFibHkodXBkYXRlcywgc3RhdGUpIHtcbiAgICB2YXIgbmV3S2V5cyA9IHt9O1xuICAgIHZhciB1cGRhdGVzUGVyRW50aXR5ID0ge307XG4gICAgdXBkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uICh1cGRhdGUpIHtcbiAgICAgIC8vIE9ubHkgYXBwbHkgdXBkYXRlcyB0byBlbnRpdGllcyB0aGF0IGN1cnJlbnRseSBleGlzdFxuICAgICAgaWYgKHVwZGF0ZS5pZCBpbiBzdGF0ZS5lbnRpdGllcykge1xuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgdXBkYXRlcyB0byBvbmUgZW50aXR5LCBtZXJnZSB0aGVtIHRvZ2V0aGVyXG4gICAgICAgIHVwZGF0ZXNQZXJFbnRpdHlbdXBkYXRlLmlkXSA9IHtcbiAgICAgICAgICBpZDogdXBkYXRlLmlkLFxuICAgICAgICAgIC8vIFNwcmVhZHMgaWdub3JlIGZhbHN5IHZhbHVlcywgc28gdGhpcyB3b3JrcyBldmVuIGlmIHRoZXJlIGlzbid0XG4gICAgICAgICAgLy8gYW4gZXhpc3RpbmcgdXBkYXRlIGFscmVhZHkgYXQgdGhpcyBrZXlcbiAgICAgICAgICBjaGFuZ2VzOiBfZXh0ZW5kcyh7fSwgdXBkYXRlc1BlckVudGl0eVt1cGRhdGUuaWRdID8gdXBkYXRlc1BlckVudGl0eVt1cGRhdGUuaWRdLmNoYW5nZXMgOiBudWxsLCB7fSwgdXBkYXRlLmNoYW5nZXMpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gICAgdXBkYXRlcyA9IE9iamVjdC52YWx1ZXModXBkYXRlc1BlckVudGl0eSk7XG4gICAgdmFyIGRpZE11dGF0ZUVudGl0aWVzID0gdXBkYXRlcy5sZW5ndGggPiAwO1xuXG4gICAgaWYgKGRpZE11dGF0ZUVudGl0aWVzKSB7XG4gICAgICB2YXIgZGlkTXV0YXRlSWRzID0gdXBkYXRlcy5maWx0ZXIoZnVuY3Rpb24gKHVwZGF0ZSkge1xuICAgICAgICByZXR1cm4gdGFrZU5ld0tleShuZXdLZXlzLCB1cGRhdGUsIHN0YXRlKTtcbiAgICAgIH0pLmxlbmd0aCA+IDA7XG5cbiAgICAgIGlmIChkaWRNdXRhdGVJZHMpIHtcbiAgICAgICAgc3RhdGUuaWRzID0gc3RhdGUuaWRzLm1hcChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICByZXR1cm4gbmV3S2V5c1tpZF0gfHwgaWQ7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwc2VydE9uZU11dGFibHkoZW50aXR5LCBzdGF0ZSkge1xuICAgIHJldHVybiB1cHNlcnRNYW55TXV0YWJseShbZW50aXR5XSwgc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBzZXJ0TWFueU11dGFibHkoZW50aXRpZXMsIHN0YXRlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGVudGl0aWVzKSkge1xuICAgICAgZW50aXRpZXMgPSBPYmplY3QudmFsdWVzKGVudGl0aWVzKTtcbiAgICB9XG5cbiAgICB2YXIgYWRkZWQgPSBbXTtcbiAgICB2YXIgdXBkYXRlZCA9IFtdO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IGVudGl0aWVzLCBfaXNBcnJheTIgPSBBcnJheS5pc0FycmF5KF9pdGVyYXRvcjIpLCBfaTIgPSAwLCBfaXRlcmF0b3IyID0gX2lzQXJyYXkyID8gX2l0ZXJhdG9yMiA6IF9pdGVyYXRvcjJbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcbiAgICAgIHZhciBfcmVmMjtcblxuICAgICAgaWYgKF9pc0FycmF5Mikge1xuICAgICAgICBpZiAoX2kyID49IF9pdGVyYXRvcjIubGVuZ3RoKSBicmVhaztcbiAgICAgICAgX3JlZjIgPSBfaXRlcmF0b3IyW19pMisrXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9pMiA9IF9pdGVyYXRvcjIubmV4dCgpO1xuICAgICAgICBpZiAoX2kyLmRvbmUpIGJyZWFrO1xuICAgICAgICBfcmVmMiA9IF9pMi52YWx1ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGVudGl0eSA9IF9yZWYyO1xuICAgICAgdmFyIGlkID0gc2VsZWN0SWRWYWx1ZShlbnRpdHksIHNlbGVjdElkKTtcblxuICAgICAgaWYgKGlkIGluIHN0YXRlLmVudGl0aWVzKSB7XG4gICAgICAgIHVwZGF0ZWQucHVzaCh7XG4gICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgIGNoYW5nZXM6IGVudGl0eVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkZGVkLnB1c2goZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVNYW55TXV0YWJseSh1cGRhdGVkLCBzdGF0ZSk7XG4gICAgYWRkTWFueU11dGFibHkoYWRkZWQsIHN0YXRlKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVtb3ZlQWxsOiBjcmVhdGVTaW5nbGVBcmd1bWVudFN0YXRlT3BlcmF0b3IocmVtb3ZlQWxsTXV0YWJseSksXG4gICAgYWRkT25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKGFkZE9uZU11dGFibHkpLFxuICAgIGFkZE1hbnk6IGNyZWF0ZVN0YXRlT3BlcmF0b3IoYWRkTWFueU11dGFibHkpLFxuICAgIHNldEFsbDogY3JlYXRlU3RhdGVPcGVyYXRvcihzZXRBbGxNdXRhYmx5KSxcbiAgICB1cGRhdGVPbmU6IGNyZWF0ZVN0YXRlT3BlcmF0b3IodXBkYXRlT25lTXV0YWJseSksXG4gICAgdXBkYXRlTWFueTogY3JlYXRlU3RhdGVPcGVyYXRvcih1cGRhdGVNYW55TXV0YWJseSksXG4gICAgdXBzZXJ0T25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwc2VydE9uZU11dGFibHkpLFxuICAgIHVwc2VydE1hbnk6IGNyZWF0ZVN0YXRlT3BlcmF0b3IodXBzZXJ0TWFueU11dGFibHkpLFxuICAgIHJlbW92ZU9uZTogY3JlYXRlU3RhdGVPcGVyYXRvcihyZW1vdmVPbmVNdXRhYmx5KSxcbiAgICByZW1vdmVNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHJlbW92ZU1hbnlNdXRhYmx5KVxuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTb3J0ZWRTdGF0ZUFkYXB0ZXIoc2VsZWN0SWQsIHNvcnQpIHtcbiAgdmFyIF9jcmVhdGVVbnNvcnRlZFN0YXRlQSA9IGNyZWF0ZVVuc29ydGVkU3RhdGVBZGFwdGVyKHNlbGVjdElkKSxcbiAgICAgIHJlbW92ZU9uZSA9IF9jcmVhdGVVbnNvcnRlZFN0YXRlQS5yZW1vdmVPbmUsXG4gICAgICByZW1vdmVNYW55ID0gX2NyZWF0ZVVuc29ydGVkU3RhdGVBLnJlbW92ZU1hbnksXG4gICAgICByZW1vdmVBbGwgPSBfY3JlYXRlVW5zb3J0ZWRTdGF0ZUEucmVtb3ZlQWxsO1xuXG4gIGZ1bmN0aW9uIGFkZE9uZU11dGFibHkoZW50aXR5LCBzdGF0ZSkge1xuICAgIHJldHVybiBhZGRNYW55TXV0YWJseShbZW50aXR5XSwgc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkTWFueU11dGFibHkobmV3TW9kZWxzLCBzdGF0ZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShuZXdNb2RlbHMpKSB7XG4gICAgICBuZXdNb2RlbHMgPSBPYmplY3QudmFsdWVzKG5ld01vZGVscyk7XG4gICAgfVxuXG4gICAgdmFyIG1vZGVscyA9IG5ld01vZGVscy5maWx0ZXIoZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgICByZXR1cm4gIShzZWxlY3RJZFZhbHVlKG1vZGVsLCBzZWxlY3RJZCkgaW4gc3RhdGUuZW50aXRpZXMpO1xuICAgIH0pO1xuXG4gICAgaWYgKG1vZGVscy5sZW5ndGggIT09IDApIHtcbiAgICAgIG1lcmdlKG1vZGVscywgc3RhdGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEFsbE11dGFibHkobW9kZWxzLCBzdGF0ZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShtb2RlbHMpKSB7XG4gICAgICBtb2RlbHMgPSBPYmplY3QudmFsdWVzKG1vZGVscyk7XG4gICAgfVxuXG4gICAgc3RhdGUuZW50aXRpZXMgPSB7fTtcbiAgICBzdGF0ZS5pZHMgPSBbXTtcbiAgICBhZGRNYW55TXV0YWJseShtb2RlbHMsIHN0YXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZU9uZU11dGFibHkodXBkYXRlLCBzdGF0ZSkge1xuICAgIHJldHVybiB1cGRhdGVNYW55TXV0YWJseShbdXBkYXRlXSwgc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGFrZVVwZGF0ZWRNb2RlbChtb2RlbHMsIHVwZGF0ZSwgc3RhdGUpIHtcbiAgICBpZiAoISh1cGRhdGUuaWQgaW4gc3RhdGUuZW50aXRpZXMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIG9yaWdpbmFsID0gc3RhdGUuZW50aXRpZXNbdXBkYXRlLmlkXTtcbiAgICB2YXIgdXBkYXRlZCA9IE9iamVjdC5hc3NpZ24oe30sIG9yaWdpbmFsLCB1cGRhdGUuY2hhbmdlcyk7XG4gICAgdmFyIG5ld0tleSA9IHNlbGVjdElkVmFsdWUodXBkYXRlZCwgc2VsZWN0SWQpO1xuICAgIGRlbGV0ZSBzdGF0ZS5lbnRpdGllc1t1cGRhdGUuaWRdO1xuICAgIG1vZGVscy5wdXNoKHVwZGF0ZWQpO1xuICAgIHJldHVybiBuZXdLZXkgIT09IHVwZGF0ZS5pZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZU1hbnlNdXRhYmx5KHVwZGF0ZXMsIHN0YXRlKSB7XG4gICAgdmFyIG1vZGVscyA9IFtdO1xuICAgIHVwZGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAodXBkYXRlKSB7XG4gICAgICByZXR1cm4gdGFrZVVwZGF0ZWRNb2RlbChtb2RlbHMsIHVwZGF0ZSwgc3RhdGUpO1xuICAgIH0pO1xuXG4gICAgaWYgKG1vZGVscy5sZW5ndGggIT09IDApIHtcbiAgICAgIG1lcmdlKG1vZGVscywgc3RhdGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwc2VydE9uZU11dGFibHkoZW50aXR5LCBzdGF0ZSkge1xuICAgIHJldHVybiB1cHNlcnRNYW55TXV0YWJseShbZW50aXR5XSwgc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBzZXJ0TWFueU11dGFibHkoZW50aXRpZXMsIHN0YXRlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGVudGl0aWVzKSkge1xuICAgICAgZW50aXRpZXMgPSBPYmplY3QudmFsdWVzKGVudGl0aWVzKTtcbiAgICB9XG5cbiAgICB2YXIgYWRkZWQgPSBbXTtcbiAgICB2YXIgdXBkYXRlZCA9IFtdO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gZW50aXRpZXMsIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheShfaXRlcmF0b3IpLCBfaSA9IDAsIF9pdGVyYXRvciA9IF9pc0FycmF5ID8gX2l0ZXJhdG9yIDogX2l0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XG4gICAgICB2YXIgX3JlZjtcblxuICAgICAgaWYgKF9pc0FycmF5KSB7XG4gICAgICAgIGlmIChfaSA+PSBfaXRlcmF0b3IubGVuZ3RoKSBicmVhaztcbiAgICAgICAgX3JlZiA9IF9pdGVyYXRvcltfaSsrXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9pID0gX2l0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKF9pLmRvbmUpIGJyZWFrO1xuICAgICAgICBfcmVmID0gX2kudmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBlbnRpdHkgPSBfcmVmO1xuICAgICAgdmFyIGlkID0gc2VsZWN0SWRWYWx1ZShlbnRpdHksIHNlbGVjdElkKTtcblxuICAgICAgaWYgKGlkIGluIHN0YXRlLmVudGl0aWVzKSB7XG4gICAgICAgIHVwZGF0ZWQucHVzaCh7XG4gICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgIGNoYW5nZXM6IGVudGl0eVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkZGVkLnB1c2goZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVNYW55TXV0YWJseSh1cGRhdGVkLCBzdGF0ZSk7XG4gICAgYWRkTWFueU11dGFibHkoYWRkZWQsIHN0YXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFyZUFycmF5c0VxdWFsKGEsIGIpIHtcbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aCAmJiBpIDwgYi5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGFbaV0gPT09IGJbaV0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1lcmdlKG1vZGVscywgc3RhdGUpIHtcbiAgICBtb2RlbHMuc29ydChzb3J0KTsgLy8gSW5zZXJ0L292ZXJ3cml0ZSBhbGwgbmV3L3VwZGF0ZWRcblxuICAgIG1vZGVscy5mb3JFYWNoKGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgc3RhdGUuZW50aXRpZXNbc2VsZWN0SWQobW9kZWwpXSA9IG1vZGVsO1xuICAgIH0pO1xuICAgIHZhciBhbGxFbnRpdGllcyA9IE9iamVjdC52YWx1ZXMoc3RhdGUuZW50aXRpZXMpO1xuICAgIGFsbEVudGl0aWVzLnNvcnQoc29ydCk7XG4gICAgdmFyIG5ld1NvcnRlZElkcyA9IGFsbEVudGl0aWVzLm1hcChzZWxlY3RJZCk7XG4gICAgdmFyIGlkcyA9IHN0YXRlLmlkcztcblxuICAgIGlmICghYXJlQXJyYXlzRXF1YWwoaWRzLCBuZXdTb3J0ZWRJZHMpKSB7XG4gICAgICBzdGF0ZS5pZHMgPSBuZXdTb3J0ZWRJZHM7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZW1vdmVPbmU6IHJlbW92ZU9uZSxcbiAgICByZW1vdmVNYW55OiByZW1vdmVNYW55LFxuICAgIHJlbW92ZUFsbDogcmVtb3ZlQWxsLFxuICAgIGFkZE9uZTogY3JlYXRlU3RhdGVPcGVyYXRvcihhZGRPbmVNdXRhYmx5KSxcbiAgICB1cGRhdGVPbmU6IGNyZWF0ZVN0YXRlT3BlcmF0b3IodXBkYXRlT25lTXV0YWJseSksXG4gICAgdXBzZXJ0T25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwc2VydE9uZU11dGFibHkpLFxuICAgIHNldEFsbDogY3JlYXRlU3RhdGVPcGVyYXRvcihzZXRBbGxNdXRhYmx5KSxcbiAgICBhZGRNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKGFkZE1hbnlNdXRhYmx5KSxcbiAgICB1cGRhdGVNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwZGF0ZU1hbnlNdXRhYmx5KSxcbiAgICB1cHNlcnRNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwc2VydE1hbnlNdXRhYmx5KVxuICB9O1xufVxuXG4vKipcclxuICpcclxuICogQHBhcmFtIG9wdGlvbnNcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlRW50aXR5QWRhcHRlcihvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICB2YXIgX3NvcnRDb21wYXJlciRzZWxlY3RJID0gX2V4dGVuZHMoe1xuICAgIHNvcnRDb21wYXJlcjogZmFsc2UsXG4gICAgc2VsZWN0SWQ6IGZ1bmN0aW9uIHNlbGVjdElkKGluc3RhbmNlKSB7XG4gICAgICByZXR1cm4gaW5zdGFuY2UuaWQ7XG4gICAgfVxuICB9LCBvcHRpb25zKSxcbiAgICAgIHNlbGVjdElkID0gX3NvcnRDb21wYXJlciRzZWxlY3RJLnNlbGVjdElkLFxuICAgICAgc29ydENvbXBhcmVyID0gX3NvcnRDb21wYXJlciRzZWxlY3RJLnNvcnRDb21wYXJlcjtcblxuICB2YXIgc3RhdGVGYWN0b3J5ID0gY3JlYXRlSW5pdGlhbFN0YXRlRmFjdG9yeSgpO1xuICB2YXIgc2VsZWN0b3JzRmFjdG9yeSA9IGNyZWF0ZVNlbGVjdG9yc0ZhY3RvcnkoKTtcbiAgdmFyIHN0YXRlQWRhcHRlciA9IHNvcnRDb21wYXJlciA/IGNyZWF0ZVNvcnRlZFN0YXRlQWRhcHRlcihzZWxlY3RJZCwgc29ydENvbXBhcmVyKSA6IGNyZWF0ZVVuc29ydGVkU3RhdGVBZGFwdGVyKHNlbGVjdElkKTtcbiAgcmV0dXJuIF9leHRlbmRzKHtcbiAgICBzZWxlY3RJZDogc2VsZWN0SWQsXG4gICAgc29ydENvbXBhcmVyOiBzb3J0Q29tcGFyZXJcbiAgfSwgc3RhdGVGYWN0b3J5LCB7fSwgc2VsZWN0b3JzRmFjdG9yeSwge30sIHN0YXRlQWRhcHRlcik7XG59XG5cbi8vIEEgdHlwZSBvZiBwcm9taXNlLWxpa2UgdGhhdCByZXNvbHZlcyBzeW5jaHJvbm91c2x5IGFuZCBzdXBwb3J0cyBvbmx5IG9uZSBvYnNlcnZlclxuXG5jb25zdCBfaXRlcmF0b3JTeW1ib2wgPSAvKiNfX1BVUkVfXyovIHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgPyAoU3ltYm9sLml0ZXJhdG9yIHx8IChTeW1ib2wuaXRlcmF0b3IgPSBTeW1ib2woXCJTeW1ib2wuaXRlcmF0b3JcIikpKSA6IFwiQEBpdGVyYXRvclwiO1xuXG5jb25zdCBfYXN5bmNJdGVyYXRvclN5bWJvbCA9IC8qI19fUFVSRV9fKi8gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IChTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCAoU3ltYm9sLmFzeW5jSXRlcmF0b3IgPSBTeW1ib2woXCJTeW1ib2wuYXN5bmNJdGVyYXRvclwiKSkpIDogXCJAQGFzeW5jSXRlcmF0b3JcIjtcblxuLy8gQXN5bmNocm9ub3VzbHkgY2FsbCBhIGZ1bmN0aW9uIGFuZCBzZW5kIGVycm9ycyB0byByZWNvdmVyeSBjb250aW51YXRpb25cbmZ1bmN0aW9uIF9jYXRjaChib2R5LCByZWNvdmVyKSB7XG5cdHRyeSB7XG5cdFx0dmFyIHJlc3VsdCA9IGJvZHkoKTtcblx0fSBjYXRjaChlKSB7XG5cdFx0cmV0dXJuIHJlY292ZXIoZSk7XG5cdH1cblx0aWYgKHJlc3VsdCAmJiByZXN1bHQudGhlbikge1xuXHRcdHJldHVybiByZXN1bHQudGhlbih2b2lkIDAsIHJlY292ZXIpO1xuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbi8vIEJvcnJvd2VkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2FpL25hbm9pZC9ibG9iLzMuMC4yL25vbi1zZWN1cmUvaW5kZXguanNcbi8vIFRoaXMgYWxwaGFiZXQgdXNlcyBgQS1aYS16MC05Xy1gIHN5bWJvbHMuIEEgZ2VuZXRpYyBhbGdvcml0aG0gaGVscGVkXG4vLyBvcHRpbWl6ZSB0aGUgZ3ppcCBjb21wcmVzc2lvbiBmb3IgdGhpcyBhbHBoYWJldC5cbnZhciB1cmxBbHBoYWJldCA9ICdNb2R1bGVTeW1iaGFzT3duUHItMDEyMzQ1Njc4OUFCQ0RFRkdITlJWZmdjdGlVdnpfS3FZVEprTHhwWlhJalFXJztcbi8qKlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG52YXIgbmFub2lkID0gZnVuY3Rpb24gbmFub2lkKHNpemUpIHtcbiAgaWYgKHNpemUgPT09IHZvaWQgMCkge1xuICAgIHNpemUgPSAyMTtcbiAgfVxuXG4gIHZhciBpZCA9ICcnOyAvLyBBIGNvbXBhY3QgYWx0ZXJuYXRpdmUgZm9yIGBmb3IgKHZhciBpID0gMDsgaSA8IHN0ZXA7IGkrKylgLlxuXG4gIHZhciBpID0gc2l6ZTtcblxuICB3aGlsZSAoaS0tKSB7XG4gICAgLy8gYHwgMGAgaXMgbW9yZSBjb21wYWN0IGFuZCBmYXN0ZXIgdGhhbiBgTWF0aC5mbG9vcigpYC5cbiAgICBpZCArPSB1cmxBbHBoYWJldFtNYXRoLnJhbmRvbSgpICogNjQgfCAwXTtcbiAgfVxuXG4gIHJldHVybiBpZDtcbn07XG5cbnZhciBjb21tb25Qcm9wZXJ0aWVzID0gWyduYW1lJywgJ21lc3NhZ2UnLCAnc3RhY2snLCAnY29kZSddO1xuXG52YXIgUmVqZWN0V2l0aFZhbHVlID0gZnVuY3Rpb24gUmVqZWN0V2l0aFZhbHVlKHBheWxvYWQpIHtcbiAgdGhpcy5wYXlsb2FkID0gcGF5bG9hZDtcbiAgdGhpcy5uYW1lID0gJ1JlamVjdFdpdGhWYWx1ZSc7XG4gIHRoaXMubWVzc2FnZSA9ICdSZWplY3RlZCc7XG59OyAvLyBSZXdvcmtlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9zaW5kcmVzb3JodXMvc2VyaWFsaXplLWVycm9yXG5cblxudmFyIG1pbmlTZXJpYWxpemVFcnJvciA9IGZ1bmN0aW9uIG1pbmlTZXJpYWxpemVFcnJvcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgIHZhciBzaW1wbGVFcnJvciA9IHt9O1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gY29tbW9uUHJvcGVydGllcywgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5KF9pdGVyYXRvciksIF9pID0gMCwgX2l0ZXJhdG9yID0gX2lzQXJyYXkgPyBfaXRlcmF0b3IgOiBfaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcbiAgICAgIHZhciBfcmVmO1xuXG4gICAgICBpZiAoX2lzQXJyYXkpIHtcbiAgICAgICAgaWYgKF9pID49IF9pdGVyYXRvci5sZW5ndGgpIGJyZWFrO1xuICAgICAgICBfcmVmID0gX2l0ZXJhdG9yW19pKytdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2kgPSBfaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICBpZiAoX2kuZG9uZSkgYnJlYWs7XG4gICAgICAgIF9yZWYgPSBfaS52YWx1ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHByb3BlcnR5ID0gX3JlZjtcblxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZVtwcm9wZXJ0eV0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNpbXBsZUVycm9yW3Byb3BlcnR5XSA9IHZhbHVlW3Byb3BlcnR5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2ltcGxlRXJyb3I7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1lc3NhZ2U6IFN0cmluZyh2YWx1ZSlcbiAgfTtcbn07XG4vKipcclxuICpcclxuICogQHBhcmFtIHR5cGVQcmVmaXhcclxuICogQHBhcmFtIHBheWxvYWRDcmVhdG9yXHJcbiAqIEBwYXJhbSBvcHRpb25zXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZUFzeW5jVGh1bmsodHlwZVByZWZpeCwgcGF5bG9hZENyZWF0b3IsIG9wdGlvbnMpIHtcbiAgdmFyIGZ1bGZpbGxlZCA9IGNyZWF0ZUFjdGlvbih0eXBlUHJlZml4ICsgJy9mdWxmaWxsZWQnLCBmdW5jdGlvbiAocmVzdWx0LCByZXF1ZXN0SWQsIGFyZykge1xuICAgIHJldHVybiB7XG4gICAgICBwYXlsb2FkOiByZXN1bHQsXG4gICAgICBtZXRhOiB7XG4gICAgICAgIGFyZzogYXJnLFxuICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3RJZCxcbiAgICAgICAgcmVxdWVzdFN0YXR1czogJ2Z1bGZpbGxlZCdcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbiAgdmFyIHBlbmRpbmcgPSBjcmVhdGVBY3Rpb24odHlwZVByZWZpeCArICcvcGVuZGluZycsIGZ1bmN0aW9uIChyZXF1ZXN0SWQsIGFyZykge1xuICAgIHJldHVybiB7XG4gICAgICBwYXlsb2FkOiB1bmRlZmluZWQsXG4gICAgICBtZXRhOiB7XG4gICAgICAgIGFyZzogYXJnLFxuICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3RJZCxcbiAgICAgICAgcmVxdWVzdFN0YXR1czogJ3BlbmRpbmcnXG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG4gIHZhciByZWplY3RlZCA9IGNyZWF0ZUFjdGlvbih0eXBlUHJlZml4ICsgJy9yZWplY3RlZCcsIGZ1bmN0aW9uIChlcnJvciwgcmVxdWVzdElkLCBhcmcpIHtcbiAgICB2YXIgcmVqZWN0ZWRXaXRoVmFsdWUgPSBlcnJvciBpbnN0YW5jZW9mIFJlamVjdFdpdGhWYWx1ZTtcbiAgICB2YXIgYWJvcnRlZCA9ICEhZXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InO1xuICAgIHZhciBjb25kaXRpb24gPSAhIWVycm9yICYmIGVycm9yLm5hbWUgPT09ICdDb25kaXRpb25FcnJvcic7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBheWxvYWQ6IGVycm9yIGluc3RhbmNlb2YgUmVqZWN0V2l0aFZhbHVlID8gZXJyb3IucGF5bG9hZCA6IHVuZGVmaW5lZCxcbiAgICAgIGVycm9yOiAob3B0aW9ucyAmJiBvcHRpb25zLnNlcmlhbGl6ZUVycm9yIHx8IG1pbmlTZXJpYWxpemVFcnJvcikoZXJyb3IgfHwgJ1JlamVjdGVkJyksXG4gICAgICBtZXRhOiB7XG4gICAgICAgIGFyZzogYXJnLFxuICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3RJZCxcbiAgICAgICAgcmVqZWN0ZWRXaXRoVmFsdWU6IHJlamVjdGVkV2l0aFZhbHVlLFxuICAgICAgICByZXF1ZXN0U3RhdHVzOiAncmVqZWN0ZWQnLFxuICAgICAgICBhYm9ydGVkOiBhYm9ydGVkLFxuICAgICAgICBjb25kaXRpb246IGNvbmRpdGlvblxuICAgICAgfVxuICAgIH07XG4gIH0pO1xuICB2YXIgZGlzcGxheWVkV2FybmluZyA9IGZhbHNlO1xuICB2YXIgQUMgPSB0eXBlb2YgQWJvcnRDb250cm9sbGVyICE9PSAndW5kZWZpbmVkJyA/IEFib3J0Q29udHJvbGxlciA6XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIF9jbGFzcygpIHtcbiAgICAgIHRoaXMuc2lnbmFsID0ge1xuICAgICAgICBhYm9ydGVkOiBmYWxzZSxcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcigpIHt9LFxuICAgICAgICBkaXNwYXRjaEV2ZW50OiBmdW5jdGlvbiBkaXNwYXRjaEV2ZW50KCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgb25hYm9ydDogZnVuY3Rpb24gb25hYm9ydCgpIHt9LFxuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKCkge31cbiAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIF9wcm90byA9IF9jbGFzcy5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uYWJvcnQgPSBmdW5jdGlvbiBhYm9ydCgpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmICghZGlzcGxheWVkV2FybmluZykge1xuICAgICAgICAgIGRpc3BsYXllZFdhcm5pbmcgPSB0cnVlO1xuICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIlRoaXMgcGxhdGZvcm0gZG9lcyBub3QgaW1wbGVtZW50IEFib3J0Q29udHJvbGxlci4gXFxuSWYgeW91IHdhbnQgdG8gdXNlIHRoZSBBYm9ydENvbnRyb2xsZXIgdG8gcmVhY3QgdG8gYGFib3J0YCBldmVudHMsIHBsZWFzZSBjb25zaWRlciBpbXBvcnRpbmcgYSBwb2x5ZmlsbCBsaWtlICdhYm9ydGNvbnRyb2xsZXItcG9seWZpbGwvZGlzdC9hYm9ydGNvbnRyb2xsZXItcG9seWZpbGwtb25seScuXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBfY2xhc3M7XG4gIH0oKTtcblxuICBmdW5jdGlvbiBhY3Rpb25DcmVhdG9yKGFyZykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gsIGdldFN0YXRlLCBleHRyYSkge1xuICAgICAgdmFyIHJlcXVlc3RJZCA9IG5hbm9pZCgpO1xuICAgICAgdmFyIGFib3J0Q29udHJvbGxlciA9IG5ldyBBQygpO1xuICAgICAgdmFyIGFib3J0UmVhc29uO1xuICAgICAgdmFyIGFib3J0ZWRQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuICAgICAgICByZXR1cm4gYWJvcnRDb250cm9sbGVyLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KHtcbiAgICAgICAgICAgIG5hbWU6ICdBYm9ydEVycm9yJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGFib3J0UmVhc29uIHx8ICdBYm9ydGVkJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgdmFyIHN0YXJ0ZWQgPSBmYWxzZTtcblxuICAgICAgZnVuY3Rpb24gYWJvcnQocmVhc29uKSB7XG4gICAgICAgIGlmIChzdGFydGVkKSB7XG4gICAgICAgICAgYWJvcnRSZWFzb24gPSByZWFzb247XG4gICAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHByb21pc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIF90ZW1wMyA9IGZ1bmN0aW9uIF90ZW1wMyhfcmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoX2V4aXQyKSByZXR1cm4gX3Jlc3VsdDtcbiAgICAgICAgICAgIC8vIFdlIGRpc3BhdGNoIHRoZSByZXN1bHQgYWN0aW9uIF9hZnRlcl8gdGhlIGNhdGNoLCB0byBhdm9pZCBoYXZpbmcgYW55IGVycm9yc1xuICAgICAgICAgICAgLy8gaGVyZSBnZXQgc3dhbGxvd2VkIGJ5IHRoZSB0cnkvY2F0Y2ggYmxvY2ssXG4gICAgICAgICAgICAvLyBwZXIgaHR0cHM6Ly90d2l0dGVyLmNvbS9kYW5fYWJyYW1vdi9zdGF0dXMvNzcwOTE0MjIxNjM4OTQyNzIwXG4gICAgICAgICAgICAvLyBhbmQgaHR0cHM6Ly9yZWR1eC10b29sa2l0LmpzLm9yZy90dXRvcmlhbHMvYWR2YW5jZWQtdHV0b3JpYWwjYXN5bmMtZXJyb3ItaGFuZGxpbmctbG9naWMtaW4tdGh1bmtzXG4gICAgICAgICAgICB2YXIgc2tpcERpc3BhdGNoID0gb3B0aW9ucyAmJiAhb3B0aW9ucy5kaXNwYXRjaENvbmRpdGlvblJlamVjdGlvbiAmJiByZWplY3RlZC5tYXRjaChmaW5hbEFjdGlvbikgJiYgZmluYWxBY3Rpb24ubWV0YS5jb25kaXRpb247XG5cbiAgICAgICAgICAgIGlmICghc2tpcERpc3BhdGNoKSB7XG4gICAgICAgICAgICAgIGRpc3BhdGNoKGZpbmFsQWN0aW9uKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZpbmFsQWN0aW9uO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgX2V4aXQyID0gZmFsc2U7XG4gICAgICAgICAgdmFyIGZpbmFsQWN0aW9uO1xuXG4gICAgICAgICAgdmFyIF90ZW1wNCA9IF9jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmNvbmRpdGlvbiAmJiBvcHRpb25zLmNvbmRpdGlvbihhcmcsIHtcbiAgICAgICAgICAgICAgZ2V0U3RhdGU6IGdldFN0YXRlLFxuICAgICAgICAgICAgICBleHRyYTogZXh0cmFcbiAgICAgICAgICAgIH0pID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdGhyb3ctbGl0ZXJhbFxuICAgICAgICAgICAgICB0aHJvdyB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ0NvbmRpdGlvbkVycm9yJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQWJvcnRlZCBkdWUgdG8gY29uZGl0aW9uIGNhbGxiYWNrIHJldHVybmluZyBmYWxzZS4nXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgZGlzcGF0Y2gocGVuZGluZyhyZXF1ZXN0SWQsIGFyZykpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShQcm9taXNlLnJhY2UoW2Fib3J0ZWRQcm9taXNlLCBQcm9taXNlLnJlc29sdmUocGF5bG9hZENyZWF0b3IoYXJnLCB7XG4gICAgICAgICAgICAgIGRpc3BhdGNoOiBkaXNwYXRjaCxcbiAgICAgICAgICAgICAgZ2V0U3RhdGU6IGdldFN0YXRlLFxuICAgICAgICAgICAgICBleHRyYTogZXh0cmEsXG4gICAgICAgICAgICAgIHJlcXVlc3RJZDogcmVxdWVzdElkLFxuICAgICAgICAgICAgICBzaWduYWw6IGFib3J0Q29udHJvbGxlci5zaWduYWwsXG4gICAgICAgICAgICAgIHJlamVjdFdpdGhWYWx1ZTogZnVuY3Rpb24gcmVqZWN0V2l0aFZhbHVlKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWplY3RXaXRoVmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSZWplY3RXaXRoVmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0ZWQocmVzdWx0LCByZXF1ZXN0SWQsIGFyZyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gZnVsZmlsbGVkKHJlc3VsdCwgcmVxdWVzdElkLCBhcmcpO1xuICAgICAgICAgICAgfSldKSkudGhlbihmdW5jdGlvbiAoX1Byb21pc2UkcmFjZSkge1xuICAgICAgICAgICAgICBmaW5hbEFjdGlvbiA9IF9Qcm9taXNlJHJhY2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBmaW5hbEFjdGlvbiA9IHJlamVjdGVkKGVyciwgcmVxdWVzdElkLCBhcmcpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShfdGVtcDQgJiYgX3RlbXA0LnRoZW4gPyBfdGVtcDQudGhlbihfdGVtcDMpIDogX3RlbXAzKF90ZW1wNCkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgICB9KCk7XG5cbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHByb21pc2UsIHtcbiAgICAgICAgYWJvcnQ6IGFib3J0LFxuICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3RJZCxcbiAgICAgICAgYXJnOiBhcmdcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmFzc2lnbihhY3Rpb25DcmVhdG9yLCB7XG4gICAgcGVuZGluZzogcGVuZGluZyxcbiAgICByZWplY3RlZDogcmVqZWN0ZWQsXG4gICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXG4gICAgdHlwZVByZWZpeDogdHlwZVByZWZpeFxuICB9KTtcbn1cbi8qKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG5mdW5jdGlvbiB1bndyYXBSZXN1bHQoYWN0aW9uKSB7XG4gIGlmIChhY3Rpb24ubWV0YSAmJiBhY3Rpb24ubWV0YS5yZWplY3RlZFdpdGhWYWx1ZSkge1xuICAgIHRocm93IGFjdGlvbi5wYXlsb2FkO1xuICB9XG5cbiAgaWYgKGFjdGlvbi5lcnJvcikge1xuICAgIHRocm93IGFjdGlvbi5lcnJvcjtcbiAgfVxuXG4gIHJldHVybiBhY3Rpb24ucGF5bG9hZDtcbn1cblxudmFyIGhhc01hdGNoRnVuY3Rpb24gPSBmdW5jdGlvbiBoYXNNYXRjaEZ1bmN0aW9uKHYpIHtcbiAgcmV0dXJuIHYgJiYgdHlwZW9mIHYubWF0Y2ggPT09ICdmdW5jdGlvbic7XG59O1xuXG52YXIgbWF0Y2hlcyA9IGZ1bmN0aW9uIG1hdGNoZXMobWF0Y2hlciwgYWN0aW9uKSB7XG4gIGlmIChoYXNNYXRjaEZ1bmN0aW9uKG1hdGNoZXIpKSB7XG4gICAgcmV0dXJuIG1hdGNoZXIubWF0Y2goYWN0aW9uKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbWF0Y2hlcihhY3Rpb24pO1xuICB9XG59O1xuLyoqXHJcbiAqIEEgaGlnaGVyLW9yZGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgbWF5IGJlIHVzZWQgdG8gY2hlY2tcclxuICogd2hldGhlciBhbiBhY3Rpb24gbWF0Y2hlcyBhbnkgb25lIG9mIHRoZSBzdXBwbGllZCB0eXBlIGd1YXJkcyBvciBhY3Rpb25cclxuICogY3JlYXRvcnMuXHJcbiAqXHJcbiAqIEBwYXJhbSBtYXRjaGVycyBUaGUgdHlwZSBndWFyZHMgb3IgYWN0aW9uIGNyZWF0b3JzIHRvIG1hdGNoIGFnYWluc3QuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cblxuZnVuY3Rpb24gaXNBbnlPZigpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1hdGNoZXJzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIG1hdGNoZXJzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICByZXR1cm4gbWF0Y2hlcnMuc29tZShmdW5jdGlvbiAobWF0Y2hlcikge1xuICAgICAgcmV0dXJuIG1hdGNoZXMobWF0Y2hlciwgYWN0aW9uKTtcbiAgICB9KTtcbiAgfTtcbn1cbi8qKlxyXG4gKiBBIGhpZ2hlci1vcmRlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IG1heSBiZSB1c2VkIHRvIGNoZWNrXHJcbiAqIHdoZXRoZXIgYW4gYWN0aW9uIG1hdGNoZXMgYWxsIG9mIHRoZSBzdXBwbGllZCB0eXBlIGd1YXJkcyBvciBhY3Rpb25cclxuICogY3JlYXRvcnMuXHJcbiAqXHJcbiAqIEBwYXJhbSBtYXRjaGVycyBUaGUgdHlwZSBndWFyZHMgb3IgYWN0aW9uIGNyZWF0b3JzIHRvIG1hdGNoIGFnYWluc3QuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cbmZ1bmN0aW9uIGlzQWxsT2YoKSB7XG4gIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgbWF0Y2hlcnMgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICBtYXRjaGVyc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICByZXR1cm4gbWF0Y2hlcnMuZXZlcnkoZnVuY3Rpb24gKG1hdGNoZXIpIHtcbiAgICAgIHJldHVybiBtYXRjaGVzKG1hdGNoZXIsIGFjdGlvbik7XG4gICAgfSk7XG4gIH07XG59XG4vKipcclxuICogQHBhcmFtIGFjdGlvbiBBIHJlZHV4IGFjdGlvblxyXG4gKiBAcGFyYW0gdmFsaWRTdGF0dXMgQW4gYXJyYXkgb2YgdmFsaWQgbWV0YS5yZXF1ZXN0U3RhdHVzIHZhbHVlc1xyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXG5cbmZ1bmN0aW9uIGhhc0V4cGVjdGVkUmVxdWVzdE1ldGFkYXRhKGFjdGlvbiwgdmFsaWRTdGF0dXMpIHtcbiAgaWYgKCFhY3Rpb24gfHwgIWFjdGlvbi5tZXRhKSByZXR1cm4gZmFsc2U7XG4gIHZhciBoYXNWYWxpZFJlcXVlc3RJZCA9IHR5cGVvZiBhY3Rpb24ubWV0YS5yZXF1ZXN0SWQgPT09ICdzdHJpbmcnO1xuICB2YXIgaGFzVmFsaWRSZXF1ZXN0U3RhdHVzID0gdmFsaWRTdGF0dXMuaW5kZXhPZihhY3Rpb24ubWV0YS5yZXF1ZXN0U3RhdHVzKSA+IC0xO1xuICByZXR1cm4gaGFzVmFsaWRSZXF1ZXN0SWQgJiYgaGFzVmFsaWRSZXF1ZXN0U3RhdHVzO1xufVxuXG5mdW5jdGlvbiBpc0FzeW5jVGh1bmtBcnJheShhKSB7XG4gIHJldHVybiB0eXBlb2YgYVswXSA9PT0gJ2Z1bmN0aW9uJyAmJiAncGVuZGluZycgaW4gYVswXSAmJiAnZnVsZmlsbGVkJyBpbiBhWzBdICYmICdyZWplY3RlZCcgaW4gYVswXTtcbn1cblxuZnVuY3Rpb24gaXNQZW5kaW5nKCkge1xuICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGFzeW5jVGh1bmtzID0gbmV3IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgYXN5bmNUaHVua3NbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgfVxuXG4gIGlmIChhc3luY1RodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgcmV0dXJuIGhhc0V4cGVjdGVkUmVxdWVzdE1ldGFkYXRhKGFjdGlvbiwgWydwZW5kaW5nJ10pO1xuICAgIH07XG4gIH1cblxuICBpZiAoIWlzQXN5bmNUaHVua0FycmF5KGFzeW5jVGh1bmtzKSkge1xuICAgIHJldHVybiBpc1BlbmRpbmcoKShhc3luY1RodW5rc1swXSk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgIC8vIG5vdGU6IHRoaXMgdHlwZSB3aWxsIGJlIGNvcnJlY3QgYmVjYXVzZSB3ZSBoYXZlIGF0IGxlYXN0IDEgYXN5bmNUaHVua1xuICAgIHZhciBtYXRjaGVycyA9IGFzeW5jVGh1bmtzLm1hcChmdW5jdGlvbiAoYXN5bmNUaHVuaykge1xuICAgICAgcmV0dXJuIGFzeW5jVGh1bmsucGVuZGluZztcbiAgICB9KTtcbiAgICB2YXIgY29tYmluZWRNYXRjaGVyID0gaXNBbnlPZi5hcHBseSh2b2lkIDAsIG1hdGNoZXJzKTtcbiAgICByZXR1cm4gY29tYmluZWRNYXRjaGVyKGFjdGlvbik7XG4gIH07XG59XG5mdW5jdGlvbiBpc1JlamVjdGVkKCkge1xuICBmb3IgKHZhciBfbGVuNCA9IGFyZ3VtZW50cy5sZW5ndGgsIGFzeW5jVGh1bmtzID0gbmV3IEFycmF5KF9sZW40KSwgX2tleTQgPSAwOyBfa2V5NCA8IF9sZW40OyBfa2V5NCsrKSB7XG4gICAgYXN5bmNUaHVua3NbX2tleTRdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgfVxuXG4gIGlmIChhc3luY1RodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgcmV0dXJuIGhhc0V4cGVjdGVkUmVxdWVzdE1ldGFkYXRhKGFjdGlvbiwgWydyZWplY3RlZCddKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKCFpc0FzeW5jVGh1bmtBcnJheShhc3luY1RodW5rcykpIHtcbiAgICByZXR1cm4gaXNSZWplY3RlZCgpKGFzeW5jVGh1bmtzWzBdKTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgLy8gbm90ZTogdGhpcyB0eXBlIHdpbGwgYmUgY29ycmVjdCBiZWNhdXNlIHdlIGhhdmUgYXQgbGVhc3QgMSBhc3luY1RodW5rXG4gICAgdmFyIG1hdGNoZXJzID0gYXN5bmNUaHVua3MubWFwKGZ1bmN0aW9uIChhc3luY1RodW5rKSB7XG4gICAgICByZXR1cm4gYXN5bmNUaHVuay5yZWplY3RlZDtcbiAgICB9KTtcbiAgICB2YXIgY29tYmluZWRNYXRjaGVyID0gaXNBbnlPZi5hcHBseSh2b2lkIDAsIG1hdGNoZXJzKTtcbiAgICByZXR1cm4gY29tYmluZWRNYXRjaGVyKGFjdGlvbik7XG4gIH07XG59XG5mdW5jdGlvbiBpc1JlamVjdGVkV2l0aFZhbHVlKCkge1xuICBmb3IgKHZhciBfbGVuNSA9IGFyZ3VtZW50cy5sZW5ndGgsIGFzeW5jVGh1bmtzID0gbmV3IEFycmF5KF9sZW41KSwgX2tleTUgPSAwOyBfa2V5NSA8IF9sZW41OyBfa2V5NSsrKSB7XG4gICAgYXN5bmNUaHVua3NbX2tleTVdID0gYXJndW1lbnRzW19rZXk1XTtcbiAgfVxuXG4gIHZhciBoYXNGbGFnID0gZnVuY3Rpb24gaGFzRmxhZyhhY3Rpb24pIHtcbiAgICByZXR1cm4gYWN0aW9uICYmIGFjdGlvbi5tZXRhICYmIGFjdGlvbi5tZXRhLnJlamVjdGVkV2l0aFZhbHVlO1xuICB9O1xuXG4gIGlmIChhc3luY1RodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgdmFyIGNvbWJpbmVkTWF0Y2hlciA9IGlzQWxsT2YoaXNSZWplY3RlZC5hcHBseSh2b2lkIDAsIGFzeW5jVGh1bmtzKSwgaGFzRmxhZyk7XG4gICAgICByZXR1cm4gY29tYmluZWRNYXRjaGVyKGFjdGlvbik7XG4gICAgfTtcbiAgfVxuXG4gIGlmICghaXNBc3luY1RodW5rQXJyYXkoYXN5bmNUaHVua3MpKSB7XG4gICAgcmV0dXJuIGlzUmVqZWN0ZWRXaXRoVmFsdWUoKShhc3luY1RodW5rc1swXSk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgIHZhciBjb21iaW5lZE1hdGNoZXIgPSBpc0FsbE9mKGlzUmVqZWN0ZWQuYXBwbHkodm9pZCAwLCBhc3luY1RodW5rcyksIGhhc0ZsYWcpO1xuICAgIHJldHVybiBjb21iaW5lZE1hdGNoZXIoYWN0aW9uKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGlzRnVsZmlsbGVkKCkge1xuICBmb3IgKHZhciBfbGVuNiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFzeW5jVGh1bmtzID0gbmV3IEFycmF5KF9sZW42KSwgX2tleTYgPSAwOyBfa2V5NiA8IF9sZW42OyBfa2V5NisrKSB7XG4gICAgYXN5bmNUaHVua3NbX2tleTZdID0gYXJndW1lbnRzW19rZXk2XTtcbiAgfVxuXG4gIGlmIChhc3luY1RodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgcmV0dXJuIGhhc0V4cGVjdGVkUmVxdWVzdE1ldGFkYXRhKGFjdGlvbiwgWydmdWxmaWxsZWQnXSk7XG4gICAgfTtcbiAgfVxuXG4gIGlmICghaXNBc3luY1RodW5rQXJyYXkoYXN5bmNUaHVua3MpKSB7XG4gICAgcmV0dXJuIGlzRnVsZmlsbGVkKCkoYXN5bmNUaHVua3NbMF0pO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAvLyBub3RlOiB0aGlzIHR5cGUgd2lsbCBiZSBjb3JyZWN0IGJlY2F1c2Ugd2UgaGF2ZSBhdCBsZWFzdCAxIGFzeW5jVGh1bmtcbiAgICB2YXIgbWF0Y2hlcnMgPSBhc3luY1RodW5rcy5tYXAoZnVuY3Rpb24gKGFzeW5jVGh1bmspIHtcbiAgICAgIHJldHVybiBhc3luY1RodW5rLmZ1bGZpbGxlZDtcbiAgICB9KTtcbiAgICB2YXIgY29tYmluZWRNYXRjaGVyID0gaXNBbnlPZi5hcHBseSh2b2lkIDAsIG1hdGNoZXJzKTtcbiAgICByZXR1cm4gY29tYmluZWRNYXRjaGVyKGFjdGlvbik7XG4gIH07XG59XG5mdW5jdGlvbiBpc0FzeW5jVGh1bmtBY3Rpb24oKSB7XG4gIGZvciAodmFyIF9sZW43ID0gYXJndW1lbnRzLmxlbmd0aCwgYXN5bmNUaHVua3MgPSBuZXcgQXJyYXkoX2xlbjcpLCBfa2V5NyA9IDA7IF9rZXk3IDwgX2xlbjc7IF9rZXk3KyspIHtcbiAgICBhc3luY1RodW5rc1tfa2V5N10gPSBhcmd1bWVudHNbX2tleTddO1xuICB9XG5cbiAgaWYgKGFzeW5jVGh1bmtzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICByZXR1cm4gaGFzRXhwZWN0ZWRSZXF1ZXN0TWV0YWRhdGEoYWN0aW9uLCBbJ3BlbmRpbmcnLCAnZnVsZmlsbGVkJywgJ3JlamVjdGVkJ10pO1xuICAgIH07XG4gIH1cblxuICBpZiAoIWlzQXN5bmNUaHVua0FycmF5KGFzeW5jVGh1bmtzKSkge1xuICAgIHJldHVybiBpc0FzeW5jVGh1bmtBY3Rpb24oKShhc3luY1RodW5rc1swXSk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgIC8vIG5vdGU6IHRoaXMgdHlwZSB3aWxsIGJlIGNvcnJlY3QgYmVjYXVzZSB3ZSBoYXZlIGF0IGxlYXN0IDEgYXN5bmNUaHVua1xuICAgIHZhciBtYXRjaGVycyA9IFtdO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gYXN5bmNUaHVua3MsIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheShfaXRlcmF0b3IpLCBfaSA9IDAsIF9pdGVyYXRvciA9IF9pc0FycmF5ID8gX2l0ZXJhdG9yIDogX2l0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XG4gICAgICB2YXIgX3JlZjtcblxuICAgICAgaWYgKF9pc0FycmF5KSB7XG4gICAgICAgIGlmIChfaSA+PSBfaXRlcmF0b3IubGVuZ3RoKSBicmVhaztcbiAgICAgICAgX3JlZiA9IF9pdGVyYXRvcltfaSsrXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9pID0gX2l0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKF9pLmRvbmUpIGJyZWFrO1xuICAgICAgICBfcmVmID0gX2kudmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBhc3luY1RodW5rID0gX3JlZjtcbiAgICAgIG1hdGNoZXJzLnB1c2goYXN5bmNUaHVuay5wZW5kaW5nLCBhc3luY1RodW5rLnJlamVjdGVkLCBhc3luY1RodW5rLmZ1bGZpbGxlZCk7XG4gICAgfVxuXG4gICAgdmFyIGNvbWJpbmVkTWF0Y2hlciA9IGlzQW55T2YuYXBwbHkodm9pZCAwLCBtYXRjaGVycyk7XG4gICAgcmV0dXJuIGNvbWJpbmVkTWF0Y2hlcihhY3Rpb24pO1xuICB9O1xufVxuXG4vLyB3ZSBhc3N1bWUgUlRLIHdpbGwgYmUgdXNlZCB3aXRoIFJlYWN0IE5hdGl2ZSBhbmQgb3RoZXIgUHJveHktbGVzc1xuLy8gZW52aXJvbm1lbnRzLiAgSW4gYWRkaXRpb24sIHRoYXQncyBob3cgSW1tZXIgNCBiZWhhdmVkLCBhbmQgc2luY2Vcbi8vIHdlIHdhbnQgdG8gc2hpcCB0aGlzIGluIGFuIFJUSyBtaW5vciwgd2Ugc2hvdWxkIGtlZXAgdGhlIHNhbWUgYmVoYXZpb3IuXG5cbmVuYWJsZUVTNSgpO1xuXG5leHBvcnQgeyBNaWRkbGV3YXJlQXJyYXksIGNvbmZpZ3VyZVN0b3JlLCBjcmVhdGVBY3Rpb24sIGNyZWF0ZUFzeW5jVGh1bmssIGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yLCBjcmVhdGVFbnRpdHlBZGFwdGVyLCBjcmVhdGVJbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUsIGNyZWF0ZVJlZHVjZXIsIGNyZWF0ZVNlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZSwgY3JlYXRlU2xpY2UsIGZpbmROb25TZXJpYWxpemFibGVWYWx1ZSwgZ2V0RGVmYXVsdE1pZGRsZXdhcmUsIGdldFR5cGUsIGlzQWxsT2YsIGlzQW55T2YsIGlzQXN5bmNUaHVua0FjdGlvbiwgaXNGdWxmaWxsZWQsIGlzSW1tdXRhYmxlRGVmYXVsdCwgaXNQZW5kaW5nLCBpc1BsYWluLCBpc1BsYWluT2JqZWN0LCBpc1JlamVjdGVkLCBpc1JlamVjdGVkV2l0aFZhbHVlLCBuYW5vaWQsIHVud3JhcFJlc3VsdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVkdXgtdG9vbGtpdC5lc20uanMubWFwXG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCJpbXBvcnQgeyBjcmVhdGVTbGljZSwgUGF5bG9hZEFjdGlvbiB9IGZyb20gXCJAcmVkdXhqcy90b29sa2l0XCI7XG5pbXBvcnQgeyBJZGVhLCBJZGVhU3RhdGUgfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHsgZmV0Y2hJZGVhcyB9IGZyb20gXCIuL21pZGRsZXdhcmVzXCI7XG5cbmNvbnN0IGluaXRpYWxTdGF0ZSA9IHtcbiAgaWRlYXM6IFtdLFxufSBhcyBJZGVhU3RhdGVcblxuY29uc3QgaWRlYXNTbGljZSA9IGNyZWF0ZVNsaWNlKHtcbiAgbmFtZTogJ2lkZWFzJyxcbiAgaW5pdGlhbFN0YXRlLFxuICByZWR1Y2Vyczoge1xuICAgIHNldElkZWFzIChzdGF0ZTogSWRlYVN0YXRlLCBhY3Rpb246IFBheWxvYWRBY3Rpb248SWRlYVtdPikge1xuICAgICAgc3RhdGUuaWRlYXMgPSBhY3Rpb24ucGF5bG9hZFxuICAgIH0sXG4gICAgYWRkSWRlYSAoc3RhdGU6IElkZWFTdGF0ZSwgYWN0aW9uOiBQYXlsb2FkQWN0aW9uPElkZWE+KSB7XG4gICAgICBjb25zdCBpZGVhID0gYWN0aW9uLnBheWxvYWRcbiAgICAgIHN0YXRlLmlkZWFzLnB1c2goaWRlYSlcbiAgICB9LFxuICAgIHJlbW92ZUlkZWEgKHN0YXRlOiBJZGVhU3RhdGUsIGFjdGlvbjogUGF5bG9hZEFjdGlvbjxudW1iZXI+KSB7XG4gICAgICBzdGF0ZS5pZGVhcy5zcGxpY2Uoc3RhdGUuaWRlYXMuZmluZEluZGV4KGlkZWEgPT4gaWRlYS5pZCA9PT0gYWN0aW9uLnBheWxvYWQpLCAxKTtcbiAgICB9XG4gIH0sXG4gIGV4dHJhUmVkdWNlcnM6IGJ1aWxkZXIgPT4ge1xuICAgIGJ1aWxkZXIuYWRkQ2FzZShmZXRjaElkZWFzLmZ1bGZpbGxlZCwgKHN0YXRlOiBJZGVhU3RhdGUsIGFjdGlvbjogUGF5bG9hZEFjdGlvbjxJZGVhW10+KSA9PiB7XG4gICAgICBzdGF0ZS5pZGVhcyA9IGFjdGlvbi5wYXlsb2FkXG4gICAgfSlcbiAgfVxufSlcblxuZXhwb3J0IGNvbnN0IHtcbiAgc2V0SWRlYXMsXG4gIGFkZElkZWEsXG59ID0gaWRlYXNTbGljZS5hY3Rpb25zXG5cbmV4cG9ydCBkZWZhdWx0IGlkZWFzU2xpY2UucmVkdWNlclxuIiwiZnVuY3Rpb24gZGVmYXVsdEVxdWFsaXR5Q2hlY2soYSwgYikge1xuICByZXR1cm4gYSA9PT0gYjtcbn1cblxuZnVuY3Rpb24gYXJlQXJndW1lbnRzU2hhbGxvd2x5RXF1YWwoZXF1YWxpdHlDaGVjaywgcHJldiwgbmV4dCkge1xuICBpZiAocHJldiA9PT0gbnVsbCB8fCBuZXh0ID09PSBudWxsIHx8IHByZXYubGVuZ3RoICE9PSBuZXh0Lmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIERvIHRoaXMgaW4gYSBmb3IgbG9vcCAoYW5kIG5vdCBhIGBmb3JFYWNoYCBvciBhbiBgZXZlcnlgKSBzbyB3ZSBjYW4gZGV0ZXJtaW5lIGVxdWFsaXR5IGFzIGZhc3QgYXMgcG9zc2libGUuXG4gIHZhciBsZW5ndGggPSBwcmV2Lmxlbmd0aDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGlmICghZXF1YWxpdHlDaGVjayhwcmV2W2ldLCBuZXh0W2ldKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdE1lbW9pemUoZnVuYykge1xuICB2YXIgZXF1YWxpdHlDaGVjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZGVmYXVsdEVxdWFsaXR5Q2hlY2s7XG5cbiAgdmFyIGxhc3RBcmdzID0gbnVsbDtcbiAgdmFyIGxhc3RSZXN1bHQgPSBudWxsO1xuICAvLyB3ZSByZWZlcmVuY2UgYXJndW1lbnRzIGluc3RlYWQgb2Ygc3ByZWFkaW5nIHRoZW0gZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnNcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWFyZUFyZ3VtZW50c1NoYWxsb3dseUVxdWFsKGVxdWFsaXR5Q2hlY2ssIGxhc3RBcmdzLCBhcmd1bWVudHMpKSB7XG4gICAgICAvLyBhcHBseSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgZm9yIHBlcmZvcm1hbmNlLlxuICAgICAgbGFzdFJlc3VsdCA9IGZ1bmMuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcbiAgICByZXR1cm4gbGFzdFJlc3VsdDtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0RGVwZW5kZW5jaWVzKGZ1bmNzKSB7XG4gIHZhciBkZXBlbmRlbmNpZXMgPSBBcnJheS5pc0FycmF5KGZ1bmNzWzBdKSA/IGZ1bmNzWzBdIDogZnVuY3M7XG5cbiAgaWYgKCFkZXBlbmRlbmNpZXMuZXZlcnkoZnVuY3Rpb24gKGRlcCkge1xuICAgIHJldHVybiB0eXBlb2YgZGVwID09PSAnZnVuY3Rpb24nO1xuICB9KSkge1xuICAgIHZhciBkZXBlbmRlbmN5VHlwZXMgPSBkZXBlbmRlbmNpZXMubWFwKGZ1bmN0aW9uIChkZXApIHtcbiAgICAgIHJldHVybiB0eXBlb2YgZGVwO1xuICAgIH0pLmpvaW4oJywgJyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTZWxlY3RvciBjcmVhdG9ycyBleHBlY3QgYWxsIGlucHV0LXNlbGVjdG9ycyB0byBiZSBmdW5jdGlvbnMsICcgKyAoJ2luc3RlYWQgcmVjZWl2ZWQgdGhlIGZvbGxvd2luZyB0eXBlczogWycgKyBkZXBlbmRlbmN5VHlwZXMgKyAnXScpKTtcbiAgfVxuXG4gIHJldHVybiBkZXBlbmRlbmNpZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZWxlY3RvckNyZWF0b3IobWVtb2l6ZSkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgbWVtb2l6ZU9wdGlvbnMgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgbWVtb2l6ZU9wdGlvbnNbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGZ1bmNzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgIGZ1bmNzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgfVxuXG4gICAgdmFyIHJlY29tcHV0YXRpb25zID0gMDtcbiAgICB2YXIgcmVzdWx0RnVuYyA9IGZ1bmNzLnBvcCgpO1xuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBnZXREZXBlbmRlbmNpZXMoZnVuY3MpO1xuXG4gICAgdmFyIG1lbW9pemVkUmVzdWx0RnVuYyA9IG1lbW9pemUuYXBwbHkodW5kZWZpbmVkLCBbZnVuY3Rpb24gKCkge1xuICAgICAgcmVjb21wdXRhdGlvbnMrKztcbiAgICAgIC8vIGFwcGx5IGFyZ3VtZW50cyBpbnN0ZWFkIG9mIHNwcmVhZGluZyBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICByZXR1cm4gcmVzdWx0RnVuYy5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH1dLmNvbmNhdChtZW1vaXplT3B0aW9ucykpO1xuXG4gICAgLy8gSWYgYSBzZWxlY3RvciBpcyBjYWxsZWQgd2l0aCB0aGUgZXhhY3Qgc2FtZSBhcmd1bWVudHMgd2UgZG9uJ3QgbmVlZCB0byB0cmF2ZXJzZSBvdXIgZGVwZW5kZW5jaWVzIGFnYWluLlxuICAgIHZhciBzZWxlY3RvciA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IFtdO1xuICAgICAgdmFyIGxlbmd0aCA9IGRlcGVuZGVuY2llcy5sZW5ndGg7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gYXBwbHkgYXJndW1lbnRzIGluc3RlYWQgb2Ygc3ByZWFkaW5nIGFuZCBtdXRhdGUgYSBsb2NhbCBsaXN0IG9mIHBhcmFtcyBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICAgIHBhcmFtcy5wdXNoKGRlcGVuZGVuY2llc1tpXS5hcHBseShudWxsLCBhcmd1bWVudHMpKTtcbiAgICAgIH1cblxuICAgICAgLy8gYXBwbHkgYXJndW1lbnRzIGluc3RlYWQgb2Ygc3ByZWFkaW5nIGZvciBwZXJmb3JtYW5jZS5cbiAgICAgIHJldHVybiBtZW1vaXplZFJlc3VsdEZ1bmMuYXBwbHkobnVsbCwgcGFyYW1zKTtcbiAgICB9KTtcblxuICAgIHNlbGVjdG9yLnJlc3VsdEZ1bmMgPSByZXN1bHRGdW5jO1xuICAgIHNlbGVjdG9yLmRlcGVuZGVuY2llcyA9IGRlcGVuZGVuY2llcztcbiAgICBzZWxlY3Rvci5yZWNvbXB1dGF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiByZWNvbXB1dGF0aW9ucztcbiAgICB9O1xuICAgIHNlbGVjdG9yLnJlc2V0UmVjb21wdXRhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gcmVjb21wdXRhdGlvbnMgPSAwO1xuICAgIH07XG4gICAgcmV0dXJuIHNlbGVjdG9yO1xuICB9O1xufVxuXG5leHBvcnQgdmFyIGNyZWF0ZVNlbGVjdG9yID0gY3JlYXRlU2VsZWN0b3JDcmVhdG9yKGRlZmF1bHRNZW1vaXplKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN0cnVjdHVyZWRTZWxlY3RvcihzZWxlY3RvcnMpIHtcbiAgdmFyIHNlbGVjdG9yQ3JlYXRvciA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogY3JlYXRlU2VsZWN0b3I7XG5cbiAgaWYgKHR5cGVvZiBzZWxlY3RvcnMgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjcmVhdGVTdHJ1Y3R1cmVkU2VsZWN0b3IgZXhwZWN0cyBmaXJzdCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QgJyArICgnd2hlcmUgZWFjaCBwcm9wZXJ0eSBpcyBhIHNlbGVjdG9yLCBpbnN0ZWFkIHJlY2VpdmVkIGEgJyArIHR5cGVvZiBzZWxlY3RvcnMpKTtcbiAgfVxuICB2YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzKHNlbGVjdG9ycyk7XG4gIHJldHVybiBzZWxlY3RvckNyZWF0b3Iob2JqZWN0S2V5cy5tYXAoZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiBzZWxlY3RvcnNba2V5XTtcbiAgfSksIGZ1bmN0aW9uICgpIHtcbiAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIHZhbHVlcyA9IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICB2YWx1ZXNbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWVzLnJlZHVjZShmdW5jdGlvbiAoY29tcG9zaXRpb24sIHZhbHVlLCBpbmRleCkge1xuICAgICAgY29tcG9zaXRpb25bb2JqZWN0S2V5c1tpbmRleF1dID0gdmFsdWU7XG4gICAgICByZXR1cm4gY29tcG9zaXRpb247XG4gICAgfSwge30pO1xuICB9KTtcbn0iLCIvKiFcbiAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG4gKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXG4gKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc3RlZmFucGVubmVyL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG4gKiBAdmVyc2lvbiAgIDMuMy4xXG4gKi9cblxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgICAoZ2xvYmFsLkVTNlByb21pc2UgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG59XG5cbnZhciBfaXNBcnJheSA9IHVuZGVmaW5lZDtcbmlmICghQXJyYXkuaXNBcnJheSkge1xuICBfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcbn0gZWxzZSB7XG4gIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbn1cblxudmFyIGlzQXJyYXkgPSBfaXNBcnJheTtcblxudmFyIGxlbiA9IDA7XG52YXIgdmVydHhOZXh0ID0gdW5kZWZpbmVkO1xudmFyIGN1c3RvbVNjaGVkdWxlckZuID0gdW5kZWZpbmVkO1xuXG52YXIgYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICBxdWV1ZVtsZW5dID0gY2FsbGJhY2s7XG4gIHF1ZXVlW2xlbiArIDFdID0gYXJnO1xuICBsZW4gKz0gMjtcbiAgaWYgKGxlbiA9PT0gMikge1xuICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cbiAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cbiAgICBpZiAoY3VzdG9tU2NoZWR1bGVyRm4pIHtcbiAgICAgIGN1c3RvbVNjaGVkdWxlckZuKGZsdXNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVGbHVzaCgpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcbiAgY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xufVxuXG5mdW5jdGlvbiBzZXRBc2FwKGFzYXBGbikge1xuICBhc2FwID0gYXNhcEZuO1xufVxuXG52YXIgYnJvd3NlcldpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkO1xudmFyIGJyb3dzZXJHbG9iYWwgPSBicm93c2VyV2luZG93IHx8IHt9O1xudmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbnZhciBpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICh7fSkudG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXG4vLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxudmFyIGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJztcblxuLy8gbm9kZVxuZnVuY3Rpb24gdXNlTmV4dFRpY2soKSB7XG4gIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gIH07XG59XG5cbi8vIHZlcnR4XG5mdW5jdGlvbiB1c2VWZXJ0eFRpbWVyKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZlcnR4TmV4dChmbHVzaCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7XG4gIHZhciBpdGVyYXRpb25zID0gMDtcbiAgdmFyIG9ic2VydmVyID0gbmV3IEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGZsdXNoKTtcbiAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gIG9ic2VydmVyLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgbm9kZS5kYXRhID0gaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDI7XG4gIH07XG59XG5cbi8vIHdlYiB3b3JrZXJcbmZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuICB9O1xufVxuXG5mdW5jdGlvbiB1c2VTZXRUaW1lb3V0KCkge1xuICAvLyBTdG9yZSBzZXRUaW1lb3V0IHJlZmVyZW5jZSBzbyBlczYtcHJvbWlzZSB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcbiAgLy8gb3RoZXIgY29kZSBtb2RpZnlpbmcgc2V0VGltZW91dCAobGlrZSBzaW5vbi51c2VGYWtlVGltZXJzKCkpXG4gIHZhciBnbG9iYWxTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2xvYmFsU2V0VGltZW91dChmbHVzaCwgMSk7XG4gIH07XG59XG5cbnZhciBxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcbmZ1bmN0aW9uIGZsdXNoKCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gcXVldWVbaV07XG4gICAgdmFyIGFyZyA9IHF1ZXVlW2kgKyAxXTtcblxuICAgIGNhbGxiYWNrKGFyZyk7XG5cbiAgICBxdWV1ZVtpXSA9IHVuZGVmaW5lZDtcbiAgICBxdWV1ZVtpICsgMV0gPSB1bmRlZmluZWQ7XG4gIH1cblxuICBsZW4gPSAwO1xufVxuXG5mdW5jdGlvbiBhdHRlbXB0VmVydHgoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHIgPSByZXF1aXJlO1xuICAgIHZhciB2ZXJ0eCA9IHIoJ3ZlcnR4Jyk7XG4gICAgdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcbiAgICByZXR1cm4gdXNlVmVydHhUaW1lcigpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbiAgfVxufVxuXG52YXIgc2NoZWR1bGVGbHVzaCA9IHVuZGVmaW5lZDtcbi8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG5pZiAoaXNOb2RlKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VOZXh0VGljaygpO1xufSBlbHNlIGlmIChCcm93c2VyTXV0YXRpb25PYnNlcnZlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTXV0YXRpb25PYnNlcnZlcigpO1xufSBlbHNlIGlmIChpc1dvcmtlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTWVzc2FnZUNoYW5uZWwoKTtcbn0gZWxzZSBpZiAoYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSBhdHRlbXB0VmVydHgoKTtcbn0gZWxzZSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VTZXRUaW1lb3V0KCk7XG59XG5cbmZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7XG5cbiAgdmFyIHBhcmVudCA9IHRoaXM7XG5cbiAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XG5cbiAgaWYgKGNoaWxkW1BST01JU0VfSURdID09PSB1bmRlZmluZWQpIHtcbiAgICBtYWtlUHJvbWlzZShjaGlsZCk7XG4gIH1cblxuICB2YXIgX3N0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblxuICBpZiAoX3N0YXRlKSB7XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjYWxsYmFjayA9IF9hcmd1bWVudHNbX3N0YXRlIC0gMV07XG4gICAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUNhbGxiYWNrKF9zdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCBwYXJlbnQuX3Jlc3VsdCk7XG4gICAgICB9KTtcbiAgICB9KSgpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG4gIH1cblxuICByZXR1cm4gY2hpbGQ7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIHJlc29sdmVkIHdpdGggdGhlXG4gIHBhc3NlZCBgdmFsdWVgLiBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVzb2x2ZSgxKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoMSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZXNvbHZlXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBbnl9IHZhbHVlIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuXG4gIGB2YWx1ZWBcbiovXG5mdW5jdGlvbiByZXNvbHZlKG9iamVjdCkge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3Rvcikge1xuICAgIHJldHVybiBvYmplY3Q7XG4gIH1cblxuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcbiAgX3Jlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbnZhciBQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDE2KTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnZhciBQRU5ESU5HID0gdm9pZCAwO1xudmFyIEZVTEZJTExFRCA9IDE7XG52YXIgUkVKRUNURUQgPSAyO1xuXG52YXIgR0VUX1RIRU5fRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTtcblxuZnVuY3Rpb24gc2VsZkZ1bGZpbGxtZW50KCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XG59XG5cbmZ1bmN0aW9uIGNhbm5vdFJldHVybk93bigpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGhlbihwcm9taXNlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBHRVRfVEhFTl9FUlJPUi5lcnJvciA9IGVycm9yO1xuICAgIHJldHVybiBHRVRfVEhFTl9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlUaGVuKHRoZW4sIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcbiAgdHJ5IHtcbiAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4pIHtcbiAgYXNhcChmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHZhciBzZWFsZWQgPSBmYWxzZTtcbiAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4sIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuXG4gICAgICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSwgJ1NldHRsZTogJyArIChwcm9taXNlLl9sYWJlbCB8fCAnIHVua25vd24gcHJvbWlzZScpKTtcblxuICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgX3JlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgfVxuICB9LCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHtcbiAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgX3JlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIHtcbiAgICBzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQpIHtcbiAgaWYgKG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IgPT09IHByb21pc2UuY29uc3RydWN0b3IgJiYgdGhlbiQkID09PSB0aGVuICYmIG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gcmVzb2x2ZSkge1xuICAgIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0aGVuJCQgPT09IEdFVF9USEVOX0VSUk9SKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIEdFVF9USEVOX0VSUk9SLmVycm9yKTtcbiAgICB9IGVsc2UgaWYgKHRoZW4kJCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbih0aGVuJCQpKSB7XG4gICAgICBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgX3JlamVjdChwcm9taXNlLCBzZWxmRnVsZmlsbG1lbnQoKSk7XG4gIH0gZWxzZSBpZiAob2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlLCBnZXRUaGVuKHZhbHVlKSk7XG4gIH0gZWxzZSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XG4gIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XG4gICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuICB9XG5cbiAgcHVibGlzaChwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gZnVsZmlsbChwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcbiAgcHJvbWlzZS5fc3RhdGUgPSBGVUxGSUxMRUQ7XG5cbiAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgIGFzYXAocHVibGlzaCwgcHJvbWlzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX3JlamVjdChwcm9taXNlLCByZWFzb24pIHtcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHByb21pc2UuX3N0YXRlID0gUkVKRUNURUQ7XG4gIHByb21pc2UuX3Jlc3VsdCA9IHJlYXNvbjtcblxuICBhc2FwKHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIF9zdWJzY3JpYmVycyA9IHBhcmVudC5fc3Vic2NyaWJlcnM7XG4gIHZhciBsZW5ndGggPSBfc3Vic2NyaWJlcnMubGVuZ3RoO1xuXG4gIHBhcmVudC5fb25lcnJvciA9IG51bGw7XG5cbiAgX3N1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdID0gb25SZWplY3Rpb247XG5cbiAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwYXJlbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2gocHJvbWlzZSkge1xuICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcbiAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcblxuICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNoaWxkID0gdW5kZWZpbmVkLFxuICAgICAgY2FsbGJhY2sgPSB1bmRlZmluZWQsXG4gICAgICBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG4gICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2soZGV0YWlsKTtcbiAgICB9XG4gIH1cblxuICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xufVxuXG5mdW5jdGlvbiBFcnJvck9iamVjdCgpIHtcbiAgdGhpcy5lcnJvciA9IG51bGw7XG59XG5cbnZhciBUUllfQ0FUQ0hfRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTtcblxuZnVuY3Rpb24gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xuICB0cnkge1xuICAgIHJldHVybiBjYWxsYmFjayhkZXRhaWwpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcbiAgICByZXR1cm4gVFJZX0NBVENIX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgdmFyIGhhc0NhbGxiYWNrID0gaXNGdW5jdGlvbihjYWxsYmFjayksXG4gICAgICB2YWx1ZSA9IHVuZGVmaW5lZCxcbiAgICAgIGVycm9yID0gdW5kZWZpbmVkLFxuICAgICAgc3VjY2VlZGVkID0gdW5kZWZpbmVkLFxuICAgICAgZmFpbGVkID0gdW5kZWZpbmVkO1xuXG4gIGlmIChoYXNDYWxsYmFjaykge1xuICAgIHZhbHVlID0gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCk7XG5cbiAgICBpZiAodmFsdWUgPT09IFRSWV9DQVRDSF9FUlJPUikge1xuICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7XG4gICAgICB2YWx1ZSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIGNhbm5vdFJldHVybk93bigpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSBkZXRhaWw7XG4gICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIC8vIG5vb3BcbiAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcbiAgICAgIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGZhaWxlZCkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBGVUxGSUxMRUQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gUkVKRUNURUQpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcbiAgdHJ5IHtcbiAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSkge1xuICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBfcmVqZWN0KHByb21pc2UsIGUpO1xuICB9XG59XG5cbnZhciBpZCA9IDA7XG5mdW5jdGlvbiBuZXh0SWQoKSB7XG4gIHJldHVybiBpZCsrO1xufVxuXG5mdW5jdGlvbiBtYWtlUHJvbWlzZShwcm9taXNlKSB7XG4gIHByb21pc2VbUFJPTUlTRV9JRF0gPSBpZCsrO1xuICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xufVxuXG5mdW5jdGlvbiBFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcblxuICBpZiAoIXRoaXMucHJvbWlzZVtQUk9NSVNFX0lEXSkge1xuICAgIG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG4gIH1cblxuICBpZiAoaXNBcnJheShpbnB1dCkpIHtcbiAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xuICAgIHRoaXMubGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblxuICAgIHRoaXMuX3Jlc3VsdCA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7XG5cbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XG4gICAgICB0aGlzLl9lbnVtZXJhdGUoKTtcbiAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIF9yZWplY3QodGhpcy5wcm9taXNlLCB2YWxpZGF0aW9uRXJyb3IoKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yKCdBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXknKTtcbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgdmFyIF9pbnB1dCA9IHRoaXMuX2lucHV0O1xuXG4gIGZvciAodmFyIGkgPSAwOyB0aGlzLl9zdGF0ZSA9PT0gUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB0aGlzLl9lYWNoRW50cnkoX2lucHV0W2ldLCBpKTtcbiAgfVxufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uIChlbnRyeSwgaSkge1xuICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7XG4gIHZhciByZXNvbHZlJCQgPSBjLnJlc29sdmU7XG5cbiAgaWYgKHJlc29sdmUkJCA9PT0gcmVzb2x2ZSkge1xuICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpO1xuXG4gICAgaWYgKF90aGVuID09PSB0aGVuICYmIGVudHJ5Ll9zdGF0ZSAhPT0gUEVORElORykge1xuICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoZW4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XG4gICAgfSBlbHNlIGlmIChjID09PSBQcm9taXNlKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKG5vb3ApO1xuICAgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgX3RoZW4pO1xuICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHByb21pc2UsIGkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24gKHJlc29sdmUkJCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSQkKGVudHJ5KTtcbiAgICAgIH0pLCBpKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fd2lsbFNldHRsZUF0KHJlc29sdmUkJChlbnRyeSksIGkpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fc2V0dGxlZEF0ID0gZnVuY3Rpb24gKHN0YXRlLCBpLCB2YWx1ZSkge1xuICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcblxuICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IFBFTkRJTkcpIHtcbiAgICB0aGlzLl9yZW1haW5pbmctLTtcblxuICAgIGlmIChzdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24gKHByb21pc2UsIGkpIHtcbiAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXG4gIHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoRlVMRklMTEVELCBpLCB2YWx1ZSk7XG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KFJFSkVDVEVELCBpLCByZWFzb24pO1xuICB9KTtcbn07XG5cbi8qKlxuICBgUHJvbWlzZS5hbGxgIGFjY2VwdHMgYW4gYXJyYXkgb2YgcHJvbWlzZXMsIGFuZCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2hcbiAgaXMgZnVsZmlsbGVkIHdpdGggYW4gYXJyYXkgb2YgZnVsZmlsbG1lbnQgdmFsdWVzIGZvciB0aGUgcGFzc2VkIHByb21pc2VzLCBvclxuICByZWplY3RlZCB3aXRoIHRoZSByZWFzb24gb2YgdGhlIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIGJlIHJlamVjdGVkLiBJdCBjYXN0cyBhbGxcbiAgZWxlbWVudHMgb2YgdGhlIHBhc3NlZCBpdGVyYWJsZSB0byBwcm9taXNlcyBhcyBpdCBydW5zIHRoaXMgYWxnb3JpdGhtLlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSByZXNvbHZlKDIpO1xuICBsZXQgcHJvbWlzZTMgPSByZXNvbHZlKDMpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gVGhlIGFycmF5IGhlcmUgd291bGQgYmUgWyAxLCAyLCAzIF07XG4gIH0pO1xuICBgYGBcblxuICBJZiBhbnkgb2YgdGhlIGBwcm9taXNlc2AgZ2l2ZW4gdG8gYGFsbGAgYXJlIHJlamVjdGVkLCB0aGUgZmlyc3QgcHJvbWlzZVxuICB0aGF0IGlzIHJlamVjdGVkIHdpbGwgYmUgZ2l2ZW4gYXMgYW4gYXJndW1lbnQgdG8gdGhlIHJldHVybmVkIHByb21pc2VzJ3NcbiAgcmVqZWN0aW9uIGhhbmRsZXIuIEZvciBleGFtcGxlOlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSByZWplY3QobmV3IEVycm9yKFwiMlwiKSk7XG4gIGxldCBwcm9taXNlMyA9IHJlamVjdChuZXcgRXJyb3IoXCIzXCIpKTtcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cbiAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zIGJlY2F1c2UgdGhlcmUgYXJlIHJlamVjdGVkIHByb21pc2VzIVxuICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgIC8vIGVycm9yLm1lc3NhZ2UgPT09IFwiMlwiXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIGFsbFxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IGVudHJpZXMgYXJyYXkgb2YgcHJvbWlzZXNcbiAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcgdGhlIHByb21pc2UuXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCBgcHJvbWlzZXNgIGhhdmUgYmVlblxuICBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29tZSByZWplY3RlZC5cbiAgQHN0YXRpY1xuKi9cbmZ1bmN0aW9uIGFsbChlbnRyaWVzKSB7XG4gIHJldHVybiBuZXcgRW51bWVyYXRvcih0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xufVxuXG4vKipcbiAgYFByb21pc2UucmFjZWAgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoIGlzIHNldHRsZWQgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZVxuICBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBzZXR0bGUuXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDInKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyByZXN1bHQgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgaXQgd2FzIHJlc29sdmVkIGJlZm9yZSBwcm9taXNlMVxuICAgIC8vIHdhcyByZXNvbHZlZC5cbiAgfSk7XG4gIGBgYFxuXG4gIGBQcm9taXNlLnJhY2VgIGlzIGRldGVybWluaXN0aWMgaW4gdGhhdCBvbmx5IHRoZSBzdGF0ZSBvZiB0aGUgZmlyc3RcbiAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFtcGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZVxuICBgcHJvbWlzZXNgIGFycmF5IGFyZ3VtZW50IGFyZSByZXNvbHZlZCwgYnV0IHRoZSBmaXJzdCBzZXR0bGVkIHByb21pc2UgaGFzXG4gIGJlY29tZSByZWplY3RlZCBiZWZvcmUgdGhlIG90aGVyIHByb21pc2VzIGJlY2FtZSBmdWxmaWxsZWQsIHRoZSByZXR1cm5lZFxuICBwcm9taXNlIHdpbGwgYmVjb21lIHJlamVjdGVkOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ3Byb21pc2UgMicpKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVuc1xuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQgYmVmb3JlXG4gICAgLy8gcHJvbWlzZSAxIGJlY2FtZSBmdWxmaWxsZWRcbiAgfSk7XG4gIGBgYFxuXG4gIEFuIGV4YW1wbGUgcmVhbC13b3JsZCB1c2UgY2FzZSBpcyBpbXBsZW1lbnRpbmcgdGltZW91dHM6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBQcm9taXNlLnJhY2UoW2FqYXgoJ2Zvby5qc29uJyksIHRpbWVvdXQoNTAwMCldKVxuICBgYGBcblxuICBAbWV0aG9kIHJhY2VcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBwcm9taXNlcyBhcnJheSBvZiBwcm9taXNlcyB0byBvYnNlcnZlXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRsZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWRcbiAgcHJvbWlzZSB0byBzZXR0bGUuXG4qL1xuZnVuY3Rpb24gcmFjZShlbnRyaWVzKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKCFpc0FycmF5KGVudHJpZXMpKSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAoXywgcmVqZWN0KSB7XG4gICAgICByZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yZWplY3RgIHJldHVybnMgYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIHBhc3NlZCBgcmVhc29uYC5cbiAgSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgcmVqZWN0XG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBbnl9IHJlYXNvbiB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aC5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgZ2l2ZW4gYHJlYXNvbmAuXG4qL1xuZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcbiAgX3JlamVjdChwcm9taXNlLCByZWFzb24pO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xufVxuXG5mdW5jdGlvbiBuZWVkc05ldygpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcbn1cblxuLyoqXG4gIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcbiAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcbiAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG4gIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXG4gIFRlcm1pbm9sb2d5XG4gIC0tLS0tLS0tLS0tXG5cbiAgLSBgcHJvbWlzZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJlaGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi5cbiAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLlxuICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG4gIC0gYGV4Y2VwdGlvbmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cgc3RhdGVtZW50LlxuICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuXG4gIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG4gIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblxuICBQcm9taXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZhbHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZFxuICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxuXG4gIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYVxuICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG4gIHNldHRsZWQgc3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IHJlamVjdHMgd2lsbFxuICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsXG4gIGl0c2VsZiBmdWxmaWxsLlxuXG5cbiAgQmFzaWMgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLVxuXG4gIGBgYGpzXG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgLy8gb24gc3VjY2Vzc1xuICAgIHJlc29sdmUodmFsdWUpO1xuXG4gICAgLy8gb24gZmFpbHVyZVxuICAgIHJlamVjdChyZWFzb24pO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyBvbiByZWplY3Rpb25cbiAgfSk7XG4gIGBgYFxuXG4gIEFkdmFuY2VkIFVzYWdlOlxuICAtLS0tLS0tLS0tLS0tLS1cblxuICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG4gIGBYTUxIdHRwUmVxdWVzdGBzLlxuXG4gIGBgYGpzXG4gIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICB4aHIuc2VuZCgpO1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcbiAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0IGNvbXBvc2FibGUgcHJpbWl0aXZlcy5cblxuICBgYGBqc1xuICBQcm9taXNlLmFsbChbXG4gICAgZ2V0SlNPTignL3Bvc3RzJyksXG4gICAgZ2V0SlNPTignL2NvbW1lbnRzJylcbiAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cbiAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9KTtcbiAgYGBgXG5cbiAgQGNsYXNzIFByb21pc2VcbiAgQHBhcmFtIHtmdW5jdGlvbn0gcmVzb2x2ZXJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAY29uc3RydWN0b3JcbiovXG5mdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKSB7XG4gIHRoaXNbUFJPTUlTRV9JRF0gPSBuZXh0SWQoKTtcbiAgdGhpcy5fcmVzdWx0ID0gdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cbiAgaWYgKG5vb3AgIT09IHJlc29sdmVyKSB7XG4gICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIG5lZWRzUmVzb2x2ZXIoKTtcbiAgICB0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSA/IGluaXRpYWxpemVQcm9taXNlKHRoaXMsIHJlc29sdmVyKSA6IG5lZWRzTmV3KCk7XG4gIH1cbn1cblxuUHJvbWlzZS5hbGwgPSBhbGw7XG5Qcm9taXNlLnJhY2UgPSByYWNlO1xuUHJvbWlzZS5yZXNvbHZlID0gcmVzb2x2ZTtcblByb21pc2UucmVqZWN0ID0gcmVqZWN0O1xuUHJvbWlzZS5fc2V0U2NoZWR1bGVyID0gc2V0U2NoZWR1bGVyO1xuUHJvbWlzZS5fc2V0QXNhcCA9IHNldEFzYXA7XG5Qcm9taXNlLl9hc2FwID0gYXNhcDtcblxuUHJvbWlzZS5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBQcm9taXNlLFxuXG4gIC8qKlxuICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuICAgIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXG4gICAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlXG4gICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIENoYWluaW5nXG4gICAgLS0tLS0tLS1cbiAgXG4gICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcbiAgICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XG4gICAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICByZXR1cm4gdXNlci5uYW1lO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkge1xuICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXG4gICAgfSk7XG4gIFxuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gaWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jy5cbiAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuICAgIH0pO1xuICAgIGBgYFxuICAgIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBBc3NpbWlsYXRpb25cbiAgICAtLS0tLS0tLS0tLS1cbiAgXG4gICAgU29tZXRpbWVzIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byBwcm9wYWdhdGUgdG8gYSBkb3duc3RyZWFtIHByb21pc2UgY2FuIG9ubHkgYmVcbiAgICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG4gICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcbiAgICB1bnRpbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBzZXR0bGVkLiBUaGlzIGlzIGNhbGxlZCAqYXNzaW1pbGF0aW9uKi5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgcmVqZWN0cywgd2UnbGwgaGF2ZSB0aGUgcmVhc29uIGhlcmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgU2ltcGxlIEV4YW1wbGVcbiAgICAtLS0tLS0tLS0tLS0tLVxuICBcbiAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBsZXQgcmVzdWx0O1xuICBcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfVxuICAgIGBgYFxuICBcbiAgICBFcnJiYWNrIEV4YW1wbGVcbiAgXG4gICAgYGBganNcbiAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgfVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBQcm9taXNlIEV4YW1wbGU7XG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEFkdmFuY2VkIEV4YW1wbGVcbiAgICAtLS0tLS0tLS0tLS0tLVxuICBcbiAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBsZXQgYXV0aG9yLCBib29rcztcbiAgXG4gICAgdHJ5IHtcbiAgICAgIGF1dGhvciA9IGZpbmRBdXRob3IoKTtcbiAgICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEVycmJhY2sgRXhhbXBsZVxuICBcbiAgICBgYGBqc1xuICBcbiAgICBmdW5jdGlvbiBmb3VuZEJvb2tzKGJvb2tzKSB7XG4gIFxuICAgIH1cbiAgXG4gICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcbiAgXG4gICAgfVxuICBcbiAgICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcbiAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFByb21pc2UgRXhhbXBsZTtcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGZpbmRBdXRob3IoKS5cbiAgICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XG4gICAgICAgIC8vIGZvdW5kIGJvb2tzXG4gICAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEBtZXRob2QgdGhlblxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZFxuICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuICB0aGVuOiB0aGVuLFxuXG4gIC8qKlxuICAgIGBjYXRjaGAgaXMgc2ltcGx5IHN1Z2FyIGZvciBgdGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uKWAgd2hpY2ggbWFrZXMgaXQgdGhlIHNhbWVcbiAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuICBcbiAgICBgYGBqc1xuICAgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpO1xuICAgIH1cbiAgXG4gICAgLy8gc3luY2hyb25vdXNcbiAgICB0cnkge1xuICAgICAgZmluZEF1dGhvcigpO1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgIH1cbiAgXG4gICAgLy8gYXN5bmMgd2l0aCBwcm9taXNlc1xuICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCBjYXRjaFxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG4gICdjYXRjaCc6IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikge1xuICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuICB9XG59O1xuXG5mdW5jdGlvbiBwb2x5ZmlsbCgpIHtcbiAgICB2YXIgbG9jYWwgPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbG9jYWwgPSBnbG9iYWw7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbG9jYWwgPSBzZWxmO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgUCA9IGxvY2FsLlByb21pc2U7XG5cbiAgICBpZiAoUCkge1xuICAgICAgICB2YXIgcHJvbWlzZVRvU3RyaW5nID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHByb21pc2VUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIHNpbGVudGx5IGlnbm9yZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcm9taXNlVG9TdHJpbmcgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2NhbC5Qcm9taXNlID0gUHJvbWlzZTtcbn1cblxucG9seWZpbGwoKTtcbi8vIFN0cmFuZ2UgY29tcGF0Li5cblByb21pc2UucG9seWZpbGwgPSBwb2x5ZmlsbDtcblByb21pc2UuUHJvbWlzZSA9IFByb21pc2U7XG5cbnJldHVybiBQcm9taXNlO1xuXG59KSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXM2LXByb21pc2UubWFwIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsImltcG9ydCAkJG9ic2VydmFibGUgZnJvbSAnc3ltYm9sLW9ic2VydmFibGUnO1xuXG4vKipcbiAqIFRoZXNlIGFyZSBwcml2YXRlIGFjdGlvbiB0eXBlcyByZXNlcnZlZCBieSBSZWR1eC5cbiAqIEZvciBhbnkgdW5rbm93biBhY3Rpb25zLCB5b3UgbXVzdCByZXR1cm4gdGhlIGN1cnJlbnQgc3RhdGUuXG4gKiBJZiB0aGUgY3VycmVudCBzdGF0ZSBpcyB1bmRlZmluZWQsIHlvdSBtdXN0IHJldHVybiB0aGUgaW5pdGlhbCBzdGF0ZS5cbiAqIERvIG5vdCByZWZlcmVuY2UgdGhlc2UgYWN0aW9uIHR5cGVzIGRpcmVjdGx5IGluIHlvdXIgY29kZS5cbiAqL1xudmFyIHJhbmRvbVN0cmluZyA9IGZ1bmN0aW9uIHJhbmRvbVN0cmluZygpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZyg3KS5zcGxpdCgnJykuam9pbignLicpO1xufTtcblxudmFyIEFjdGlvblR5cGVzID0ge1xuICBJTklUOiBcIkBAcmVkdXgvSU5JVFwiICsgcmFuZG9tU3RyaW5nKCksXG4gIFJFUExBQ0U6IFwiQEByZWR1eC9SRVBMQUNFXCIgKyByYW5kb21TdHJpbmcoKSxcbiAgUFJPQkVfVU5LTk9XTl9BQ1RJT046IGZ1bmN0aW9uIFBST0JFX1VOS05PV05fQUNUSU9OKCkge1xuICAgIHJldHVybiBcIkBAcmVkdXgvUFJPQkVfVU5LTk9XTl9BQ1RJT05cIiArIHJhbmRvbVN0cmluZygpO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7YW55fSBvYmogVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIGFyZ3VtZW50IGFwcGVhcnMgdG8gYmUgYSBwbGFpbiBvYmplY3QuXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgdmFyIHByb3RvID0gb2JqO1xuXG4gIHdoaWxlIChPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pICE9PSBudWxsKSB7XG4gICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pO1xuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopID09PSBwcm90bztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgUmVkdXggc3RvcmUgdGhhdCBob2xkcyB0aGUgc3RhdGUgdHJlZS5cbiAqIFRoZSBvbmx5IHdheSB0byBjaGFuZ2UgdGhlIGRhdGEgaW4gdGhlIHN0b3JlIGlzIHRvIGNhbGwgYGRpc3BhdGNoKClgIG9uIGl0LlxuICpcbiAqIFRoZXJlIHNob3VsZCBvbmx5IGJlIGEgc2luZ2xlIHN0b3JlIGluIHlvdXIgYXBwLiBUbyBzcGVjaWZ5IGhvdyBkaWZmZXJlbnRcbiAqIHBhcnRzIG9mIHRoZSBzdGF0ZSB0cmVlIHJlc3BvbmQgdG8gYWN0aW9ucywgeW91IG1heSBjb21iaW5lIHNldmVyYWwgcmVkdWNlcnNcbiAqIGludG8gYSBzaW5nbGUgcmVkdWNlciBmdW5jdGlvbiBieSB1c2luZyBgY29tYmluZVJlZHVjZXJzYC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWR1Y2VyIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBuZXh0IHN0YXRlIHRyZWUsIGdpdmVuXG4gKiB0aGUgY3VycmVudCBzdGF0ZSB0cmVlIGFuZCB0aGUgYWN0aW9uIHRvIGhhbmRsZS5cbiAqXG4gKiBAcGFyYW0ge2FueX0gW3ByZWxvYWRlZFN0YXRlXSBUaGUgaW5pdGlhbCBzdGF0ZS4gWW91IG1heSBvcHRpb25hbGx5IHNwZWNpZnkgaXRcbiAqIHRvIGh5ZHJhdGUgdGhlIHN0YXRlIGZyb20gdGhlIHNlcnZlciBpbiB1bml2ZXJzYWwgYXBwcywgb3IgdG8gcmVzdG9yZSBhXG4gKiBwcmV2aW91c2x5IHNlcmlhbGl6ZWQgdXNlciBzZXNzaW9uLlxuICogSWYgeW91IHVzZSBgY29tYmluZVJlZHVjZXJzYCB0byBwcm9kdWNlIHRoZSByb290IHJlZHVjZXIgZnVuY3Rpb24sIHRoaXMgbXVzdCBiZVxuICogYW4gb2JqZWN0IHdpdGggdGhlIHNhbWUgc2hhcGUgYXMgYGNvbWJpbmVSZWR1Y2Vyc2Aga2V5cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbZW5oYW5jZXJdIFRoZSBzdG9yZSBlbmhhbmNlci4gWW91IG1heSBvcHRpb25hbGx5IHNwZWNpZnkgaXRcbiAqIHRvIGVuaGFuY2UgdGhlIHN0b3JlIHdpdGggdGhpcmQtcGFydHkgY2FwYWJpbGl0aWVzIHN1Y2ggYXMgbWlkZGxld2FyZSxcbiAqIHRpbWUgdHJhdmVsLCBwZXJzaXN0ZW5jZSwgZXRjLiBUaGUgb25seSBzdG9yZSBlbmhhbmNlciB0aGF0IHNoaXBzIHdpdGggUmVkdXhcbiAqIGlzIGBhcHBseU1pZGRsZXdhcmUoKWAuXG4gKlxuICogQHJldHVybnMge1N0b3JlfSBBIFJlZHV4IHN0b3JlIHRoYXQgbGV0cyB5b3UgcmVhZCB0aGUgc3RhdGUsIGRpc3BhdGNoIGFjdGlvbnNcbiAqIGFuZCBzdWJzY3JpYmUgdG8gY2hhbmdlcy5cbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVTdG9yZShyZWR1Y2VyLCBwcmVsb2FkZWRTdGF0ZSwgZW5oYW5jZXIpIHtcbiAgdmFyIF9yZWYyO1xuXG4gIGlmICh0eXBlb2YgcHJlbG9hZGVkU3RhdGUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGVuaGFuY2VyID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBlbmhhbmNlciA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgYXJndW1lbnRzWzNdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJdCBsb29rcyBsaWtlIHlvdSBhcmUgcGFzc2luZyBzZXZlcmFsIHN0b3JlIGVuaGFuY2VycyB0byAnICsgJ2NyZWF0ZVN0b3JlKCkuIFRoaXMgaXMgbm90IHN1cHBvcnRlZC4gSW5zdGVhZCwgY29tcG9zZSB0aGVtICcgKyAndG9nZXRoZXIgdG8gYSBzaW5nbGUgZnVuY3Rpb24uJyk7XG4gIH1cblxuICBpZiAodHlwZW9mIHByZWxvYWRlZFN0YXRlID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBlbmhhbmNlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBlbmhhbmNlciA9IHByZWxvYWRlZFN0YXRlO1xuICAgIHByZWxvYWRlZFN0YXRlID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBlbmhhbmNlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIGVuaGFuY2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRoZSBlbmhhbmNlciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cblxuICAgIHJldHVybiBlbmhhbmNlcihjcmVhdGVTdG9yZSkocmVkdWNlciwgcHJlbG9hZGVkU3RhdGUpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiByZWR1Y2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgcmVkdWNlciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICB9XG5cbiAgdmFyIGN1cnJlbnRSZWR1Y2VyID0gcmVkdWNlcjtcbiAgdmFyIGN1cnJlbnRTdGF0ZSA9IHByZWxvYWRlZFN0YXRlO1xuICB2YXIgY3VycmVudExpc3RlbmVycyA9IFtdO1xuICB2YXIgbmV4dExpc3RlbmVycyA9IGN1cnJlbnRMaXN0ZW5lcnM7XG4gIHZhciBpc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG4gIC8qKlxuICAgKiBUaGlzIG1ha2VzIGEgc2hhbGxvdyBjb3B5IG9mIGN1cnJlbnRMaXN0ZW5lcnMgc28gd2UgY2FuIHVzZVxuICAgKiBuZXh0TGlzdGVuZXJzIGFzIGEgdGVtcG9yYXJ5IGxpc3Qgd2hpbGUgZGlzcGF0Y2hpbmcuXG4gICAqXG4gICAqIFRoaXMgcHJldmVudHMgYW55IGJ1Z3MgYXJvdW5kIGNvbnN1bWVycyBjYWxsaW5nXG4gICAqIHN1YnNjcmliZS91bnN1YnNjcmliZSBpbiB0aGUgbWlkZGxlIG9mIGEgZGlzcGF0Y2guXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMoKSB7XG4gICAgaWYgKG5leHRMaXN0ZW5lcnMgPT09IGN1cnJlbnRMaXN0ZW5lcnMpIHtcbiAgICAgIG5leHRMaXN0ZW5lcnMgPSBjdXJyZW50TGlzdGVuZXJzLnNsaWNlKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgc3RhdGUgdHJlZSBtYW5hZ2VkIGJ5IHRoZSBzdG9yZS5cbiAgICpcbiAgICogQHJldHVybnMge2FueX0gVGhlIGN1cnJlbnQgc3RhdGUgdHJlZSBvZiB5b3VyIGFwcGxpY2F0aW9uLlxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIGdldFN0YXRlKCkge1xuICAgIGlmIChpc0Rpc3BhdGNoaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtYXkgbm90IGNhbGwgc3RvcmUuZ2V0U3RhdGUoKSB3aGlsZSB0aGUgcmVkdWNlciBpcyBleGVjdXRpbmcuICcgKyAnVGhlIHJlZHVjZXIgaGFzIGFscmVhZHkgcmVjZWl2ZWQgdGhlIHN0YXRlIGFzIGFuIGFyZ3VtZW50LiAnICsgJ1Bhc3MgaXQgZG93biBmcm9tIHRoZSB0b3AgcmVkdWNlciBpbnN0ZWFkIG9mIHJlYWRpbmcgaXQgZnJvbSB0aGUgc3RvcmUuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGN1cnJlbnRTdGF0ZTtcbiAgfVxuICAvKipcbiAgICogQWRkcyBhIGNoYW5nZSBsaXN0ZW5lci4gSXQgd2lsbCBiZSBjYWxsZWQgYW55IHRpbWUgYW4gYWN0aW9uIGlzIGRpc3BhdGNoZWQsXG4gICAqIGFuZCBzb21lIHBhcnQgb2YgdGhlIHN0YXRlIHRyZWUgbWF5IHBvdGVudGlhbGx5IGhhdmUgY2hhbmdlZC4gWW91IG1heSB0aGVuXG4gICAqIGNhbGwgYGdldFN0YXRlKClgIHRvIHJlYWQgdGhlIGN1cnJlbnQgc3RhdGUgdHJlZSBpbnNpZGUgdGhlIGNhbGxiYWNrLlxuICAgKlxuICAgKiBZb3UgbWF5IGNhbGwgYGRpc3BhdGNoKClgIGZyb20gYSBjaGFuZ2UgbGlzdGVuZXIsIHdpdGggdGhlIGZvbGxvd2luZ1xuICAgKiBjYXZlYXRzOlxuICAgKlxuICAgKiAxLiBUaGUgc3Vic2NyaXB0aW9ucyBhcmUgc25hcHNob3R0ZWQganVzdCBiZWZvcmUgZXZlcnkgYGRpc3BhdGNoKClgIGNhbGwuXG4gICAqIElmIHlvdSBzdWJzY3JpYmUgb3IgdW5zdWJzY3JpYmUgd2hpbGUgdGhlIGxpc3RlbmVycyBhcmUgYmVpbmcgaW52b2tlZCwgdGhpc1xuICAgKiB3aWxsIG5vdCBoYXZlIGFueSBlZmZlY3Qgb24gdGhlIGBkaXNwYXRjaCgpYCB0aGF0IGlzIGN1cnJlbnRseSBpbiBwcm9ncmVzcy5cbiAgICogSG93ZXZlciwgdGhlIG5leHQgYGRpc3BhdGNoKClgIGNhbGwsIHdoZXRoZXIgbmVzdGVkIG9yIG5vdCwgd2lsbCB1c2UgYSBtb3JlXG4gICAqIHJlY2VudCBzbmFwc2hvdCBvZiB0aGUgc3Vic2NyaXB0aW9uIGxpc3QuXG4gICAqXG4gICAqIDIuIFRoZSBsaXN0ZW5lciBzaG91bGQgbm90IGV4cGVjdCB0byBzZWUgYWxsIHN0YXRlIGNoYW5nZXMsIGFzIHRoZSBzdGF0ZVxuICAgKiBtaWdodCBoYXZlIGJlZW4gdXBkYXRlZCBtdWx0aXBsZSB0aW1lcyBkdXJpbmcgYSBuZXN0ZWQgYGRpc3BhdGNoKClgIGJlZm9yZVxuICAgKiB0aGUgbGlzdGVuZXIgaXMgY2FsbGVkLiBJdCBpcywgaG93ZXZlciwgZ3VhcmFudGVlZCB0aGF0IGFsbCBzdWJzY3JpYmVyc1xuICAgKiByZWdpc3RlcmVkIGJlZm9yZSB0aGUgYGRpc3BhdGNoKClgIHN0YXJ0ZWQgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgbGF0ZXN0XG4gICAqIHN0YXRlIGJ5IHRoZSB0aW1lIGl0IGV4aXRzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciBBIGNhbGxiYWNrIHRvIGJlIGludm9rZWQgb24gZXZlcnkgZGlzcGF0Y2guXG4gICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiB0byByZW1vdmUgdGhpcyBjaGFuZ2UgbGlzdGVuZXIuXG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gc3Vic2NyaWJlKGxpc3RlbmVyKSB7XG4gICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgbGlzdGVuZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG5cbiAgICBpZiAoaXNEaXNwYXRjaGluZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbWF5IG5vdCBjYWxsIHN0b3JlLnN1YnNjcmliZSgpIHdoaWxlIHRoZSByZWR1Y2VyIGlzIGV4ZWN1dGluZy4gJyArICdJZiB5b3Ugd291bGQgbGlrZSB0byBiZSBub3RpZmllZCBhZnRlciB0aGUgc3RvcmUgaGFzIGJlZW4gdXBkYXRlZCwgc3Vic2NyaWJlIGZyb20gYSAnICsgJ2NvbXBvbmVudCBhbmQgaW52b2tlIHN0b3JlLmdldFN0YXRlKCkgaW4gdGhlIGNhbGxiYWNrIHRvIGFjY2VzcyB0aGUgbGF0ZXN0IHN0YXRlLiAnICsgJ1NlZSBodHRwczovL3JlZHV4LmpzLm9yZy9hcGktcmVmZXJlbmNlL3N0b3JlI3N1YnNjcmliZWxpc3RlbmVyIGZvciBtb3JlIGRldGFpbHMuJyk7XG4gICAgfVxuXG4gICAgdmFyIGlzU3Vic2NyaWJlZCA9IHRydWU7XG4gICAgZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycygpO1xuICAgIG5leHRMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVuc3Vic2NyaWJlKCkge1xuICAgICAgaWYgKCFpc1N1YnNjcmliZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNEaXNwYXRjaGluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBtYXkgbm90IHVuc3Vic2NyaWJlIGZyb20gYSBzdG9yZSBsaXN0ZW5lciB3aGlsZSB0aGUgcmVkdWNlciBpcyBleGVjdXRpbmcuICcgKyAnU2VlIGh0dHBzOi8vcmVkdXguanMub3JnL2FwaS1yZWZlcmVuY2Uvc3RvcmUjc3Vic2NyaWJlbGlzdGVuZXIgZm9yIG1vcmUgZGV0YWlscy4nKTtcbiAgICAgIH1cblxuICAgICAgaXNTdWJzY3JpYmVkID0gZmFsc2U7XG4gICAgICBlbnN1cmVDYW5NdXRhdGVOZXh0TGlzdGVuZXJzKCk7XG4gICAgICB2YXIgaW5kZXggPSBuZXh0TGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpO1xuICAgICAgbmV4dExpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgY3VycmVudExpc3RlbmVycyA9IG51bGw7XG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogRGlzcGF0Y2hlcyBhbiBhY3Rpb24uIEl0IGlzIHRoZSBvbmx5IHdheSB0byB0cmlnZ2VyIGEgc3RhdGUgY2hhbmdlLlxuICAgKlxuICAgKiBUaGUgYHJlZHVjZXJgIGZ1bmN0aW9uLCB1c2VkIHRvIGNyZWF0ZSB0aGUgc3RvcmUsIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlXG4gICAqIGN1cnJlbnQgc3RhdGUgdHJlZSBhbmQgdGhlIGdpdmVuIGBhY3Rpb25gLiBJdHMgcmV0dXJuIHZhbHVlIHdpbGxcbiAgICogYmUgY29uc2lkZXJlZCB0aGUgKipuZXh0Kiogc3RhdGUgb2YgdGhlIHRyZWUsIGFuZCB0aGUgY2hhbmdlIGxpc3RlbmVyc1xuICAgKiB3aWxsIGJlIG5vdGlmaWVkLlxuICAgKlxuICAgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvbmx5IHN1cHBvcnRzIHBsYWluIG9iamVjdCBhY3Rpb25zLiBJZiB5b3Ugd2FudCB0b1xuICAgKiBkaXNwYXRjaCBhIFByb21pc2UsIGFuIE9ic2VydmFibGUsIGEgdGh1bmssIG9yIHNvbWV0aGluZyBlbHNlLCB5b3UgbmVlZCB0b1xuICAgKiB3cmFwIHlvdXIgc3RvcmUgY3JlYXRpbmcgZnVuY3Rpb24gaW50byB0aGUgY29ycmVzcG9uZGluZyBtaWRkbGV3YXJlLiBGb3JcbiAgICogZXhhbXBsZSwgc2VlIHRoZSBkb2N1bWVudGF0aW9uIGZvciB0aGUgYHJlZHV4LXRodW5rYCBwYWNrYWdlLiBFdmVuIHRoZVxuICAgKiBtaWRkbGV3YXJlIHdpbGwgZXZlbnR1YWxseSBkaXNwYXRjaCBwbGFpbiBvYmplY3QgYWN0aW9ucyB1c2luZyB0aGlzIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFjdGlvbiBBIHBsYWluIG9iamVjdCByZXByZXNlbnRpbmcg4oCcd2hhdCBjaGFuZ2Vk4oCdLiBJdCBpc1xuICAgKiBhIGdvb2QgaWRlYSB0byBrZWVwIGFjdGlvbnMgc2VyaWFsaXphYmxlIHNvIHlvdSBjYW4gcmVjb3JkIGFuZCByZXBsYXkgdXNlclxuICAgKiBzZXNzaW9ucywgb3IgdXNlIHRoZSB0aW1lIHRyYXZlbGxpbmcgYHJlZHV4LWRldnRvb2xzYC4gQW4gYWN0aW9uIG11c3QgaGF2ZVxuICAgKiBhIGB0eXBlYCBwcm9wZXJ0eSB3aGljaCBtYXkgbm90IGJlIGB1bmRlZmluZWRgLiBJdCBpcyBhIGdvb2QgaWRlYSB0byB1c2VcbiAgICogc3RyaW5nIGNvbnN0YW50cyBmb3IgYWN0aW9uIHR5cGVzLlxuICAgKlxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBGb3IgY29udmVuaWVuY2UsIHRoZSBzYW1lIGFjdGlvbiBvYmplY3QgeW91IGRpc3BhdGNoZWQuXG4gICAqXG4gICAqIE5vdGUgdGhhdCwgaWYgeW91IHVzZSBhIGN1c3RvbSBtaWRkbGV3YXJlLCBpdCBtYXkgd3JhcCBgZGlzcGF0Y2goKWAgdG9cbiAgICogcmV0dXJuIHNvbWV0aGluZyBlbHNlIChmb3IgZXhhbXBsZSwgYSBQcm9taXNlIHlvdSBjYW4gYXdhaXQpLlxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIGRpc3BhdGNoKGFjdGlvbikge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChhY3Rpb24pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FjdGlvbnMgbXVzdCBiZSBwbGFpbiBvYmplY3RzLiAnICsgJ1VzZSBjdXN0b20gbWlkZGxld2FyZSBmb3IgYXN5bmMgYWN0aW9ucy4nKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGFjdGlvbi50eXBlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBY3Rpb25zIG1heSBub3QgaGF2ZSBhbiB1bmRlZmluZWQgXCJ0eXBlXCIgcHJvcGVydHkuICcgKyAnSGF2ZSB5b3UgbWlzc3BlbGxlZCBhIGNvbnN0YW50PycpO1xuICAgIH1cblxuICAgIGlmIChpc0Rpc3BhdGNoaW5nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlZHVjZXJzIG1heSBub3QgZGlzcGF0Y2ggYWN0aW9ucy4nKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgaXNEaXNwYXRjaGluZyA9IHRydWU7XG4gICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50UmVkdWNlcihjdXJyZW50U3RhdGUsIGFjdGlvbik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlzRGlzcGF0Y2hpbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgbGlzdGVuZXJzID0gY3VycmVudExpc3RlbmVycyA9IG5leHRMaXN0ZW5lcnM7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGxpc3RlbmVyID0gbGlzdGVuZXJzW2ldO1xuICAgICAgbGlzdGVuZXIoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYWN0aW9uO1xuICB9XG4gIC8qKlxuICAgKiBSZXBsYWNlcyB0aGUgcmVkdWNlciBjdXJyZW50bHkgdXNlZCBieSB0aGUgc3RvcmUgdG8gY2FsY3VsYXRlIHRoZSBzdGF0ZS5cbiAgICpcbiAgICogWW91IG1pZ2h0IG5lZWQgdGhpcyBpZiB5b3VyIGFwcCBpbXBsZW1lbnRzIGNvZGUgc3BsaXR0aW5nIGFuZCB5b3Ugd2FudCB0b1xuICAgKiBsb2FkIHNvbWUgb2YgdGhlIHJlZHVjZXJzIGR5bmFtaWNhbGx5LiBZb3UgbWlnaHQgYWxzbyBuZWVkIHRoaXMgaWYgeW91XG4gICAqIGltcGxlbWVudCBhIGhvdCByZWxvYWRpbmcgbWVjaGFuaXNtIGZvciBSZWR1eC5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFJlZHVjZXIgVGhlIHJlZHVjZXIgZm9yIHRoZSBzdG9yZSB0byB1c2UgaW5zdGVhZC5cbiAgICogQHJldHVybnMge3ZvaWR9XG4gICAqL1xuXG5cbiAgZnVuY3Rpb24gcmVwbGFjZVJlZHVjZXIobmV4dFJlZHVjZXIpIHtcbiAgICBpZiAodHlwZW9mIG5leHRSZWR1Y2VyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHRoZSBuZXh0UmVkdWNlciB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cblxuICAgIGN1cnJlbnRSZWR1Y2VyID0gbmV4dFJlZHVjZXI7IC8vIFRoaXMgYWN0aW9uIGhhcyBhIHNpbWlsaWFyIGVmZmVjdCB0byBBY3Rpb25UeXBlcy5JTklULlxuICAgIC8vIEFueSByZWR1Y2VycyB0aGF0IGV4aXN0ZWQgaW4gYm90aCB0aGUgbmV3IGFuZCBvbGQgcm9vdFJlZHVjZXJcbiAgICAvLyB3aWxsIHJlY2VpdmUgdGhlIHByZXZpb3VzIHN0YXRlLiBUaGlzIGVmZmVjdGl2ZWx5IHBvcHVsYXRlc1xuICAgIC8vIHRoZSBuZXcgc3RhdGUgdHJlZSB3aXRoIGFueSByZWxldmFudCBkYXRhIGZyb20gdGhlIG9sZCBvbmUuXG5cbiAgICBkaXNwYXRjaCh7XG4gICAgICB0eXBlOiBBY3Rpb25UeXBlcy5SRVBMQUNFXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEludGVyb3BlcmFiaWxpdHkgcG9pbnQgZm9yIG9ic2VydmFibGUvcmVhY3RpdmUgbGlicmFyaWVzLlxuICAgKiBAcmV0dXJucyB7b2JzZXJ2YWJsZX0gQSBtaW5pbWFsIG9ic2VydmFibGUgb2Ygc3RhdGUgY2hhbmdlcy5cbiAgICogRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZSB0aGUgb2JzZXJ2YWJsZSBwcm9wb3NhbDpcbiAgICogaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtb2JzZXJ2YWJsZVxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIG9ic2VydmFibGUoKSB7XG4gICAgdmFyIF9yZWY7XG5cbiAgICB2YXIgb3V0ZXJTdWJzY3JpYmUgPSBzdWJzY3JpYmU7XG4gICAgcmV0dXJuIF9yZWYgPSB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBtaW5pbWFsIG9ic2VydmFibGUgc3Vic2NyaXB0aW9uIG1ldGhvZC5cbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYnNlcnZlciBBbnkgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgYXMgYW4gb2JzZXJ2ZXIuXG4gICAgICAgKiBUaGUgb2JzZXJ2ZXIgb2JqZWN0IHNob3VsZCBoYXZlIGEgYG5leHRgIG1ldGhvZC5cbiAgICAgICAqIEByZXR1cm5zIHtzdWJzY3JpcHRpb259IEFuIG9iamVjdCB3aXRoIGFuIGB1bnN1YnNjcmliZWAgbWV0aG9kIHRoYXQgY2FuXG4gICAgICAgKiBiZSB1c2VkIHRvIHVuc3Vic2NyaWJlIHRoZSBvYnNlcnZhYmxlIGZyb20gdGhlIHN0b3JlLCBhbmQgcHJldmVudCBmdXJ0aGVyXG4gICAgICAgKiBlbWlzc2lvbiBvZiB2YWx1ZXMgZnJvbSB0aGUgb2JzZXJ2YWJsZS5cbiAgICAgICAqL1xuICAgICAgc3Vic2NyaWJlOiBmdW5jdGlvbiBzdWJzY3JpYmUob2JzZXJ2ZXIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvYnNlcnZlciAhPT0gJ29iamVjdCcgfHwgb2JzZXJ2ZXIgPT09IG51bGwpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCB0aGUgb2JzZXJ2ZXIgdG8gYmUgYW4gb2JqZWN0LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb2JzZXJ2ZVN0YXRlKCkge1xuICAgICAgICAgIGlmIChvYnNlcnZlci5uZXh0KSB7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KGdldFN0YXRlKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9ic2VydmVTdGF0ZSgpO1xuICAgICAgICB2YXIgdW5zdWJzY3JpYmUgPSBvdXRlclN1YnNjcmliZShvYnNlcnZlU3RhdGUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHVuc3Vic2NyaWJlOiB1bnN1YnNjcmliZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sIF9yZWZbJCRvYnNlcnZhYmxlXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sIF9yZWY7XG4gIH0gLy8gV2hlbiBhIHN0b3JlIGlzIGNyZWF0ZWQsIGFuIFwiSU5JVFwiIGFjdGlvbiBpcyBkaXNwYXRjaGVkIHNvIHRoYXQgZXZlcnlcbiAgLy8gcmVkdWNlciByZXR1cm5zIHRoZWlyIGluaXRpYWwgc3RhdGUuIFRoaXMgZWZmZWN0aXZlbHkgcG9wdWxhdGVzXG4gIC8vIHRoZSBpbml0aWFsIHN0YXRlIHRyZWUuXG5cblxuICBkaXNwYXRjaCh7XG4gICAgdHlwZTogQWN0aW9uVHlwZXMuSU5JVFxuICB9KTtcbiAgcmV0dXJuIF9yZWYyID0ge1xuICAgIGRpc3BhdGNoOiBkaXNwYXRjaCxcbiAgICBzdWJzY3JpYmU6IHN1YnNjcmliZSxcbiAgICBnZXRTdGF0ZTogZ2V0U3RhdGUsXG4gICAgcmVwbGFjZVJlZHVjZXI6IHJlcGxhY2VSZWR1Y2VyXG4gIH0sIF9yZWYyWyQkb2JzZXJ2YWJsZV0gPSBvYnNlcnZhYmxlLCBfcmVmMjtcbn1cblxuLyoqXG4gKiBQcmludHMgYSB3YXJuaW5nIGluIHRoZSBjb25zb2xlIGlmIGl0IGV4aXN0cy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSBUaGUgd2FybmluZyBtZXNzYWdlLlxuICogQHJldHVybnMge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHdhcm5pbmcobWVzc2FnZSkge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG4gIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGNvbnNvbGUuZXJyb3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICB9XG4gIC8qIGVzbGludC1lbmFibGUgbm8tY29uc29sZSAqL1xuXG5cbiAgdHJ5IHtcbiAgICAvLyBUaGlzIGVycm9yIHdhcyB0aHJvd24gYXMgYSBjb252ZW5pZW5jZSBzbyB0aGF0IGlmIHlvdSBlbmFibGVcbiAgICAvLyBcImJyZWFrIG9uIGFsbCBleGNlcHRpb25zXCIgaW4geW91ciBjb25zb2xlLFxuICAgIC8vIGl0IHdvdWxkIHBhdXNlIHRoZSBleGVjdXRpb24gYXQgdGhpcyBsaW5lLlxuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgfSBjYXRjaCAoZSkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1lbXB0eVxuXG59XG5cbmZ1bmN0aW9uIGdldFVuZGVmaW5lZFN0YXRlRXJyb3JNZXNzYWdlKGtleSwgYWN0aW9uKSB7XG4gIHZhciBhY3Rpb25UeXBlID0gYWN0aW9uICYmIGFjdGlvbi50eXBlO1xuICB2YXIgYWN0aW9uRGVzY3JpcHRpb24gPSBhY3Rpb25UeXBlICYmIFwiYWN0aW9uIFxcXCJcIiArIFN0cmluZyhhY3Rpb25UeXBlKSArIFwiXFxcIlwiIHx8ICdhbiBhY3Rpb24nO1xuICByZXR1cm4gXCJHaXZlbiBcIiArIGFjdGlvbkRlc2NyaXB0aW9uICsgXCIsIHJlZHVjZXIgXFxcIlwiICsga2V5ICsgXCJcXFwiIHJldHVybmVkIHVuZGVmaW5lZC4gXCIgKyBcIlRvIGlnbm9yZSBhbiBhY3Rpb24sIHlvdSBtdXN0IGV4cGxpY2l0bHkgcmV0dXJuIHRoZSBwcmV2aW91cyBzdGF0ZS4gXCIgKyBcIklmIHlvdSB3YW50IHRoaXMgcmVkdWNlciB0byBob2xkIG5vIHZhbHVlLCB5b3UgY2FuIHJldHVybiBudWxsIGluc3RlYWQgb2YgdW5kZWZpbmVkLlwiO1xufVxuXG5mdW5jdGlvbiBnZXRVbmV4cGVjdGVkU3RhdGVTaGFwZVdhcm5pbmdNZXNzYWdlKGlucHV0U3RhdGUsIHJlZHVjZXJzLCBhY3Rpb24sIHVuZXhwZWN0ZWRLZXlDYWNoZSkge1xuICB2YXIgcmVkdWNlcktleXMgPSBPYmplY3Qua2V5cyhyZWR1Y2Vycyk7XG4gIHZhciBhcmd1bWVudE5hbWUgPSBhY3Rpb24gJiYgYWN0aW9uLnR5cGUgPT09IEFjdGlvblR5cGVzLklOSVQgPyAncHJlbG9hZGVkU3RhdGUgYXJndW1lbnQgcGFzc2VkIHRvIGNyZWF0ZVN0b3JlJyA6ICdwcmV2aW91cyBzdGF0ZSByZWNlaXZlZCBieSB0aGUgcmVkdWNlcic7XG5cbiAgaWYgKHJlZHVjZXJLZXlzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAnU3RvcmUgZG9lcyBub3QgaGF2ZSBhIHZhbGlkIHJlZHVjZXIuIE1ha2Ugc3VyZSB0aGUgYXJndW1lbnQgcGFzc2VkICcgKyAndG8gY29tYmluZVJlZHVjZXJzIGlzIGFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIHJlZHVjZXJzLic7XG4gIH1cblxuICBpZiAoIWlzUGxhaW5PYmplY3QoaW5wdXRTdGF0ZSkpIHtcbiAgICByZXR1cm4gXCJUaGUgXCIgKyBhcmd1bWVudE5hbWUgKyBcIiBoYXMgdW5leHBlY3RlZCB0eXBlIG9mIFxcXCJcIiArIHt9LnRvU3RyaW5nLmNhbGwoaW5wdXRTdGF0ZSkubWF0Y2goL1xccyhbYS16fEEtWl0rKS8pWzFdICsgXCJcXFwiLiBFeHBlY3RlZCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIFwiICsgKFwia2V5czogXFxcIlwiICsgcmVkdWNlcktleXMuam9pbignXCIsIFwiJykgKyBcIlxcXCJcIik7XG4gIH1cblxuICB2YXIgdW5leHBlY3RlZEtleXMgPSBPYmplY3Qua2V5cyhpbnB1dFN0YXRlKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiAhcmVkdWNlcnMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiAhdW5leHBlY3RlZEtleUNhY2hlW2tleV07XG4gIH0pO1xuICB1bmV4cGVjdGVkS2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB1bmV4cGVjdGVkS2V5Q2FjaGVba2V5XSA9IHRydWU7XG4gIH0pO1xuICBpZiAoYWN0aW9uICYmIGFjdGlvbi50eXBlID09PSBBY3Rpb25UeXBlcy5SRVBMQUNFKSByZXR1cm47XG5cbiAgaWYgKHVuZXhwZWN0ZWRLZXlzLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gXCJVbmV4cGVjdGVkIFwiICsgKHVuZXhwZWN0ZWRLZXlzLmxlbmd0aCA+IDEgPyAna2V5cycgOiAna2V5JykgKyBcIiBcIiArIChcIlxcXCJcIiArIHVuZXhwZWN0ZWRLZXlzLmpvaW4oJ1wiLCBcIicpICsgXCJcXFwiIGZvdW5kIGluIFwiICsgYXJndW1lbnROYW1lICsgXCIuIFwiKSArIFwiRXhwZWN0ZWQgdG8gZmluZCBvbmUgb2YgdGhlIGtub3duIHJlZHVjZXIga2V5cyBpbnN0ZWFkOiBcIiArIChcIlxcXCJcIiArIHJlZHVjZXJLZXlzLmpvaW4oJ1wiLCBcIicpICsgXCJcXFwiLiBVbmV4cGVjdGVkIGtleXMgd2lsbCBiZSBpZ25vcmVkLlwiKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnRSZWR1Y2VyU2hhcGUocmVkdWNlcnMpIHtcbiAgT2JqZWN0LmtleXMocmVkdWNlcnMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciByZWR1Y2VyID0gcmVkdWNlcnNba2V5XTtcbiAgICB2YXIgaW5pdGlhbFN0YXRlID0gcmVkdWNlcih1bmRlZmluZWQsIHtcbiAgICAgIHR5cGU6IEFjdGlvblR5cGVzLklOSVRcbiAgICB9KTtcblxuICAgIGlmICh0eXBlb2YgaW5pdGlhbFN0YXRlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVkdWNlciBcXFwiXCIgKyBrZXkgKyBcIlxcXCIgcmV0dXJuZWQgdW5kZWZpbmVkIGR1cmluZyBpbml0aWFsaXphdGlvbi4gXCIgKyBcIklmIHRoZSBzdGF0ZSBwYXNzZWQgdG8gdGhlIHJlZHVjZXIgaXMgdW5kZWZpbmVkLCB5b3UgbXVzdCBcIiArIFwiZXhwbGljaXRseSByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUuIFRoZSBpbml0aWFsIHN0YXRlIG1heSBcIiArIFwibm90IGJlIHVuZGVmaW5lZC4gSWYgeW91IGRvbid0IHdhbnQgdG8gc2V0IGEgdmFsdWUgZm9yIHRoaXMgcmVkdWNlciwgXCIgKyBcInlvdSBjYW4gdXNlIG51bGwgaW5zdGVhZCBvZiB1bmRlZmluZWQuXCIpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcmVkdWNlcih1bmRlZmluZWQsIHtcbiAgICAgIHR5cGU6IEFjdGlvblR5cGVzLlBST0JFX1VOS05PV05fQUNUSU9OKClcbiAgICB9KSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlZHVjZXIgXFxcIlwiICsga2V5ICsgXCJcXFwiIHJldHVybmVkIHVuZGVmaW5lZCB3aGVuIHByb2JlZCB3aXRoIGEgcmFuZG9tIHR5cGUuIFwiICsgKFwiRG9uJ3QgdHJ5IHRvIGhhbmRsZSBcIiArIEFjdGlvblR5cGVzLklOSVQgKyBcIiBvciBvdGhlciBhY3Rpb25zIGluIFxcXCJyZWR1eC8qXFxcIiBcIikgKyBcIm5hbWVzcGFjZS4gVGhleSBhcmUgY29uc2lkZXJlZCBwcml2YXRlLiBJbnN0ZWFkLCB5b3UgbXVzdCByZXR1cm4gdGhlIFwiICsgXCJjdXJyZW50IHN0YXRlIGZvciBhbnkgdW5rbm93biBhY3Rpb25zLCB1bmxlc3MgaXQgaXMgdW5kZWZpbmVkLCBcIiArIFwiaW4gd2hpY2ggY2FzZSB5b3UgbXVzdCByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUsIHJlZ2FyZGxlc3Mgb2YgdGhlIFwiICsgXCJhY3Rpb24gdHlwZS4gVGhlIGluaXRpYWwgc3RhdGUgbWF5IG5vdCBiZSB1bmRlZmluZWQsIGJ1dCBjYW4gYmUgbnVsbC5cIik7XG4gICAgfVxuICB9KTtcbn1cbi8qKlxuICogVHVybnMgYW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgZGlmZmVyZW50IHJlZHVjZXIgZnVuY3Rpb25zLCBpbnRvIGEgc2luZ2xlXG4gKiByZWR1Y2VyIGZ1bmN0aW9uLiBJdCB3aWxsIGNhbGwgZXZlcnkgY2hpbGQgcmVkdWNlciwgYW5kIGdhdGhlciB0aGVpciByZXN1bHRzXG4gKiBpbnRvIGEgc2luZ2xlIHN0YXRlIG9iamVjdCwgd2hvc2Uga2V5cyBjb3JyZXNwb25kIHRvIHRoZSBrZXlzIG9mIHRoZSBwYXNzZWRcbiAqIHJlZHVjZXIgZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSByZWR1Y2VycyBBbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGNvcnJlc3BvbmQgdG8gZGlmZmVyZW50XG4gKiByZWR1Y2VyIGZ1bmN0aW9ucyB0aGF0IG5lZWQgdG8gYmUgY29tYmluZWQgaW50byBvbmUuIE9uZSBoYW5keSB3YXkgdG8gb2J0YWluXG4gKiBpdCBpcyB0byB1c2UgRVM2IGBpbXBvcnQgKiBhcyByZWR1Y2Vyc2Agc3ludGF4LiBUaGUgcmVkdWNlcnMgbWF5IG5ldmVyIHJldHVyblxuICogdW5kZWZpbmVkIGZvciBhbnkgYWN0aW9uLiBJbnN0ZWFkLCB0aGV5IHNob3VsZCByZXR1cm4gdGhlaXIgaW5pdGlhbCBzdGF0ZVxuICogaWYgdGhlIHN0YXRlIHBhc3NlZCB0byB0aGVtIHdhcyB1bmRlZmluZWQsIGFuZCB0aGUgY3VycmVudCBzdGF0ZSBmb3IgYW55XG4gKiB1bnJlY29nbml6ZWQgYWN0aW9uLlxuICpcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSByZWR1Y2VyIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBldmVyeSByZWR1Y2VyIGluc2lkZSB0aGVcbiAqIHBhc3NlZCBvYmplY3QsIGFuZCBidWlsZHMgYSBzdGF0ZSBvYmplY3Qgd2l0aCB0aGUgc2FtZSBzaGFwZS5cbiAqL1xuXG5cbmZ1bmN0aW9uIGNvbWJpbmVSZWR1Y2VycyhyZWR1Y2Vycykge1xuICB2YXIgcmVkdWNlcktleXMgPSBPYmplY3Qua2V5cyhyZWR1Y2Vycyk7XG4gIHZhciBmaW5hbFJlZHVjZXJzID0ge307XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWR1Y2VyS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBrZXkgPSByZWR1Y2VyS2V5c1tpXTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAodHlwZW9mIHJlZHVjZXJzW2tleV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHdhcm5pbmcoXCJObyByZWR1Y2VyIHByb3ZpZGVkIGZvciBrZXkgXFxcIlwiICsga2V5ICsgXCJcXFwiXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcmVkdWNlcnNba2V5XSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgZmluYWxSZWR1Y2Vyc1trZXldID0gcmVkdWNlcnNba2V5XTtcbiAgICB9XG4gIH1cblxuICB2YXIgZmluYWxSZWR1Y2VyS2V5cyA9IE9iamVjdC5rZXlzKGZpbmFsUmVkdWNlcnMpOyAvLyBUaGlzIGlzIHVzZWQgdG8gbWFrZSBzdXJlIHdlIGRvbid0IHdhcm4gYWJvdXQgdGhlIHNhbWVcbiAgLy8ga2V5cyBtdWx0aXBsZSB0aW1lcy5cblxuICB2YXIgdW5leHBlY3RlZEtleUNhY2hlO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdW5leHBlY3RlZEtleUNhY2hlID0ge307XG4gIH1cblxuICB2YXIgc2hhcGVBc3NlcnRpb25FcnJvcjtcblxuICB0cnkge1xuICAgIGFzc2VydFJlZHVjZXJTaGFwZShmaW5hbFJlZHVjZXJzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHNoYXBlQXNzZXJ0aW9uRXJyb3IgPSBlO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGNvbWJpbmF0aW9uKHN0YXRlLCBhY3Rpb24pIHtcbiAgICBpZiAoc3RhdGUgPT09IHZvaWQgMCkge1xuICAgICAgc3RhdGUgPSB7fTtcbiAgICB9XG5cbiAgICBpZiAoc2hhcGVBc3NlcnRpb25FcnJvcikge1xuICAgICAgdGhyb3cgc2hhcGVBc3NlcnRpb25FcnJvcjtcbiAgICB9XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFyIHdhcm5pbmdNZXNzYWdlID0gZ2V0VW5leHBlY3RlZFN0YXRlU2hhcGVXYXJuaW5nTWVzc2FnZShzdGF0ZSwgZmluYWxSZWR1Y2VycywgYWN0aW9uLCB1bmV4cGVjdGVkS2V5Q2FjaGUpO1xuXG4gICAgICBpZiAod2FybmluZ01lc3NhZ2UpIHtcbiAgICAgICAgd2FybmluZyh3YXJuaW5nTWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGhhc0NoYW5nZWQgPSBmYWxzZTtcbiAgICB2YXIgbmV4dFN0YXRlID0ge307XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgZmluYWxSZWR1Y2VyS2V5cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBfa2V5ID0gZmluYWxSZWR1Y2VyS2V5c1tfaV07XG4gICAgICB2YXIgcmVkdWNlciA9IGZpbmFsUmVkdWNlcnNbX2tleV07XG4gICAgICB2YXIgcHJldmlvdXNTdGF0ZUZvcktleSA9IHN0YXRlW19rZXldO1xuICAgICAgdmFyIG5leHRTdGF0ZUZvcktleSA9IHJlZHVjZXIocHJldmlvdXNTdGF0ZUZvcktleSwgYWN0aW9uKTtcblxuICAgICAgaWYgKHR5cGVvZiBuZXh0U3RhdGVGb3JLZXkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBnZXRVbmRlZmluZWRTdGF0ZUVycm9yTWVzc2FnZShfa2V5LCBhY3Rpb24pO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgIH1cblxuICAgICAgbmV4dFN0YXRlW19rZXldID0gbmV4dFN0YXRlRm9yS2V5O1xuICAgICAgaGFzQ2hhbmdlZCA9IGhhc0NoYW5nZWQgfHwgbmV4dFN0YXRlRm9yS2V5ICE9PSBwcmV2aW91c1N0YXRlRm9yS2V5O1xuICAgIH1cblxuICAgIGhhc0NoYW5nZWQgPSBoYXNDaGFuZ2VkIHx8IGZpbmFsUmVkdWNlcktleXMubGVuZ3RoICE9PSBPYmplY3Qua2V5cyhzdGF0ZSkubGVuZ3RoO1xuICAgIHJldHVybiBoYXNDaGFuZ2VkID8gbmV4dFN0YXRlIDogc3RhdGU7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3IsIGRpc3BhdGNoKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRpc3BhdGNoKGFjdGlvbkNyZWF0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gIH07XG59XG4vKipcbiAqIFR1cm5zIGFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGFjdGlvbiBjcmVhdG9ycywgaW50byBhbiBvYmplY3Qgd2l0aCB0aGVcbiAqIHNhbWUga2V5cywgYnV0IHdpdGggZXZlcnkgZnVuY3Rpb24gd3JhcHBlZCBpbnRvIGEgYGRpc3BhdGNoYCBjYWxsIHNvIHRoZXlcbiAqIG1heSBiZSBpbnZva2VkIGRpcmVjdGx5LiBUaGlzIGlzIGp1c3QgYSBjb252ZW5pZW5jZSBtZXRob2QsIGFzIHlvdSBjYW4gY2FsbFxuICogYHN0b3JlLmRpc3BhdGNoKE15QWN0aW9uQ3JlYXRvcnMuZG9Tb21ldGhpbmcoKSlgIHlvdXJzZWxmIGp1c3QgZmluZS5cbiAqXG4gKiBGb3IgY29udmVuaWVuY2UsIHlvdSBjYW4gYWxzbyBwYXNzIGFuIGFjdGlvbiBjcmVhdG9yIGFzIHRoZSBmaXJzdCBhcmd1bWVudCxcbiAqIGFuZCBnZXQgYSBkaXNwYXRjaCB3cmFwcGVkIGZ1bmN0aW9uIGluIHJldHVybi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufE9iamVjdH0gYWN0aW9uQ3JlYXRvcnMgQW4gb2JqZWN0IHdob3NlIHZhbHVlcyBhcmUgYWN0aW9uXG4gKiBjcmVhdG9yIGZ1bmN0aW9ucy4gT25lIGhhbmR5IHdheSB0byBvYnRhaW4gaXQgaXMgdG8gdXNlIEVTNiBgaW1wb3J0ICogYXNgXG4gKiBzeW50YXguIFlvdSBtYXkgYWxzbyBwYXNzIGEgc2luZ2xlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGRpc3BhdGNoIFRoZSBgZGlzcGF0Y2hgIGZ1bmN0aW9uIGF2YWlsYWJsZSBvbiB5b3VyIFJlZHV4XG4gKiBzdG9yZS5cbiAqXG4gKiBAcmV0dXJucyB7RnVuY3Rpb258T2JqZWN0fSBUaGUgb2JqZWN0IG1pbWlja2luZyB0aGUgb3JpZ2luYWwgb2JqZWN0LCBidXQgd2l0aFxuICogZXZlcnkgYWN0aW9uIGNyZWF0b3Igd3JhcHBlZCBpbnRvIHRoZSBgZGlzcGF0Y2hgIGNhbGwuIElmIHlvdSBwYXNzZWQgYVxuICogZnVuY3Rpb24gYXMgYGFjdGlvbkNyZWF0b3JzYCwgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGFsc28gYmUgYSBzaW5nbGVcbiAqIGZ1bmN0aW9uLlxuICovXG5cblxuZnVuY3Rpb24gYmluZEFjdGlvbkNyZWF0b3JzKGFjdGlvbkNyZWF0b3JzLCBkaXNwYXRjaCkge1xuICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3JzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3JzLCBkaXNwYXRjaCk7XG4gIH1cblxuICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3JzICE9PSAnb2JqZWN0JyB8fCBhY3Rpb25DcmVhdG9ycyA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImJpbmRBY3Rpb25DcmVhdG9ycyBleHBlY3RlZCBhbiBvYmplY3Qgb3IgYSBmdW5jdGlvbiwgaW5zdGVhZCByZWNlaXZlZCBcIiArIChhY3Rpb25DcmVhdG9ycyA9PT0gbnVsbCA/ICdudWxsJyA6IHR5cGVvZiBhY3Rpb25DcmVhdG9ycykgKyBcIi4gXCIgKyBcIkRpZCB5b3Ugd3JpdGUgXFxcImltcG9ydCBBY3Rpb25DcmVhdG9ycyBmcm9tXFxcIiBpbnN0ZWFkIG9mIFxcXCJpbXBvcnQgKiBhcyBBY3Rpb25DcmVhdG9ycyBmcm9tXFxcIj9cIik7XG4gIH1cblxuICB2YXIgYm91bmRBY3Rpb25DcmVhdG9ycyA9IHt9O1xuXG4gIGZvciAodmFyIGtleSBpbiBhY3Rpb25DcmVhdG9ycykge1xuICAgIHZhciBhY3Rpb25DcmVhdG9yID0gYWN0aW9uQ3JlYXRvcnNba2V5XTtcblxuICAgIGlmICh0eXBlb2YgYWN0aW9uQ3JlYXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgYm91bmRBY3Rpb25DcmVhdG9yc1trZXldID0gYmluZEFjdGlvbkNyZWF0b3IoYWN0aW9uQ3JlYXRvciwgZGlzcGF0Y2gpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBib3VuZEFjdGlvbkNyZWF0b3JzO1xufVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcblxuICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCkpO1xuICB9XG5cbiAgaWYgKGVudW1lcmFibGVPbmx5KSBrZXlzID0ga2V5cy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlO1xuICB9KTtcbiAgcmV0dXJuIGtleXM7XG59XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQyKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9O1xuXG4gICAgaWYgKGkgJSAyKSB7XG4gICAgICBvd25LZXlzKHNvdXJjZSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3duS2V5cyhzb3VyY2UpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbi8qKlxuICogQ29tcG9zZXMgc2luZ2xlLWFyZ3VtZW50IGZ1bmN0aW9ucyBmcm9tIHJpZ2h0IHRvIGxlZnQuIFRoZSByaWdodG1vc3RcbiAqIGZ1bmN0aW9uIGNhbiB0YWtlIG11bHRpcGxlIGFyZ3VtZW50cyBhcyBpdCBwcm92aWRlcyB0aGUgc2lnbmF0dXJlIGZvclxuICogdGhlIHJlc3VsdGluZyBjb21wb3NpdGUgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gZnVuY3MgVGhlIGZ1bmN0aW9ucyB0byBjb21wb3NlLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIG9idGFpbmVkIGJ5IGNvbXBvc2luZyB0aGUgYXJndW1lbnQgZnVuY3Rpb25zXG4gKiBmcm9tIHJpZ2h0IHRvIGxlZnQuIEZvciBleGFtcGxlLCBjb21wb3NlKGYsIGcsIGgpIGlzIGlkZW50aWNhbCB0byBkb2luZ1xuICogKC4uLmFyZ3MpID0+IGYoZyhoKC4uLmFyZ3MpKSkuXG4gKi9cbmZ1bmN0aW9uIGNvbXBvc2UoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBmdW5jcyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBmdW5jc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIGlmIChmdW5jcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFyZykge1xuICAgICAgcmV0dXJuIGFyZztcbiAgICB9O1xuICB9XG5cbiAgaWYgKGZ1bmNzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiBmdW5jc1swXTtcbiAgfVxuXG4gIHJldHVybiBmdW5jcy5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGEoYi5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cykpO1xuICAgIH07XG4gIH0pO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBzdG9yZSBlbmhhbmNlciB0aGF0IGFwcGxpZXMgbWlkZGxld2FyZSB0byB0aGUgZGlzcGF0Y2ggbWV0aG9kXG4gKiBvZiB0aGUgUmVkdXggc3RvcmUuIFRoaXMgaXMgaGFuZHkgZm9yIGEgdmFyaWV0eSBvZiB0YXNrcywgc3VjaCBhcyBleHByZXNzaW5nXG4gKiBhc3luY2hyb25vdXMgYWN0aW9ucyBpbiBhIGNvbmNpc2UgbWFubmVyLCBvciBsb2dnaW5nIGV2ZXJ5IGFjdGlvbiBwYXlsb2FkLlxuICpcbiAqIFNlZSBgcmVkdXgtdGh1bmtgIHBhY2thZ2UgYXMgYW4gZXhhbXBsZSBvZiB0aGUgUmVkdXggbWlkZGxld2FyZS5cbiAqXG4gKiBCZWNhdXNlIG1pZGRsZXdhcmUgaXMgcG90ZW50aWFsbHkgYXN5bmNocm9ub3VzLCB0aGlzIHNob3VsZCBiZSB0aGUgZmlyc3RcbiAqIHN0b3JlIGVuaGFuY2VyIGluIHRoZSBjb21wb3NpdGlvbiBjaGFpbi5cbiAqXG4gKiBOb3RlIHRoYXQgZWFjaCBtaWRkbGV3YXJlIHdpbGwgYmUgZ2l2ZW4gdGhlIGBkaXNwYXRjaGAgYW5kIGBnZXRTdGF0ZWAgZnVuY3Rpb25zXG4gKiBhcyBuYW1lZCBhcmd1bWVudHMuXG4gKlxuICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gbWlkZGxld2FyZXMgVGhlIG1pZGRsZXdhcmUgY2hhaW4gdG8gYmUgYXBwbGllZC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBzdG9yZSBlbmhhbmNlciBhcHBseWluZyB0aGUgbWlkZGxld2FyZS5cbiAqL1xuXG5mdW5jdGlvbiBhcHBseU1pZGRsZXdhcmUoKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBtaWRkbGV3YXJlcyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBtaWRkbGV3YXJlc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoY3JlYXRlU3RvcmUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHN0b3JlID0gY3JlYXRlU3RvcmUuYXBwbHkodm9pZCAwLCBhcmd1bWVudHMpO1xuXG4gICAgICB2YXIgX2Rpc3BhdGNoID0gZnVuY3Rpb24gZGlzcGF0Y2goKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRGlzcGF0Y2hpbmcgd2hpbGUgY29uc3RydWN0aW5nIHlvdXIgbWlkZGxld2FyZSBpcyBub3QgYWxsb3dlZC4gJyArICdPdGhlciBtaWRkbGV3YXJlIHdvdWxkIG5vdCBiZSBhcHBsaWVkIHRvIHRoaXMgZGlzcGF0Y2guJyk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgbWlkZGxld2FyZUFQSSA9IHtcbiAgICAgICAgZ2V0U3RhdGU6IHN0b3JlLmdldFN0YXRlLFxuICAgICAgICBkaXNwYXRjaDogZnVuY3Rpb24gZGlzcGF0Y2goKSB7XG4gICAgICAgICAgcmV0dXJuIF9kaXNwYXRjaC5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB2YXIgY2hhaW4gPSBtaWRkbGV3YXJlcy5tYXAoZnVuY3Rpb24gKG1pZGRsZXdhcmUpIHtcbiAgICAgICAgcmV0dXJuIG1pZGRsZXdhcmUobWlkZGxld2FyZUFQSSk7XG4gICAgICB9KTtcbiAgICAgIF9kaXNwYXRjaCA9IGNvbXBvc2UuYXBwbHkodm9pZCAwLCBjaGFpbikoc3RvcmUuZGlzcGF0Y2gpO1xuICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQyKHt9LCBzdG9yZSwge1xuICAgICAgICBkaXNwYXRjaDogX2Rpc3BhdGNoXG4gICAgICB9KTtcbiAgICB9O1xuICB9O1xufVxuXG4vKlxuICogVGhpcyBpcyBhIGR1bW15IGZ1bmN0aW9uIHRvIGNoZWNrIGlmIHRoZSBmdW5jdGlvbiBuYW1lIGhhcyBiZWVuIGFsdGVyZWQgYnkgbWluaWZpY2F0aW9uLlxuICogSWYgdGhlIGZ1bmN0aW9uIGhhcyBiZWVuIG1pbmlmaWVkIGFuZCBOT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLCB3YXJuIHRoZSB1c2VyLlxuICovXG5cbmZ1bmN0aW9uIGlzQ3J1c2hlZCgpIHt9XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHR5cGVvZiBpc0NydXNoZWQubmFtZSA9PT0gJ3N0cmluZycgJiYgaXNDcnVzaGVkLm5hbWUgIT09ICdpc0NydXNoZWQnKSB7XG4gIHdhcm5pbmcoJ1lvdSBhcmUgY3VycmVudGx5IHVzaW5nIG1pbmlmaWVkIGNvZGUgb3V0c2lkZSBvZiBOT0RFX0VOViA9PT0gXCJwcm9kdWN0aW9uXCIuICcgKyAnVGhpcyBtZWFucyB0aGF0IHlvdSBhcmUgcnVubmluZyBhIHNsb3dlciBkZXZlbG9wbWVudCBidWlsZCBvZiBSZWR1eC4gJyArICdZb3UgY2FuIHVzZSBsb29zZS1lbnZpZnkgKGh0dHBzOi8vZ2l0aHViLmNvbS96ZXJ0b3NoL2xvb3NlLWVudmlmeSkgZm9yIGJyb3dzZXJpZnkgJyArICdvciBzZXR0aW5nIG1vZGUgdG8gcHJvZHVjdGlvbiBpbiB3ZWJwYWNrIChodHRwczovL3dlYnBhY2suanMub3JnL2NvbmNlcHRzL21vZGUvKSAnICsgJ3RvIGVuc3VyZSB5b3UgaGF2ZSB0aGUgY29ycmVjdCBjb2RlIGZvciB5b3VyIHByb2R1Y3Rpb24gYnVpbGQuJyk7XG59XG5cbmV4cG9ydCB7IEFjdGlvblR5cGVzIGFzIF9fRE9fTk9UX1VTRV9fQWN0aW9uVHlwZXMsIGFwcGx5TWlkZGxld2FyZSwgYmluZEFjdGlvbkNyZWF0b3JzLCBjb21iaW5lUmVkdWNlcnMsIGNvbXBvc2UsIGNyZWF0ZVN0b3JlIH07XG4iLCJmdW5jdGlvbiBjcmVhdGVUaHVua01pZGRsZXdhcmUoZXh0cmFBcmd1bWVudCkge1xuICByZXR1cm4gZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoLFxuICAgICAgICBnZXRTdGF0ZSA9IF9yZWYuZ2V0U3RhdGU7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIGFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHJldHVybiBhY3Rpb24oZGlzcGF0Y2gsIGdldFN0YXRlLCBleHRyYUFyZ3VtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXh0KGFjdGlvbik7XG4gICAgICB9O1xuICAgIH07XG4gIH07XG59XG5cbnZhciB0aHVuayA9IGNyZWF0ZVRodW5rTWlkZGxld2FyZSgpO1xudGh1bmsud2l0aEV4dHJhQXJndW1lbnQgPSBjcmVhdGVUaHVua01pZGRsZXdhcmU7XG5cbmV4cG9ydCBkZWZhdWx0IHRodW5rOyIsIi8qIGdsb2JhbCB3aW5kb3cgKi9cbmltcG9ydCBwb255ZmlsbCBmcm9tICcuL3BvbnlmaWxsLmpzJztcblxudmFyIHJvb3Q7XG5cbmlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgcm9vdCA9IHNlbGY7XG59IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSBnbG9iYWw7XG59IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSBtb2R1bGU7XG59IGVsc2Uge1xuICByb290ID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbn1cblxudmFyIHJlc3VsdCA9IHBvbnlmaWxsKHJvb3QpO1xuZXhwb3J0IGRlZmF1bHQgcmVzdWx0O1xuIiwiaW1wb3J0IHsgY3JlYXRlU2xpY2UgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0J1xuaW1wb3J0IHsgQ29uZmlnU3RhdGUgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5jb25zdCBpbml0aWFsU3RhdGUgPSB7IGFwaToge30gfSBhcyBDb25maWdTdGF0ZVxuXG5jb25zdCBjb25maWdTbGljZSA9IGNyZWF0ZVNsaWNlKHtcbiAgbmFtZTogJ2NvbmZpZycsXG4gIGluaXRpYWxTdGF0ZSxcbiAgcmVkdWNlcnM6IHt9XG59KVxuXG5leHBvcnQgZGVmYXVsdCBjb25maWdTbGljZS5yZWR1Y2VyXG4iLCJpbXBvcnQgeyBjb21iaW5lUmVkdWNlcnMgfSBmcm9tICdyZWR1eCdcbmltcG9ydCBjb25maWdSZWR1Y2VyIGZyb20gJy4uL2ZlYXR1cmVzL2NvbmZpZy9jb25maWdTbGljZSdcbmltcG9ydCBpZGVhc1JlZHVjZXIgZnJvbSAnLi4vZmVhdHVyZXMvaWRlYXMvaWRlYXNTbGljZSdcblxuY29uc3Qgcm9vdFJlZHVjZXIgPSBjb21iaW5lUmVkdWNlcnMoe1xuICBjb25maWc6IGNvbmZpZ1JlZHVjZXIsXG4gIGlkZWFzOiBpZGVhc1JlZHVjZXJcbn0pXG5cbmV4cG9ydCB0eXBlIFJvb3RTdGF0ZSA9IFJldHVyblR5cGU8dHlwZW9mIHJvb3RSZWR1Y2VyPlxuXG5leHBvcnQgZGVmYXVsdCByb290UmVkdWNlclxuIiwiaW1wb3J0IHsgY29uZmlndXJlU3RvcmUsIEVuaGFuY2VkU3RvcmUgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0J1xuaW1wb3J0IHJvb3RSZWR1Y2VyLCB7IFJvb3RTdGF0ZSB9IGZyb20gJy4vc3JjL3JlZHVjZXJzJ1xuaW1wb3J0IHsgRGVlcFBhcnRpYWwgfSBmcm9tIFwicmVkdXhcIjtcblxuY29uc3Qgc3RvcmUgPSAocHJlbG9hZGVkU3RhdGU6IERlZXBQYXJ0aWFsPFJvb3RTdGF0ZT4pOiBFbmhhbmNlZFN0b3JlID0+IHtcbiAgcmV0dXJuIGNvbmZpZ3VyZVN0b3JlKHtcbiAgICByZWR1Y2VyOiByb290UmVkdWNlcixcbiAgICBwcmVsb2FkZWRTdGF0ZVxuICB9KTtcbn1cblxuZXhwb3J0IHtcbiAgc3RvcmUgYXMgZGVmYXVsdCxcbiAgc3RvcmUgYXMgT3BlbnN0YWRTdG9yZVxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN5bWJvbE9ic2VydmFibGVQb255ZmlsbChyb290KSB7XG5cdHZhciByZXN1bHQ7XG5cdHZhciBTeW1ib2wgPSByb290LlN5bWJvbDtcblxuXHRpZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdGlmIChTeW1ib2wub2JzZXJ2YWJsZSkge1xuXHRcdFx0cmVzdWx0ID0gU3ltYm9sLm9ic2VydmFibGU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlc3VsdCA9IFN5bWJvbCgnb2JzZXJ2YWJsZScpO1xuXHRcdFx0U3ltYm9sLm9ic2VydmFibGUgPSByZXN1bHQ7XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdHJlc3VsdCA9ICdAQG9ic2VydmFibGUnO1xuXHR9XG5cblx0cmV0dXJuIHJlc3VsdDtcbn07XG4iLCJpbXBvcnQgeyBjcmVhdGVBc3luY1RodW5rIH0gZnJvbSBcIkByZWR1eGpzL3Rvb2xraXRcIjtcbmltcG9ydCB7IFJvb3RTdGF0ZSB9IGZyb20gXCIuLi8uLi9yZWR1Y2Vyc1wiO1xuXG5leHBvcnQgY29uc3QgZmV0Y2hJZGVhcyA9IGNyZWF0ZUFzeW5jVGh1bmsoXG4gICdpZGVhcy9mZXRjaElkZWFzJyxcbiAgYXN5bmMgKHVzZXJJZCwgeyBnZXRTdGF0ZSB9KSA9PiB7XG4gICAgY29uc29sZS5sb2coJ2ZldGNoIGlkZWFzIGFzeW5jJylcbiAgICBjb25zdCBzdGF0ZSA9IGdldFN0YXRlKCkgYXMgUm9vdFN0YXRlXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHsgc3RhdGUuY29uZmlnLmFwaSB9L3NpdGUvJHsgIHN0YXRlLmNvbmZpZy5zaXRlSWQgfS9pZGVhP2luY2x1ZGVWb3RlQ291bnQ9MSZpbmNsdWRlQXJnc0NvdW50PTEmaW5jbHVkZVVzZXI9MWApXG5cbiAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpXG4gIH1cbilcbiJdLCJzb3VyY2VSb290IjoiIn0=