/*! For license information please see store.js.LICENSE.txt */
window.OpenStadComponents=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=114)}({10:function(t,e,r){t.exports=r(51).Promise},108:function(t,e,r){"use strict";function n(t){var e,r=t.Symbol;return"function"==typeof r?r.observable?e=r.observable:(e=r("observable"),r.observable=e):e="@@observable",e}r.d(e,"a",(function(){return n}))},109:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return u}));var n=r(39),o=function(e,r,n,o){return new(n||(n=t))((function(t,i){function u(t){try{a(o.next(t))}catch(t){i(t)}}function c(t){try{a(o.throw(t))}catch(t){i(t)}}function a(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(t){t(r)}))).then(u,c)}a((o=o.apply(e,r||[])).next())}))},i=function(t,e){var r,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=e.call(t,u)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},u=Object(n.b)("ideas/fetchIdeas",(function(t,e){var r=e.getState;return o(void 0,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return console.log("fetch ideas async"),t=r(),[4,fetch(t.config.api+"/site/"+t.config.siteId+"/idea?includeVoteCount=1&includeArgsCount=1&includeUser=1")];case 1:return[2,e.sent().json()]}}))}))}))}).call(this,r(10))},114:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return a})),r.d(e,"OpenstadStore",(function(){return a}));var n=r(39),o=r(16),i=Object(n.c)({name:"config",initialState:{api:{}},reducers:{}}).reducer,u=r(55),c=Object(o.c)({config:i,ideas:u.b}),a=function(t){return Object(n.a)({reducer:c,preloadedState:t})}},127:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},16:function(t,e,r){"use strict";r.d(e,"a",(function(){return v})),r.d(e,"b",(function(){return l})),r.d(e,"c",(function(){return f})),r.d(e,"d",(function(){return y})),r.d(e,"e",(function(){return c}));var n=r(98),o=function(){return Math.random().toString(36).substring(7).split("").join(".")},i={INIT:"@@redux/INIT"+o(),REPLACE:"@@redux/REPLACE"+o(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+o()}};function u(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function c(t,e,r){var o;if("function"==typeof e&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof e&&void 0===r&&(r=e,e=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(c)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var a=t,f=e,s=[],l=s,d=!1;function p(){l===s&&(l=s.slice())}function h(){if(d)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return f}function y(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(d)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var e=!0;return p(),l.push(t),function(){if(e){if(d)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");e=!1,p();var r=l.indexOf(t);l.splice(r,1),s=null}}}function v(t){if(!u(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(d)throw new Error("Reducers may not dispatch actions.");try{d=!0,f=a(f,t)}finally{d=!1}for(var e=s=l,r=0;r<e.length;r++){(0,e[r])()}return t}function b(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");a=t,v({type:i.REPLACE})}function g(){var t,e=y;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function r(){t.next&&t.next(h())}return r(),{unsubscribe:e(r)}}})[n.a]=function(){return this},t}return v({type:i.INIT}),(o={dispatch:v,subscribe:y,getState:h,replaceReducer:b})[n.a]=g,o}function a(t,e){var r=e&&e.type;return"Given "+(r&&'action "'+String(r)+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function f(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++){var o=e[n];0,"function"==typeof t[o]&&(r[o]=t[o])}var u,c=Object.keys(r);try{!function(t){Object.keys(t).forEach((function(e){var r=t[e];if(void 0===r(void 0,{type:i.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:i.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+i.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(r)}catch(t){u=t}return function(t,e){if(void 0===t&&(t={}),u)throw u;for(var n=!1,o={},i=0;i<c.length;i++){var f=c[i],s=r[f],l=t[f],d=s(l,e);if(void 0===d){var p=a(f,e);throw new Error(p)}o[f]=d,n=n||d!==l}return(n=n||c.length!==Object.keys(t).length)?o:t}}function s(t,e){return function(){return e(t.apply(this,arguments))}}function l(t,e){if("function"==typeof t)return s(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var r={};for(var n in t){var o=t[n];"function"==typeof o&&(r[n]=s(o,e))}return r}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function p(t,e){var r=Object.keys(t);return Object.getOwnPropertySymbols&&r.push.apply(r,Object.getOwnPropertySymbols(t)),e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(r,!0).forEach((function(e){d(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function y(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function v(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return function(){var r=t.apply(void 0,arguments),n=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},o={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},i=e.map((function(t){return t(o)}));return h({},r,{dispatch:n=y.apply(void 0,i)(r.dispatch)})}}}},21:function(t,e,r){"use strict";(function(t){function n(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function o(t){return!!t&&!!t[B]}function i(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return!e||e===Object.prototype}(t)||Array.isArray(t)||!!t[X]||!!t.constructor[X]||d(t)||p(t))}function u(t,e,r){void 0===r&&(r=!1),0===c(t)?(r?Object.keys:G)(t).forEach((function(n){r&&"symbol"==typeof n||e(n,t[n],t)})):t.forEach((function(r,n){return e(n,r,t)}))}function c(t){var e=t[B];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:d(t)?2:p(t)?3:0}function a(t,e){return 2===c(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function f(t,e){return 2===c(t)?t.get(e):t[e]}function s(t,e,r){var n=c(t);2===n?t.set(e,r):3===n?(t.delete(e),t.add(r)):t[e]=r}function l(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function d(t){return q&&t instanceof Map}function p(t){return z&&t instanceof Set}function h(t){return t.o||t.t}function y(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=J(t);delete e[B];for(var r=G(e),n=0;n<r.length;n++){var o=r[n],i=e[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[o]})}return Object.create(Object.getPrototypeOf(t),e)}function v(t,e){return void 0===e&&(e=!1),g(t)||o(t)||!i(t)||(c(t)>1&&(t.set=t.add=t.clear=t.delete=b),Object.freeze(t),e&&u(t,(function(t,e){return v(e,!0)}),!0)),t}function b(){n(2)}function g(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function m(t){var e=$[t];return e||n(18,t),e}function w(t,e){$[t]||($[t]=e)}function O(){return K}function j(t,e){e&&(m("Patches"),t.u=[],t.s=[],t.v=e)}function _(t){P(t),t.p.forEach(S),t.p=null}function P(t){t===K&&(K=t.l)}function A(t){return K={p:[],l:K,h:t,m:!0,_:0}}function S(t){var e=t[B];0===e.i||1===e.i?e.j():e.g=!0}function E(t,e){e._=e.p.length;var r=e.p[0],o=void 0!==t&&t!==r;return e.h.O||m("ES5").S(e,t,o),o?(r[B].P&&(_(e),n(4)),i(t)&&(t=x(e,t),e.l||I(e,t)),e.u&&m("Patches").M(r[B],t,e.u,e.s)):t=x(e,r,[]),_(e),e.u&&e.v(e.u,e.s),t!==Y?t:void 0}function x(t,e,r){if(g(e))return e;var n=e[B];if(!n)return u(e,(function(o,i){return T(t,n,e,o,i,r)}),!0),e;if(n.A!==t)return e;if(!n.P)return I(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var o=4===n.i||5===n.i?n.o=y(n.k):n.o;u(3===n.i?new Set(o):o,(function(e,i){return T(t,n,o,e,i,r)})),I(t,o,!1),r&&t.u&&m("Patches").R(n,r,t.u,t.s)}return n.o}function T(t,e,r,n,u,c){if(o(u)){var f=x(t,u,c&&e&&3!==e.i&&!a(e.D,n)?c.concat(n):void 0);if(s(r,n,f),!o(f))return;t.m=!1}if(i(u)&&!g(u)){if(!t.h.N&&t._<1)return;x(t,u),e&&e.A.l||I(t,u)}}function I(t,e,r){void 0===r&&(r=!1),t.h.N&&t.m&&v(e,r)}function k(t,e){var r=t[B];return(r?h(r):t)[e]}function R(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function C(t){t.P||(t.P=!0,t.l&&C(t.l))}function D(t){t.o||(t.o=y(t.t))}function N(t,e,r){var n=d(e)?m("MapSet").T(e,r):p(e)?m("MapSet").F(e,r):t.O?function(t,e){var r=Array.isArray(t),n={i:r?1:0,A:e?e.A:O(),P:!1,I:!1,D:{},l:e,t:t,k:null,o:null,j:null,C:!1},o=n,i=H;r&&(o=[n],i=Q);var u=Proxy.revocable(o,i),c=u.revoke,a=u.proxy;return n.k=a,n.j=c,a}(e,r):m("ES5").J(e,r);return(r?r.A:O()).p.push(n),n}function M(t){return o(t)||n(22,t),function t(e){if(!i(e))return e;var r,n=e[B],o=c(e);if(n){if(!n.P&&(n.i<4||!m("ES5").K(n)))return n.t;n.I=!0,r=F(e,o),n.I=!1}else r=F(e,o);return u(r,(function(e,o){n&&f(n.t,e)===o||s(r,e,t(o))})),3===o?new Set(r):r}(t)}function F(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return y(t)}function L(){function t(t,e){var r=i[t];return r?r.enumerable=e:i[t]=r={configurable:!0,enumerable:e,get:function(){var e=this[B];return H.get(e,t)},set:function(e){var r=this[B];H.set(r,t,e)}},r}function e(t){for(var e=t.length-1;e>=0;e--){var o=t[e][B];if(!o.P)switch(o.i){case 5:n(o)&&C(o);break;case 4:r(o)&&C(o)}}}function r(t){for(var e=t.t,r=t.k,n=G(r),o=n.length-1;o>=0;o--){var i=n[o];if(i!==B){var u=e[i];if(void 0===u&&!a(e,i))return!0;var c=r[i],f=c&&c[B];if(f?f.t!==u:!l(c,u))return!0}}var s=!!e[B];return n.length!==G(e).length+(s?0:1)}function n(t){var e=t.k;if(e.length!==t.t.length)return!0;var r=Object.getOwnPropertyDescriptor(e,e.length-1);return!(!r||r.get)}var i={};w("ES5",{J:function(e,r){var n=Array.isArray(e),o=function(e,r){if(e){for(var n=Array(r.length),o=0;o<r.length;o++)Object.defineProperty(n,""+o,t(o,!0));return n}var i=J(r);delete i[B];for(var u=G(i),c=0;c<u.length;c++){var a=u[c];i[a]=t(a,e||!!i[a].enumerable)}return Object.create(Object.getPrototypeOf(r),i)}(n,e),i={i:n?5:4,A:r?r.A:O(),P:!1,I:!1,D:{},l:r,t:e,k:o,o:null,g:!1,C:!1};return Object.defineProperty(o,B,{value:i,writable:!0}),o},S:function(t,r,i){i?o(r)&&r[B].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var r=e[B];if(r){var o=r.t,i=r.k,c=r.D,f=r.i;if(4===f)u(i,(function(e){e!==B&&(void 0!==o[e]||a(o,e)?c[e]||t(i[e]):(c[e]=!0,C(r)))})),u(o,(function(t){void 0!==i[t]||a(i,t)||(c[t]=!1,C(r))}));else if(5===f){if(n(r)&&(C(r),c.length=!0),i.length<o.length)for(var s=i.length;s<o.length;s++)c[s]=!1;else for(var l=o.length;l<i.length;l++)c[l]=!0;for(var d=Math.min(i.length,o.length),p=0;p<d;p++)void 0===c[p]&&t(i[p])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?r(t):n(t)}})}r.d(e,"a",(function(){return M})),r.d(e,"c",(function(){return L})),r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return i}));var W,K,U="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),q="undefined"!=typeof Map,z="undefined"!=typeof Set,V="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Y=U?Symbol.for("immer-nothing"):((W={})["immer-nothing"]=!0,W),X=U?Symbol.for("immer-draftable"):"__$immer_draftable",B=U?Symbol.for("immer-state"):"__$immer_state",G=("undefined"!=typeof Symbol&&Symbol.iterator,"undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames),J=Object.getOwnPropertyDescriptors||function(t){var e={};return G(t).forEach((function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)})),e},$={},H={get:function(t,e){if(e===B)return t;var r=h(t);if(!a(r,e))return function(t,e,r){var n,o=R(e,r);return o?"value"in o?o.value:null===(n=o.get)||void 0===n?void 0:n.call(t.k):void 0}(t,r,e);var n=r[e];return t.I||!i(n)?n:n===k(t.t,e)?(D(t),t.o[e]=N(t.A.h,n,t)):n},has:function(t,e){return e in h(t)},ownKeys:function(t){return Reflect.ownKeys(h(t))},set:function(t,e,r){var n=R(h(t),e);if(null==n?void 0:n.set)return n.set.call(t.k,r),!0;if(!t.P){var o=k(h(t),e),i=null==o?void 0:o[B];if(i&&i.t===r)return t.o[e]=r,t.D[e]=!1,!0;if(l(r,o)&&(void 0!==r||a(t.t,e)))return!0;D(t),C(t)}return t.o[e]=r,t.D[e]=!0,!0},deleteProperty:function(t,e){return void 0!==k(t.t,e)||e in t.t?(t.D[e]=!1,D(t),C(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=h(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:n.enumerable,value:r[e]}:n},defineProperty:function(){n(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){n(12)}},Q={};u(H,(function(t,e){Q[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),Q.deleteProperty=function(t,e){return H.deleteProperty.call(this,t[0],e)},Q.set=function(t,e,r){return H.set.call(this,t[0],e,r,t[0])};var Z=new(function(){function e(t){this.O=V,this.N=!0,"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var r=e.prototype;return r.produce=function(e,r,o){if("function"==typeof e&&"function"!=typeof r){var u=r;r=e;var c=this;return function(t){var e=this;void 0===t&&(t=u);for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return c.produce(t,(function(t){var n;return(n=r).call.apply(n,[e,t].concat(o))}))}}var a;if("function"!=typeof r&&n(6),void 0!==o&&"function"!=typeof o&&n(7),i(e)){var f=A(this),s=N(this,e,void 0),l=!0;try{a=r(s),l=!1}finally{l?_(f):P(f)}return void 0!==t&&a instanceof t?a.then((function(t){return j(f,o),E(t,f)}),(function(t){throw _(f),t})):(j(f,o),E(a,f))}if(!e||"object"!=typeof e){if((a=r(e))===Y)return;return void 0===a&&(a=e),this.N&&v(a,!0),a}n(21,e)},r.produceWithPatches=function(t,e){var r,n,o=this;return"function"==typeof t?function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return o.produceWithPatches(e,(function(e){return t.apply(void 0,[e].concat(n))}))}:[this.produce(t,e,(function(t,e){r=t,n=e})),r,n]},r.createDraft=function(t){i(t)||n(8),o(t)&&(t=M(t));var e=A(this),r=N(this,t,void 0);return r[B].C=!0,P(e),r},r.finishDraft=function(t,e){var r=(t&&t[B]).A;return j(r,e),E(void 0,r)},r.setAutoFreeze=function(t){this.N=t},r.setUseProxies=function(t){t&&!V&&n(20),this.O=t},r.applyPatches=function(t,e){var r;for(r=e.length-1;r>=0;r--){var n=e[r];if(0===n.path.length&&"replace"===n.op){t=n.value;break}}var i=m("Patches").$;return o(t)?i(t,e):this.produce(t,(function(t){return i(t,e.slice(r+1))}))},e}()),tt=Z.produce;Z.produceWithPatches.bind(Z),Z.setAutoFreeze.bind(Z),Z.setUseProxies.bind(Z),Z.applyPatches.bind(Z),Z.createDraft.bind(Z),Z.finishDraft.bind(Z);e.b=tt}).call(this,r(10))},22:function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},39:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return v})),r.d(e,"b",(function(){return _})),r.d(e,"c",(function(){return m}));var n=r(21),o=r(16),i=(r(78),r(99));function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t,e,r){return(s=f()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&a(o,r.prototype),o}).apply(null,arguments)}function l(t){var e="function"==typeof Map?new Map:void 0;return(l=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return s(t,arguments,c(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,t)})(t)}var d="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?o.d:o.d.apply(null,arguments)};function p(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}var h=function(t){var e,r;function n(){return t.apply(this,arguments)||this}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=n.prototype;return o.concat=function(){for(var e,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return s(n,(e=t.prototype.concat).call.apply(e,[this].concat(o)))},o.prepend=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?s(n,e[0].concat(this)):s(n,e.concat(this))},n}(l(Array));function y(){return function(t){return function(t){void 0===t&&(t={});var e=t,r=e.thunk,n=void 0===r||r,o=(e.immutableCheck,e.serializableCheck,new h);n&&("boolean"==typeof n?o.push(i.a):o.push(i.a.withExtraArgument(n.extraArgument)));0;return o}(t)}}function v(t){var e,r=y(),n=t||{},i=n.reducer,c=void 0===i?void 0:i,a=n.middleware,f=void 0===a?r():a,s=n.devTools,l=void 0===s||s,h=n.preloadedState,v=void 0===h?void 0:h,b=n.enhancers,g=void 0===b?void 0:b;if("function"==typeof c)e=c;else{if(!p(c))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');e=Object(o.c)(c)}var m=o.a.apply(void 0,"function"==typeof f?f(r):f),w=o.d;l&&(w=d(u({trace:!1},"object"==typeof l&&l)));var O=[m];Array.isArray(g)?O=[m].concat(g):"function"==typeof g&&(O=g(O));var j=w.apply(void 0,O);return Object(o.e)(e,v,j)}function b(t,e){function r(){if(e){var r=e.apply(void 0,arguments);if(!r)throw new Error("prepareAction did not return an object");return u({type:t,payload:r.payload},"meta"in r&&{meta:r.meta},{},"error"in r&&{error:r.error})}return{type:t,payload:arguments.length<=0?void 0:arguments[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(e){return e.type===t},r}function g(t){var e,r={},n=[],o={addCase:function(t,e){var n="string"==typeof t?t:t.type;if(n in r)throw new Error("addCase cannot be called with two reducers for the same action type");return r[n]=e,o},addMatcher:function(t,e){return n.push({matcher:t,reducer:e}),o},addDefaultCase:function(t){return e=t,o}};return t(o),[r,n,e]}function m(t){var e=t.name,r=t.initialState;if(!e)throw new Error("`name` is a required option for createSlice");var o=t.reducers||{},i=void 0===t.extraReducers?[]:"function"==typeof t.extraReducers?g(t.extraReducers):[t.extraReducers],c=i[0],a=void 0===c?{}:c,f=i[1],s=void 0===f?[]:f,l=i[2],d=void 0===l?void 0:l,p=Object.keys(o),h={},y={},v={};p.forEach((function(t){var r,n,i=o[t],u=e+"/"+t;"reducer"in i?(r=i.reducer,n=i.prepare):r=i,h[t]=r,y[u]=r,v[t]=n?b(u,n):b(u)}));var m=function(t,e,r,o){void 0===r&&(r=[]);var i="function"==typeof e?g(e):[e,r,o],u=i[0],c=i[1],a=i[2];return function(e,r){void 0===e&&(e=t);var o=[u[r.type]].concat(c.filter((function(t){return(0,t.matcher)(r)})).map((function(t){return t.reducer})));return 0===o.filter((function(t){return!!t})).length&&(o=[a]),o.reduce((function(t,e){if(e){if(Object(n.d)(t)){var o=e(t,r);return void 0===o?t:o}if(Object(n.e)(t))return Object(n.b)(t,(function(t){return e(t,r)}));var i=e(t,r);if(void 0===i){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return i}return t}),e)}}(r,u({},a,{},y),s,d);return{name:e,reducer:m,actions:v,caseReducers:h}}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var w=["name","message","stack","code"],O=function(t){this.payload=t,this.name="RejectWithValue",this.message="Rejected"},j=function(t){if("object"==typeof t&&null!==t){var e={},r=w,n=Array.isArray(r),o=0;for(r=n?r:r[Symbol.iterator]();;){var i;if(n){if(o>=r.length)break;i=r[o++]}else{if((o=r.next()).done)break;i=o.value}var u=i;"string"==typeof t[u]&&(e[u]=t[u])}return e}return{message:String(t)}};function _(e,r,n){var o=b(e+"/fulfilled",(function(t,e,r){return{payload:t,meta:{arg:r,requestId:e,requestStatus:"fulfilled"}}})),i=b(e+"/pending",(function(t,e){return{payload:void 0,meta:{arg:e,requestId:t,requestStatus:"pending"}}})),u=b(e+"/rejected",(function(t,e,r){var o=t instanceof O,i=!!t&&"AbortError"===t.name,u=!!t&&"ConditionError"===t.name;return{payload:t instanceof O?t.payload:void 0,error:(n&&n.serializeError||j)(t||"Rejected"),meta:{arg:r,requestId:e,rejectedWithValue:o,requestStatus:"rejected",aborted:i,condition:u}}})),c="undefined"!=typeof AbortController?AbortController:function(){function t(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){}}}return t.prototype.abort=function(){0},t}();return Object.assign((function(e){return function(a,f,s){var l,d=function(t){void 0===t&&(t=21);for(var e="",r=t;r--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e}(),p=new c,h=new t((function(t,e){return p.signal.addEventListener("abort",(function(){return e({name:"AbortError",message:l||"Aborted"})}))})),y=!1;var v=function(){try{var c,l=function(t){return v?t:(n&&!n.dispatchConditionRejection&&u.match(c)&&c.meta.condition||a(c),c)},v=!1,b=function(t,e){try{var r=t()}catch(t){return e(t)}return r&&r.then?r.then(void 0,e):r}((function(){if(n&&n.condition&&!1===n.condition(e,{getState:f,extra:s}))throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return y=!0,a(i(d,e)),t.resolve(t.race([h,t.resolve(r(e,{dispatch:a,getState:f,extra:s,requestId:d,signal:p.signal,rejectWithValue:function(t){return new O(t)}})).then((function(t){return t instanceof O?u(t,d,e):o(t,d,e)}))])).then((function(t){c=t}))}),(function(t){c=u(t,d,e)}));return t.resolve(b&&b.then?b.then(l):l(b))}catch(e){return t.reject(e)}}();return Object.assign(v,{abort:function(t){y&&(l=t,p.abort())},requestId:d,arg:e})}}),{pending:i,rejected:u,fulfilled:o,typePrefix:e})}Object(n.c)()}).call(this,r(10))},51:function(t,e,r){(function(e,n){var o;o=function(){"use strict";function t(t){return"function"==typeof t}var o=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},i=0,u=void 0,c=void 0,a=function(t,e){y[i]=t,y[i+1]=e,2===(i+=2)&&(c?c(v):O())},f="undefined"!=typeof window?window:void 0,s=f||{},l=s.MutationObserver||s.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(v,1)}}var y=new Array(1e3);function v(){for(var t=0;t<i;t+=2)(0,y[t])(y[t+1]),y[t]=void 0,y[t+1]=void 0;i=0}var b,g,m,w,O=void 0;function j(t,e){var r=arguments,n=this,o=new this.constructor(A);void 0===o[P]&&K(o);var i,u=n._state;return u?(i=r[u-1],a((function(){return L(u,o,i,n._result)}))):D(n,o,t,e),o}function _(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(A);return I(e,t),e}d?O=function(){return e.nextTick(v)}:l?(g=0,m=new l(v),w=document.createTextNode(""),m.observe(w,{characterData:!0}),O=function(){w.data=g=++g%2}):p?((b=new MessageChannel).port1.onmessage=v,O=function(){return b.port2.postMessage(0)}):O=void 0===f?function(){try{var t=r(53);return u=t.runOnLoop||t.runOnContext,function(){u(v)}}catch(t){return h()}}():h();var P=Math.random().toString(36).substring(16);function A(){}var S=void 0,E=new M;function x(t){try{return t.then}catch(t){return E.error=t,E}}function T(e,r,n){r.constructor===e.constructor&&n===j&&r.constructor.resolve===_?function(t,e){1===e._state?R(t,e._result):2===e._state?C(t,e._result):D(e,void 0,(function(e){return I(t,e)}),(function(e){return C(t,e)}))}(e,r):n===E?C(e,E.error):void 0===n?R(e,r):t(n)?function(t,e,r){a((function(t){var n=!1,o=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,(function(r){n||(n=!0,e!==r?I(t,r):R(t,r))}),(function(e){n||(n=!0,C(t,e))}),t._label);!n&&o&&(n=!0,C(t,o))}),t)}(e,r,n):R(e,r)}function I(t,e){var r;t===e?C(t,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(r=e)||"object"==typeof r&&null!==r?T(t,e,x(e)):R(t,e)}function k(t){t._onerror&&t._onerror(t._result),N(t)}function R(t,e){t._state===S&&(t._result=e,t._state=1,0!==t._subscribers.length&&a(N,t))}function C(t,e){t._state===S&&(t._state=2,t._result=e,a(k,t))}function D(t,e,r,n){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+1]=r,o[i+2]=n,0===i&&t._state&&a(N,t)}function N(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,o=void 0,i=t._result,u=0;u<e.length;u+=3)n=e[u],o=e[u+r],n?L(r,n,o,i):o(i);t._subscribers.length=0}}function M(){this.error=null}var F=new M;function L(e,r,n,o){var i=t(n),u=void 0,c=void 0,a=void 0,f=void 0;if(i){if((u=function(t,e){try{return t(e)}catch(t){return F.error=t,F}}(n,o))===F?(f=!0,c=u.error,u=null):a=!0,r===u)return void C(r,new TypeError("A promises callback cannot return that same promise."))}else u=o,a=!0;r._state!==S||(i&&a?I(r,u):f?C(r,c):1===e?R(r,u):2===e&&C(r,u))}var W=0;function K(t){t[P]=W++,t._state=void 0,t._result=void 0,t._subscribers=[]}function U(t,e){this._instanceConstructor=t,this.promise=new t(A),this.promise[P]||K(this.promise),o(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&R(this.promise,this._result))):C(this.promise,new Error("Array Methods must be provided an Array"))}function q(t){this[P]=W++,this._result=this._state=void 0,this._subscribers=[],A!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof q?function(t,e){try{e((function(e){I(t,e)}),(function(e){C(t,e)}))}catch(e){C(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function z(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=q}return U.prototype._enumerate=function(){for(var t=this.length,e=this._input,r=0;this._state===S&&r<t;r++)this._eachEntry(e[r],r)},U.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===_){var o=x(t);if(o===j&&t._state!==S)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(r===q){var i=new r(A);T(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new r((function(e){return e(t)})),e)}else this._willSettleAt(n(t),e)},U.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===S&&(this._remaining--,2===t?C(n,r):this._result[e]=r),0===this._remaining&&R(n,this._result)},U.prototype._willSettleAt=function(t,e){var r=this;D(t,void 0,(function(t){return r._settledAt(1,e,t)}),(function(t){return r._settledAt(2,e,t)}))},q.all=function(t){return new U(this,t).promise},q.race=function(t){var e=this;return o(t)?new e((function(r,n){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(r,n)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))},q.resolve=_,q.reject=function(t){var e=new this(A);return C(e,t),e},q._setScheduler=function(t){c=t},q._setAsap=function(t){a=t},q._asap=a,q.prototype={constructor:q,then:j,catch:function(t){return this.then(null,t)}},z(),q.polyfill=z,q.Promise=q,q},t.exports=o()}).call(this,r(52),r(22))},52:function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function c(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:u}catch(t){n=u}}();var a,f=[],s=!1,l=-1;function d(){s&&a&&(s=!1,a.length?f=a.concat(f):l=-1,f.length&&p())}function p(){if(!s){var t=c(d);s=!0;for(var e=f.length;e;){for(a=f,f=[];++l<e;)a&&a[l].run();l=-1,e=f.length}a=null,s=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];f.push(new h(t,e)),1!==f.length||s||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},53:function(t,e){},55:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var n,o=r(39),i=r(109),u=Object(o.c)({name:"ideas",initialState:{ideas:[]},reducers:{setIdeas:function(t,e){t.ideas=e.payload},addIdea:function(t,e){var r=e.payload;t.ideas.push(r)},removeIdea:function(t,e){t.ideas.splice(t.ideas.findIndex((function(t){return t.id===e.payload})),1)}},extraReducers:function(t){t.addCase(i.a.fulfilled,(function(t,e){t.ideas=e.payload}))}}),c=((n=u.actions).setIdeas,n.addIdea);e.b=u.reducer},78:function(t,e,r){"use strict";function n(t,e){return t===e}function o(t,e,r){if(null===e||null===r||e.length!==r.length)return!1;for(var n=e.length,o=0;o<n;o++)if(!t(e[o],r[o]))return!1;return!0}function i(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every((function(t){return"function"==typeof t}))){var r=e.map((function(t){return typeof t})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return e}r.d(e,"a",(function(){return u}));var u=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];var u=0,c=n.pop(),a=i(n),f=t.apply(void 0,[function(){return u++,c.apply(null,arguments)}].concat(r)),s=t((function(){for(var t=[],e=a.length,r=0;r<e;r++)t.push(a[r].apply(null,arguments));return f.apply(null,t)}));return s.resultFunc=c,s.dependencies=a,s.recomputations=function(){return u},s.resetRecomputations=function(){return u=0},s}}((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,r=null,i=null;return function(){return o(e,r,arguments)||(i=t.apply(null,arguments)),r=arguments,i}}))},98:function(t,e,r){"use strict";(function(t,n){var o,i=r(108);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:n;var u=Object(i.a)(o);e.a=u}).call(this,r(22),r(127)(t))},99:function(t,e,r){"use strict";function n(t){return function(e){var r=e.dispatch,n=e.getState;return function(e){return function(o){return"function"==typeof o?o(r,n,t):e(o)}}}}var o=n();o.withExtraArgument=n,e.a=o}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9PcGVuU3RhZENvbXBvbmVudHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vT3BlblN0YWRDb21wb25lbnRzLy4vbm9kZV9tb2R1bGVzL2VzNi1wcm9taXNlLXByb21pc2UvaW5kZXguanMiLCJ3ZWJwYWNrOi8vT3BlblN0YWRDb21wb25lbnRzLy4vbm9kZV9tb2R1bGVzL3N5bWJvbC1vYnNlcnZhYmxlL2VzL3BvbnlmaWxsLmpzIiwid2VicGFjazovL09wZW5TdGFkQ29tcG9uZW50cy8uL3NyYy9zdG9yZS9zcmMvZmVhdHVyZXMvaWRlYXMvbWlkZGxld2FyZXMudHMiLCJ3ZWJwYWNrOi8vT3BlblN0YWRDb21wb25lbnRzLy4vc3JjL3N0b3JlL3NyYy9mZWF0dXJlcy9jb25maWcvY29uZmlnU2xpY2UudHMiLCJ3ZWJwYWNrOi8vT3BlblN0YWRDb21wb25lbnRzLy4vc3JjL3N0b3JlL3NyYy9yZWR1Y2Vycy9pbmRleC50cyIsIndlYnBhY2s6Ly9PcGVuU3RhZENvbXBvbmVudHMvLi9zcmMvc3RvcmUvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vT3BlblN0YWRDb21wb25lbnRzLyh3ZWJwYWNrKS9idWlsZGluL2hhcm1vbnktbW9kdWxlLmpzIiwid2VicGFjazovL09wZW5TdGFkQ29tcG9uZW50cy8uL25vZGVfbW9kdWxlcy9yZWR1eC9lcy9yZWR1eC5qcyIsIndlYnBhY2s6Ly9PcGVuU3RhZENvbXBvbmVudHMvLi9ub2RlX21vZHVsZXMvaW1tZXIvZGlzdC9pbW1lci5lc20uanMiLCJ3ZWJwYWNrOi8vT3BlblN0YWRDb21wb25lbnRzLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly9PcGVuU3RhZENvbXBvbmVudHMvLi9ub2RlX21vZHVsZXMvQHJlZHV4anMvdG9vbGtpdC9kaXN0L3JlZHV4LXRvb2xraXQuZXNtLmpzIiwid2VicGFjazovL09wZW5TdGFkQ29tcG9uZW50cy8uL25vZGVfbW9kdWxlcy9lczYtcHJvbWlzZS9kaXN0L2VzNi1wcm9taXNlLmpzIiwid2VicGFjazovL09wZW5TdGFkQ29tcG9uZW50cy8uL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vT3BlblN0YWRDb21wb25lbnRzLy4vc3JjL3N0b3JlL3NyYy9mZWF0dXJlcy9pZGVhcy9pZGVhc1NsaWNlLnRzIiwid2VicGFjazovL09wZW5TdGFkQ29tcG9uZW50cy8uL25vZGVfbW9kdWxlcy9yZXNlbGVjdC9lcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9PcGVuU3RhZENvbXBvbmVudHMvLi9ub2RlX21vZHVsZXMvc3ltYm9sLW9ic2VydmFibGUvZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vT3BlblN0YWRDb21wb25lbnRzLy4vbm9kZV9tb2R1bGVzL3JlZHV4LXRodW5rL2VzL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUHJvbWlzZSIsInN5bWJvbE9ic2VydmFibGVQb255ZmlsbCIsInJvb3QiLCJyZXN1bHQiLCJvYnNlcnZhYmxlIiwiZmV0Y2hJZGVhcyIsInVzZXJJZCIsImdldFN0YXRlIiwiY29uc29sZSIsImxvZyIsInN0YXRlIiwiZmV0Y2giLCJjb25maWciLCJhcGkiLCJzaXRlSWQiLCJqc29uIiwiaW5pdGlhbFN0YXRlIiwicmVkdWNlcnMiLCJpZGVhcyIsInN0b3JlIiwicHJlbG9hZGVkU3RhdGUiLCJyZWR1Y2VyIiwib3JpZ2luYWxNb2R1bGUiLCJ3ZWJwYWNrUG9seWZpbGwiLCJjaGlsZHJlbiIsInJhbmRvbVN0cmluZyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsInNwbGl0Iiwiam9pbiIsIkFjdGlvblR5cGVzIiwiSU5JVCIsIlJFUExBQ0UiLCJQUk9CRV9VTktOT1dOX0FDVElPTiIsImlzUGxhaW5PYmplY3QiLCJvYmoiLCJwcm90byIsImdldFByb3RvdHlwZU9mIiwiY3JlYXRlU3RvcmUiLCJlbmhhbmNlciIsIl9yZWYyIiwiYXJndW1lbnRzIiwiRXJyb3IiLCJ1bmRlZmluZWQiLCJjdXJyZW50UmVkdWNlciIsImN1cnJlbnRTdGF0ZSIsImN1cnJlbnRMaXN0ZW5lcnMiLCJuZXh0TGlzdGVuZXJzIiwiaXNEaXNwYXRjaGluZyIsImVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMiLCJzbGljZSIsInN1YnNjcmliZSIsImxpc3RlbmVyIiwiaXNTdWJzY3JpYmVkIiwicHVzaCIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImRpc3BhdGNoIiwiYWN0aW9uIiwidHlwZSIsImxpc3RlbmVycyIsImxlbmd0aCIsInJlcGxhY2VSZWR1Y2VyIiwibmV4dFJlZHVjZXIiLCJfcmVmIiwib3V0ZXJTdWJzY3JpYmUiLCJvYnNlcnZlciIsIlR5cGVFcnJvciIsIm9ic2VydmVTdGF0ZSIsIm5leHQiLCJ1bnN1YnNjcmliZSIsInRoaXMiLCJnZXRVbmRlZmluZWRTdGF0ZUVycm9yTWVzc2FnZSIsImFjdGlvblR5cGUiLCJTdHJpbmciLCJjb21iaW5lUmVkdWNlcnMiLCJyZWR1Y2VyS2V5cyIsImtleXMiLCJmaW5hbFJlZHVjZXJzIiwic2hhcGVBc3NlcnRpb25FcnJvciIsImZpbmFsUmVkdWNlcktleXMiLCJmb3JFYWNoIiwiYXNzZXJ0UmVkdWNlclNoYXBlIiwiZSIsImhhc0NoYW5nZWQiLCJuZXh0U3RhdGUiLCJfaSIsIl9rZXkiLCJwcmV2aW91c1N0YXRlRm9yS2V5IiwibmV4dFN0YXRlRm9yS2V5IiwiZXJyb3JNZXNzYWdlIiwiYmluZEFjdGlvbkNyZWF0b3IiLCJhY3Rpb25DcmVhdG9yIiwiYXBwbHkiLCJiaW5kQWN0aW9uQ3JlYXRvcnMiLCJhY3Rpb25DcmVhdG9ycyIsImJvdW5kQWN0aW9uQ3JlYXRvcnMiLCJfZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIm93bktleXMiLCJlbnVtZXJhYmxlT25seSIsImdldE93blByb3BlcnR5U3ltYm9scyIsImZpbHRlciIsInN5bSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIl9vYmplY3RTcHJlYWQyIiwidGFyZ2V0Iiwic291cmNlIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJjb21wb3NlIiwiX2xlbiIsImZ1bmNzIiwiQXJyYXkiLCJhcmciLCJyZWR1Y2UiLCJhIiwiYiIsImFwcGx5TWlkZGxld2FyZSIsIm1pZGRsZXdhcmVzIiwiX2Rpc3BhdGNoIiwibWlkZGxld2FyZUFQSSIsImNoYWluIiwibWFwIiwibWlkZGxld2FyZSIsIlEiLCJpc0FycmF5IiwiTCIsImNvbnN0cnVjdG9yIiwidiIsIloiLCJ1IiwiaGFzIiwiZiIsInNldCIsImRlbGV0ZSIsImFkZCIsIlgiLCJNYXAiLCJxIiwiU2V0IiwidHQiLCJ5IiwiY2xlYXIiLCJoIiwiZnJlZXplIiwiaXNGcm96ZW4iLCJudCIsIl8iLCJVIiwiaiIsImciLCJ3IiwiUyIsIk8iLCJQIiwiTSIsIngiLCJIIiwiQSIsIkkiLCJrIiwiUiIsIkQiLCJjb25jYXQiLCJOIiwieiIsIkUiLCJUIiwiRiIsIkMiLCJydCIsImV0IiwiUHJveHkiLCJyZXZvY2FibGUiLCJyZXZva2UiLCJwcm94eSIsIkoiLCJLIiwiZnJvbSIsIm1pbiIsIkciLCJXIiwiQiIsIlJlZmxlY3QiLCJmb3IiLCJpdGVyYXRvciIsImdldE93blByb3BlcnR5TmFtZXMiLCJkZWxldGVQcm9wZXJ0eSIsInNldFByb3RvdHlwZU9mIiwib3QiLCJ1c2VQcm94aWVzIiwic2V0VXNlUHJveGllcyIsImF1dG9GcmVlemUiLCJzZXRBdXRvRnJlZXplIiwicHJvZHVjZSIsInByb2R1Y2VXaXRoUGF0Y2hlcyIsInRoZW4iLCJjcmVhdGVEcmFmdCIsImZpbmlzaERyYWZ0IiwiYXBwbHlQYXRjaGVzIiwicGF0aCIsIm9wIiwiJCIsInV0IiwiRnVuY3Rpb24iLCJ3aW5kb3ciLCJfZXh0ZW5kcyIsImFzc2lnbiIsIl9nZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIl9zZXRQcm90b3R5cGVPZiIsImlzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsImNvbnN0cnVjdCIsInNoYW0iLCJEYXRlIiwiX2NvbnN0cnVjdCIsIlBhcmVudCIsImFyZ3MiLCJDbGFzcyIsImluc3RhbmNlIiwiX3dyYXBOYXRpdmVTdXBlciIsIl9jYWNoZSIsImZuIiwiV3JhcHBlciIsImNvbXBvc2VXaXRoRGV2VG9vbHMiLCJfX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9DT01QT1NFX18iLCJNaWRkbGV3YXJlQXJyYXkiLCJfQXJyYXkiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJfcHJvdG8iLCJfQXJyYXkkcHJvdG90eXBlJGNvbmMiLCJhcnIiLCJwcmVwZW5kIiwiX2xlbjIiLCJfa2V5MiIsImN1cnJ5R2V0RGVmYXVsdE1pZGRsZXdhcmUiLCJvcHRpb25zIiwiX29wdGlvbnMiLCJfb3B0aW9ucyR0aHVuayIsInRodW5rIiwibWlkZGxld2FyZUFycmF5IiwiaW1tdXRhYmxlQ2hlY2siLCJzZXJpYWxpemFibGVDaGVjayIsIndpdGhFeHRyYUFyZ3VtZW50IiwiZXh0cmFBcmd1bWVudCIsImdldERlZmF1bHRNaWRkbGV3YXJlIiwiY29uZmlndXJlU3RvcmUiLCJyb290UmVkdWNlciIsImN1cnJpZWRHZXREZWZhdWx0TWlkZGxld2FyZSIsIl9yZWYkcmVkdWNlciIsIl9yZWYkbWlkZGxld2FyZSIsIl9yZWYkZGV2VG9vbHMiLCJkZXZUb29scyIsIl9yZWYkcHJlbG9hZGVkU3RhdGUiLCJfcmVmJGVuaGFuY2VycyIsImVuaGFuY2VycyIsIm1pZGRsZXdhcmVFbmhhbmNlciIsImZpbmFsQ29tcG9zZSIsInRyYWNlIiwic3RvcmVFbmhhbmNlcnMiLCJjb21wb3NlZEVuaGFuY2VyIiwiY3JlYXRlQWN0aW9uIiwicHJlcGFyZUFjdGlvbiIsInByZXBhcmVkIiwicGF5bG9hZCIsIm1ldGEiLCJlcnJvciIsIm1hdGNoIiwiZXhlY3V0ZVJlZHVjZXJCdWlsZGVyQ2FsbGJhY2siLCJidWlsZGVyQ2FsbGJhY2siLCJkZWZhdWx0Q2FzZVJlZHVjZXIiLCJhY3Rpb25zTWFwIiwiYWN0aW9uTWF0Y2hlcnMiLCJidWlsZGVyIiwiYWRkQ2FzZSIsInR5cGVPckFjdGlvbkNyZWF0b3IiLCJhZGRNYXRjaGVyIiwibWF0Y2hlciIsImFkZERlZmF1bHRDYXNlIiwiY3JlYXRlU2xpY2UiLCJleHRyYVJlZHVjZXJzIiwiX3JlZiQiLCJfcmVmJDIiLCJfcmVmJDMiLCJyZWR1Y2VyTmFtZXMiLCJzbGljZUNhc2VSZWR1Y2Vyc0J5TmFtZSIsInNsaWNlQ2FzZVJlZHVjZXJzQnlUeXBlIiwicmVkdWNlck5hbWUiLCJjYXNlUmVkdWNlciIsInByZXBhcmVDYWxsYmFjayIsIm1heWJlUmVkdWNlcldpdGhQcmVwYXJlIiwicHJlcGFyZSIsIm1hcE9yQnVpbGRlckNhbGxiYWNrIiwiZmluYWxBY3Rpb25NYXRjaGVycyIsImZpbmFsRGVmYXVsdENhc2VSZWR1Y2VyIiwiY2FzZVJlZHVjZXJzIiwiX3JlZjMiLCJjciIsInByZXZpb3VzU3RhdGUiLCJkcmFmdCIsIl9yZXN1bHQiLCJjcmVhdGVSZWR1Y2VyIiwiYWN0aW9ucyIsImFzeW5jSXRlcmF0b3IiLCJjb21tb25Qcm9wZXJ0aWVzIiwiUmVqZWN0V2l0aFZhbHVlIiwibWVzc2FnZSIsIm1pbmlTZXJpYWxpemVFcnJvciIsInNpbXBsZUVycm9yIiwiX2l0ZXJhdG9yIiwiX2lzQXJyYXkiLCJkb25lIiwiY3JlYXRlQXN5bmNUaHVuayIsInR5cGVQcmVmaXgiLCJwYXlsb2FkQ3JlYXRvciIsImZ1bGZpbGxlZCIsInJlcXVlc3RJZCIsInJlcXVlc3RTdGF0dXMiLCJwZW5kaW5nIiwicmVqZWN0ZWQiLCJyZWplY3RlZFdpdGhWYWx1ZSIsImFib3J0ZWQiLCJjb25kaXRpb24iLCJzZXJpYWxpemVFcnJvciIsIkFDIiwiQWJvcnRDb250cm9sbGVyIiwiX2NsYXNzIiwic2lnbmFsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRpc3BhdGNoRXZlbnQiLCJvbmFib3J0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFib3J0IiwiZXh0cmEiLCJhYm9ydFJlYXNvbiIsInNpemUiLCJpZCIsIm5hbm9pZCIsImFib3J0Q29udHJvbGxlciIsImFib3J0ZWRQcm9taXNlIiwicmVqZWN0Iiwic3RhcnRlZCIsInByb21pc2UiLCJmaW5hbEFjdGlvbiIsIl90ZW1wMyIsIl9leGl0MiIsImRpc3BhdGNoQ29uZGl0aW9uUmVqZWN0aW9uIiwiX3RlbXA0IiwiYm9keSIsInJlY292ZXIiLCJfY2F0Y2giLCJyZXNvbHZlIiwicmFjZSIsInJlamVjdFdpdGhWYWx1ZSIsIl9Qcm9taXNlJHJhY2UiLCJlcnIiLCJyZWFzb24iLCJmYWN0b3J5IiwiaXNGdW5jdGlvbiIsImxlbiIsInZlcnR4TmV4dCIsImN1c3RvbVNjaGVkdWxlckZuIiwiYXNhcCIsImNhbGxiYWNrIiwicXVldWUiLCJmbHVzaCIsInNjaGVkdWxlRmx1c2giLCJicm93c2VyV2luZG93IiwiYnJvd3Nlckdsb2JhbCIsIkJyb3dzZXJNdXRhdGlvbk9ic2VydmVyIiwiTXV0YXRpb25PYnNlcnZlciIsIldlYktpdE11dGF0aW9uT2JzZXJ2ZXIiLCJpc05vZGUiLCJzZWxmIiwicHJvY2VzcyIsImlzV29ya2VyIiwiVWludDhDbGFtcGVkQXJyYXkiLCJpbXBvcnRTY3JpcHRzIiwiTWVzc2FnZUNoYW5uZWwiLCJ1c2VTZXRUaW1lb3V0IiwiZ2xvYmFsU2V0VGltZW91dCIsInNldFRpbWVvdXQiLCJjaGFubmVsIiwiaXRlcmF0aW9ucyIsIm5vZGUiLCJvbkZ1bGZpbGxtZW50Iiwib25SZWplY3Rpb24iLCJfYXJndW1lbnRzIiwicGFyZW50IiwiY2hpbGQiLCJub29wIiwiUFJPTUlTRV9JRCIsIm1ha2VQcm9taXNlIiwiX3N0YXRlIiwiaW52b2tlQ2FsbGJhY2siLCJfcmVzb2x2ZSIsIm5leHRUaWNrIiwiZG9jdW1lbnQiLCJjcmVhdGVUZXh0Tm9kZSIsIm9ic2VydmUiLCJjaGFyYWN0ZXJEYXRhIiwiZGF0YSIsInBvcnQxIiwib25tZXNzYWdlIiwicG9ydDIiLCJwb3N0TWVzc2FnZSIsInZlcnR4IiwicnVuT25Mb29wIiwicnVuT25Db250ZXh0IiwiYXR0ZW1wdFZlcnR4IiwiUEVORElORyIsIkdFVF9USEVOX0VSUk9SIiwiRXJyb3JPYmplY3QiLCJnZXRUaGVuIiwiaGFuZGxlTWF5YmVUaGVuYWJsZSIsIm1heWJlVGhlbmFibGUiLCJ0aGVuJCQiLCJ0aGVuYWJsZSIsImZ1bGZpbGwiLCJfcmVqZWN0IiwiaGFuZGxlT3duVGhlbmFibGUiLCJzZWFsZWQiLCJmdWxmaWxsbWVudEhhbmRsZXIiLCJyZWplY3Rpb25IYW5kbGVyIiwidHJ5VGhlbiIsIl9sYWJlbCIsImhhbmRsZUZvcmVpZ25UaGVuYWJsZSIsInB1Ymxpc2hSZWplY3Rpb24iLCJfb25lcnJvciIsInB1Ymxpc2giLCJfc3Vic2NyaWJlcnMiLCJzdWJzY3JpYmVycyIsInNldHRsZWQiLCJkZXRhaWwiLCJUUllfQ0FUQ0hfRVJST1IiLCJoYXNDYWxsYmFjayIsInN1Y2NlZWRlZCIsImZhaWxlZCIsInRyeUNhdGNoIiwiRW51bWVyYXRvciIsIkNvbnN0cnVjdG9yIiwiaW5wdXQiLCJfaW5zdGFuY2VDb25zdHJ1Y3RvciIsIl9pbnB1dCIsIl9yZW1haW5pbmciLCJfZW51bWVyYXRlIiwicmVzb2x2ZXIiLCJuZWVkc1Jlc29sdmVyIiwiaW5pdGlhbGl6ZVByb21pc2UiLCJuZWVkc05ldyIsInBvbHlmaWxsIiwibG9jYWwiLCJnbG9iYWwiLCJwcm9taXNlVG9TdHJpbmciLCJjYXN0IiwiX2VhY2hFbnRyeSIsImVudHJ5IiwicmVzb2x2ZSQkIiwiX3RoZW4iLCJfc2V0dGxlZEF0IiwiX3dpbGxTZXR0bGVBdCIsImVudW1lcmF0b3IiLCJhbGwiLCJlbnRyaWVzIiwiX3NldFNjaGVkdWxlciIsInNjaGVkdWxlRm4iLCJfc2V0QXNhcCIsImFzYXBGbiIsIl9hc2FwIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImNsZWFyVGltZW91dCIsImN1cnJlbnRRdWV1ZSIsImRyYWluaW5nIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwicnVuIiwibWFya2VyIiwicnVuQ2xlYXJUaW1lb3V0IiwiSXRlbSIsImFycmF5IiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIiwiaWRlYXNTbGljZSIsInNldElkZWFzIiwiYWRkSWRlYSIsImlkZWEiLCJyZW1vdmVJZGVhIiwiZmluZEluZGV4IiwiZGVmYXVsdEVxdWFsaXR5Q2hlY2siLCJhcmVBcmd1bWVudHNTaGFsbG93bHlFcXVhbCIsImVxdWFsaXR5Q2hlY2siLCJwcmV2IiwiZ2V0RGVwZW5kZW5jaWVzIiwiZGVwZW5kZW5jaWVzIiwiZXZlcnkiLCJkZXAiLCJkZXBlbmRlbmN5VHlwZXMiLCJjcmVhdGVTZWxlY3RvciIsIm1lbW9pemUiLCJtZW1vaXplT3B0aW9ucyIsInJlY29tcHV0YXRpb25zIiwicmVzdWx0RnVuYyIsInBvcCIsIm1lbW9pemVkUmVzdWx0RnVuYyIsInNlbGVjdG9yIiwicGFyYW1zIiwicmVzZXRSZWNvbXB1dGF0aW9ucyIsImNyZWF0ZVNlbGVjdG9yQ3JlYXRvciIsImZ1bmMiLCJsYXN0QXJncyIsImxhc3RSZXN1bHQiLCJjcmVhdGVUaHVua01pZGRsZXdhcmUiXSwibWFwcGluZ3MiOiI7c0NBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBMERmLE9BckRBRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZB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RUFBYTVjLE9BRWpCaEcsRUFBSSxFQUFHQSxFQUFJZ0csRUFBUWhHLElBRTFCd2pCLEVBQU9oZSxLQUFLb2QsRUFBYTVpQixHQUFHZ0ksTUFBTSxLQUFNckQsWUFJMUMsT0FBTzJlLEVBQW1CdGIsTUFBTSxLQUFNd2IsTUFXeEMsT0FSQUQsRUFBU0gsV0FBYUEsRUFDdEJHLEVBQVNYLGFBQWVBLEVBQ3hCVyxFQUFTSixlQUFpQixXQUN4QixPQUFPQSxHQUVUSSxFQUFTRSxvQkFBc0IsV0FDN0IsT0FBT04sRUFBaUIsR0FFbkJJLEdBSWlCRyxFQTlFckIsU0FBd0JDLEdBQzdCLElBQUlsQixFQUFnQjlkLFVBQVVxQixPQUFTLFFBQXNCbkIsSUFBakJGLFVBQVUsR0FBbUJBLFVBQVUsR0FBSzRkLEVBRXBGcUIsRUFBVyxLQUNYQyxFQUFhLEtBRWpCLE9BQU8sV0FPTCxPQU5LckIsRUFBMkJDLEVBQWVtQixFQUFVamYsYUFFdkRrZixFQUFhRixFQUFLM2IsTUFBTSxLQUFNckQsWUFHaENpZixFQUFXamYsVUFDSmtmLE8saUNDakNYLGtCQUdJM2hCLEVBSEosU0FNRUEsRUFEa0Isb0JBQVR5WCxLQUNGQSxLQUNvQixvQkFBWHpLLE9BQ1RBLFlBQ29CLElBQVh3UCxFQUNUQSxFQUVBM2UsRUFLVCxJQUFJb0MsRUFBUyxZQUFTRCxHQUNQLFEsNERDbEJmLFNBQVM0aEIsRUFBc0JwUyxHQUM3QixPQUFPLFNBQVV2TCxHQUNmLElBQUlQLEVBQVdPLEVBQUtQLFNBQ2hCckQsRUFBVzRELEVBQUs1RCxTQUNwQixPQUFPLFNBQVVpRSxHQUNmLE9BQU8sU0FBVVgsR0FDZixNQUFzQixtQkFBWEEsRUFDRkEsRUFBT0QsRUFBVXJELEVBQVVtUCxHQUc3QmxMLEVBQUtYLE1BTXBCLElBQUl3TCxFQUFReVMsSUFDWnpTLEVBQU1JLGtCQUFvQnFTLEVBRVgiLCJmaWxlIjoic3RvcmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTE0KTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnZXM2LXByb21pc2UnKS5Qcm9taXNlO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3ltYm9sT2JzZXJ2YWJsZVBvbnlmaWxsKHJvb3QpIHtcblx0dmFyIHJlc3VsdDtcblx0dmFyIFN5bWJvbCA9IHJvb3QuU3ltYm9sO1xuXG5cdGlmICh0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0aWYgKFN5bWJvbC5vYnNlcnZhYmxlKSB7XG5cdFx0XHRyZXN1bHQgPSBTeW1ib2wub2JzZXJ2YWJsZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVzdWx0ID0gU3ltYm9sKCdvYnNlcnZhYmxlJyk7XG5cdFx0XHRTeW1ib2wub2JzZXJ2YWJsZSA9IHJlc3VsdDtcblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0cmVzdWx0ID0gJ0BAb2JzZXJ2YWJsZSc7XG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0O1xufTtcbiIsImltcG9ydCB7IGNyZWF0ZUFzeW5jVGh1bmsgfSBmcm9tIFwiQHJlZHV4anMvdG9vbGtpdFwiO1xuaW1wb3J0IHsgUm9vdFN0YXRlIH0gZnJvbSBcIi4uLy4uL3JlZHVjZXJzXCI7XG5cbmV4cG9ydCBjb25zdCBmZXRjaElkZWFzID0gY3JlYXRlQXN5bmNUaHVuayhcbiAgJ2lkZWFzL2ZldGNoSWRlYXMnLFxuICBhc3luYyAodXNlcklkLCB7IGdldFN0YXRlIH0pID0+IHtcbiAgICBjb25zb2xlLmxvZygnZmV0Y2ggaWRlYXMgYXN5bmMnKVxuICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKSBhcyBSb290U3RhdGVcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAkeyBzdGF0ZS5jb25maWcuYXBpIH0vc2l0ZS8keyAgc3RhdGUuY29uZmlnLnNpdGVJZCB9L2lkZWE/aW5jbHVkZVZvdGVDb3VudD0xJmluY2x1ZGVBcmdzQ291bnQ9MSZpbmNsdWRlVXNlcj0xYClcblxuICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgfVxuKVxuIiwiaW1wb3J0IHsgY3JlYXRlU2xpY2UgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0J1xuaW1wb3J0IHsgQ29uZmlnU3RhdGUgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5jb25zdCBpbml0aWFsU3RhdGUgPSB7IGFwaToge30gfSBhcyBDb25maWdTdGF0ZVxuXG5jb25zdCBjb25maWdTbGljZSA9IGNyZWF0ZVNsaWNlKHtcbiAgbmFtZTogJ2NvbmZpZycsXG4gIGluaXRpYWxTdGF0ZSxcbiAgcmVkdWNlcnM6IHt9XG59KVxuXG5leHBvcnQgZGVmYXVsdCBjb25maWdTbGljZS5yZWR1Y2VyXG4iLCJpbXBvcnQgeyBjb21iaW5lUmVkdWNlcnMgfSBmcm9tICdyZWR1eCdcbmltcG9ydCBjb25maWdSZWR1Y2VyIGZyb20gJy4uL2ZlYXR1cmVzL2NvbmZpZy9jb25maWdTbGljZSdcbmltcG9ydCBpZGVhc1JlZHVjZXIgZnJvbSAnLi4vZmVhdHVyZXMvaWRlYXMvaWRlYXNTbGljZSdcblxuY29uc3Qgcm9vdFJlZHVjZXIgPSBjb21iaW5lUmVkdWNlcnMoe1xuICBjb25maWc6IGNvbmZpZ1JlZHVjZXIsXG4gIGlkZWFzOiBpZGVhc1JlZHVjZXJcbn0pXG5cbmV4cG9ydCB0eXBlIFJvb3RTdGF0ZSA9IFJldHVyblR5cGU8dHlwZW9mIHJvb3RSZWR1Y2VyPlxuXG5leHBvcnQgZGVmYXVsdCByb290UmVkdWNlclxuIiwiaW1wb3J0IHsgY29uZmlndXJlU3RvcmUsIEVuaGFuY2VkU3RvcmUgfSBmcm9tICdAcmVkdXhqcy90b29sa2l0J1xuaW1wb3J0IHJvb3RSZWR1Y2VyLCB7IFJvb3RTdGF0ZSB9IGZyb20gJy4vc3JjL3JlZHVjZXJzJ1xuaW1wb3J0IHsgRGVlcFBhcnRpYWwgfSBmcm9tIFwicmVkdXhcIjtcblxuY29uc3Qgc3RvcmUgPSAocHJlbG9hZGVkU3RhdGU6IERlZXBQYXJ0aWFsPFJvb3RTdGF0ZT4pOiBFbmhhbmNlZFN0b3JlID0+IHtcbiAgcmV0dXJuIGNvbmZpZ3VyZVN0b3JlKHtcbiAgICByZWR1Y2VyOiByb290UmVkdWNlcixcbiAgICBwcmVsb2FkZWRTdGF0ZVxuICB9KTtcbn1cblxuZXhwb3J0IHtcbiAgc3RvcmUgYXMgZGVmYXVsdCxcbiAgc3RvcmUgYXMgT3BlbnN0YWRTdG9yZVxufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob3JpZ2luYWxNb2R1bGUpIHtcblx0aWYgKCFvcmlnaW5hbE1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcblx0XHR2YXIgbW9kdWxlID0gT2JqZWN0LmNyZWF0ZShvcmlnaW5hbE1vZHVsZSk7XG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XG5cdFx0aWYgKCFtb2R1bGUuY2hpbGRyZW4pIG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwibG9hZGVkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJpZFwiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwiZXhwb3J0c1wiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlXG5cdFx0fSk7XG5cdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XG5cdH1cblx0cmV0dXJuIG1vZHVsZTtcbn07XG4iLCJpbXBvcnQgJCRvYnNlcnZhYmxlIGZyb20gJ3N5bWJvbC1vYnNlcnZhYmxlJztcblxuLyoqXG4gKiBUaGVzZSBhcmUgcHJpdmF0ZSBhY3Rpb24gdHlwZXMgcmVzZXJ2ZWQgYnkgUmVkdXguXG4gKiBGb3IgYW55IHVua25vd24gYWN0aW9ucywgeW91IG11c3QgcmV0dXJuIHRoZSBjdXJyZW50IHN0YXRlLlxuICogSWYgdGhlIGN1cnJlbnQgc3RhdGUgaXMgdW5kZWZpbmVkLCB5b3UgbXVzdCByZXR1cm4gdGhlIGluaXRpYWwgc3RhdGUuXG4gKiBEbyBub3QgcmVmZXJlbmNlIHRoZXNlIGFjdGlvbiB0eXBlcyBkaXJlY3RseSBpbiB5b3VyIGNvZGUuXG4gKi9cbnZhciByYW5kb21TdHJpbmcgPSBmdW5jdGlvbiByYW5kb21TdHJpbmcoKSB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoNykuc3BsaXQoJycpLmpvaW4oJy4nKTtcbn07XG5cbnZhciBBY3Rpb25UeXBlcyA9IHtcbiAgSU5JVDogXCJAQHJlZHV4L0lOSVRcIiArIHJhbmRvbVN0cmluZygpLFxuICBSRVBMQUNFOiBcIkBAcmVkdXgvUkVQTEFDRVwiICsgcmFuZG9tU3RyaW5nKCksXG4gIFBST0JFX1VOS05PV05fQUNUSU9OOiBmdW5jdGlvbiBQUk9CRV9VTktOT1dOX0FDVElPTigpIHtcbiAgICByZXR1cm4gXCJAQHJlZHV4L1BST0JFX1VOS05PV05fQUNUSU9OXCIgKyByYW5kb21TdHJpbmcoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge2FueX0gb2JqIFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBhcmd1bWVudCBhcHBlYXJzIHRvIGJlIGEgcGxhaW4gb2JqZWN0LlxuICovXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gIHZhciBwcm90byA9IG9iajtcblxuICB3aGlsZSAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKSAhPT0gbnVsbCkge1xuICAgIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKTtcbiAgfVxuXG4gIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSA9PT0gcHJvdG87XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIFJlZHV4IHN0b3JlIHRoYXQgaG9sZHMgdGhlIHN0YXRlIHRyZWUuXG4gKiBUaGUgb25seSB3YXkgdG8gY2hhbmdlIHRoZSBkYXRhIGluIHRoZSBzdG9yZSBpcyB0byBjYWxsIGBkaXNwYXRjaCgpYCBvbiBpdC5cbiAqXG4gKiBUaGVyZSBzaG91bGQgb25seSBiZSBhIHNpbmdsZSBzdG9yZSBpbiB5b3VyIGFwcC4gVG8gc3BlY2lmeSBob3cgZGlmZmVyZW50XG4gKiBwYXJ0cyBvZiB0aGUgc3RhdGUgdHJlZSByZXNwb25kIHRvIGFjdGlvbnMsIHlvdSBtYXkgY29tYmluZSBzZXZlcmFsIHJlZHVjZXJzXG4gKiBpbnRvIGEgc2luZ2xlIHJlZHVjZXIgZnVuY3Rpb24gYnkgdXNpbmcgYGNvbWJpbmVSZWR1Y2Vyc2AuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVkdWNlciBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbmV4dCBzdGF0ZSB0cmVlLCBnaXZlblxuICogdGhlIGN1cnJlbnQgc3RhdGUgdHJlZSBhbmQgdGhlIGFjdGlvbiB0byBoYW5kbGUuXG4gKlxuICogQHBhcmFtIHthbnl9IFtwcmVsb2FkZWRTdGF0ZV0gVGhlIGluaXRpYWwgc3RhdGUuIFlvdSBtYXkgb3B0aW9uYWxseSBzcGVjaWZ5IGl0XG4gKiB0byBoeWRyYXRlIHRoZSBzdGF0ZSBmcm9tIHRoZSBzZXJ2ZXIgaW4gdW5pdmVyc2FsIGFwcHMsIG9yIHRvIHJlc3RvcmUgYVxuICogcHJldmlvdXNseSBzZXJpYWxpemVkIHVzZXIgc2Vzc2lvbi5cbiAqIElmIHlvdSB1c2UgYGNvbWJpbmVSZWR1Y2Vyc2AgdG8gcHJvZHVjZSB0aGUgcm9vdCByZWR1Y2VyIGZ1bmN0aW9uLCB0aGlzIG11c3QgYmVcbiAqIGFuIG9iamVjdCB3aXRoIHRoZSBzYW1lIHNoYXBlIGFzIGBjb21iaW5lUmVkdWNlcnNgIGtleXMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2VuaGFuY2VyXSBUaGUgc3RvcmUgZW5oYW5jZXIuIFlvdSBtYXkgb3B0aW9uYWxseSBzcGVjaWZ5IGl0XG4gKiB0byBlbmhhbmNlIHRoZSBzdG9yZSB3aXRoIHRoaXJkLXBhcnR5IGNhcGFiaWxpdGllcyBzdWNoIGFzIG1pZGRsZXdhcmUsXG4gKiB0aW1lIHRyYXZlbCwgcGVyc2lzdGVuY2UsIGV0Yy4gVGhlIG9ubHkgc3RvcmUgZW5oYW5jZXIgdGhhdCBzaGlwcyB3aXRoIFJlZHV4XG4gKiBpcyBgYXBwbHlNaWRkbGV3YXJlKClgLlxuICpcbiAqIEByZXR1cm5zIHtTdG9yZX0gQSBSZWR1eCBzdG9yZSB0aGF0IGxldHMgeW91IHJlYWQgdGhlIHN0YXRlLCBkaXNwYXRjaCBhY3Rpb25zXG4gKiBhbmQgc3Vic2NyaWJlIHRvIGNoYW5nZXMuXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlU3RvcmUocmVkdWNlciwgcHJlbG9hZGVkU3RhdGUsIGVuaGFuY2VyKSB7XG4gIHZhciBfcmVmMjtcblxuICBpZiAodHlwZW9mIHByZWxvYWRlZFN0YXRlID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBlbmhhbmNlciA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgZW5oYW5jZXIgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGFyZ3VtZW50c1szXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBFcnJvcignSXQgbG9va3MgbGlrZSB5b3UgYXJlIHBhc3Npbmcgc2V2ZXJhbCBzdG9yZSBlbmhhbmNlcnMgdG8gJyArICdjcmVhdGVTdG9yZSgpLiBUaGlzIGlzIG5vdCBzdXBwb3J0ZWQuIEluc3RlYWQsIGNvbXBvc2UgdGhlbSAnICsgJ3RvZ2V0aGVyIHRvIGEgc2luZ2xlIGZ1bmN0aW9uLicpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBwcmVsb2FkZWRTdGF0ZSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZW5oYW5jZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgZW5oYW5jZXIgPSBwcmVsb2FkZWRTdGF0ZTtcbiAgICBwcmVsb2FkZWRTdGF0ZSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZW5oYW5jZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgaWYgKHR5cGVvZiBlbmhhbmNlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgZW5oYW5jZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZW5oYW5jZXIoY3JlYXRlU3RvcmUpKHJlZHVjZXIsIHByZWxvYWRlZFN0YXRlKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgcmVkdWNlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgdGhlIHJlZHVjZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgfVxuXG4gIHZhciBjdXJyZW50UmVkdWNlciA9IHJlZHVjZXI7XG4gIHZhciBjdXJyZW50U3RhdGUgPSBwcmVsb2FkZWRTdGF0ZTtcbiAgdmFyIGN1cnJlbnRMaXN0ZW5lcnMgPSBbXTtcbiAgdmFyIG5leHRMaXN0ZW5lcnMgPSBjdXJyZW50TGlzdGVuZXJzO1xuICB2YXIgaXNEaXNwYXRjaGluZyA9IGZhbHNlO1xuICAvKipcbiAgICogVGhpcyBtYWtlcyBhIHNoYWxsb3cgY29weSBvZiBjdXJyZW50TGlzdGVuZXJzIHNvIHdlIGNhbiB1c2VcbiAgICogbmV4dExpc3RlbmVycyBhcyBhIHRlbXBvcmFyeSBsaXN0IHdoaWxlIGRpc3BhdGNoaW5nLlxuICAgKlxuICAgKiBUaGlzIHByZXZlbnRzIGFueSBidWdzIGFyb3VuZCBjb25zdW1lcnMgY2FsbGluZ1xuICAgKiBzdWJzY3JpYmUvdW5zdWJzY3JpYmUgaW4gdGhlIG1pZGRsZSBvZiBhIGRpc3BhdGNoLlxuICAgKi9cblxuICBmdW5jdGlvbiBlbnN1cmVDYW5NdXRhdGVOZXh0TGlzdGVuZXJzKCkge1xuICAgIGlmIChuZXh0TGlzdGVuZXJzID09PSBjdXJyZW50TGlzdGVuZXJzKSB7XG4gICAgICBuZXh0TGlzdGVuZXJzID0gY3VycmVudExpc3RlbmVycy5zbGljZSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmVhZHMgdGhlIHN0YXRlIHRyZWUgbWFuYWdlZCBieSB0aGUgc3RvcmUuXG4gICAqXG4gICAqIEByZXR1cm5zIHthbnl9IFRoZSBjdXJyZW50IHN0YXRlIHRyZWUgb2YgeW91ciBhcHBsaWNhdGlvbi5cbiAgICovXG5cblxuICBmdW5jdGlvbiBnZXRTdGF0ZSgpIHtcbiAgICBpZiAoaXNEaXNwYXRjaGluZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbWF5IG5vdCBjYWxsIHN0b3JlLmdldFN0YXRlKCkgd2hpbGUgdGhlIHJlZHVjZXIgaXMgZXhlY3V0aW5nLiAnICsgJ1RoZSByZWR1Y2VyIGhhcyBhbHJlYWR5IHJlY2VpdmVkIHRoZSBzdGF0ZSBhcyBhbiBhcmd1bWVudC4gJyArICdQYXNzIGl0IGRvd24gZnJvbSB0aGUgdG9wIHJlZHVjZXIgaW5zdGVhZCBvZiByZWFkaW5nIGl0IGZyb20gdGhlIHN0b3JlLicpO1xuICAgIH1cblxuICAgIHJldHVybiBjdXJyZW50U3RhdGU7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgYSBjaGFuZ2UgbGlzdGVuZXIuIEl0IHdpbGwgYmUgY2FsbGVkIGFueSB0aW1lIGFuIGFjdGlvbiBpcyBkaXNwYXRjaGVkLFxuICAgKiBhbmQgc29tZSBwYXJ0IG9mIHRoZSBzdGF0ZSB0cmVlIG1heSBwb3RlbnRpYWxseSBoYXZlIGNoYW5nZWQuIFlvdSBtYXkgdGhlblxuICAgKiBjYWxsIGBnZXRTdGF0ZSgpYCB0byByZWFkIHRoZSBjdXJyZW50IHN0YXRlIHRyZWUgaW5zaWRlIHRoZSBjYWxsYmFjay5cbiAgICpcbiAgICogWW91IG1heSBjYWxsIGBkaXNwYXRjaCgpYCBmcm9tIGEgY2hhbmdlIGxpc3RlbmVyLCB3aXRoIHRoZSBmb2xsb3dpbmdcbiAgICogY2F2ZWF0czpcbiAgICpcbiAgICogMS4gVGhlIHN1YnNjcmlwdGlvbnMgYXJlIHNuYXBzaG90dGVkIGp1c3QgYmVmb3JlIGV2ZXJ5IGBkaXNwYXRjaCgpYCBjYWxsLlxuICAgKiBJZiB5b3Ugc3Vic2NyaWJlIG9yIHVuc3Vic2NyaWJlIHdoaWxlIHRoZSBsaXN0ZW5lcnMgYXJlIGJlaW5nIGludm9rZWQsIHRoaXNcbiAgICogd2lsbCBub3QgaGF2ZSBhbnkgZWZmZWN0IG9uIHRoZSBgZGlzcGF0Y2goKWAgdGhhdCBpcyBjdXJyZW50bHkgaW4gcHJvZ3Jlc3MuXG4gICAqIEhvd2V2ZXIsIHRoZSBuZXh0IGBkaXNwYXRjaCgpYCBjYWxsLCB3aGV0aGVyIG5lc3RlZCBvciBub3QsIHdpbGwgdXNlIGEgbW9yZVxuICAgKiByZWNlbnQgc25hcHNob3Qgb2YgdGhlIHN1YnNjcmlwdGlvbiBsaXN0LlxuICAgKlxuICAgKiAyLiBUaGUgbGlzdGVuZXIgc2hvdWxkIG5vdCBleHBlY3QgdG8gc2VlIGFsbCBzdGF0ZSBjaGFuZ2VzLCBhcyB0aGUgc3RhdGVcbiAgICogbWlnaHQgaGF2ZSBiZWVuIHVwZGF0ZWQgbXVsdGlwbGUgdGltZXMgZHVyaW5nIGEgbmVzdGVkIGBkaXNwYXRjaCgpYCBiZWZvcmVcbiAgICogdGhlIGxpc3RlbmVyIGlzIGNhbGxlZC4gSXQgaXMsIGhvd2V2ZXIsIGd1YXJhbnRlZWQgdGhhdCBhbGwgc3Vic2NyaWJlcnNcbiAgICogcmVnaXN0ZXJlZCBiZWZvcmUgdGhlIGBkaXNwYXRjaCgpYCBzdGFydGVkIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIGxhdGVzdFxuICAgKiBzdGF0ZSBieSB0aGUgdGltZSBpdCBleGl0cy5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbGlzdGVuZXIgQSBjYWxsYmFjayB0byBiZSBpbnZva2VkIG9uIGV2ZXJ5IGRpc3BhdGNoLlxuICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgZnVuY3Rpb24gdG8gcmVtb3ZlIHRoaXMgY2hhbmdlIGxpc3RlbmVyLlxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIHN1YnNjcmliZShsaXN0ZW5lcikge1xuICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgdGhlIGxpc3RlbmVyIHRvIGJlIGEgZnVuY3Rpb24uJyk7XG4gICAgfVxuXG4gICAgaWYgKGlzRGlzcGF0Y2hpbmcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG1heSBub3QgY2FsbCBzdG9yZS5zdWJzY3JpYmUoKSB3aGlsZSB0aGUgcmVkdWNlciBpcyBleGVjdXRpbmcuICcgKyAnSWYgeW91IHdvdWxkIGxpa2UgdG8gYmUgbm90aWZpZWQgYWZ0ZXIgdGhlIHN0b3JlIGhhcyBiZWVuIHVwZGF0ZWQsIHN1YnNjcmliZSBmcm9tIGEgJyArICdjb21wb25lbnQgYW5kIGludm9rZSBzdG9yZS5nZXRTdGF0ZSgpIGluIHRoZSBjYWxsYmFjayB0byBhY2Nlc3MgdGhlIGxhdGVzdCBzdGF0ZS4gJyArICdTZWUgaHR0cHM6Ly9yZWR1eC5qcy5vcmcvYXBpLXJlZmVyZW5jZS9zdG9yZSNzdWJzY3JpYmVsaXN0ZW5lciBmb3IgbW9yZSBkZXRhaWxzLicpO1xuICAgIH1cblxuICAgIHZhciBpc1N1YnNjcmliZWQgPSB0cnVlO1xuICAgIGVuc3VyZUNhbk11dGF0ZU5leHRMaXN0ZW5lcnMoKTtcbiAgICBuZXh0TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIHJldHVybiBmdW5jdGlvbiB1bnN1YnNjcmliZSgpIHtcbiAgICAgIGlmICghaXNTdWJzY3JpYmVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzRGlzcGF0Y2hpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbWF5IG5vdCB1bnN1YnNjcmliZSBmcm9tIGEgc3RvcmUgbGlzdGVuZXIgd2hpbGUgdGhlIHJlZHVjZXIgaXMgZXhlY3V0aW5nLiAnICsgJ1NlZSBodHRwczovL3JlZHV4LmpzLm9yZy9hcGktcmVmZXJlbmNlL3N0b3JlI3N1YnNjcmliZWxpc3RlbmVyIGZvciBtb3JlIGRldGFpbHMuJyk7XG4gICAgICB9XG5cbiAgICAgIGlzU3Vic2NyaWJlZCA9IGZhbHNlO1xuICAgICAgZW5zdXJlQ2FuTXV0YXRlTmV4dExpc3RlbmVycygpO1xuICAgICAgdmFyIGluZGV4ID0gbmV4dExpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKTtcbiAgICAgIG5leHRMaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIGN1cnJlbnRMaXN0ZW5lcnMgPSBudWxsO1xuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIERpc3BhdGNoZXMgYW4gYWN0aW9uLiBJdCBpcyB0aGUgb25seSB3YXkgdG8gdHJpZ2dlciBhIHN0YXRlIGNoYW5nZS5cbiAgICpcbiAgICogVGhlIGByZWR1Y2VyYCBmdW5jdGlvbiwgdXNlZCB0byBjcmVhdGUgdGhlIHN0b3JlLCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZVxuICAgKiBjdXJyZW50IHN0YXRlIHRyZWUgYW5kIHRoZSBnaXZlbiBgYWN0aW9uYC4gSXRzIHJldHVybiB2YWx1ZSB3aWxsXG4gICAqIGJlIGNvbnNpZGVyZWQgdGhlICoqbmV4dCoqIHN0YXRlIG9mIHRoZSB0cmVlLCBhbmQgdGhlIGNoYW5nZSBsaXN0ZW5lcnNcbiAgICogd2lsbCBiZSBub3RpZmllZC5cbiAgICpcbiAgICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb25seSBzdXBwb3J0cyBwbGFpbiBvYmplY3QgYWN0aW9ucy4gSWYgeW91IHdhbnQgdG9cbiAgICogZGlzcGF0Y2ggYSBQcm9taXNlLCBhbiBPYnNlcnZhYmxlLCBhIHRodW5rLCBvciBzb21ldGhpbmcgZWxzZSwgeW91IG5lZWQgdG9cbiAgICogd3JhcCB5b3VyIHN0b3JlIGNyZWF0aW5nIGZ1bmN0aW9uIGludG8gdGhlIGNvcnJlc3BvbmRpbmcgbWlkZGxld2FyZS4gRm9yXG4gICAqIGV4YW1wbGUsIHNlZSB0aGUgZG9jdW1lbnRhdGlvbiBmb3IgdGhlIGByZWR1eC10aHVua2AgcGFja2FnZS4gRXZlbiB0aGVcbiAgICogbWlkZGxld2FyZSB3aWxsIGV2ZW50dWFsbHkgZGlzcGF0Y2ggcGxhaW4gb2JqZWN0IGFjdGlvbnMgdXNpbmcgdGhpcyBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBhY3Rpb24gQSBwbGFpbiBvYmplY3QgcmVwcmVzZW50aW5nIOKAnHdoYXQgY2hhbmdlZOKAnS4gSXQgaXNcbiAgICogYSBnb29kIGlkZWEgdG8ga2VlcCBhY3Rpb25zIHNlcmlhbGl6YWJsZSBzbyB5b3UgY2FuIHJlY29yZCBhbmQgcmVwbGF5IHVzZXJcbiAgICogc2Vzc2lvbnMsIG9yIHVzZSB0aGUgdGltZSB0cmF2ZWxsaW5nIGByZWR1eC1kZXZ0b29sc2AuIEFuIGFjdGlvbiBtdXN0IGhhdmVcbiAgICogYSBgdHlwZWAgcHJvcGVydHkgd2hpY2ggbWF5IG5vdCBiZSBgdW5kZWZpbmVkYC4gSXQgaXMgYSBnb29kIGlkZWEgdG8gdXNlXG4gICAqIHN0cmluZyBjb25zdGFudHMgZm9yIGFjdGlvbiB0eXBlcy5cbiAgICpcbiAgICogQHJldHVybnMge09iamVjdH0gRm9yIGNvbnZlbmllbmNlLCB0aGUgc2FtZSBhY3Rpb24gb2JqZWN0IHlvdSBkaXNwYXRjaGVkLlxuICAgKlxuICAgKiBOb3RlIHRoYXQsIGlmIHlvdSB1c2UgYSBjdXN0b20gbWlkZGxld2FyZSwgaXQgbWF5IHdyYXAgYGRpc3BhdGNoKClgIHRvXG4gICAqIHJldHVybiBzb21ldGhpbmcgZWxzZSAoZm9yIGV4YW1wbGUsIGEgUHJvbWlzZSB5b3UgY2FuIGF3YWl0KS5cbiAgICovXG5cblxuICBmdW5jdGlvbiBkaXNwYXRjaChhY3Rpb24pIHtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoYWN0aW9uKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdBY3Rpb25zIG11c3QgYmUgcGxhaW4gb2JqZWN0cy4gJyArICdVc2UgY3VzdG9tIG1pZGRsZXdhcmUgZm9yIGFzeW5jIGFjdGlvbnMuJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBhY3Rpb24udHlwZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQWN0aW9ucyBtYXkgbm90IGhhdmUgYW4gdW5kZWZpbmVkIFwidHlwZVwiIHByb3BlcnR5LiAnICsgJ0hhdmUgeW91IG1pc3NwZWxsZWQgYSBjb25zdGFudD8nKTtcbiAgICB9XG5cbiAgICBpZiAoaXNEaXNwYXRjaGluZykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWR1Y2VycyBtYXkgbm90IGRpc3BhdGNoIGFjdGlvbnMuJyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGlzRGlzcGF0Y2hpbmcgPSB0cnVlO1xuICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFJlZHVjZXIoY3VycmVudFN0YXRlLCBhY3Rpb24pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpc0Rpc3BhdGNoaW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGxpc3RlbmVycyA9IGN1cnJlbnRMaXN0ZW5lcnMgPSBuZXh0TGlzdGVuZXJzO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBsaXN0ZW5lciA9IGxpc3RlbmVyc1tpXTtcbiAgICAgIGxpc3RlbmVyKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFjdGlvbjtcbiAgfVxuICAvKipcbiAgICogUmVwbGFjZXMgdGhlIHJlZHVjZXIgY3VycmVudGx5IHVzZWQgYnkgdGhlIHN0b3JlIHRvIGNhbGN1bGF0ZSB0aGUgc3RhdGUuXG4gICAqXG4gICAqIFlvdSBtaWdodCBuZWVkIHRoaXMgaWYgeW91ciBhcHAgaW1wbGVtZW50cyBjb2RlIHNwbGl0dGluZyBhbmQgeW91IHdhbnQgdG9cbiAgICogbG9hZCBzb21lIG9mIHRoZSByZWR1Y2VycyBkeW5hbWljYWxseS4gWW91IG1pZ2h0IGFsc28gbmVlZCB0aGlzIGlmIHlvdVxuICAgKiBpbXBsZW1lbnQgYSBob3QgcmVsb2FkaW5nIG1lY2hhbmlzbSBmb3IgUmVkdXguXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRSZWR1Y2VyIFRoZSByZWR1Y2VyIGZvciB0aGUgc3RvcmUgdG8gdXNlIGluc3RlYWQuXG4gICAqIEByZXR1cm5zIHt2b2lkfVxuICAgKi9cblxuXG4gIGZ1bmN0aW9uIHJlcGxhY2VSZWR1Y2VyKG5leHRSZWR1Y2VyKSB7XG4gICAgaWYgKHR5cGVvZiBuZXh0UmVkdWNlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB0aGUgbmV4dFJlZHVjZXIgdG8gYmUgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG5cbiAgICBjdXJyZW50UmVkdWNlciA9IG5leHRSZWR1Y2VyOyAvLyBUaGlzIGFjdGlvbiBoYXMgYSBzaW1pbGlhciBlZmZlY3QgdG8gQWN0aW9uVHlwZXMuSU5JVC5cbiAgICAvLyBBbnkgcmVkdWNlcnMgdGhhdCBleGlzdGVkIGluIGJvdGggdGhlIG5ldyBhbmQgb2xkIHJvb3RSZWR1Y2VyXG4gICAgLy8gd2lsbCByZWNlaXZlIHRoZSBwcmV2aW91cyBzdGF0ZS4gVGhpcyBlZmZlY3RpdmVseSBwb3B1bGF0ZXNcbiAgICAvLyB0aGUgbmV3IHN0YXRlIHRyZWUgd2l0aCBhbnkgcmVsZXZhbnQgZGF0YSBmcm9tIHRoZSBvbGQgb25lLlxuXG4gICAgZGlzcGF0Y2goe1xuICAgICAgdHlwZTogQWN0aW9uVHlwZXMuUkVQTEFDRVxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBJbnRlcm9wZXJhYmlsaXR5IHBvaW50IGZvciBvYnNlcnZhYmxlL3JlYWN0aXZlIGxpYnJhcmllcy5cbiAgICogQHJldHVybnMge29ic2VydmFibGV9IEEgbWluaW1hbCBvYnNlcnZhYmxlIG9mIHN0YXRlIGNoYW5nZXMuXG4gICAqIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWUgdGhlIG9ic2VydmFibGUgcHJvcG9zYWw6XG4gICAqIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLW9ic2VydmFibGVcbiAgICovXG5cblxuICBmdW5jdGlvbiBvYnNlcnZhYmxlKCkge1xuICAgIHZhciBfcmVmO1xuXG4gICAgdmFyIG91dGVyU3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuICAgIHJldHVybiBfcmVmID0ge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgbWluaW1hbCBvYnNlcnZhYmxlIHN1YnNjcmlwdGlvbiBtZXRob2QuXG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JzZXJ2ZXIgQW55IG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIGFzIGFuIG9ic2VydmVyLlxuICAgICAgICogVGhlIG9ic2VydmVyIG9iamVjdCBzaG91bGQgaGF2ZSBhIGBuZXh0YCBtZXRob2QuXG4gICAgICAgKiBAcmV0dXJucyB7c3Vic2NyaXB0aW9ufSBBbiBvYmplY3Qgd2l0aCBhbiBgdW5zdWJzY3JpYmVgIG1ldGhvZCB0aGF0IGNhblxuICAgICAgICogYmUgdXNlZCB0byB1bnN1YnNjcmliZSB0aGUgb2JzZXJ2YWJsZSBmcm9tIHRoZSBzdG9yZSwgYW5kIHByZXZlbnQgZnVydGhlclxuICAgICAgICogZW1pc3Npb24gb2YgdmFsdWVzIGZyb20gdGhlIG9ic2VydmFibGUuXG4gICAgICAgKi9cbiAgICAgIHN1YnNjcmliZTogZnVuY3Rpb24gc3Vic2NyaWJlKG9ic2VydmVyKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JzZXJ2ZXIgIT09ICdvYmplY3QnIHx8IG9ic2VydmVyID09PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgdGhlIG9ic2VydmVyIHRvIGJlIGFuIG9iamVjdC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9ic2VydmVTdGF0ZSgpIHtcbiAgICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChnZXRTdGF0ZSgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBvYnNlcnZlU3RhdGUoKTtcbiAgICAgICAgdmFyIHVuc3Vic2NyaWJlID0gb3V0ZXJTdWJzY3JpYmUob2JzZXJ2ZVN0YXRlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB1bnN1YnNjcmliZTogdW5zdWJzY3JpYmVcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LCBfcmVmWyQkb2JzZXJ2YWJsZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LCBfcmVmO1xuICB9IC8vIFdoZW4gYSBzdG9yZSBpcyBjcmVhdGVkLCBhbiBcIklOSVRcIiBhY3Rpb24gaXMgZGlzcGF0Y2hlZCBzbyB0aGF0IGV2ZXJ5XG4gIC8vIHJlZHVjZXIgcmV0dXJucyB0aGVpciBpbml0aWFsIHN0YXRlLiBUaGlzIGVmZmVjdGl2ZWx5IHBvcHVsYXRlc1xuICAvLyB0aGUgaW5pdGlhbCBzdGF0ZSB0cmVlLlxuXG5cbiAgZGlzcGF0Y2goe1xuICAgIHR5cGU6IEFjdGlvblR5cGVzLklOSVRcbiAgfSk7XG4gIHJldHVybiBfcmVmMiA9IHtcbiAgICBkaXNwYXRjaDogZGlzcGF0Y2gsXG4gICAgc3Vic2NyaWJlOiBzdWJzY3JpYmUsXG4gICAgZ2V0U3RhdGU6IGdldFN0YXRlLFxuICAgIHJlcGxhY2VSZWR1Y2VyOiByZXBsYWNlUmVkdWNlclxuICB9LCBfcmVmMlskJG9ic2VydmFibGVdID0gb2JzZXJ2YWJsZSwgX3JlZjI7XG59XG5cbi8qKlxuICogUHJpbnRzIGEgd2FybmluZyBpbiB0aGUgY29uc29sZSBpZiBpdCBleGlzdHMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgVGhlIHdhcm5pbmcgbWVzc2FnZS5cbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5mdW5jdGlvbiB3YXJuaW5nKG1lc3NhZ2UpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uc29sZSAqL1xuICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmVycm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbnNvbGUgKi9cblxuXG4gIHRyeSB7XG4gICAgLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCBpZiB5b3UgZW5hYmxlXG4gICAgLy8gXCJicmVhayBvbiBhbGwgZXhjZXB0aW9uc1wiIGluIHlvdXIgY29uc29sZSxcbiAgICAvLyBpdCB3b3VsZCBwYXVzZSB0aGUgZXhlY3V0aW9uIGF0IHRoaXMgbGluZS5cbiAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIH0gY2F0Y2ggKGUpIHt9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tZW1wdHlcblxufVxuXG5mdW5jdGlvbiBnZXRVbmRlZmluZWRTdGF0ZUVycm9yTWVzc2FnZShrZXksIGFjdGlvbikge1xuICB2YXIgYWN0aW9uVHlwZSA9IGFjdGlvbiAmJiBhY3Rpb24udHlwZTtcbiAgdmFyIGFjdGlvbkRlc2NyaXB0aW9uID0gYWN0aW9uVHlwZSAmJiBcImFjdGlvbiBcXFwiXCIgKyBTdHJpbmcoYWN0aW9uVHlwZSkgKyBcIlxcXCJcIiB8fCAnYW4gYWN0aW9uJztcbiAgcmV0dXJuIFwiR2l2ZW4gXCIgKyBhY3Rpb25EZXNjcmlwdGlvbiArIFwiLCByZWR1Y2VyIFxcXCJcIiArIGtleSArIFwiXFxcIiByZXR1cm5lZCB1bmRlZmluZWQuIFwiICsgXCJUbyBpZ25vcmUgYW4gYWN0aW9uLCB5b3UgbXVzdCBleHBsaWNpdGx5IHJldHVybiB0aGUgcHJldmlvdXMgc3RhdGUuIFwiICsgXCJJZiB5b3Ugd2FudCB0aGlzIHJlZHVjZXIgdG8gaG9sZCBubyB2YWx1ZSwgeW91IGNhbiByZXR1cm4gbnVsbCBpbnN0ZWFkIG9mIHVuZGVmaW5lZC5cIjtcbn1cblxuZnVuY3Rpb24gZ2V0VW5leHBlY3RlZFN0YXRlU2hhcGVXYXJuaW5nTWVzc2FnZShpbnB1dFN0YXRlLCByZWR1Y2VycywgYWN0aW9uLCB1bmV4cGVjdGVkS2V5Q2FjaGUpIHtcbiAgdmFyIHJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMocmVkdWNlcnMpO1xuICB2YXIgYXJndW1lbnROYW1lID0gYWN0aW9uICYmIGFjdGlvbi50eXBlID09PSBBY3Rpb25UeXBlcy5JTklUID8gJ3ByZWxvYWRlZFN0YXRlIGFyZ3VtZW50IHBhc3NlZCB0byBjcmVhdGVTdG9yZScgOiAncHJldmlvdXMgc3RhdGUgcmVjZWl2ZWQgYnkgdGhlIHJlZHVjZXInO1xuXG4gIGlmIChyZWR1Y2VyS2V5cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJ1N0b3JlIGRvZXMgbm90IGhhdmUgYSB2YWxpZCByZWR1Y2VyLiBNYWtlIHN1cmUgdGhlIGFyZ3VtZW50IHBhc3NlZCAnICsgJ3RvIGNvbWJpbmVSZWR1Y2VycyBpcyBhbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSByZWR1Y2Vycy4nO1xuICB9XG5cbiAgaWYgKCFpc1BsYWluT2JqZWN0KGlucHV0U3RhdGUpKSB7XG4gICAgcmV0dXJuIFwiVGhlIFwiICsgYXJndW1lbnROYW1lICsgXCIgaGFzIHVuZXhwZWN0ZWQgdHlwZSBvZiBcXFwiXCIgKyB7fS50b1N0cmluZy5jYWxsKGlucHV0U3RhdGUpLm1hdGNoKC9cXHMoW2EtenxBLVpdKykvKVsxXSArIFwiXFxcIi4gRXhwZWN0ZWQgYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBcIiArIChcImtleXM6IFxcXCJcIiArIHJlZHVjZXJLZXlzLmpvaW4oJ1wiLCBcIicpICsgXCJcXFwiXCIpO1xuICB9XG5cbiAgdmFyIHVuZXhwZWN0ZWRLZXlzID0gT2JqZWN0LmtleXMoaW5wdXRTdGF0ZSkuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gIXJlZHVjZXJzLmhhc093blByb3BlcnR5KGtleSkgJiYgIXVuZXhwZWN0ZWRLZXlDYWNoZVtrZXldO1xuICB9KTtcbiAgdW5leHBlY3RlZEtleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdW5leHBlY3RlZEtleUNhY2hlW2tleV0gPSB0cnVlO1xuICB9KTtcbiAgaWYgKGFjdGlvbiAmJiBhY3Rpb24udHlwZSA9PT0gQWN0aW9uVHlwZXMuUkVQTEFDRSkgcmV0dXJuO1xuXG4gIGlmICh1bmV4cGVjdGVkS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgcmV0dXJuIFwiVW5leHBlY3RlZCBcIiArICh1bmV4cGVjdGVkS2V5cy5sZW5ndGggPiAxID8gJ2tleXMnIDogJ2tleScpICsgXCIgXCIgKyAoXCJcXFwiXCIgKyB1bmV4cGVjdGVkS2V5cy5qb2luKCdcIiwgXCInKSArIFwiXFxcIiBmb3VuZCBpbiBcIiArIGFyZ3VtZW50TmFtZSArIFwiLiBcIikgKyBcIkV4cGVjdGVkIHRvIGZpbmQgb25lIG9mIHRoZSBrbm93biByZWR1Y2VyIGtleXMgaW5zdGVhZDogXCIgKyAoXCJcXFwiXCIgKyByZWR1Y2VyS2V5cy5qb2luKCdcIiwgXCInKSArIFwiXFxcIi4gVW5leHBlY3RlZCBrZXlzIHdpbGwgYmUgaWdub3JlZC5cIik7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXNzZXJ0UmVkdWNlclNoYXBlKHJlZHVjZXJzKSB7XG4gIE9iamVjdC5rZXlzKHJlZHVjZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgcmVkdWNlciA9IHJlZHVjZXJzW2tleV07XG4gICAgdmFyIGluaXRpYWxTdGF0ZSA9IHJlZHVjZXIodW5kZWZpbmVkLCB7XG4gICAgICB0eXBlOiBBY3Rpb25UeXBlcy5JTklUXG4gICAgfSk7XG5cbiAgICBpZiAodHlwZW9mIGluaXRpYWxTdGF0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlJlZHVjZXIgXFxcIlwiICsga2V5ICsgXCJcXFwiIHJldHVybmVkIHVuZGVmaW5lZCBkdXJpbmcgaW5pdGlhbGl6YXRpb24uIFwiICsgXCJJZiB0aGUgc3RhdGUgcGFzc2VkIHRvIHRoZSByZWR1Y2VyIGlzIHVuZGVmaW5lZCwgeW91IG11c3QgXCIgKyBcImV4cGxpY2l0bHkgcmV0dXJuIHRoZSBpbml0aWFsIHN0YXRlLiBUaGUgaW5pdGlhbCBzdGF0ZSBtYXkgXCIgKyBcIm5vdCBiZSB1bmRlZmluZWQuIElmIHlvdSBkb24ndCB3YW50IHRvIHNldCBhIHZhbHVlIGZvciB0aGlzIHJlZHVjZXIsIFwiICsgXCJ5b3UgY2FuIHVzZSBudWxsIGluc3RlYWQgb2YgdW5kZWZpbmVkLlwiKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHJlZHVjZXIodW5kZWZpbmVkLCB7XG4gICAgICB0eXBlOiBBY3Rpb25UeXBlcy5QUk9CRV9VTktOT1dOX0FDVElPTigpXG4gICAgfSkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWR1Y2VyIFxcXCJcIiArIGtleSArIFwiXFxcIiByZXR1cm5lZCB1bmRlZmluZWQgd2hlbiBwcm9iZWQgd2l0aCBhIHJhbmRvbSB0eXBlLiBcIiArIChcIkRvbid0IHRyeSB0byBoYW5kbGUgXCIgKyBBY3Rpb25UeXBlcy5JTklUICsgXCIgb3Igb3RoZXIgYWN0aW9ucyBpbiBcXFwicmVkdXgvKlxcXCIgXCIpICsgXCJuYW1lc3BhY2UuIFRoZXkgYXJlIGNvbnNpZGVyZWQgcHJpdmF0ZS4gSW5zdGVhZCwgeW91IG11c3QgcmV0dXJuIHRoZSBcIiArIFwiY3VycmVudCBzdGF0ZSBmb3IgYW55IHVua25vd24gYWN0aW9ucywgdW5sZXNzIGl0IGlzIHVuZGVmaW5lZCwgXCIgKyBcImluIHdoaWNoIGNhc2UgeW91IG11c3QgcmV0dXJuIHRoZSBpbml0aWFsIHN0YXRlLCByZWdhcmRsZXNzIG9mIHRoZSBcIiArIFwiYWN0aW9uIHR5cGUuIFRoZSBpbml0aWFsIHN0YXRlIG1heSBub3QgYmUgdW5kZWZpbmVkLCBidXQgY2FuIGJlIG51bGwuXCIpO1xuICAgIH1cbiAgfSk7XG59XG4vKipcbiAqIFR1cm5zIGFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGRpZmZlcmVudCByZWR1Y2VyIGZ1bmN0aW9ucywgaW50byBhIHNpbmdsZVxuICogcmVkdWNlciBmdW5jdGlvbi4gSXQgd2lsbCBjYWxsIGV2ZXJ5IGNoaWxkIHJlZHVjZXIsIGFuZCBnYXRoZXIgdGhlaXIgcmVzdWx0c1xuICogaW50byBhIHNpbmdsZSBzdGF0ZSBvYmplY3QsIHdob3NlIGtleXMgY29ycmVzcG9uZCB0byB0aGUga2V5cyBvZiB0aGUgcGFzc2VkXG4gKiByZWR1Y2VyIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcmVkdWNlcnMgQW4gb2JqZWN0IHdob3NlIHZhbHVlcyBjb3JyZXNwb25kIHRvIGRpZmZlcmVudFxuICogcmVkdWNlciBmdW5jdGlvbnMgdGhhdCBuZWVkIHRvIGJlIGNvbWJpbmVkIGludG8gb25lLiBPbmUgaGFuZHkgd2F5IHRvIG9idGFpblxuICogaXQgaXMgdG8gdXNlIEVTNiBgaW1wb3J0ICogYXMgcmVkdWNlcnNgIHN5bnRheC4gVGhlIHJlZHVjZXJzIG1heSBuZXZlciByZXR1cm5cbiAqIHVuZGVmaW5lZCBmb3IgYW55IGFjdGlvbi4gSW5zdGVhZCwgdGhleSBzaG91bGQgcmV0dXJuIHRoZWlyIGluaXRpYWwgc3RhdGVcbiAqIGlmIHRoZSBzdGF0ZSBwYXNzZWQgdG8gdGhlbSB3YXMgdW5kZWZpbmVkLCBhbmQgdGhlIGN1cnJlbnQgc3RhdGUgZm9yIGFueVxuICogdW5yZWNvZ25pemVkIGFjdGlvbi5cbiAqXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgcmVkdWNlciBmdW5jdGlvbiB0aGF0IGludm9rZXMgZXZlcnkgcmVkdWNlciBpbnNpZGUgdGhlXG4gKiBwYXNzZWQgb2JqZWN0LCBhbmQgYnVpbGRzIGEgc3RhdGUgb2JqZWN0IHdpdGggdGhlIHNhbWUgc2hhcGUuXG4gKi9cblxuXG5mdW5jdGlvbiBjb21iaW5lUmVkdWNlcnMocmVkdWNlcnMpIHtcbiAgdmFyIHJlZHVjZXJLZXlzID0gT2JqZWN0LmtleXMocmVkdWNlcnMpO1xuICB2YXIgZmluYWxSZWR1Y2VycyA9IHt9O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmVkdWNlcktleXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIga2V5ID0gcmVkdWNlcktleXNbaV07XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKHR5cGVvZiByZWR1Y2Vyc1trZXldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB3YXJuaW5nKFwiTm8gcmVkdWNlciBwcm92aWRlZCBmb3Iga2V5IFxcXCJcIiArIGtleSArIFwiXFxcIlwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHJlZHVjZXJzW2tleV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGZpbmFsUmVkdWNlcnNba2V5XSA9IHJlZHVjZXJzW2tleV07XG4gICAgfVxuICB9XG5cbiAgdmFyIGZpbmFsUmVkdWNlcktleXMgPSBPYmplY3Qua2V5cyhmaW5hbFJlZHVjZXJzKTsgLy8gVGhpcyBpcyB1c2VkIHRvIG1ha2Ugc3VyZSB3ZSBkb24ndCB3YXJuIGFib3V0IHRoZSBzYW1lXG4gIC8vIGtleXMgbXVsdGlwbGUgdGltZXMuXG5cbiAgdmFyIHVuZXhwZWN0ZWRLZXlDYWNoZTtcblxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHVuZXhwZWN0ZWRLZXlDYWNoZSA9IHt9O1xuICB9XG5cbiAgdmFyIHNoYXBlQXNzZXJ0aW9uRXJyb3I7XG5cbiAgdHJ5IHtcbiAgICBhc3NlcnRSZWR1Y2VyU2hhcGUoZmluYWxSZWR1Y2Vycyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBzaGFwZUFzc2VydGlvbkVycm9yID0gZTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiBjb21iaW5hdGlvbihzdGF0ZSwgYWN0aW9uKSB7XG4gICAgaWYgKHN0YXRlID09PSB2b2lkIDApIHtcbiAgICAgIHN0YXRlID0ge307XG4gICAgfVxuXG4gICAgaWYgKHNoYXBlQXNzZXJ0aW9uRXJyb3IpIHtcbiAgICAgIHRocm93IHNoYXBlQXNzZXJ0aW9uRXJyb3I7XG4gICAgfVxuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciB3YXJuaW5nTWVzc2FnZSA9IGdldFVuZXhwZWN0ZWRTdGF0ZVNoYXBlV2FybmluZ01lc3NhZ2Uoc3RhdGUsIGZpbmFsUmVkdWNlcnMsIGFjdGlvbiwgdW5leHBlY3RlZEtleUNhY2hlKTtcblxuICAgICAgaWYgKHdhcm5pbmdNZXNzYWdlKSB7XG4gICAgICAgIHdhcm5pbmcod2FybmluZ01lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBoYXNDaGFuZ2VkID0gZmFsc2U7XG4gICAgdmFyIG5leHRTdGF0ZSA9IHt9O1xuXG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGZpbmFsUmVkdWNlcktleXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2tleSA9IGZpbmFsUmVkdWNlcktleXNbX2ldO1xuICAgICAgdmFyIHJlZHVjZXIgPSBmaW5hbFJlZHVjZXJzW19rZXldO1xuICAgICAgdmFyIHByZXZpb3VzU3RhdGVGb3JLZXkgPSBzdGF0ZVtfa2V5XTtcbiAgICAgIHZhciBuZXh0U3RhdGVGb3JLZXkgPSByZWR1Y2VyKHByZXZpb3VzU3RhdGVGb3JLZXksIGFjdGlvbik7XG5cbiAgICAgIGlmICh0eXBlb2YgbmV4dFN0YXRlRm9yS2V5ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gZ2V0VW5kZWZpbmVkU3RhdGVFcnJvck1lc3NhZ2UoX2tleSwgYWN0aW9uKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICB9XG5cbiAgICAgIG5leHRTdGF0ZVtfa2V5XSA9IG5leHRTdGF0ZUZvcktleTtcbiAgICAgIGhhc0NoYW5nZWQgPSBoYXNDaGFuZ2VkIHx8IG5leHRTdGF0ZUZvcktleSAhPT0gcHJldmlvdXNTdGF0ZUZvcktleTtcbiAgICB9XG5cbiAgICBoYXNDaGFuZ2VkID0gaGFzQ2hhbmdlZCB8fCBmaW5hbFJlZHVjZXJLZXlzLmxlbmd0aCAhPT0gT2JqZWN0LmtleXMoc3RhdGUpLmxlbmd0aDtcbiAgICByZXR1cm4gaGFzQ2hhbmdlZCA/IG5leHRTdGF0ZSA6IHN0YXRlO1xuICB9O1xufVxuXG5mdW5jdGlvbiBiaW5kQWN0aW9uQ3JlYXRvcihhY3Rpb25DcmVhdG9yLCBkaXNwYXRjaCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBkaXNwYXRjaChhY3Rpb25DcmVhdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9O1xufVxuLyoqXG4gKiBUdXJucyBhbiBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSBhY3Rpb24gY3JlYXRvcnMsIGludG8gYW4gb2JqZWN0IHdpdGggdGhlXG4gKiBzYW1lIGtleXMsIGJ1dCB3aXRoIGV2ZXJ5IGZ1bmN0aW9uIHdyYXBwZWQgaW50byBhIGBkaXNwYXRjaGAgY2FsbCBzbyB0aGV5XG4gKiBtYXkgYmUgaW52b2tlZCBkaXJlY3RseS4gVGhpcyBpcyBqdXN0IGEgY29udmVuaWVuY2UgbWV0aG9kLCBhcyB5b3UgY2FuIGNhbGxcbiAqIGBzdG9yZS5kaXNwYXRjaChNeUFjdGlvbkNyZWF0b3JzLmRvU29tZXRoaW5nKCkpYCB5b3Vyc2VsZiBqdXN0IGZpbmUuXG4gKlxuICogRm9yIGNvbnZlbmllbmNlLCB5b3UgY2FuIGFsc28gcGFzcyBhbiBhY3Rpb24gY3JlYXRvciBhcyB0aGUgZmlyc3QgYXJndW1lbnQsXG4gKiBhbmQgZ2V0IGEgZGlzcGF0Y2ggd3JhcHBlZCBmdW5jdGlvbiBpbiByZXR1cm4uXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbnxPYmplY3R9IGFjdGlvbkNyZWF0b3JzIEFuIG9iamVjdCB3aG9zZSB2YWx1ZXMgYXJlIGFjdGlvblxuICogY3JlYXRvciBmdW5jdGlvbnMuIE9uZSBoYW5keSB3YXkgdG8gb2J0YWluIGl0IGlzIHRvIHVzZSBFUzYgYGltcG9ydCAqIGFzYFxuICogc3ludGF4LiBZb3UgbWF5IGFsc28gcGFzcyBhIHNpbmdsZSBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBkaXNwYXRjaCBUaGUgYGRpc3BhdGNoYCBmdW5jdGlvbiBhdmFpbGFibGUgb24geW91ciBSZWR1eFxuICogc3RvcmUuXG4gKlxuICogQHJldHVybnMge0Z1bmN0aW9ufE9iamVjdH0gVGhlIG9iamVjdCBtaW1pY2tpbmcgdGhlIG9yaWdpbmFsIG9iamVjdCwgYnV0IHdpdGhcbiAqIGV2ZXJ5IGFjdGlvbiBjcmVhdG9yIHdyYXBwZWQgaW50byB0aGUgYGRpc3BhdGNoYCBjYWxsLiBJZiB5b3UgcGFzc2VkIGFcbiAqIGZ1bmN0aW9uIGFzIGBhY3Rpb25DcmVhdG9yc2AsIHRoZSByZXR1cm4gdmFsdWUgd2lsbCBhbHNvIGJlIGEgc2luZ2xlXG4gKiBmdW5jdGlvbi5cbiAqL1xuXG5cbmZ1bmN0aW9uIGJpbmRBY3Rpb25DcmVhdG9ycyhhY3Rpb25DcmVhdG9ycywgZGlzcGF0Y2gpIHtcbiAgaWYgKHR5cGVvZiBhY3Rpb25DcmVhdG9ycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBiaW5kQWN0aW9uQ3JlYXRvcihhY3Rpb25DcmVhdG9ycywgZGlzcGF0Y2gpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBhY3Rpb25DcmVhdG9ycyAhPT0gJ29iamVjdCcgfHwgYWN0aW9uQ3JlYXRvcnMgPT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJiaW5kQWN0aW9uQ3JlYXRvcnMgZXhwZWN0ZWQgYW4gb2JqZWN0IG9yIGEgZnVuY3Rpb24sIGluc3RlYWQgcmVjZWl2ZWQgXCIgKyAoYWN0aW9uQ3JlYXRvcnMgPT09IG51bGwgPyAnbnVsbCcgOiB0eXBlb2YgYWN0aW9uQ3JlYXRvcnMpICsgXCIuIFwiICsgXCJEaWQgeW91IHdyaXRlIFxcXCJpbXBvcnQgQWN0aW9uQ3JlYXRvcnMgZnJvbVxcXCIgaW5zdGVhZCBvZiBcXFwiaW1wb3J0ICogYXMgQWN0aW9uQ3JlYXRvcnMgZnJvbVxcXCI/XCIpO1xuICB9XG5cbiAgdmFyIGJvdW5kQWN0aW9uQ3JlYXRvcnMgPSB7fTtcblxuICBmb3IgKHZhciBrZXkgaW4gYWN0aW9uQ3JlYXRvcnMpIHtcbiAgICB2YXIgYWN0aW9uQ3JlYXRvciA9IGFjdGlvbkNyZWF0b3JzW2tleV07XG5cbiAgICBpZiAodHlwZW9mIGFjdGlvbkNyZWF0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGJvdW5kQWN0aW9uQ3JlYXRvcnNba2V5XSA9IGJpbmRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3IsIGRpc3BhdGNoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYm91bmRBY3Rpb25DcmVhdG9ycztcbn1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkge1xuICBpZiAoa2V5IGluIG9iaikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb2JqW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG5cbiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcbiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpKTtcbiAgfVxuXG4gIGlmIChlbnVtZXJhYmxlT25seSkga2V5cyA9IGtleXMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHtcbiAgICByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTtcbiAgfSk7XG4gIHJldHVybiBrZXlzO1xufVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkMih0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTtcblxuICAgIGlmIChpICUgMikge1xuICAgICAgb3duS2V5cyhzb3VyY2UsIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG93bktleXMoc291cmNlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG4vKipcbiAqIENvbXBvc2VzIHNpbmdsZS1hcmd1bWVudCBmdW5jdGlvbnMgZnJvbSByaWdodCB0byBsZWZ0LiBUaGUgcmlnaHRtb3N0XG4gKiBmdW5jdGlvbiBjYW4gdGFrZSBtdWx0aXBsZSBhcmd1bWVudHMgYXMgaXQgcHJvdmlkZXMgdGhlIHNpZ25hdHVyZSBmb3JcbiAqIHRoZSByZXN1bHRpbmcgY29tcG9zaXRlIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IGZ1bmNzIFRoZSBmdW5jdGlvbnMgdG8gY29tcG9zZS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiBvYnRhaW5lZCBieSBjb21wb3NpbmcgdGhlIGFyZ3VtZW50IGZ1bmN0aW9uc1xuICogZnJvbSByaWdodCB0byBsZWZ0LiBGb3IgZXhhbXBsZSwgY29tcG9zZShmLCBnLCBoKSBpcyBpZGVudGljYWwgdG8gZG9pbmdcbiAqICguLi5hcmdzKSA9PiBmKGcoaCguLi5hcmdzKSkpLlxuICovXG5mdW5jdGlvbiBjb21wb3NlKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgZnVuY3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgZnVuY3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICBpZiAoZnVuY3MubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChhcmcpIHtcbiAgICAgIHJldHVybiBhcmc7XG4gICAgfTtcbiAgfVxuXG4gIGlmIChmdW5jcy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gZnVuY3NbMF07XG4gIH1cblxuICByZXR1cm4gZnVuY3MucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBhKGIuYXBwbHkodm9pZCAwLCBhcmd1bWVudHMpKTtcbiAgICB9O1xuICB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgc3RvcmUgZW5oYW5jZXIgdGhhdCBhcHBsaWVzIG1pZGRsZXdhcmUgdG8gdGhlIGRpc3BhdGNoIG1ldGhvZFxuICogb2YgdGhlIFJlZHV4IHN0b3JlLiBUaGlzIGlzIGhhbmR5IGZvciBhIHZhcmlldHkgb2YgdGFza3MsIHN1Y2ggYXMgZXhwcmVzc2luZ1xuICogYXN5bmNocm9ub3VzIGFjdGlvbnMgaW4gYSBjb25jaXNlIG1hbm5lciwgb3IgbG9nZ2luZyBldmVyeSBhY3Rpb24gcGF5bG9hZC5cbiAqXG4gKiBTZWUgYHJlZHV4LXRodW5rYCBwYWNrYWdlIGFzIGFuIGV4YW1wbGUgb2YgdGhlIFJlZHV4IG1pZGRsZXdhcmUuXG4gKlxuICogQmVjYXVzZSBtaWRkbGV3YXJlIGlzIHBvdGVudGlhbGx5IGFzeW5jaHJvbm91cywgdGhpcyBzaG91bGQgYmUgdGhlIGZpcnN0XG4gKiBzdG9yZSBlbmhhbmNlciBpbiB0aGUgY29tcG9zaXRpb24gY2hhaW4uXG4gKlxuICogTm90ZSB0aGF0IGVhY2ggbWlkZGxld2FyZSB3aWxsIGJlIGdpdmVuIHRoZSBgZGlzcGF0Y2hgIGFuZCBgZ2V0U3RhdGVgIGZ1bmN0aW9uc1xuICogYXMgbmFtZWQgYXJndW1lbnRzLlxuICpcbiAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IG1pZGRsZXdhcmVzIFRoZSBtaWRkbGV3YXJlIGNoYWluIHRvIGJlIGFwcGxpZWQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IEEgc3RvcmUgZW5oYW5jZXIgYXBwbHlpbmcgdGhlIG1pZGRsZXdhcmUuXG4gKi9cblxuZnVuY3Rpb24gYXBwbHlNaWRkbGV3YXJlKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgbWlkZGxld2FyZXMgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgbWlkZGxld2FyZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKGNyZWF0ZVN0b3JlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzdG9yZSA9IGNyZWF0ZVN0b3JlLmFwcGx5KHZvaWQgMCwgYXJndW1lbnRzKTtcblxuICAgICAgdmFyIF9kaXNwYXRjaCA9IGZ1bmN0aW9uIGRpc3BhdGNoKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Rpc3BhdGNoaW5nIHdoaWxlIGNvbnN0cnVjdGluZyB5b3VyIG1pZGRsZXdhcmUgaXMgbm90IGFsbG93ZWQuICcgKyAnT3RoZXIgbWlkZGxld2FyZSB3b3VsZCBub3QgYmUgYXBwbGllZCB0byB0aGlzIGRpc3BhdGNoLicpO1xuICAgICAgfTtcblxuICAgICAgdmFyIG1pZGRsZXdhcmVBUEkgPSB7XG4gICAgICAgIGdldFN0YXRlOiBzdG9yZS5nZXRTdGF0ZSxcbiAgICAgICAgZGlzcGF0Y2g6IGZ1bmN0aW9uIGRpc3BhdGNoKCkge1xuICAgICAgICAgIHJldHVybiBfZGlzcGF0Y2guYXBwbHkodm9pZCAwLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdmFyIGNoYWluID0gbWlkZGxld2FyZXMubWFwKGZ1bmN0aW9uIChtaWRkbGV3YXJlKSB7XG4gICAgICAgIHJldHVybiBtaWRkbGV3YXJlKG1pZGRsZXdhcmVBUEkpO1xuICAgICAgfSk7XG4gICAgICBfZGlzcGF0Y2ggPSBjb21wb3NlLmFwcGx5KHZvaWQgMCwgY2hhaW4pKHN0b3JlLmRpc3BhdGNoKTtcbiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkMih7fSwgc3RvcmUsIHtcbiAgICAgICAgZGlzcGF0Y2g6IF9kaXNwYXRjaFxuICAgICAgfSk7XG4gICAgfTtcbiAgfTtcbn1cblxuLypcbiAqIFRoaXMgaXMgYSBkdW1teSBmdW5jdGlvbiB0byBjaGVjayBpZiB0aGUgZnVuY3Rpb24gbmFtZSBoYXMgYmVlbiBhbHRlcmVkIGJ5IG1pbmlmaWNhdGlvbi5cbiAqIElmIHRoZSBmdW5jdGlvbiBoYXMgYmVlbiBtaW5pZmllZCBhbmQgTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJywgd2FybiB0aGUgdXNlci5cbiAqL1xuXG5mdW5jdGlvbiBpc0NydXNoZWQoKSB7fVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0eXBlb2YgaXNDcnVzaGVkLm5hbWUgPT09ICdzdHJpbmcnICYmIGlzQ3J1c2hlZC5uYW1lICE9PSAnaXNDcnVzaGVkJykge1xuICB3YXJuaW5nKCdZb3UgYXJlIGN1cnJlbnRseSB1c2luZyBtaW5pZmllZCBjb2RlIG91dHNpZGUgb2YgTk9ERV9FTlYgPT09IFwicHJvZHVjdGlvblwiLiAnICsgJ1RoaXMgbWVhbnMgdGhhdCB5b3UgYXJlIHJ1bm5pbmcgYSBzbG93ZXIgZGV2ZWxvcG1lbnQgYnVpbGQgb2YgUmVkdXguICcgKyAnWW91IGNhbiB1c2UgbG9vc2UtZW52aWZ5IChodHRwczovL2dpdGh1Yi5jb20vemVydG9zaC9sb29zZS1lbnZpZnkpIGZvciBicm93c2VyaWZ5ICcgKyAnb3Igc2V0dGluZyBtb2RlIHRvIHByb2R1Y3Rpb24gaW4gd2VicGFjayAoaHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy9jb25jZXB0cy9tb2RlLykgJyArICd0byBlbnN1cmUgeW91IGhhdmUgdGhlIGNvcnJlY3QgY29kZSBmb3IgeW91ciBwcm9kdWN0aW9uIGJ1aWxkLicpO1xufVxuXG5leHBvcnQgeyBBY3Rpb25UeXBlcyBhcyBfX0RPX05PVF9VU0VfX0FjdGlvblR5cGVzLCBhcHBseU1pZGRsZXdhcmUsIGJpbmRBY3Rpb25DcmVhdG9ycywgY29tYmluZVJlZHVjZXJzLCBjb21wb3NlLCBjcmVhdGVTdG9yZSB9O1xuIiwiZnVuY3Rpb24gdCh0KXtmb3IodmFyIG49YXJndW1lbnRzLmxlbmd0aCxyPUFycmF5KG4+MT9uLTE6MCksZT0xO2U8bjtlKyspcltlLTFdPWFyZ3VtZW50c1tlXTtpZihcInByb2R1Y3Rpb25cIiE9PXByb2Nlc3MuZW52Lk5PREVfRU5WKXt2YXIgaT1ZW3RdLG89aT9cImZ1bmN0aW9uXCI9PXR5cGVvZiBpP2kuYXBwbHkobnVsbCxyKTppOlwidW5rbm93biBlcnJvciBucjogXCIrdDt0aHJvdyBFcnJvcihcIltJbW1lcl0gXCIrbyl9dGhyb3cgRXJyb3IoXCJbSW1tZXJdIG1pbmlmaWVkIGVycm9yIG5yOiBcIit0KyhyLmxlbmd0aD9cIiBcIityLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuXCInXCIrdCtcIidcIn0pKS5qb2luKFwiLFwiKTpcIlwiKStcIi4gRmluZCB0aGUgZnVsbCBlcnJvciBhdDogaHR0cHM6Ly9iaXQubHkvM2NYRUtXZlwiKX1mdW5jdGlvbiBuKHQpe3JldHVybiEhdCYmISF0W1FdfWZ1bmN0aW9uIHIodCl7cmV0dXJuISF0JiYoZnVuY3Rpb24odCl7aWYoIXR8fFwib2JqZWN0XCIhPXR5cGVvZiB0KXJldHVybiExO3ZhciBuPU9iamVjdC5nZXRQcm90b3R5cGVPZih0KTtyZXR1cm4hbnx8bj09PU9iamVjdC5wcm90b3R5cGV9KHQpfHxBcnJheS5pc0FycmF5KHQpfHwhIXRbTF18fCEhdC5jb25zdHJ1Y3RvcltMXXx8cyh0KXx8dih0KSl9ZnVuY3Rpb24gZShyKXtyZXR1cm4gbihyKXx8dCgyMyxyKSxyW1FdLnR9ZnVuY3Rpb24gaSh0LG4scil7dm9pZCAwPT09ciYmKHI9ITEpLDA9PT1vKHQpPyhyP09iamVjdC5rZXlzOlopKHQpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ImJlwic3ltYm9sXCI9PXR5cGVvZiBlfHxuKGUsdFtlXSx0KX0pKTp0LmZvckVhY2goKGZ1bmN0aW9uKHIsZSl7cmV0dXJuIG4oZSxyLHQpfSkpfWZ1bmN0aW9uIG8odCl7dmFyIG49dFtRXTtyZXR1cm4gbj9uLmk+Mz9uLmktNDpuLmk6QXJyYXkuaXNBcnJheSh0KT8xOnModCk/Mjp2KHQpPzM6MH1mdW5jdGlvbiB1KHQsbil7cmV0dXJuIDI9PT1vKHQpP3QuaGFzKG4pOk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pfWZ1bmN0aW9uIGEodCxuKXtyZXR1cm4gMj09PW8odCk/dC5nZXQobik6dFtuXX1mdW5jdGlvbiBmKHQsbixyKXt2YXIgZT1vKHQpOzI9PT1lP3Quc2V0KG4scik6Mz09PWU/KHQuZGVsZXRlKG4pLHQuYWRkKHIpKTp0W25dPXJ9ZnVuY3Rpb24gYyh0LG4pe3JldHVybiB0PT09bj8wIT09dHx8MS90PT0xL246dCE9dCYmbiE9bn1mdW5jdGlvbiBzKHQpe3JldHVybiBYJiZ0IGluc3RhbmNlb2YgTWFwfWZ1bmN0aW9uIHYodCl7cmV0dXJuIHEmJnQgaW5zdGFuY2VvZiBTZXR9ZnVuY3Rpb24gcCh0KXtyZXR1cm4gdC5vfHx0LnR9ZnVuY3Rpb24gbCh0KXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KTt2YXIgbj10dCh0KTtkZWxldGUgbltRXTtmb3IodmFyIHI9WihuKSxlPTA7ZTxyLmxlbmd0aDtlKyspe3ZhciBpPXJbZV0sbz1uW2ldOyExPT09by53cml0YWJsZSYmKG8ud3JpdGFibGU9ITAsby5jb25maWd1cmFibGU9ITApLChvLmdldHx8by5zZXQpJiYobltpXT17Y29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLGVudW1lcmFibGU6by5lbnVtZXJhYmxlLHZhbHVlOnRbaV19KX1yZXR1cm4gT2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YodCksbil9ZnVuY3Rpb24gZCh0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0hMSkseSh0KXx8bih0KXx8IXIodCk/dDoobyh0KT4xJiYodC5zZXQ9dC5hZGQ9dC5jbGVhcj10LmRlbGV0ZT1oKSxPYmplY3QuZnJlZXplKHQpLGUmJmkodCwoZnVuY3Rpb24odCxuKXtyZXR1cm4gZChuLCEwKX0pLCEwKSx0KX1mdW5jdGlvbiBoKCl7dCgyKX1mdW5jdGlvbiB5KHQpe3JldHVybiBudWxsPT10fHxcIm9iamVjdFwiIT10eXBlb2YgdHx8T2JqZWN0LmlzRnJvemVuKHQpfWZ1bmN0aW9uIGIobil7dmFyIHI9bnRbbl07cmV0dXJuIHJ8fHQoMTgsbikscn1mdW5jdGlvbiBtKHQsbil7bnRbdF18fChudFt0XT1uKX1mdW5jdGlvbiBfKCl7cmV0dXJuXCJwcm9kdWN0aW9uXCI9PT1wcm9jZXNzLmVudi5OT0RFX0VOVnx8VXx8dCgwKSxVfWZ1bmN0aW9uIGoodCxuKXtuJiYoYihcIlBhdGNoZXNcIiksdC51PVtdLHQucz1bXSx0LnY9bil9ZnVuY3Rpb24gZyh0KXt3KHQpLHQucC5mb3JFYWNoKFMpLHQucD1udWxsfWZ1bmN0aW9uIHcodCl7dD09PVUmJihVPXQubCl9ZnVuY3Rpb24gTyh0KXtyZXR1cm4gVT17cDpbXSxsOlUsaDp0LG06ITAsXzowfX1mdW5jdGlvbiBTKHQpe3ZhciBuPXRbUV07MD09PW4uaXx8MT09PW4uaT9uLmooKTpuLmc9ITB9ZnVuY3Rpb24gUChuLGUpe2UuXz1lLnAubGVuZ3RoO3ZhciBpPWUucFswXSxvPXZvaWQgMCE9PW4mJm4hPT1pO3JldHVybiBlLmguT3x8YihcIkVTNVwiKS5TKGUsbixvKSxvPyhpW1FdLlAmJihnKGUpLHQoNCkpLHIobikmJihuPU0oZSxuKSxlLmx8fHgoZSxuKSksZS51JiZiKFwiUGF0Y2hlc1wiKS5NKGlbUV0sbixlLnUsZS5zKSk6bj1NKGUsaSxbXSksZyhlKSxlLnUmJmUudihlLnUsZS5zKSxuIT09SD9uOnZvaWQgMH1mdW5jdGlvbiBNKHQsbixyKXtpZih5KG4pKXJldHVybiBuO3ZhciBlPW5bUV07aWYoIWUpcmV0dXJuIGkobiwoZnVuY3Rpb24oaSxvKXtyZXR1cm4gQSh0LGUsbixpLG8scil9KSwhMCksbjtpZihlLkEhPT10KXJldHVybiBuO2lmKCFlLlApcmV0dXJuIHgodCxlLnQsITApLGUudDtpZighZS5JKXtlLkk9ITAsZS5BLl8tLTt2YXIgbz00PT09ZS5pfHw1PT09ZS5pP2Uubz1sKGUuayk6ZS5vO2koMz09PWUuaT9uZXcgU2V0KG8pOm8sKGZ1bmN0aW9uKG4saSl7cmV0dXJuIEEodCxlLG8sbixpLHIpfSkpLHgodCxvLCExKSxyJiZ0LnUmJmIoXCJQYXRjaGVzXCIpLlIoZSxyLHQudSx0LnMpfXJldHVybiBlLm99ZnVuY3Rpb24gQShlLGksbyxhLGMscyl7aWYoXCJwcm9kdWN0aW9uXCIhPT1wcm9jZXNzLmVudi5OT0RFX0VOViYmYz09PW8mJnQoNSksbihjKSl7dmFyIHY9TShlLGMscyYmaSYmMyE9PWkuaSYmIXUoaS5ELGEpP3MuY29uY2F0KGEpOnZvaWQgMCk7aWYoZihvLGEsdiksIW4odikpcmV0dXJuO2UubT0hMX1pZihyKGMpJiYheShjKSl7aWYoIWUuaC5OJiZlLl88MSlyZXR1cm47TShlLGMpLGkmJmkuQS5sfHx4KGUsYyl9fWZ1bmN0aW9uIHgodCxuLHIpe3ZvaWQgMD09PXImJihyPSExKSx0LmguTiYmdC5tJiZkKG4scil9ZnVuY3Rpb24geih0LG4pe3ZhciByPXRbUV07cmV0dXJuKHI/cChyKTp0KVtuXX1mdW5jdGlvbiBJKHQsbil7aWYobiBpbiB0KWZvcih2YXIgcj1PYmplY3QuZ2V0UHJvdG90eXBlT2YodCk7cjspe3ZhciBlPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocixuKTtpZihlKXJldHVybiBlO3I9T2JqZWN0LmdldFByb3RvdHlwZU9mKHIpfX1mdW5jdGlvbiBrKHQpe3QuUHx8KHQuUD0hMCx0LmwmJmsodC5sKSl9ZnVuY3Rpb24gRSh0KXt0Lm98fCh0Lm89bCh0LnQpKX1mdW5jdGlvbiBSKHQsbixyKXt2YXIgZT1zKG4pP2IoXCJNYXBTZXRcIikuVChuLHIpOnYobik/YihcIk1hcFNldFwiKS5GKG4scik6dC5PP2Z1bmN0aW9uKHQsbil7dmFyIHI9QXJyYXkuaXNBcnJheSh0KSxlPXtpOnI/MTowLEE6bj9uLkE6XygpLFA6ITEsSTohMSxEOnt9LGw6bix0OnQsazpudWxsLG86bnVsbCxqOm51bGwsQzohMX0saT1lLG89cnQ7ciYmKGk9W2VdLG89ZXQpO3ZhciB1PVByb3h5LnJldm9jYWJsZShpLG8pLGE9dS5yZXZva2UsZj11LnByb3h5O3JldHVybiBlLms9ZixlLmo9YSxmfShuLHIpOmIoXCJFUzVcIikuSihuLHIpO3JldHVybihyP3IuQTpfKCkpLnAucHVzaChlKSxlfWZ1bmN0aW9uIEQoZSl7cmV0dXJuIG4oZSl8fHQoMjIsZSksZnVuY3Rpb24gdChuKXtpZighcihuKSlyZXR1cm4gbjt2YXIgZSx1PW5bUV0sYz1vKG4pO2lmKHUpe2lmKCF1LlAmJih1Lmk8NHx8IWIoXCJFUzVcIikuSyh1KSkpcmV0dXJuIHUudDt1Lkk9ITAsZT1OKG4sYyksdS5JPSExfWVsc2UgZT1OKG4sYyk7cmV0dXJuIGkoZSwoZnVuY3Rpb24obixyKXt1JiZhKHUudCxuKT09PXJ8fGYoZSxuLHQocikpfSkpLDM9PT1jP25ldyBTZXQoZSk6ZX0oZSl9ZnVuY3Rpb24gTih0LG4pe3N3aXRjaChuKXtjYXNlIDI6cmV0dXJuIG5ldyBNYXAodCk7Y2FzZSAzOnJldHVybiBBcnJheS5mcm9tKHQpfXJldHVybiBsKHQpfWZ1bmN0aW9uIFQoKXtmdW5jdGlvbiByKHQsbil7dmFyIHI9c1t0XTtyZXR1cm4gcj9yLmVudW1lcmFibGU9bjpzW3RdPXI9e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOm4sZ2V0OmZ1bmN0aW9uKCl7dmFyIG49dGhpc1tRXTtyZXR1cm5cInByb2R1Y3Rpb25cIiE9PXByb2Nlc3MuZW52Lk5PREVfRU5WJiZmKG4pLHJ0LmdldChuLHQpfSxzZXQ6ZnVuY3Rpb24obil7dmFyIHI9dGhpc1tRXTtcInByb2R1Y3Rpb25cIiE9PXByb2Nlc3MuZW52Lk5PREVfRU5WJiZmKHIpLHJ0LnNldChyLHQsbil9fSxyfWZ1bmN0aW9uIGUodCl7Zm9yKHZhciBuPXQubGVuZ3RoLTE7bj49MDtuLS0pe3ZhciByPXRbbl1bUV07aWYoIXIuUClzd2l0Y2goci5pKXtjYXNlIDU6YShyKSYmayhyKTticmVhaztjYXNlIDQ6byhyKSYmayhyKX19fWZ1bmN0aW9uIG8odCl7Zm9yKHZhciBuPXQudCxyPXQuayxlPVoociksaT1lLmxlbmd0aC0xO2k+PTA7aS0tKXt2YXIgbz1lW2ldO2lmKG8hPT1RKXt2YXIgYT1uW29dO2lmKHZvaWQgMD09PWEmJiF1KG4sbykpcmV0dXJuITA7dmFyIGY9cltvXSxzPWYmJmZbUV07aWYocz9zLnQhPT1hOiFjKGYsYSkpcmV0dXJuITB9fXZhciB2PSEhbltRXTtyZXR1cm4gZS5sZW5ndGghPT1aKG4pLmxlbmd0aCsodj8wOjEpfWZ1bmN0aW9uIGEodCl7dmFyIG49dC5rO2lmKG4ubGVuZ3RoIT09dC50Lmxlbmd0aClyZXR1cm4hMDt2YXIgcj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sbi5sZW5ndGgtMSk7cmV0dXJuISghcnx8ci5nZXQpfWZ1bmN0aW9uIGYobil7bi5nJiZ0KDMsSlNPTi5zdHJpbmdpZnkocChuKSkpfXZhciBzPXt9O20oXCJFUzVcIix7SjpmdW5jdGlvbih0LG4pe3ZhciBlPUFycmF5LmlzQXJyYXkodCksaT1mdW5jdGlvbih0LG4pe2lmKHQpe2Zvcih2YXIgZT1BcnJheShuLmxlbmd0aCksaT0wO2k8bi5sZW5ndGg7aSsrKU9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiXCIraSxyKGksITApKTtyZXR1cm4gZX12YXIgbz10dChuKTtkZWxldGUgb1tRXTtmb3IodmFyIHU9WihvKSxhPTA7YTx1Lmxlbmd0aDthKyspe3ZhciBmPXVbYV07b1tmXT1yKGYsdHx8ISFvW2ZdLmVudW1lcmFibGUpfXJldHVybiBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihuKSxvKX0oZSx0KSxvPXtpOmU/NTo0LEE6bj9uLkE6XygpLFA6ITEsSTohMSxEOnt9LGw6bix0OnQsazppLG86bnVsbCxnOiExLEM6ITF9O3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxRLHt2YWx1ZTpvLHdyaXRhYmxlOiEwfSksaX0sUzpmdW5jdGlvbih0LHIsbyl7bz9uKHIpJiZyW1FdLkE9PT10JiZlKHQucCk6KHQudSYmZnVuY3Rpb24gdChuKXtpZihuJiZcIm9iamVjdFwiPT10eXBlb2Ygbil7dmFyIHI9bltRXTtpZihyKXt2YXIgZT1yLnQsbz1yLmssZj1yLkQsYz1yLmk7aWYoND09PWMpaShvLChmdW5jdGlvbihuKXtuIT09USYmKHZvaWQgMCE9PWVbbl18fHUoZSxuKT9mW25dfHx0KG9bbl0pOihmW25dPSEwLGsocikpKX0pKSxpKGUsKGZ1bmN0aW9uKHQpe3ZvaWQgMCE9PW9bdF18fHUobyx0KXx8KGZbdF09ITEsayhyKSl9KSk7ZWxzZSBpZig1PT09Yyl7aWYoYShyKSYmKGsociksZi5sZW5ndGg9ITApLG8ubGVuZ3RoPGUubGVuZ3RoKWZvcih2YXIgcz1vLmxlbmd0aDtzPGUubGVuZ3RoO3MrKylmW3NdPSExO2Vsc2UgZm9yKHZhciB2PWUubGVuZ3RoO3Y8by5sZW5ndGg7disrKWZbdl09ITA7Zm9yKHZhciBwPU1hdGgubWluKG8ubGVuZ3RoLGUubGVuZ3RoKSxsPTA7bDxwO2wrKyl2b2lkIDA9PT1mW2xdJiZ0KG9bbF0pfX19fSh0LnBbMF0pLGUodC5wKSl9LEs6ZnVuY3Rpb24odCl7cmV0dXJuIDQ9PT10Lmk/byh0KTphKHQpfX0pfWZ1bmN0aW9uIEYoKXtmdW5jdGlvbiBlKHQpe2lmKCFyKHQpKXJldHVybiB0O2lmKEFycmF5LmlzQXJyYXkodCkpcmV0dXJuIHQubWFwKGUpO2lmKHModCkpcmV0dXJuIG5ldyBNYXAoQXJyYXkuZnJvbSh0LmVudHJpZXMoKSkubWFwKChmdW5jdGlvbih0KXtyZXR1cm5bdFswXSxlKHRbMV0pXX0pKSk7aWYodih0KSlyZXR1cm4gbmV3IFNldChBcnJheS5mcm9tKHQpLm1hcChlKSk7dmFyIG49T2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpO2Zvcih2YXIgaSBpbiB0KW5baV09ZSh0W2ldKTtyZXR1cm4gbn1mdW5jdGlvbiBmKHQpe3JldHVybiBuKHQpP2UodCk6dH12YXIgYz1cImFkZFwiO20oXCJQYXRjaGVzXCIseyQ6ZnVuY3Rpb24obixyKXtyZXR1cm4gci5mb3JFYWNoKChmdW5jdGlvbihyKXtmb3IodmFyIGk9ci5wYXRoLHU9ci5vcCxmPW4scz0wO3M8aS5sZW5ndGgtMTtzKyspe3ZhciB2PW8oZikscD1pW3NdOzAhPT12JiYxIT09dnx8XCJfX3Byb3RvX19cIiE9PXAmJlwiY29uc3RydWN0b3JcIiE9PXB8fHQoMjQpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGYmJlwicHJvdG90eXBlXCI9PT1wJiZ0KDI0KSxcIm9iamVjdFwiIT10eXBlb2YoZj1hKGYscCkpJiZ0KDE1LGkuam9pbihcIi9cIikpfXZhciBsPW8oZiksZD1lKHIudmFsdWUpLGg9aVtpLmxlbmd0aC0xXTtzd2l0Y2godSl7Y2FzZVwicmVwbGFjZVwiOnN3aXRjaChsKXtjYXNlIDI6cmV0dXJuIGYuc2V0KGgsZCk7Y2FzZSAzOnQoMTYpO2RlZmF1bHQ6cmV0dXJuIGZbaF09ZH1jYXNlIGM6c3dpdGNoKGwpe2Nhc2UgMTpyZXR1cm4gZi5zcGxpY2UoaCwwLGQpO2Nhc2UgMjpyZXR1cm4gZi5zZXQoaCxkKTtjYXNlIDM6cmV0dXJuIGYuYWRkKGQpO2RlZmF1bHQ6cmV0dXJuIGZbaF09ZH1jYXNlXCJyZW1vdmVcIjpzd2l0Y2gobCl7Y2FzZSAxOnJldHVybiBmLnNwbGljZShoLDEpO2Nhc2UgMjpyZXR1cm4gZi5kZWxldGUoaCk7Y2FzZSAzOnJldHVybiBmLmRlbGV0ZShyLnZhbHVlKTtkZWZhdWx0OnJldHVybiBkZWxldGUgZltoXX1kZWZhdWx0OnQoMTcsdSl9fSkpLG59LFI6ZnVuY3Rpb24odCxuLHIsZSl7c3dpdGNoKHQuaSl7Y2FzZSAwOmNhc2UgNDpjYXNlIDI6cmV0dXJuIGZ1bmN0aW9uKHQsbixyLGUpe3ZhciBvPXQudCxzPXQubztpKHQuRCwoZnVuY3Rpb24odCxpKXt2YXIgdj1hKG8sdCkscD1hKHMsdCksbD1pP3Uobyx0KT9cInJlcGxhY2VcIjpjOlwicmVtb3ZlXCI7aWYodiE9PXB8fFwicmVwbGFjZVwiIT09bCl7dmFyIGQ9bi5jb25jYXQodCk7ci5wdXNoKFwicmVtb3ZlXCI9PT1sP3tvcDpsLHBhdGg6ZH06e29wOmwscGF0aDpkLHZhbHVlOnB9KSxlLnB1c2gobD09PWM/e29wOlwicmVtb3ZlXCIscGF0aDpkfTpcInJlbW92ZVwiPT09bD97b3A6YyxwYXRoOmQsdmFsdWU6Zih2KX06e29wOlwicmVwbGFjZVwiLHBhdGg6ZCx2YWx1ZTpmKHYpfSl9fSkpfSh0LG4scixlKTtjYXNlIDU6Y2FzZSAxOnJldHVybiBmdW5jdGlvbih0LG4scixlKXt2YXIgaT10LnQsbz10LkQsdT10Lm87aWYodS5sZW5ndGg8aS5sZW5ndGgpe3ZhciBhPVt1LGldO2k9YVswXSx1PWFbMV07dmFyIHM9W2Uscl07cj1zWzBdLGU9c1sxXX1mb3IodmFyIHY9MDt2PGkubGVuZ3RoO3YrKylpZihvW3ZdJiZ1W3ZdIT09aVt2XSl7dmFyIHA9bi5jb25jYXQoW3ZdKTtyLnB1c2goe29wOlwicmVwbGFjZVwiLHBhdGg6cCx2YWx1ZTpmKHVbdl0pfSksZS5wdXNoKHtvcDpcInJlcGxhY2VcIixwYXRoOnAsdmFsdWU6ZihpW3ZdKX0pfWZvcih2YXIgbD1pLmxlbmd0aDtsPHUubGVuZ3RoO2wrKyl7dmFyIGQ9bi5jb25jYXQoW2xdKTtyLnB1c2goe29wOmMscGF0aDpkLHZhbHVlOmYodVtsXSl9KX1pLmxlbmd0aDx1Lmxlbmd0aCYmZS5wdXNoKHtvcDpcInJlcGxhY2VcIixwYXRoOm4uY29uY2F0KFtcImxlbmd0aFwiXSksdmFsdWU6aS5sZW5ndGh9KX0odCxuLHIsZSk7Y2FzZSAzOnJldHVybiBmdW5jdGlvbih0LG4scixlKXt2YXIgaT10LnQsbz10Lm8sdT0wO2kuZm9yRWFjaCgoZnVuY3Rpb24odCl7aWYoIW8uaGFzKHQpKXt2YXIgaT1uLmNvbmNhdChbdV0pO3IucHVzaCh7b3A6XCJyZW1vdmVcIixwYXRoOmksdmFsdWU6dH0pLGUudW5zaGlmdCh7b3A6YyxwYXRoOmksdmFsdWU6dH0pfXUrK30pKSx1PTAsby5mb3JFYWNoKChmdW5jdGlvbih0KXtpZighaS5oYXModCkpe3ZhciBvPW4uY29uY2F0KFt1XSk7ci5wdXNoKHtvcDpjLHBhdGg6byx2YWx1ZTp0fSksZS51bnNoaWZ0KHtvcDpcInJlbW92ZVwiLHBhdGg6byx2YWx1ZTp0fSl9dSsrfSkpfSh0LG4scixlKX19LE06ZnVuY3Rpb24odCxuLHIsZSl7ci5wdXNoKHtvcDpcInJlcGxhY2VcIixwYXRoOltdLHZhbHVlOm59KSxlLnB1c2goe29wOlwicmVwbGFjZVwiLHBhdGg6W10sdmFsdWU6dC50fSl9fSl9ZnVuY3Rpb24gQygpe2Z1bmN0aW9uIG4odCxuKXtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj10fWEodCxuKSx0LnByb3RvdHlwZT0oci5wcm90b3R5cGU9bi5wcm90b3R5cGUsbmV3IHIpfWZ1bmN0aW9uIGUodCl7dC5vfHwodC5EPW5ldyBNYXAsdC5vPW5ldyBNYXAodC50KSl9ZnVuY3Rpb24gbyh0KXt0Lm98fCh0Lm89bmV3IFNldCx0LnQuZm9yRWFjaCgoZnVuY3Rpb24obil7aWYocihuKSl7dmFyIGU9Uih0LkEuaCxuLHQpO3QucC5zZXQobixlKSx0Lm8uYWRkKGUpfWVsc2UgdC5vLmFkZChuKX0pKSl9ZnVuY3Rpb24gdShuKXtuLmcmJnQoMyxKU09OLnN0cmluZ2lmeShwKG4pKSl9dmFyIGE9ZnVuY3Rpb24odCxuKXtyZXR1cm4oYT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxuKXt0Ll9fcHJvdG9fXz1ufXx8ZnVuY3Rpb24odCxuKXtmb3IodmFyIHIgaW4gbiluLmhhc093blByb3BlcnR5KHIpJiYodFtyXT1uW3JdKX0pKHQsbil9LGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsbil7cmV0dXJuIHRoaXNbUV09e2k6MixsOm4sQTpuP24uQTpfKCksUDohMSxJOiExLG86dm9pZCAwLEQ6dm9pZCAwLHQ6dCxrOnRoaXMsQzohMSxnOiExfSx0aGlzfW4odCxNYXApO3ZhciBvPXQucHJvdG90eXBlO3JldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkobyxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHAodGhpc1tRXSkuc2l6ZX19KSxvLmhhcz1mdW5jdGlvbih0KXtyZXR1cm4gcCh0aGlzW1FdKS5oYXModCl9LG8uc2V0PWZ1bmN0aW9uKHQsbil7dmFyIHI9dGhpc1tRXTtyZXR1cm4gdShyKSxwKHIpLmhhcyh0KSYmcChyKS5nZXQodCk9PT1ufHwoZShyKSxrKHIpLHIuRC5zZXQodCwhMCksci5vLnNldCh0LG4pLHIuRC5zZXQodCwhMCkpLHRoaXN9LG8uZGVsZXRlPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLmhhcyh0KSlyZXR1cm4hMTt2YXIgbj10aGlzW1FdO3JldHVybiB1KG4pLGUobiksayhuKSxuLkQuc2V0KHQsITEpLG4uby5kZWxldGUodCksITB9LG8uY2xlYXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzW1FdO3UodCkscCh0KS5zaXplJiYoZSh0KSxrKHQpLHQuRD1uZXcgTWFwLGkodC50LChmdW5jdGlvbihuKXt0LkQuc2V0KG4sITEpfSkpLHQuby5jbGVhcigpKX0sby5mb3JFYWNoPWZ1bmN0aW9uKHQsbil7dmFyIHI9dGhpcztwKHRoaXNbUV0pLmZvckVhY2goKGZ1bmN0aW9uKGUsaSl7dC5jYWxsKG4sci5nZXQoaSksaSxyKX0pKX0sby5nZXQ9ZnVuY3Rpb24odCl7dmFyIG49dGhpc1tRXTt1KG4pO3ZhciBpPXAobikuZ2V0KHQpO2lmKG4uSXx8IXIoaSkpcmV0dXJuIGk7aWYoaSE9PW4udC5nZXQodCkpcmV0dXJuIGk7dmFyIG89UihuLkEuaCxpLG4pO3JldHVybiBlKG4pLG4uby5zZXQodCxvKSxvfSxvLmtleXM9ZnVuY3Rpb24oKXtyZXR1cm4gcCh0aGlzW1FdKS5rZXlzKCl9LG8udmFsdWVzPWZ1bmN0aW9uKCl7dmFyIHQsbj10aGlzLHI9dGhpcy5rZXlzKCk7cmV0dXJuKHQ9e30pW1ZdPWZ1bmN0aW9uKCl7cmV0dXJuIG4udmFsdWVzKCl9LHQubmV4dD1mdW5jdGlvbigpe3ZhciB0PXIubmV4dCgpO3JldHVybiB0LmRvbmU/dDp7ZG9uZTohMSx2YWx1ZTpuLmdldCh0LnZhbHVlKX19LHR9LG8uZW50cmllcz1mdW5jdGlvbigpe3ZhciB0LG49dGhpcyxyPXRoaXMua2V5cygpO3JldHVybih0PXt9KVtWXT1mdW5jdGlvbigpe3JldHVybiBuLmVudHJpZXMoKX0sdC5uZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9ci5uZXh0KCk7aWYodC5kb25lKXJldHVybiB0O3ZhciBlPW4uZ2V0KHQudmFsdWUpO3JldHVybntkb25lOiExLHZhbHVlOlt0LnZhbHVlLGVdfX0sdH0sb1tWXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVudHJpZXMoKX0sdH0oKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LG4pe3JldHVybiB0aGlzW1FdPXtpOjMsbDpuLEE6bj9uLkE6XygpLFA6ITEsSTohMSxvOnZvaWQgMCx0OnQsazp0aGlzLHA6bmV3IE1hcCxnOiExLEM6ITF9LHRoaXN9bih0LFNldCk7dmFyIHI9dC5wcm90b3R5cGU7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLFwic2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcCh0aGlzW1FdKS5zaXplfX0pLHIuaGFzPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXNbUV07cmV0dXJuIHUobiksbi5vPyEhbi5vLmhhcyh0KXx8ISghbi5wLmhhcyh0KXx8IW4uby5oYXMobi5wLmdldCh0KSkpOm4udC5oYXModCl9LHIuYWRkPWZ1bmN0aW9uKHQpe3ZhciBuPXRoaXNbUV07cmV0dXJuIHUobiksdGhpcy5oYXModCl8fChvKG4pLGsobiksbi5vLmFkZCh0KSksdGhpc30sci5kZWxldGU9ZnVuY3Rpb24odCl7aWYoIXRoaXMuaGFzKHQpKXJldHVybiExO3ZhciBuPXRoaXNbUV07cmV0dXJuIHUobiksbyhuKSxrKG4pLG4uby5kZWxldGUodCl8fCEhbi5wLmhhcyh0KSYmbi5vLmRlbGV0ZShuLnAuZ2V0KHQpKX0sci5jbGVhcj1mdW5jdGlvbigpe3ZhciB0PXRoaXNbUV07dSh0KSxwKHQpLnNpemUmJihvKHQpLGsodCksdC5vLmNsZWFyKCkpfSxyLnZhbHVlcz1mdW5jdGlvbigpe3ZhciB0PXRoaXNbUV07cmV0dXJuIHUodCksbyh0KSx0Lm8udmFsdWVzKCl9LHIuZW50cmllcz1mdW5jdGlvbigpe3ZhciB0PXRoaXNbUV07cmV0dXJuIHUodCksbyh0KSx0Lm8uZW50cmllcygpfSxyLmtleXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZXMoKX0scltWXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlcygpfSxyLmZvckVhY2g9ZnVuY3Rpb24odCxuKXtmb3IodmFyIHI9dGhpcy52YWx1ZXMoKSxlPXIubmV4dCgpOyFlLmRvbmU7KXQuY2FsbChuLGUudmFsdWUsZS52YWx1ZSx0aGlzKSxlPXIubmV4dCgpfSx0fSgpO20oXCJNYXBTZXRcIix7VDpmdW5jdGlvbih0LG4pe3JldHVybiBuZXcgZih0LG4pfSxGOmZ1bmN0aW9uKHQsbil7cmV0dXJuIG5ldyBjKHQsbil9fSl9ZnVuY3Rpb24gSigpe1QoKSxDKCksRigpfWZ1bmN0aW9uIEsodCl7cmV0dXJuIHR9ZnVuY3Rpb24gJCh0KXtyZXR1cm4gdH12YXIgRyxVLFc9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbChcInhcIiksWD1cInVuZGVmaW5lZFwiIT10eXBlb2YgTWFwLHE9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFNldCxCPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBQcm94eSYmdm9pZCAwIT09UHJveHkucmV2b2NhYmxlJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgUmVmbGVjdCxIPVc/U3ltYm9sLmZvcihcImltbWVyLW5vdGhpbmdcIik6KChHPXt9KVtcImltbWVyLW5vdGhpbmdcIl09ITAsRyksTD1XP1N5bWJvbC5mb3IoXCJpbW1lci1kcmFmdGFibGVcIik6XCJfXyRpbW1lcl9kcmFmdGFibGVcIixRPVc/U3ltYm9sLmZvcihcImltbWVyLXN0YXRlXCIpOlwiX18kaW1tZXJfc3RhdGVcIixWPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcnx8XCJAQGl0ZXJhdG9yXCIsWT17MDpcIklsbGVnYWwgc3RhdGVcIiwxOlwiSW1tZXIgZHJhZnRzIGNhbm5vdCBoYXZlIGNvbXB1dGVkIHByb3BlcnRpZXNcIiwyOlwiVGhpcyBvYmplY3QgaGFzIGJlZW4gZnJvemVuIGFuZCBzaG91bGQgbm90IGJlIG11dGF0ZWRcIiwzOmZ1bmN0aW9uKHQpe3JldHVyblwiQ2Fubm90IHVzZSBhIHByb3h5IHRoYXQgaGFzIGJlZW4gcmV2b2tlZC4gRGlkIHlvdSBwYXNzIGFuIG9iamVjdCBmcm9tIGluc2lkZSBhbiBpbW1lciBmdW5jdGlvbiB0byBhbiBhc3luYyBwcm9jZXNzPyBcIit0fSw0OlwiQW4gaW1tZXIgcHJvZHVjZXIgcmV0dXJuZWQgYSBuZXcgdmFsdWUgKmFuZCogbW9kaWZpZWQgaXRzIGRyYWZ0LiBFaXRoZXIgcmV0dXJuIGEgbmV3IHZhbHVlICpvciogbW9kaWZ5IHRoZSBkcmFmdC5cIiw1OlwiSW1tZXIgZm9yYmlkcyBjaXJjdWxhciByZWZlcmVuY2VzXCIsNjpcIlRoZSBmaXJzdCBvciBzZWNvbmQgYXJndW1lbnQgdG8gYHByb2R1Y2VgIG11c3QgYmUgYSBmdW5jdGlvblwiLDc6XCJUaGUgdGhpcmQgYXJndW1lbnQgdG8gYHByb2R1Y2VgIG11c3QgYmUgYSBmdW5jdGlvbiBvciB1bmRlZmluZWRcIiw4OlwiRmlyc3QgYXJndW1lbnQgdG8gYGNyZWF0ZURyYWZ0YCBtdXN0IGJlIGEgcGxhaW4gb2JqZWN0LCBhbiBhcnJheSwgb3IgYW4gaW1tZXJhYmxlIG9iamVjdFwiLDk6XCJGaXJzdCBhcmd1bWVudCB0byBgZmluaXNoRHJhZnRgIG11c3QgYmUgYSBkcmFmdCByZXR1cm5lZCBieSBgY3JlYXRlRHJhZnRgXCIsMTA6XCJUaGUgZ2l2ZW4gZHJhZnQgaXMgYWxyZWFkeSBmaW5hbGl6ZWRcIiwxMTpcIk9iamVjdC5kZWZpbmVQcm9wZXJ0eSgpIGNhbm5vdCBiZSB1c2VkIG9uIGFuIEltbWVyIGRyYWZ0XCIsMTI6XCJPYmplY3Quc2V0UHJvdG90eXBlT2YoKSBjYW5ub3QgYmUgdXNlZCBvbiBhbiBJbW1lciBkcmFmdFwiLDEzOlwiSW1tZXIgb25seSBzdXBwb3J0cyBkZWxldGluZyBhcnJheSBpbmRpY2VzXCIsMTQ6XCJJbW1lciBvbmx5IHN1cHBvcnRzIHNldHRpbmcgYXJyYXkgaW5kaWNlcyBhbmQgdGhlICdsZW5ndGgnIHByb3BlcnR5XCIsMTU6ZnVuY3Rpb24odCl7cmV0dXJuXCJDYW5ub3QgYXBwbHkgcGF0Y2gsIHBhdGggZG9lc24ndCByZXNvbHZlOiBcIit0fSwxNjonU2V0cyBjYW5ub3QgaGF2ZSBcInJlcGxhY2VcIiBwYXRjaGVzLicsMTc6ZnVuY3Rpb24odCl7cmV0dXJuXCJVbnN1cHBvcnRlZCBwYXRjaCBvcGVyYXRpb246IFwiK3R9LDE4OmZ1bmN0aW9uKHQpe3JldHVyblwiVGhlIHBsdWdpbiBmb3IgJ1wiK3QrXCInIGhhcyBub3QgYmVlbiBsb2FkZWQgaW50byBJbW1lci4gVG8gZW5hYmxlIHRoZSBwbHVnaW4sIGltcG9ydCBhbmQgY2FsbCBgZW5hYmxlXCIrdCtcIigpYCB3aGVuIGluaXRpYWxpemluZyB5b3VyIGFwcGxpY2F0aW9uLlwifSwyMDpcIkNhbm5vdCB1c2UgcHJveGllcyBpZiBQcm94eSwgUHJveHkucmV2b2NhYmxlIG9yIFJlZmxlY3QgYXJlIG5vdCBhdmFpbGFibGVcIiwyMTpmdW5jdGlvbih0KXtyZXR1cm5cInByb2R1Y2UgY2FuIG9ubHkgYmUgY2FsbGVkIG9uIHRoaW5ncyB0aGF0IGFyZSBkcmFmdGFibGU6IHBsYWluIG9iamVjdHMsIGFycmF5cywgTWFwLCBTZXQgb3IgY2xhc3NlcyB0aGF0IGFyZSBtYXJrZWQgd2l0aCAnW2ltbWVyYWJsZV06IHRydWUnLiBHb3QgJ1wiK3QrXCInXCJ9LDIyOmZ1bmN0aW9uKHQpe3JldHVyblwiJ2N1cnJlbnQnIGV4cGVjdHMgYSBkcmFmdCwgZ290OiBcIit0fSwyMzpmdW5jdGlvbih0KXtyZXR1cm5cIidvcmlnaW5hbCcgZXhwZWN0cyBhIGRyYWZ0LCBnb3Q6IFwiK3R9LDI0OlwiUGF0Y2hpbmcgcmVzZXJ2ZWQgYXR0cmlidXRlcyBsaWtlIF9fcHJvdG9fXywgcHJvdG90eXBlIGFuZCBjb25zdHJ1Y3RvciBpcyBub3QgYWxsb3dlZFwifSxaPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBSZWZsZWN0JiZSZWZsZWN0Lm93bktleXM/UmVmbGVjdC5vd25LZXlzOnZvaWQgMCE9PU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM/ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHQpLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHQpKX06T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsdHQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnN8fGZ1bmN0aW9uKHQpe3ZhciBuPXt9O3JldHVybiBaKHQpLmZvckVhY2goKGZ1bmN0aW9uKHIpe25bcl09T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpfSkpLG59LG50PXt9LHJ0PXtnZXQ6ZnVuY3Rpb24odCxuKXtpZihuPT09USlyZXR1cm4gdDt2YXIgZT1wKHQpO2lmKCF1KGUsbikpcmV0dXJuIGZ1bmN0aW9uKHQsbixyKXt2YXIgZSxpPUkobixyKTtyZXR1cm4gaT9cInZhbHVlXCJpbiBpP2kudmFsdWU6bnVsbD09PShlPWkuZ2V0KXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jYWxsKHQuayk6dm9pZCAwfSh0LGUsbik7dmFyIGk9ZVtuXTtyZXR1cm4gdC5JfHwhcihpKT9pOmk9PT16KHQudCxuKT8oRSh0KSx0Lm9bbl09Uih0LkEuaCxpLHQpKTppfSxoYXM6ZnVuY3Rpb24odCxuKXtyZXR1cm4gbiBpbiBwKHQpfSxvd25LZXlzOmZ1bmN0aW9uKHQpe3JldHVybiBSZWZsZWN0Lm93bktleXMocCh0KSl9LHNldDpmdW5jdGlvbih0LG4scil7dmFyIGU9SShwKHQpLG4pO2lmKG51bGw9PWU/dm9pZCAwOmUuc2V0KXJldHVybiBlLnNldC5jYWxsKHQuayxyKSwhMDtpZighdC5QKXt2YXIgaT16KHAodCksbiksbz1udWxsPT1pP3ZvaWQgMDppW1FdO2lmKG8mJm8udD09PXIpcmV0dXJuIHQub1tuXT1yLHQuRFtuXT0hMSwhMDtpZihjKHIsaSkmJih2b2lkIDAhPT1yfHx1KHQudCxuKSkpcmV0dXJuITA7RSh0KSxrKHQpfXJldHVybiB0Lm9bbl09cix0LkRbbl09ITAsITB9LGRlbGV0ZVByb3BlcnR5OmZ1bmN0aW9uKHQsbil7cmV0dXJuIHZvaWQgMCE9PXoodC50LG4pfHxuIGluIHQudD8odC5EW25dPSExLEUodCksayh0KSk6ZGVsZXRlIHQuRFtuXSx0Lm8mJmRlbGV0ZSB0Lm9bbl0sITB9LGdldE93blByb3BlcnR5RGVzY3JpcHRvcjpmdW5jdGlvbih0LG4pe3ZhciByPXAodCksZT1SZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyLG4pO3JldHVybiBlP3t3cml0YWJsZTohMCxjb25maWd1cmFibGU6MSE9PXQuaXx8XCJsZW5ndGhcIiE9PW4sZW51bWVyYWJsZTplLmVudW1lcmFibGUsdmFsdWU6cltuXX06ZX0sZGVmaW5lUHJvcGVydHk6ZnVuY3Rpb24oKXt0KDExKX0sZ2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZih0LnQpfSxzZXRQcm90b3R5cGVPZjpmdW5jdGlvbigpe3QoMTIpfX0sZXQ9e307aShydCwoZnVuY3Rpb24odCxuKXtldFt0XT1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMF09YXJndW1lbnRzWzBdWzBdLG4uYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pKSxldC5kZWxldGVQcm9wZXJ0eT1mdW5jdGlvbihuLHIpe3JldHVyblwicHJvZHVjdGlvblwiIT09cHJvY2Vzcy5lbnYuTk9ERV9FTlYmJmlzTmFOKHBhcnNlSW50KHIpKSYmdCgxMykscnQuZGVsZXRlUHJvcGVydHkuY2FsbCh0aGlzLG5bMF0scil9LGV0LnNldD1mdW5jdGlvbihuLHIsZSl7cmV0dXJuXCJwcm9kdWN0aW9uXCIhPT1wcm9jZXNzLmVudi5OT0RFX0VOViYmXCJsZW5ndGhcIiE9PXImJmlzTmFOKHBhcnNlSW50KHIpKSYmdCgxNCkscnQuc2V0LmNhbGwodGhpcyxuWzBdLHIsZSxuWzBdKX07dmFyIGl0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSh0KXt0aGlzLk89Qix0aGlzLk49ITAsXCJib29sZWFuXCI9PXR5cGVvZihudWxsPT10P3ZvaWQgMDp0LnVzZVByb3hpZXMpJiZ0aGlzLnNldFVzZVByb3hpZXModC51c2VQcm94aWVzKSxcImJvb2xlYW5cIj09dHlwZW9mKG51bGw9PXQ/dm9pZCAwOnQuYXV0b0ZyZWV6ZSkmJnRoaXMuc2V0QXV0b0ZyZWV6ZSh0LmF1dG9GcmVlemUpLHRoaXMucHJvZHVjZT10aGlzLnByb2R1Y2UuYmluZCh0aGlzKSx0aGlzLnByb2R1Y2VXaXRoUGF0Y2hlcz10aGlzLnByb2R1Y2VXaXRoUGF0Y2hlcy5iaW5kKHRoaXMpfXZhciBpPWUucHJvdG90eXBlO3JldHVybiBpLnByb2R1Y2U9ZnVuY3Rpb24obixlLGkpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4mJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGUpe3ZhciBvPWU7ZT1uO3ZhciB1PXRoaXM7cmV0dXJuIGZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7dm9pZCAwPT09dCYmKHQ9byk7Zm9yKHZhciByPWFyZ3VtZW50cy5sZW5ndGgsaT1BcnJheShyPjE/ci0xOjApLGE9MTthPHI7YSsrKWlbYS0xXT1hcmd1bWVudHNbYV07cmV0dXJuIHUucHJvZHVjZSh0LChmdW5jdGlvbih0KXt2YXIgcjtyZXR1cm4ocj1lKS5jYWxsLmFwcGx5KHIsW24sdF0uY29uY2F0KGkpKX0pKX19dmFyIGE7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmdCg2KSx2b2lkIDAhPT1pJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBpJiZ0KDcpLHIobikpe3ZhciBmPU8odGhpcyksYz1SKHRoaXMsbix2b2lkIDApLHM9ITA7dHJ5e2E9ZShjKSxzPSExfWZpbmFsbHl7cz9nKGYpOncoZil9cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFByb21pc2UmJmEgaW5zdGFuY2VvZiBQcm9taXNlP2EudGhlbigoZnVuY3Rpb24odCl7cmV0dXJuIGooZixpKSxQKHQsZil9KSwoZnVuY3Rpb24odCl7dGhyb3cgZyhmKSx0fSkpOihqKGYsaSksUChhLGYpKX1pZighbnx8XCJvYmplY3RcIiE9dHlwZW9mIG4pe2lmKChhPWUobikpPT09SClyZXR1cm47cmV0dXJuIHZvaWQgMD09PWEmJihhPW4pLHRoaXMuTiYmZChhLCEwKSxhfXQoMjEsbil9LGkucHJvZHVjZVdpdGhQYXRjaGVzPWZ1bmN0aW9uKHQsbil7dmFyIHIsZSxpPXRoaXM7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdD9mdW5jdGlvbihuKXtmb3IodmFyIHI9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHI+MT9yLTE6MCksbz0xO288cjtvKyspZVtvLTFdPWFyZ3VtZW50c1tvXTtyZXR1cm4gaS5wcm9kdWNlV2l0aFBhdGNoZXMobiwoZnVuY3Rpb24obil7cmV0dXJuIHQuYXBwbHkodm9pZCAwLFtuXS5jb25jYXQoZSkpfSkpfTpbdGhpcy5wcm9kdWNlKHQsbiwoZnVuY3Rpb24odCxuKXtyPXQsZT1ufSkpLHIsZV19LGkuY3JlYXRlRHJhZnQ9ZnVuY3Rpb24oZSl7cihlKXx8dCg4KSxuKGUpJiYoZT1EKGUpKTt2YXIgaT1PKHRoaXMpLG89Uih0aGlzLGUsdm9pZCAwKTtyZXR1cm4gb1tRXS5DPSEwLHcoaSksb30saS5maW5pc2hEcmFmdD1mdW5jdGlvbihuLHIpe3ZhciBlPW4mJm5bUV07XCJwcm9kdWN0aW9uXCIhPT1wcm9jZXNzLmVudi5OT0RFX0VOViYmKGUmJmUuQ3x8dCg5KSxlLkkmJnQoMTApKTt2YXIgaT1lLkE7cmV0dXJuIGooaSxyKSxQKHZvaWQgMCxpKX0saS5zZXRBdXRvRnJlZXplPWZ1bmN0aW9uKHQpe3RoaXMuTj10fSxpLnNldFVzZVByb3hpZXM9ZnVuY3Rpb24obil7biYmIUImJnQoMjApLHRoaXMuTz1ufSxpLmFwcGx5UGF0Y2hlcz1mdW5jdGlvbih0LHIpe3ZhciBlO2ZvcihlPXIubGVuZ3RoLTE7ZT49MDtlLS0pe3ZhciBpPXJbZV07aWYoMD09PWkucGF0aC5sZW5ndGgmJlwicmVwbGFjZVwiPT09aS5vcCl7dD1pLnZhbHVlO2JyZWFrfX12YXIgbz1iKFwiUGF0Y2hlc1wiKS4kO3JldHVybiBuKHQpP28odCxyKTp0aGlzLnByb2R1Y2UodCwoZnVuY3Rpb24odCl7cmV0dXJuIG8odCxyLnNsaWNlKGUrMSkpfSkpfSxlfSgpLG90PW5ldyBpdCx1dD1vdC5wcm9kdWNlLGF0PW90LnByb2R1Y2VXaXRoUGF0Y2hlcy5iaW5kKG90KSxmdD1vdC5zZXRBdXRvRnJlZXplLmJpbmQob3QpLGN0PW90LnNldFVzZVByb3hpZXMuYmluZChvdCksc3Q9b3QuYXBwbHlQYXRjaGVzLmJpbmQob3QpLHZ0PW90LmNyZWF0ZURyYWZ0LmJpbmQob3QpLHB0PW90LmZpbmlzaERyYWZ0LmJpbmQob3QpO2V4cG9ydCBkZWZhdWx0IHV0O2V4cG9ydHtpdCBhcyBJbW1lcixzdCBhcyBhcHBseVBhdGNoZXMsSyBhcyBjYXN0RHJhZnQsJCBhcyBjYXN0SW1tdXRhYmxlLHZ0IGFzIGNyZWF0ZURyYWZ0LEQgYXMgY3VycmVudCxKIGFzIGVuYWJsZUFsbFBsdWdpbnMsVCBhcyBlbmFibGVFUzUsQyBhcyBlbmFibGVNYXBTZXQsRiBhcyBlbmFibGVQYXRjaGVzLHB0IGFzIGZpbmlzaERyYWZ0LGQgYXMgZnJlZXplLEwgYXMgaW1tZXJhYmxlLG4gYXMgaXNEcmFmdCxyIGFzIGlzRHJhZnRhYmxlLEggYXMgbm90aGluZyxlIGFzIG9yaWdpbmFsLHV0IGFzIHByb2R1Y2UsYXQgYXMgcHJvZHVjZVdpdGhQYXRjaGVzLGZ0IGFzIHNldEF1dG9GcmVlemUsY3QgYXMgc2V0VXNlUHJveGllc307XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbW1lci5lc20uanMubWFwXG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCJpbXBvcnQgY3JlYXRlTmV4dFN0YXRlLCB7IGlzRHJhZnQsIGN1cnJlbnQsIGlzRHJhZnRhYmxlLCBlbmFibGVFUzUgfSBmcm9tICdpbW1lcic7XG5leHBvcnQgeyBkZWZhdWx0IGFzIGNyZWF0ZU5leHRTdGF0ZSwgY3VycmVudCwgZnJlZXplIH0gZnJvbSAnaW1tZXInO1xuaW1wb3J0IHsgY29tcG9zZSwgY29tYmluZVJlZHVjZXJzLCBhcHBseU1pZGRsZXdhcmUsIGNyZWF0ZVN0b3JlIH0gZnJvbSAncmVkdXgnO1xuZXhwb3J0ICogZnJvbSAncmVkdXgnO1xuaW1wb3J0IHsgY3JlYXRlU2VsZWN0b3IgfSBmcm9tICdyZXNlbGVjdCc7XG5leHBvcnQgeyBjcmVhdGVTZWxlY3RvciB9IGZyb20gJ3Jlc2VsZWN0JztcbmltcG9ydCB0aHVua01pZGRsZXdhcmUgZnJvbSAncmVkdXgtdGh1bmsnO1xuXG4vKipcclxuICogXCJEcmFmdC1TYWZlXCIgdmVyc2lvbiBvZiBgcmVzZWxlY3RgJ3MgYGNyZWF0ZVNlbGVjdG9yYDpcclxuICogSWYgYW4gYGltbWVyYC1kcmFmdGVkIG9iamVjdCBpcyBwYXNzZWQgaW50byB0aGUgcmVzdWx0aW5nIHNlbGVjdG9yJ3MgZmlyc3QgYXJndW1lbnQsXHJcbiAqIHRoZSBzZWxlY3RvciB3aWxsIGFjdCBvbiB0aGUgY3VycmVudCBkcmFmdCB2YWx1ZSwgaW5zdGVhZCBvZiByZXR1cm5pbmcgYSBjYWNoZWQgdmFsdWVcclxuICogdGhhdCBtaWdodCBiZSBwb3NzaWJseSBvdXRkYXRlZCBpZiB0aGUgZHJhZnQgaGFzIGJlZW4gbW9kaWZpZWQgc2luY2UuXHJcbiAqIEBwdWJsaWNcclxuICovXG5cbnZhciBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvciA9IGZ1bmN0aW9uIGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yKCkge1xuICB2YXIgc2VsZWN0b3IgPSBjcmVhdGVTZWxlY3Rvci5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7XG5cbiAgdmFyIHdyYXBwZWRTZWxlY3RvciA9IGZ1bmN0aW9uIHdyYXBwZWRTZWxlY3Rvcih2YWx1ZSkge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCByZXN0ID0gbmV3IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIHJlc3RbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxlY3Rvci5hcHBseSh2b2lkIDAsIFtpc0RyYWZ0KHZhbHVlKSA/IGN1cnJlbnQodmFsdWUpIDogdmFsdWVdLmNvbmNhdChyZXN0KSk7XG4gIH07XG5cbiAgcmV0dXJuIHdyYXBwZWRTZWxlY3Rvcjtcbn07XG5cbmZ1bmN0aW9uIF9leHRlbmRzKCkge1xuICBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG5cbiAgcmV0dXJuIF9leHRlbmRzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG59XG5cbmZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO1xuICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcbiAgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbn1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHtcbiAgICByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pO1xuICB9O1xuICByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pO1xufVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkge1xuICBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHtcbiAgICBvLl9fcHJvdG9fXyA9IHA7XG4gICAgcmV0dXJuIG87XG4gIH07XG5cbiAgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTtcbn1cblxuZnVuY3Rpb24gaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkge1xuICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7XG4gIGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7XG4gIGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7XG5cbiAgdHJ5IHtcbiAgICBEYXRlLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFJlZmxlY3QuY29uc3RydWN0KERhdGUsIFtdLCBmdW5jdGlvbiAoKSB7fSkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICBpZiAoaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkpIHtcbiAgICBfY29uc3RydWN0ID0gUmVmbGVjdC5jb25zdHJ1Y3Q7XG4gIH0gZWxzZSB7XG4gICAgX2NvbnN0cnVjdCA9IGZ1bmN0aW9uIF9jb25zdHJ1Y3QoUGFyZW50LCBhcmdzLCBDbGFzcykge1xuICAgICAgdmFyIGEgPSBbbnVsbF07XG4gICAgICBhLnB1c2guYXBwbHkoYSwgYXJncyk7XG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSBGdW5jdGlvbi5iaW5kLmFwcGx5KFBhcmVudCwgYSk7XG4gICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgQ29uc3RydWN0b3IoKTtcbiAgICAgIGlmIChDbGFzcykgX3NldFByb3RvdHlwZU9mKGluc3RhbmNlLCBDbGFzcy5wcm90b3R5cGUpO1xuICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gX2NvbnN0cnVjdC5hcHBseShudWxsLCBhcmd1bWVudHMpO1xufVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVGdW5jdGlvbihmbikge1xuICByZXR1cm4gRnVuY3Rpb24udG9TdHJpbmcuY2FsbChmbikuaW5kZXhPZihcIltuYXRpdmUgY29kZV1cIikgIT09IC0xO1xufVxuXG5mdW5jdGlvbiBfd3JhcE5hdGl2ZVN1cGVyKENsYXNzKSB7XG4gIHZhciBfY2FjaGUgPSB0eXBlb2YgTWFwID09PSBcImZ1bmN0aW9uXCIgPyBuZXcgTWFwKCkgOiB1bmRlZmluZWQ7XG5cbiAgX3dyYXBOYXRpdmVTdXBlciA9IGZ1bmN0aW9uIF93cmFwTmF0aXZlU3VwZXIoQ2xhc3MpIHtcbiAgICBpZiAoQ2xhc3MgPT09IG51bGwgfHwgIV9pc05hdGl2ZUZ1bmN0aW9uKENsYXNzKSkgcmV0dXJuIENsYXNzO1xuXG4gICAgaWYgKHR5cGVvZiBDbGFzcyAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBfY2FjaGUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGlmIChfY2FjaGUuaGFzKENsYXNzKSkgcmV0dXJuIF9jYWNoZS5nZXQoQ2xhc3MpO1xuXG4gICAgICBfY2FjaGUuc2V0KENsYXNzLCBXcmFwcGVyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBXcmFwcGVyKCkge1xuICAgICAgcmV0dXJuIF9jb25zdHJ1Y3QoQ2xhc3MsIGFyZ3VtZW50cywgX2dldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yKTtcbiAgICB9XG5cbiAgICBXcmFwcGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ2xhc3MucHJvdG90eXBlLCB7XG4gICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICB2YWx1ZTogV3JhcHBlcixcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gX3NldFByb3RvdHlwZU9mKFdyYXBwZXIsIENsYXNzKTtcbiAgfTtcblxuICByZXR1cm4gX3dyYXBOYXRpdmVTdXBlcihDbGFzcyk7XG59XG5cbi8qKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG52YXIgY29tcG9zZVdpdGhEZXZUb29scyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5fX1JFRFVYX0RFVlRPT0xTX0VYVEVOU0lPTl9DT01QT1NFX18gPyB3aW5kb3cuX19SRURVWF9ERVZUT09MU19FWFRFTlNJT05fQ09NUE9TRV9fIDogZnVuY3Rpb24gKCkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdvYmplY3QnKSByZXR1cm4gY29tcG9zZTtcbiAgcmV0dXJuIGNvbXBvc2UuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbn07XG5cbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHBhc3NlZCB2YWx1ZSBpcyBcInBsYWluXCIgb2JqZWN0LCBpLmUuIGFuIG9iamVjdCB3aG9zZVxyXG4gKiBwcm90b3lwZSBpcyB0aGUgcm9vdCBgT2JqZWN0LnByb3RvdHlwZWAuIFRoaXMgaW5jbHVkZXMgb2JqZWN0cyBjcmVhdGVkXHJcbiAqIHVzaW5nIG9iamVjdCBsaXRlcmFscywgYnV0IG5vdCBmb3IgaW5zdGFuY2UgZm9yIGNsYXNzIGluc3RhbmNlcy5cclxuICpcclxuICogQHBhcmFtIHthbnl9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxyXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgYXJndW1lbnQgYXBwZWFycyB0byBiZSBhIHBsYWluIG9iamVjdC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcgfHwgdmFsdWUgPT09IG51bGwpIHJldHVybiBmYWxzZTtcbiAgdmFyIHByb3RvID0gdmFsdWU7XG5cbiAgd2hpbGUgKE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90bykgIT09IG51bGwpIHtcbiAgICBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90byk7XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKSA9PT0gcHJvdG87XG59XG5cbmZ1bmN0aW9uIGdldFRpbWVNZWFzdXJlVXRpbHMobWF4RGVsYXksIGZuTmFtZSkge1xuICB2YXIgZWxhcHNlZCA9IDA7XG4gIHJldHVybiB7XG4gICAgbWVhc3VyZVRpbWU6IGZ1bmN0aW9uIG1lYXN1cmVUaW1lKGZuKSB7XG4gICAgICB2YXIgc3RhcnRlZCA9IERhdGUubm93KCk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBmbigpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdmFyIGZpbmlzaGVkID0gRGF0ZS5ub3coKTtcbiAgICAgICAgZWxhcHNlZCArPSBmaW5pc2hlZCAtIHN0YXJ0ZWQ7XG4gICAgICB9XG4gICAgfSxcbiAgICB3YXJuSWZFeGNlZWRlZDogZnVuY3Rpb24gd2FybklmRXhjZWVkZWQoKSB7XG4gICAgICBpZiAoZWxhcHNlZCA+IG1heERlbGF5KSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihmbk5hbWUgKyBcIiB0b29rIFwiICsgZWxhcHNlZCArIFwibXMsIHdoaWNoIGlzIG1vcmUgdGhhbiB0aGUgd2FybmluZyB0aHJlc2hvbGQgb2YgXCIgKyBtYXhEZWxheSArIFwibXMuIFxcbklmIHlvdXIgc3RhdGUgb3IgYWN0aW9ucyBhcmUgdmVyeSBsYXJnZSwgeW91IG1heSB3YW50IHRvIGRpc2FibGUgdGhlIG1pZGRsZXdhcmUgYXMgaXQgbWlnaHQgY2F1c2UgdG9vIG11Y2ggb2YgYSBzbG93ZG93biBpbiBkZXZlbG9wbWVudCBtb2RlLiBTZWUgaHR0cHM6Ly9yZWR1eC10b29sa2l0LmpzLm9yZy9hcGkvZ2V0RGVmYXVsdE1pZGRsZXdhcmUgZm9yIGluc3RydWN0aW9ucy5cXG5JdCBpcyBkaXNhYmxlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcywgc28geW91IGRvbid0IG5lZWQgdG8gd29ycnkgYWJvdXQgdGhhdC5cIik7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cbnZhciBNaWRkbGV3YXJlQXJyYXkgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9BcnJheSkge1xuICBfaW5oZXJpdHNMb29zZShNaWRkbGV3YXJlQXJyYXksIF9BcnJheSk7XG5cbiAgZnVuY3Rpb24gTWlkZGxld2FyZUFycmF5KCkge1xuICAgIHJldHVybiBfQXJyYXkuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICB9XG5cbiAgdmFyIF9wcm90byA9IE1pZGRsZXdhcmVBcnJheS5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdCgpIHtcbiAgICB2YXIgX0FycmF5JHByb3RvdHlwZSRjb25jO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyciA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFycltfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICByZXR1cm4gX2NvbnN0cnVjdChNaWRkbGV3YXJlQXJyYXksIChfQXJyYXkkcHJvdG90eXBlJGNvbmMgPSBfQXJyYXkucHJvdG90eXBlLmNvbmNhdCkuY2FsbC5hcHBseShfQXJyYXkkcHJvdG90eXBlJGNvbmMsIFt0aGlzXS5jb25jYXQoYXJyKSkpO1xuICB9O1xuXG4gIF9wcm90by5wcmVwZW5kID0gZnVuY3Rpb24gcHJlcGVuZCgpIHtcbiAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyciA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgYXJyW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgfVxuXG4gICAgaWYgKGFyci5sZW5ndGggPT09IDEgJiYgQXJyYXkuaXNBcnJheShhcnJbMF0pKSB7XG4gICAgICByZXR1cm4gX2NvbnN0cnVjdChNaWRkbGV3YXJlQXJyYXksIGFyclswXS5jb25jYXQodGhpcykpO1xuICAgIH1cblxuICAgIHJldHVybiBfY29uc3RydWN0KE1pZGRsZXdhcmVBcnJheSwgYXJyLmNvbmNhdCh0aGlzKSk7XG4gIH07XG5cbiAgcmV0dXJuIE1pZGRsZXdhcmVBcnJheTtcbn0oXG4vKiNfX1BVUkVfXyovXG5fd3JhcE5hdGl2ZVN1cGVyKEFycmF5KSk7XG5cbnZhciBpc1Byb2R1Y3Rpb24gPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nO1xudmFyIHByZWZpeCA9ICdJbnZhcmlhbnQgZmFpbGVkJzsgLy8gVGhyb3cgYW4gZXJyb3IgaWYgdGhlIGNvbmRpdGlvbiBmYWlsc1xuLy8gU3RyaXAgb3V0IGVycm9yIG1lc3NhZ2VzIGZvciBwcm9kdWN0aW9uXG4vLyA+IE5vdCBwcm92aWRpbmcgYW4gaW5saW5lIGRlZmF1bHQgYXJndW1lbnQgZm9yIG1lc3NhZ2UgYXMgdGhlIHJlc3VsdCBpcyBzbWFsbGVyXG5cbmZ1bmN0aW9uIGludmFyaWFudChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgaWYgKGNvbmRpdGlvbikge1xuICAgIHJldHVybjtcbiAgfSAvLyBDb25kaXRpb24gbm90IHBhc3NlZFxuICAvLyBJbiBwcm9kdWN0aW9uIHdlIHN0cmlwIHRoZSBtZXNzYWdlIGJ1dCBzdGlsbCB0aHJvd1xuXG5cbiAgaWYgKGlzUHJvZHVjdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihwcmVmaXgpO1xuICB9IC8vIFdoZW4gbm90IGluIHByb2R1Y3Rpb24gd2UgYWxsb3cgdGhlIG1lc3NhZ2UgdG8gcGFzcyB0aHJvdWdoXG4gIC8vICpUaGlzIGJsb2NrIHdpbGwgYmUgcmVtb3ZlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcypcblxuXG4gIHRocm93IG5ldyBFcnJvcihwcmVmaXggKyBcIjogXCIgKyAobWVzc2FnZSB8fCAnJykpO1xufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnkob2JqLCBzZXJpYWxpemVyLCBpbmRlbnQsIGRlY3ljbGVyKSB7XG4gIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmosIGdldFNlcmlhbGl6ZShzZXJpYWxpemVyLCBkZWN5Y2xlciksIGluZGVudCk7XG59XG5cbmZ1bmN0aW9uIGdldFNlcmlhbGl6ZShzZXJpYWxpemVyLCBkZWN5Y2xlcikge1xuICB2YXIgc3RhY2sgPSBbXSxcbiAgICAgIGtleXMgPSBbXTtcbiAgaWYgKCFkZWN5Y2xlcikgZGVjeWNsZXIgPSBmdW5jdGlvbiBkZWN5Y2xlcihfLCB2YWx1ZSkge1xuICAgIGlmIChzdGFja1swXSA9PT0gdmFsdWUpIHJldHVybiAnW0NpcmN1bGFyIH5dJztcbiAgICByZXR1cm4gJ1tDaXJjdWxhciB+LicgKyBrZXlzLnNsaWNlKDAsIHN0YWNrLmluZGV4T2YodmFsdWUpKS5qb2luKCcuJykgKyAnXSc7XG4gIH07XG4gIHJldHVybiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgIGlmIChzdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICB2YXIgdGhpc1BvcyA9IHN0YWNrLmluZGV4T2YodGhpcyk7XG4gICAgICB+dGhpc1BvcyA/IHN0YWNrLnNwbGljZSh0aGlzUG9zICsgMSkgOiBzdGFjay5wdXNoKHRoaXMpO1xuICAgICAgfnRoaXNQb3MgPyBrZXlzLnNwbGljZSh0aGlzUG9zLCBJbmZpbml0eSwga2V5KSA6IGtleXMucHVzaChrZXkpO1xuICAgICAgaWYgKH5zdGFjay5pbmRleE9mKHZhbHVlKSkgdmFsdWUgPSBkZWN5Y2xlci5jYWxsKHRoaXMsIGtleSwgdmFsdWUpO1xuICAgIH0gZWxzZSBzdGFjay5wdXNoKHZhbHVlKTtcblxuICAgIHJldHVybiBzZXJpYWxpemVyID09IG51bGwgPyB2YWx1ZSA6IHNlcmlhbGl6ZXIuY2FsbCh0aGlzLCBrZXksIHZhbHVlKTtcbiAgfTtcbn1cbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBgaXNJbW11dGFibGVgIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG5cbmZ1bmN0aW9uIGlzSW1tdXRhYmxlRGVmYXVsdCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB2YWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnO1xufVxuZnVuY3Rpb24gdHJhY2tGb3JNdXRhdGlvbnMoaXNJbW11dGFibGUsIGlnbm9yZVBhdGhzLCBvYmopIHtcbiAgdmFyIHRyYWNrZWRQcm9wZXJ0aWVzID0gdHJhY2tQcm9wZXJ0aWVzKGlzSW1tdXRhYmxlLCBpZ25vcmVQYXRocywgb2JqKTtcbiAgcmV0dXJuIHtcbiAgICBkZXRlY3RNdXRhdGlvbnM6IGZ1bmN0aW9uIGRldGVjdE11dGF0aW9ucygpIHtcbiAgICAgIHJldHVybiBfZGV0ZWN0TXV0YXRpb25zKGlzSW1tdXRhYmxlLCBpZ25vcmVQYXRocywgdHJhY2tlZFByb3BlcnRpZXMsIG9iaik7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiB0cmFja1Byb3BlcnRpZXMoaXNJbW11dGFibGUsIGlnbm9yZVBhdGhzLCBvYmosIHBhdGgpIHtcbiAgaWYgKGlnbm9yZVBhdGhzID09PSB2b2lkIDApIHtcbiAgICBpZ25vcmVQYXRocyA9IFtdO1xuICB9XG5cbiAgaWYgKHBhdGggPT09IHZvaWQgMCkge1xuICAgIHBhdGggPSBbXTtcbiAgfVxuXG4gIHZhciB0cmFja2VkID0ge1xuICAgIHZhbHVlOiBvYmpcbiAgfTtcblxuICBpZiAoIWlzSW1tdXRhYmxlKG9iaikpIHtcbiAgICB0cmFja2VkLmNoaWxkcmVuID0ge307XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICB2YXIgY2hpbGRQYXRoID0gcGF0aC5jb25jYXQoa2V5KTtcblxuICAgICAgaWYgKGlnbm9yZVBhdGhzLmxlbmd0aCAmJiBpZ25vcmVQYXRocy5pbmRleE9mKGNoaWxkUGF0aC5qb2luKCcuJykpICE9PSAtMSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgdHJhY2tlZC5jaGlsZHJlbltrZXldID0gdHJhY2tQcm9wZXJ0aWVzKGlzSW1tdXRhYmxlLCBpZ25vcmVQYXRocywgb2JqW2tleV0sIGNoaWxkUGF0aCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRyYWNrZWQ7XG59XG5cbmZ1bmN0aW9uIF9kZXRlY3RNdXRhdGlvbnMoaXNJbW11dGFibGUsIGlnbm9yZVBhdGhzLCB0cmFja2VkUHJvcGVydHksIG9iaiwgc2FtZVBhcmVudFJlZiwgcGF0aCkge1xuICBpZiAoaWdub3JlUGF0aHMgPT09IHZvaWQgMCkge1xuICAgIGlnbm9yZVBhdGhzID0gW107XG4gIH1cblxuICBpZiAoc2FtZVBhcmVudFJlZiA9PT0gdm9pZCAwKSB7XG4gICAgc2FtZVBhcmVudFJlZiA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKHBhdGggPT09IHZvaWQgMCkge1xuICAgIHBhdGggPSBbXTtcbiAgfVxuXG4gIHZhciBwcmV2T2JqID0gdHJhY2tlZFByb3BlcnR5ID8gdHJhY2tlZFByb3BlcnR5LnZhbHVlIDogdW5kZWZpbmVkO1xuICB2YXIgc2FtZVJlZiA9IHByZXZPYmogPT09IG9iajtcblxuICBpZiAoc2FtZVBhcmVudFJlZiAmJiAhc2FtZVJlZiAmJiAhTnVtYmVyLmlzTmFOKG9iaikpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd2FzTXV0YXRlZDogdHJ1ZSxcbiAgICAgIHBhdGg6IHBhdGhcbiAgICB9O1xuICB9XG5cbiAgaWYgKGlzSW1tdXRhYmxlKHByZXZPYmopIHx8IGlzSW1tdXRhYmxlKG9iaikpIHtcbiAgICByZXR1cm4ge1xuICAgICAgd2FzTXV0YXRlZDogZmFsc2VcbiAgICB9O1xuICB9IC8vIEdhdGhlciBhbGwga2V5cyBmcm9tIHByZXYgKHRyYWNrZWQpIGFuZCBhZnRlciBvYmpzXG5cblxuICB2YXIga2V5c1RvRGV0ZWN0ID0ge307XG4gIE9iamVjdC5rZXlzKHRyYWNrZWRQcm9wZXJ0eS5jaGlsZHJlbikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAga2V5c1RvRGV0ZWN0W2tleV0gPSB0cnVlO1xuICB9KTtcbiAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBrZXlzVG9EZXRlY3Rba2V5XSA9IHRydWU7XG4gIH0pO1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGtleXNUb0RldGVjdCk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgdmFyIGNoaWxkUGF0aCA9IHBhdGguY29uY2F0KGtleSk7XG5cbiAgICBpZiAoaWdub3JlUGF0aHMubGVuZ3RoICYmIGlnbm9yZVBhdGhzLmluZGV4T2YoY2hpbGRQYXRoLmpvaW4oJy4nKSkgIT09IC0xKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICB2YXIgcmVzdWx0ID0gX2RldGVjdE11dGF0aW9ucyhpc0ltbXV0YWJsZSwgaWdub3JlUGF0aHMsIHRyYWNrZWRQcm9wZXJ0eS5jaGlsZHJlbltrZXldLCBvYmpba2V5XSwgc2FtZVJlZiwgY2hpbGRQYXRoKTtcblxuICAgIGlmIChyZXN1bHQud2FzTXV0YXRlZCkge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHdhc011dGF0ZWQ6IGZhbHNlXG4gIH07XG59XG4vKipcclxuICogQ3JlYXRlcyBhIG1pZGRsZXdhcmUgdGhhdCBjaGVja3Mgd2hldGhlciBhbnkgc3RhdGUgd2FzIG11dGF0ZWQgaW4gYmV0d2VlblxyXG4gKiBkaXNwYXRjaGVzIG9yIGR1cmluZyBhIGRpc3BhdGNoLiBJZiBhbnkgbXV0YXRpb25zIGFyZSBkZXRlY3RlZCwgYW4gZXJyb3IgaXNcclxuICogdGhyb3duLlxyXG4gKlxyXG4gKiBAcGFyYW0gb3B0aW9ucyBNaWRkbGV3YXJlIG9wdGlvbnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cblxuZnVuY3Rpb24gY3JlYXRlSW1tdXRhYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAobmV4dCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICAgIHJldHVybiBuZXh0KGFjdGlvbik7XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH07XG4gIH1cblxuICB2YXIgX29wdGlvbnMgPSBvcHRpb25zLFxuICAgICAgX29wdGlvbnMkaXNJbW11dGFibGUgPSBfb3B0aW9ucy5pc0ltbXV0YWJsZSxcbiAgICAgIGlzSW1tdXRhYmxlID0gX29wdGlvbnMkaXNJbW11dGFibGUgPT09IHZvaWQgMCA/IGlzSW1tdXRhYmxlRGVmYXVsdCA6IF9vcHRpb25zJGlzSW1tdXRhYmxlLFxuICAgICAgaWdub3JlZFBhdGhzID0gX29wdGlvbnMuaWdub3JlZFBhdGhzLFxuICAgICAgX29wdGlvbnMkd2FybkFmdGVyID0gX29wdGlvbnMud2FybkFmdGVyLFxuICAgICAgd2FybkFmdGVyID0gX29wdGlvbnMkd2FybkFmdGVyID09PSB2b2lkIDAgPyAzMiA6IF9vcHRpb25zJHdhcm5BZnRlcixcbiAgICAgIGlnbm9yZSA9IF9vcHRpb25zLmlnbm9yZTsgLy8gQWxpYXMgaWdub3JlLT5pZ25vcmVkUGF0aHMsIGJ1dCBwcmVmZXIgaWdub3JlZFBhdGhzIGlmIHByZXNlbnRcblxuICBpZ25vcmVkUGF0aHMgPSBpZ25vcmVkUGF0aHMgfHwgaWdub3JlO1xuICB2YXIgdHJhY2sgPSB0cmFja0Zvck11dGF0aW9ucy5iaW5kKG51bGwsIGlzSW1tdXRhYmxlLCBpZ25vcmVkUGF0aHMpO1xuICByZXR1cm4gZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgZ2V0U3RhdGUgPSBfcmVmLmdldFN0YXRlO1xuICAgIHZhciBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgdmFyIHRyYWNrZXIgPSB0cmFjayhzdGF0ZSk7XG4gICAgdmFyIHJlc3VsdDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5leHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHZhciBtZWFzdXJlVXRpbHMgPSBnZXRUaW1lTWVhc3VyZVV0aWxzKHdhcm5BZnRlciwgJ0ltbXV0YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZScpO1xuICAgICAgICBtZWFzdXJlVXRpbHMubWVhc3VyZVRpbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgICAgICAgICByZXN1bHQgPSB0cmFja2VyLmRldGVjdE11dGF0aW9ucygpOyAvLyBUcmFjayBiZWZvcmUgcG90ZW50aWFsbHkgbm90IG1lZXRpbmcgdGhlIGludmFyaWFudFxuXG4gICAgICAgICAgdHJhY2tlciA9IHRyYWNrKHN0YXRlKTtcbiAgICAgICAgICAhIXJlc3VsdC53YXNNdXRhdGVkID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gaW52YXJpYW50KGZhbHNlLCBcIkEgc3RhdGUgbXV0YXRpb24gd2FzIGRldGVjdGVkIGJldHdlZW4gZGlzcGF0Y2hlcywgaW4gdGhlIHBhdGggJ1wiICsgKHJlc3VsdC5wYXRoIHx8IFtdKS5qb2luKCcuJykgKyBcIicuICBUaGlzIG1heSBjYXVzZSBpbmNvcnJlY3QgYmVoYXZpb3IuIChodHRwczovL3JlZHV4LmpzLm9yZy90cm91Ymxlc2hvb3RpbmcjbmV2ZXItbXV0YXRlLXJlZHVjZXItYXJndW1lbnRzKVwiKSA6IGludmFyaWFudChmYWxzZSkgOiB2b2lkIDA7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgZGlzcGF0Y2hlZEFjdGlvbiA9IG5leHQoYWN0aW9uKTtcbiAgICAgICAgbWVhc3VyZVV0aWxzLm1lYXN1cmVUaW1lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzdGF0ZSA9IGdldFN0YXRlKCk7XG4gICAgICAgICAgcmVzdWx0ID0gdHJhY2tlci5kZXRlY3RNdXRhdGlvbnMoKTsgLy8gVHJhY2sgYmVmb3JlIHBvdGVudGlhbGx5IG5vdCBtZWV0aW5nIHRoZSBpbnZhcmlhbnRcblxuICAgICAgICAgIHRyYWNrZXIgPSB0cmFjayhzdGF0ZSk7XG4gICAgICAgICAgcmVzdWx0Lndhc011dGF0ZWQgJiYgKCEhcmVzdWx0Lndhc011dGF0ZWQgPyBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyBpbnZhcmlhbnQoZmFsc2UsIFwiQSBzdGF0ZSBtdXRhdGlvbiB3YXMgZGV0ZWN0ZWQgaW5zaWRlIGEgZGlzcGF0Y2gsIGluIHRoZSBwYXRoOiBcIiArIChyZXN1bHQucGF0aCB8fCBbXSkuam9pbignLicpICsgXCIuIFRha2UgYSBsb29rIGF0IHRoZSByZWR1Y2VyKHMpIGhhbmRsaW5nIHRoZSBhY3Rpb24gXCIgKyBzdHJpbmdpZnkoYWN0aW9uKSArIFwiLiAoaHR0cHM6Ly9yZWR1eC5qcy5vcmcvdHJvdWJsZXNob290aW5nI25ldmVyLW11dGF0ZS1yZWR1Y2VyLWFyZ3VtZW50cylcIikgOiBpbnZhcmlhbnQoZmFsc2UpIDogdm9pZCAwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIG1lYXN1cmVVdGlscy53YXJuSWZFeGNlZWRlZCgpO1xuICAgICAgICByZXR1cm4gZGlzcGF0Y2hlZEFjdGlvbjtcbiAgICAgIH07XG4gICAgfTtcbiAgfTtcbn1cblxuLyoqXHJcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcGFzc2VkIHZhbHVlIGlzIFwicGxhaW5cIiwgaS5lLiBhIHZhbHVlIHRoYXQgaXMgZWl0aGVyXHJcbiAqIGRpcmVjdGx5IEpTT04tc2VyaWFsaXphYmxlIChib29sZWFuLCBudW1iZXIsIHN0cmluZywgYXJyYXksIHBsYWluIG9iamVjdClcclxuICogb3IgYHVuZGVmaW5lZGAuXHJcbiAqXHJcbiAqIEBwYXJhbSB2YWwgVGhlIHZhbHVlIHRvIGNoZWNrLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG5mdW5jdGlvbiBpc1BsYWluKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCcgfHwgdmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2YWwgPT09ICdib29sZWFuJyB8fCB0eXBlb2YgdmFsID09PSAnbnVtYmVyJyB8fCBBcnJheS5pc0FycmF5KHZhbCkgfHwgaXNQbGFpbk9iamVjdCh2YWwpO1xufVxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cbmZ1bmN0aW9uIGZpbmROb25TZXJpYWxpemFibGVWYWx1ZSh2YWx1ZSwgcGF0aCwgaXNTZXJpYWxpemFibGUsIGdldEVudHJpZXMsIGlnbm9yZWRQYXRocykge1xuICBpZiAocGF0aCA9PT0gdm9pZCAwKSB7XG4gICAgcGF0aCA9IFtdO1xuICB9XG5cbiAgaWYgKGlzU2VyaWFsaXphYmxlID09PSB2b2lkIDApIHtcbiAgICBpc1NlcmlhbGl6YWJsZSA9IGlzUGxhaW47XG4gIH1cblxuICBpZiAoaWdub3JlZFBhdGhzID09PSB2b2lkIDApIHtcbiAgICBpZ25vcmVkUGF0aHMgPSBbXTtcbiAgfVxuXG4gIHZhciBmb3VuZE5lc3RlZFNlcmlhbGl6YWJsZTtcblxuICBpZiAoIWlzU2VyaWFsaXphYmxlKHZhbHVlKSkge1xuICAgIHJldHVybiB7XG4gICAgICBrZXlQYXRoOiBwYXRoLmpvaW4oJy4nKSB8fCAnPHJvb3Q+JyxcbiAgICAgIHZhbHVlOiB2YWx1ZVxuICAgIH07XG4gIH1cblxuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JyB8fCB2YWx1ZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBlbnRyaWVzID0gZ2V0RW50cmllcyAhPSBudWxsID8gZ2V0RW50cmllcyh2YWx1ZSkgOiBPYmplY3QuZW50cmllcyh2YWx1ZSk7XG4gIHZhciBoYXNJZ25vcmVkUGF0aHMgPSBpZ25vcmVkUGF0aHMubGVuZ3RoID4gMDtcblxuICBmb3IgKHZhciBfaXRlcmF0b3IgPSBlbnRyaWVzLCBfaXNBcnJheSA9IEFycmF5LmlzQXJyYXkoX2l0ZXJhdG9yKSwgX2kgPSAwLCBfaXRlcmF0b3IgPSBfaXNBcnJheSA/IF9pdGVyYXRvciA6IF9pdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdKCk7Oykge1xuICAgIHZhciBfcmVmO1xuXG4gICAgaWYgKF9pc0FycmF5KSB7XG4gICAgICBpZiAoX2kgPj0gX2l0ZXJhdG9yLmxlbmd0aCkgYnJlYWs7XG4gICAgICBfcmVmID0gX2l0ZXJhdG9yW19pKytdO1xuICAgIH0gZWxzZSB7XG4gICAgICBfaSA9IF9pdGVyYXRvci5uZXh0KCk7XG4gICAgICBpZiAoX2kuZG9uZSkgYnJlYWs7XG4gICAgICBfcmVmID0gX2kudmFsdWU7XG4gICAgfVxuXG4gICAgdmFyIF9yZWYyID0gX3JlZixcbiAgICAgICAgcHJvcGVydHkgPSBfcmVmMlswXSxcbiAgICAgICAgbmVzdGVkVmFsdWUgPSBfcmVmMlsxXTtcbiAgICB2YXIgbmVzdGVkUGF0aCA9IHBhdGguY29uY2F0KHByb3BlcnR5KTtcblxuICAgIGlmIChoYXNJZ25vcmVkUGF0aHMgJiYgaWdub3JlZFBhdGhzLmluZGV4T2YobmVzdGVkUGF0aC5qb2luKCcuJykpID49IDApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGlmICghaXNTZXJpYWxpemFibGUobmVzdGVkVmFsdWUpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBrZXlQYXRoOiBuZXN0ZWRQYXRoLmpvaW4oJy4nKSxcbiAgICAgICAgdmFsdWU6IG5lc3RlZFZhbHVlXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgbmVzdGVkVmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3VuZE5lc3RlZFNlcmlhbGl6YWJsZSA9IGZpbmROb25TZXJpYWxpemFibGVWYWx1ZShuZXN0ZWRWYWx1ZSwgbmVzdGVkUGF0aCwgaXNTZXJpYWxpemFibGUsIGdldEVudHJpZXMsIGlnbm9yZWRQYXRocyk7XG5cbiAgICAgIGlmIChmb3VuZE5lc3RlZFNlcmlhbGl6YWJsZSkge1xuICAgICAgICByZXR1cm4gZm91bmROZXN0ZWRTZXJpYWxpemFibGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXHJcbiAqIENyZWF0ZXMgYSBtaWRkbGV3YXJlIHRoYXQsIGFmdGVyIGV2ZXJ5IHN0YXRlIGNoYW5nZSwgY2hlY2tzIGlmIHRoZSBuZXdcclxuICogc3RhdGUgaXMgc2VyaWFsaXphYmxlLiBJZiBhIG5vbi1zZXJpYWxpemFibGUgdmFsdWUgaXMgZm91bmQgd2l0aGluIHRoZVxyXG4gKiBzdGF0ZSwgYW4gZXJyb3IgaXMgcHJpbnRlZCB0byB0aGUgY29uc29sZS5cclxuICpcclxuICogQHBhcmFtIG9wdGlvbnMgTWlkZGxld2FyZSBvcHRpb25zLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVTZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUob3B0aW9ucykge1xuICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7XG4gICAgb3B0aW9ucyA9IHt9O1xuICB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIG5leHQoYWN0aW9uKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgfTtcbiAgfVxuXG4gIHZhciBfb3B0aW9ucyA9IG9wdGlvbnMsXG4gICAgICBfb3B0aW9ucyRpc1NlcmlhbGl6YWIgPSBfb3B0aW9ucy5pc1NlcmlhbGl6YWJsZSxcbiAgICAgIGlzU2VyaWFsaXphYmxlID0gX29wdGlvbnMkaXNTZXJpYWxpemFiID09PSB2b2lkIDAgPyBpc1BsYWluIDogX29wdGlvbnMkaXNTZXJpYWxpemFiLFxuICAgICAgZ2V0RW50cmllcyA9IF9vcHRpb25zLmdldEVudHJpZXMsXG4gICAgICBfb3B0aW9ucyRpZ25vcmVkQWN0aW8gPSBfb3B0aW9ucy5pZ25vcmVkQWN0aW9ucyxcbiAgICAgIGlnbm9yZWRBY3Rpb25zID0gX29wdGlvbnMkaWdub3JlZEFjdGlvID09PSB2b2lkIDAgPyBbXSA6IF9vcHRpb25zJGlnbm9yZWRBY3RpbyxcbiAgICAgIF9vcHRpb25zJGlnbm9yZWRBY3RpbzIgPSBfb3B0aW9ucy5pZ25vcmVkQWN0aW9uUGF0aHMsXG4gICAgICBpZ25vcmVkQWN0aW9uUGF0aHMgPSBfb3B0aW9ucyRpZ25vcmVkQWN0aW8yID09PSB2b2lkIDAgPyBbJ21ldGEuYXJnJ10gOiBfb3B0aW9ucyRpZ25vcmVkQWN0aW8yLFxuICAgICAgX29wdGlvbnMkaWdub3JlZFBhdGhzID0gX29wdGlvbnMuaWdub3JlZFBhdGhzLFxuICAgICAgaWdub3JlZFBhdGhzID0gX29wdGlvbnMkaWdub3JlZFBhdGhzID09PSB2b2lkIDAgPyBbXSA6IF9vcHRpb25zJGlnbm9yZWRQYXRocyxcbiAgICAgIF9vcHRpb25zJHdhcm5BZnRlciA9IF9vcHRpb25zLndhcm5BZnRlcixcbiAgICAgIHdhcm5BZnRlciA9IF9vcHRpb25zJHdhcm5BZnRlciA9PT0gdm9pZCAwID8gMzIgOiBfb3B0aW9ucyR3YXJuQWZ0ZXI7XG4gIHJldHVybiBmdW5jdGlvbiAoc3RvcmVBUEkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKG5leHQpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIGlmIChpZ25vcmVkQWN0aW9ucy5sZW5ndGggJiYgaWdub3JlZEFjdGlvbnMuaW5kZXhPZihhY3Rpb24udHlwZSkgIT09IC0xKSB7XG4gICAgICAgICAgcmV0dXJuIG5leHQoYWN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtZWFzdXJlVXRpbHMgPSBnZXRUaW1lTWVhc3VyZVV0aWxzKHdhcm5BZnRlciwgJ1NlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZScpO1xuICAgICAgICBtZWFzdXJlVXRpbHMubWVhc3VyZVRpbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBmb3VuZEFjdGlvbk5vblNlcmlhbGl6YWJsZVZhbHVlID0gZmluZE5vblNlcmlhbGl6YWJsZVZhbHVlKGFjdGlvbiwgW10sIGlzU2VyaWFsaXphYmxlLCBnZXRFbnRyaWVzLCBpZ25vcmVkQWN0aW9uUGF0aHMpO1xuXG4gICAgICAgICAgaWYgKGZvdW5kQWN0aW9uTm9uU2VyaWFsaXphYmxlVmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBrZXlQYXRoID0gZm91bmRBY3Rpb25Ob25TZXJpYWxpemFibGVWYWx1ZS5rZXlQYXRoLFxuICAgICAgICAgICAgICAgIHZhbHVlID0gZm91bmRBY3Rpb25Ob25TZXJpYWxpemFibGVWYWx1ZS52YWx1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBIG5vbi1zZXJpYWxpemFibGUgdmFsdWUgd2FzIGRldGVjdGVkIGluIGFuIGFjdGlvbiwgaW4gdGhlIHBhdGg6IGBcIiArIGtleVBhdGggKyBcImAuIFZhbHVlOlwiLCB2YWx1ZSwgJ1xcblRha2UgYSBsb29rIGF0IHRoZSBsb2dpYyB0aGF0IGRpc3BhdGNoZWQgdGhpcyBhY3Rpb246ICcsIGFjdGlvbiwgJ1xcbihTZWUgaHR0cHM6Ly9yZWR1eC5qcy5vcmcvZmFxL2FjdGlvbnMjd2h5LXNob3VsZC10eXBlLWJlLWEtc3RyaW5nLW9yLWF0LWxlYXN0LXNlcmlhbGl6YWJsZS13aHktc2hvdWxkLW15LWFjdGlvbi10eXBlcy1iZS1jb25zdGFudHMpJywgJ1xcbihUbyBhbGxvdyBub24tc2VyaWFsaXphYmxlIHZhbHVlcyBzZWU6IGh0dHBzOi8vcmVkdXgtdG9vbGtpdC5qcy5vcmcvdXNhZ2UvdXNhZ2UtZ3VpZGUjd29ya2luZy13aXRoLW5vbi1zZXJpYWxpemFibGUtZGF0YSknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgcmVzdWx0ID0gbmV4dChhY3Rpb24pO1xuICAgICAgICBtZWFzdXJlVXRpbHMubWVhc3VyZVRpbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBzdGF0ZSA9IHN0b3JlQVBJLmdldFN0YXRlKCk7XG4gICAgICAgICAgdmFyIGZvdW5kU3RhdGVOb25TZXJpYWxpemFibGVWYWx1ZSA9IGZpbmROb25TZXJpYWxpemFibGVWYWx1ZShzdGF0ZSwgW10sIGlzU2VyaWFsaXphYmxlLCBnZXRFbnRyaWVzLCBpZ25vcmVkUGF0aHMpO1xuXG4gICAgICAgICAgaWYgKGZvdW5kU3RhdGVOb25TZXJpYWxpemFibGVWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIGtleVBhdGggPSBmb3VuZFN0YXRlTm9uU2VyaWFsaXphYmxlVmFsdWUua2V5UGF0aCxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGZvdW5kU3RhdGVOb25TZXJpYWxpemFibGVWYWx1ZS52YWx1ZTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJBIG5vbi1zZXJpYWxpemFibGUgdmFsdWUgd2FzIGRldGVjdGVkIGluIHRoZSBzdGF0ZSwgaW4gdGhlIHBhdGg6IGBcIiArIGtleVBhdGggKyBcImAuIFZhbHVlOlwiLCB2YWx1ZSwgXCJcXG5UYWtlIGEgbG9vayBhdCB0aGUgcmVkdWNlcihzKSBoYW5kbGluZyB0aGlzIGFjdGlvbiB0eXBlOiBcIiArIGFjdGlvbi50eXBlICsgXCIuXFxuKFNlZSBodHRwczovL3JlZHV4LmpzLm9yZy9mYXEvb3JnYW5pemluZy1zdGF0ZSNjYW4taS1wdXQtZnVuY3Rpb25zLXByb21pc2VzLW9yLW90aGVyLW5vbi1zZXJpYWxpemFibGUtaXRlbXMtaW4tbXktc3RvcmUtc3RhdGUpXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG1lYXN1cmVVdGlscy53YXJuSWZFeGNlZWRlZCgpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfTtcbiAgICB9O1xuICB9O1xufVxuXG5mdW5jdGlvbiBpc0Jvb2xlYW4oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdib29sZWFuJztcbn1cblxuZnVuY3Rpb24gY3VycnlHZXREZWZhdWx0TWlkZGxld2FyZSgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGN1cnJpZWRHZXREZWZhdWx0TWlkZGxld2FyZShvcHRpb25zKSB7XG4gICAgcmV0dXJuIGdldERlZmF1bHRNaWRkbGV3YXJlKG9wdGlvbnMpO1xuICB9O1xufVxuLyoqXHJcbiAqIFJldHVybnMgYW55IGFycmF5IGNvbnRhaW5pbmcgdGhlIGRlZmF1bHQgbWlkZGxld2FyZSBpbnN0YWxsZWQgYnlcclxuICogYGNvbmZpZ3VyZVN0b3JlKClgLiBVc2VmdWwgaWYgeW91IHdhbnQgdG8gY29uZmlndXJlIHlvdXIgc3RvcmUgd2l0aCBhIGN1c3RvbVxyXG4gKiBgbWlkZGxld2FyZWAgYXJyYXkgYnV0IHN0aWxsIGtlZXAgdGhlIGRlZmF1bHQgc2V0LlxyXG4gKlxyXG4gKiBAcmV0dXJuIFRoZSBkZWZhdWx0IG1pZGRsZXdhcmUgdXNlZCBieSBgY29uZmlndXJlU3RvcmUoKWAuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cbmZ1bmN0aW9uIGdldERlZmF1bHRNaWRkbGV3YXJlKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkge1xuICAgIG9wdGlvbnMgPSB7fTtcbiAgfVxuXG4gIHZhciBfb3B0aW9ucyA9IG9wdGlvbnMsXG4gICAgICBfb3B0aW9ucyR0aHVuayA9IF9vcHRpb25zLnRodW5rLFxuICAgICAgdGh1bmsgPSBfb3B0aW9ucyR0aHVuayA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJHRodW5rLFxuICAgICAgX29wdGlvbnMkaW1tdXRhYmxlQ2hlID0gX29wdGlvbnMuaW1tdXRhYmxlQ2hlY2ssXG4gICAgICBpbW11dGFibGVDaGVjayA9IF9vcHRpb25zJGltbXV0YWJsZUNoZSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9vcHRpb25zJGltbXV0YWJsZUNoZSxcbiAgICAgIF9vcHRpb25zJHNlcmlhbGl6YWJsZSA9IF9vcHRpb25zLnNlcmlhbGl6YWJsZUNoZWNrLFxuICAgICAgc2VyaWFsaXphYmxlQ2hlY2sgPSBfb3B0aW9ucyRzZXJpYWxpemFibGUgPT09IHZvaWQgMCA/IHRydWUgOiBfb3B0aW9ucyRzZXJpYWxpemFibGU7XG4gIHZhciBtaWRkbGV3YXJlQXJyYXkgPSBuZXcgTWlkZGxld2FyZUFycmF5KCk7XG5cbiAgaWYgKHRodW5rKSB7XG4gICAgaWYgKGlzQm9vbGVhbih0aHVuaykpIHtcbiAgICAgIG1pZGRsZXdhcmVBcnJheS5wdXNoKHRodW5rTWlkZGxld2FyZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1pZGRsZXdhcmVBcnJheS5wdXNoKHRodW5rTWlkZGxld2FyZS53aXRoRXh0cmFBcmd1bWVudCh0aHVuay5leHRyYUFyZ3VtZW50KSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoaW1tdXRhYmxlQ2hlY2spIHtcbiAgICAgIC8qIFBST0RfU1RBUlRfUkVNT1ZFX1VNRCAqL1xuICAgICAgdmFyIGltbXV0YWJsZU9wdGlvbnMgPSB7fTtcblxuICAgICAgaWYgKCFpc0Jvb2xlYW4oaW1tdXRhYmxlQ2hlY2spKSB7XG4gICAgICAgIGltbXV0YWJsZU9wdGlvbnMgPSBpbW11dGFibGVDaGVjaztcbiAgICAgIH1cblxuICAgICAgbWlkZGxld2FyZUFycmF5LnVuc2hpZnQoY3JlYXRlSW1tdXRhYmxlU3RhdGVJbnZhcmlhbnRNaWRkbGV3YXJlKGltbXV0YWJsZU9wdGlvbnMpKTtcbiAgICAgIC8qIFBST0RfU1RPUF9SRU1PVkVfVU1EICovXG4gICAgfVxuXG4gICAgaWYgKHNlcmlhbGl6YWJsZUNoZWNrKSB7XG4gICAgICB2YXIgc2VyaWFsaXphYmxlT3B0aW9ucyA9IHt9O1xuXG4gICAgICBpZiAoIWlzQm9vbGVhbihzZXJpYWxpemFibGVDaGVjaykpIHtcbiAgICAgICAgc2VyaWFsaXphYmxlT3B0aW9ucyA9IHNlcmlhbGl6YWJsZUNoZWNrO1xuICAgICAgfVxuXG4gICAgICBtaWRkbGV3YXJlQXJyYXkucHVzaChjcmVhdGVTZXJpYWxpemFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUoc2VyaWFsaXphYmxlT3B0aW9ucykpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtaWRkbGV3YXJlQXJyYXk7XG59XG5cbnZhciBJU19QUk9EVUNUSU9OID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJztcbi8qKlxyXG4gKiBBIGZyaWVuZGx5IGFic3RyYWN0aW9uIG92ZXIgdGhlIHN0YW5kYXJkIFJlZHV4IGBjcmVhdGVTdG9yZSgpYCBmdW5jdGlvbi5cclxuICpcclxuICogQHBhcmFtIGNvbmZpZyBUaGUgc3RvcmUgY29uZmlndXJhdGlvbi5cclxuICogQHJldHVybnMgQSBjb25maWd1cmVkIFJlZHV4IHN0b3JlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG5mdW5jdGlvbiBjb25maWd1cmVTdG9yZShvcHRpb25zKSB7XG4gIHZhciBjdXJyaWVkR2V0RGVmYXVsdE1pZGRsZXdhcmUgPSBjdXJyeUdldERlZmF1bHRNaWRkbGV3YXJlKCk7XG5cbiAgdmFyIF9yZWYgPSBvcHRpb25zIHx8IHt9LFxuICAgICAgX3JlZiRyZWR1Y2VyID0gX3JlZi5yZWR1Y2VyLFxuICAgICAgcmVkdWNlciA9IF9yZWYkcmVkdWNlciA9PT0gdm9pZCAwID8gdW5kZWZpbmVkIDogX3JlZiRyZWR1Y2VyLFxuICAgICAgX3JlZiRtaWRkbGV3YXJlID0gX3JlZi5taWRkbGV3YXJlLFxuICAgICAgbWlkZGxld2FyZSA9IF9yZWYkbWlkZGxld2FyZSA9PT0gdm9pZCAwID8gY3VycmllZEdldERlZmF1bHRNaWRkbGV3YXJlKCkgOiBfcmVmJG1pZGRsZXdhcmUsXG4gICAgICBfcmVmJGRldlRvb2xzID0gX3JlZi5kZXZUb29scyxcbiAgICAgIGRldlRvb2xzID0gX3JlZiRkZXZUb29scyA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWYkZGV2VG9vbHMsXG4gICAgICBfcmVmJHByZWxvYWRlZFN0YXRlID0gX3JlZi5wcmVsb2FkZWRTdGF0ZSxcbiAgICAgIHByZWxvYWRlZFN0YXRlID0gX3JlZiRwcmVsb2FkZWRTdGF0ZSA9PT0gdm9pZCAwID8gdW5kZWZpbmVkIDogX3JlZiRwcmVsb2FkZWRTdGF0ZSxcbiAgICAgIF9yZWYkZW5oYW5jZXJzID0gX3JlZi5lbmhhbmNlcnMsXG4gICAgICBlbmhhbmNlcnMgPSBfcmVmJGVuaGFuY2VycyA9PT0gdm9pZCAwID8gdW5kZWZpbmVkIDogX3JlZiRlbmhhbmNlcnM7XG5cbiAgdmFyIHJvb3RSZWR1Y2VyO1xuXG4gIGlmICh0eXBlb2YgcmVkdWNlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJvb3RSZWR1Y2VyID0gcmVkdWNlcjtcbiAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHJlZHVjZXIpKSB7XG4gICAgcm9vdFJlZHVjZXIgPSBjb21iaW5lUmVkdWNlcnMocmVkdWNlcik7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdcInJlZHVjZXJcIiBpcyBhIHJlcXVpcmVkIGFyZ3VtZW50LCBhbmQgbXVzdCBiZSBhIGZ1bmN0aW9uIG9yIGFuIG9iamVjdCBvZiBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIGNvbWJpbmVSZWR1Y2VycycpO1xuICB9XG5cbiAgdmFyIG1pZGRsZXdhcmVFbmhhbmNlciA9IGFwcGx5TWlkZGxld2FyZS5hcHBseSh2b2lkIDAsIHR5cGVvZiBtaWRkbGV3YXJlID09PSAnZnVuY3Rpb24nID8gbWlkZGxld2FyZShjdXJyaWVkR2V0RGVmYXVsdE1pZGRsZXdhcmUpIDogbWlkZGxld2FyZSk7XG4gIHZhciBmaW5hbENvbXBvc2UgPSBjb21wb3NlO1xuXG4gIGlmIChkZXZUb29scykge1xuICAgIGZpbmFsQ29tcG9zZSA9IGNvbXBvc2VXaXRoRGV2VG9vbHMoX2V4dGVuZHMoe1xuICAgICAgLy8gRW5hYmxlIGNhcHR1cmUgb2Ygc3RhY2sgdHJhY2VzIGZvciBkaXNwYXRjaGVkIFJlZHV4IGFjdGlvbnNcbiAgICAgIHRyYWNlOiAhSVNfUFJPRFVDVElPTlxuICAgIH0sIHR5cGVvZiBkZXZUb29scyA9PT0gJ29iamVjdCcgJiYgZGV2VG9vbHMpKTtcbiAgfVxuXG4gIHZhciBzdG9yZUVuaGFuY2VycyA9IFttaWRkbGV3YXJlRW5oYW5jZXJdO1xuXG4gIGlmIChBcnJheS5pc0FycmF5KGVuaGFuY2VycykpIHtcbiAgICBzdG9yZUVuaGFuY2VycyA9IFttaWRkbGV3YXJlRW5oYW5jZXJdLmNvbmNhdChlbmhhbmNlcnMpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBlbmhhbmNlcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBzdG9yZUVuaGFuY2VycyA9IGVuaGFuY2VycyhzdG9yZUVuaGFuY2Vycyk7XG4gIH1cblxuICB2YXIgY29tcG9zZWRFbmhhbmNlciA9IGZpbmFsQ29tcG9zZS5hcHBseSh2b2lkIDAsIHN0b3JlRW5oYW5jZXJzKTtcbiAgcmV0dXJuIGNyZWF0ZVN0b3JlKHJvb3RSZWR1Y2VyLCBwcmVsb2FkZWRTdGF0ZSwgY29tcG9zZWRFbmhhbmNlcik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUFjdGlvbih0eXBlLCBwcmVwYXJlQWN0aW9uKSB7XG4gIGZ1bmN0aW9uIGFjdGlvbkNyZWF0b3IoKSB7XG4gICAgaWYgKHByZXBhcmVBY3Rpb24pIHtcbiAgICAgIHZhciBwcmVwYXJlZCA9IHByZXBhcmVBY3Rpb24uYXBwbHkodm9pZCAwLCBhcmd1bWVudHMpO1xuXG4gICAgICBpZiAoIXByZXBhcmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigncHJlcGFyZUFjdGlvbiBkaWQgbm90IHJldHVybiBhbiBvYmplY3QnKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIF9leHRlbmRzKHtcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgcGF5bG9hZDogcHJlcGFyZWQucGF5bG9hZFxuICAgICAgfSwgJ21ldGEnIGluIHByZXBhcmVkICYmIHtcbiAgICAgICAgbWV0YTogcHJlcGFyZWQubWV0YVxuICAgICAgfSwge30sICdlcnJvcicgaW4gcHJlcGFyZWQgJiYge1xuICAgICAgICBlcnJvcjogcHJlcGFyZWQuZXJyb3JcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgcGF5bG9hZDogYXJndW1lbnRzLmxlbmd0aCA8PSAwID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzBdXG4gICAgfTtcbiAgfVxuXG4gIGFjdGlvbkNyZWF0b3IudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiXCIgKyB0eXBlO1xuICB9O1xuXG4gIGFjdGlvbkNyZWF0b3IudHlwZSA9IHR5cGU7XG5cbiAgYWN0aW9uQ3JlYXRvci5tYXRjaCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICByZXR1cm4gYWN0aW9uLnR5cGUgPT09IHR5cGU7XG4gIH07XG5cbiAgcmV0dXJuIGFjdGlvbkNyZWF0b3I7XG59XG5mdW5jdGlvbiBpc0ZTQShhY3Rpb24pIHtcbiAgcmV0dXJuIGlzUGxhaW5PYmplY3QoYWN0aW9uKSAmJiB0eXBlb2YgYWN0aW9uLnR5cGUgPT09ICdzdHJpbmcnICYmIE9iamVjdC5rZXlzKGFjdGlvbikuZXZlcnkoaXNWYWxpZEtleSk7XG59XG5cbmZ1bmN0aW9uIGlzVmFsaWRLZXkoa2V5KSB7XG4gIHJldHVybiBbJ3R5cGUnLCAncGF5bG9hZCcsICdlcnJvcicsICdtZXRhJ10uaW5kZXhPZihrZXkpID4gLTE7XG59XG4vKipcclxuICogUmV0dXJucyB0aGUgYWN0aW9uIHR5cGUgb2YgdGhlIGFjdGlvbnMgY3JlYXRlZCBieSB0aGUgcGFzc2VkXHJcbiAqIGBjcmVhdGVBY3Rpb24oKWAtZ2VuZXJhdGVkIGFjdGlvbiBjcmVhdG9yIChhcmJpdHJhcnkgYWN0aW9uIGNyZWF0b3JzXHJcbiAqIGFyZSBub3Qgc3VwcG9ydGVkKS5cclxuICpcclxuICogQHBhcmFtIGFjdGlvbiBUaGUgYWN0aW9uIGNyZWF0b3Igd2hvc2UgYWN0aW9uIHR5cGUgdG8gZ2V0LlxyXG4gKiBAcmV0dXJucyBUaGUgYWN0aW9uIHR5cGUgdXNlZCBieSB0aGUgYWN0aW9uIGNyZWF0b3IuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cblxuZnVuY3Rpb24gZ2V0VHlwZShhY3Rpb25DcmVhdG9yKSB7XG4gIHJldHVybiBcIlwiICsgYWN0aW9uQ3JlYXRvcjtcbn1cblxuZnVuY3Rpb24gZXhlY3V0ZVJlZHVjZXJCdWlsZGVyQ2FsbGJhY2soYnVpbGRlckNhbGxiYWNrKSB7XG4gIHZhciBhY3Rpb25zTWFwID0ge307XG4gIHZhciBhY3Rpb25NYXRjaGVycyA9IFtdO1xuICB2YXIgZGVmYXVsdENhc2VSZWR1Y2VyO1xuICB2YXIgYnVpbGRlciA9IHtcbiAgICBhZGRDYXNlOiBmdW5jdGlvbiBhZGRDYXNlKHR5cGVPckFjdGlvbkNyZWF0b3IsIHJlZHVjZXIpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIC8qXHJcbiAgICAgICAgIHRvIGtlZXAgdGhlIGRlZmluaXRpb24gYnkgdGhlIHVzZXIgaW4gbGluZSB3aXRoIGFjdHVhbCBiZWhhdmlvcixcclxuICAgICAgICAgd2UgZW5mb3JjZSBgYWRkQ2FzZWAgdG8gYWx3YXlzIGJlIGNhbGxlZCBiZWZvcmUgY2FsbGluZyBgYWRkTWF0Y2hlcmBcclxuICAgICAgICAgYXMgbWF0Y2hpbmcgY2FzZXMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgbWF0Y2hlcnNcclxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKGFjdGlvbk1hdGNoZXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BidWlsZGVyLmFkZENhc2VgIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBiZWZvcmUgY2FsbGluZyBgYnVpbGRlci5hZGRNYXRjaGVyYCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRlZmF1bHRDYXNlUmVkdWNlcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYGJ1aWxkZXIuYWRkQ2FzZWAgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGBidWlsZGVyLmFkZERlZmF1bHRDYXNlYCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciB0eXBlID0gdHlwZW9mIHR5cGVPckFjdGlvbkNyZWF0b3IgPT09ICdzdHJpbmcnID8gdHlwZU9yQWN0aW9uQ3JlYXRvciA6IHR5cGVPckFjdGlvbkNyZWF0b3IudHlwZTtcblxuICAgICAgaWYgKHR5cGUgaW4gYWN0aW9uc01hcCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2FkZENhc2UgY2Fubm90IGJlIGNhbGxlZCB3aXRoIHR3byByZWR1Y2VycyBmb3IgdGhlIHNhbWUgYWN0aW9uIHR5cGUnKTtcbiAgICAgIH1cblxuICAgICAgYWN0aW9uc01hcFt0eXBlXSA9IHJlZHVjZXI7XG4gICAgICByZXR1cm4gYnVpbGRlcjtcbiAgICB9LFxuICAgIGFkZE1hdGNoZXI6IGZ1bmN0aW9uIGFkZE1hdGNoZXIobWF0Y2hlciwgcmVkdWNlcikge1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKGRlZmF1bHRDYXNlUmVkdWNlcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYGJ1aWxkZXIuYWRkTWF0Y2hlcmAgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBjYWxsaW5nIGBidWlsZGVyLmFkZERlZmF1bHRDYXNlYCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGFjdGlvbk1hdGNoZXJzLnB1c2goe1xuICAgICAgICBtYXRjaGVyOiBtYXRjaGVyLFxuICAgICAgICByZWR1Y2VyOiByZWR1Y2VyXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBidWlsZGVyO1xuICAgIH0sXG4gICAgYWRkRGVmYXVsdENhc2U6IGZ1bmN0aW9uIGFkZERlZmF1bHRDYXNlKHJlZHVjZXIpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmIChkZWZhdWx0Q2FzZVJlZHVjZXIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2BidWlsZGVyLmFkZERlZmF1bHRDYXNlYCBjYW4gb25seSBiZSBjYWxsZWQgb25jZScpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHRDYXNlUmVkdWNlciA9IHJlZHVjZXI7XG4gICAgICByZXR1cm4gYnVpbGRlcjtcbiAgICB9XG4gIH07XG4gIGJ1aWxkZXJDYWxsYmFjayhidWlsZGVyKTtcbiAgcmV0dXJuIFthY3Rpb25zTWFwLCBhY3Rpb25NYXRjaGVycywgZGVmYXVsdENhc2VSZWR1Y2VyXTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUmVkdWNlcihpbml0aWFsU3RhdGUsIG1hcE9yQnVpbGRlckNhbGxiYWNrLCBhY3Rpb25NYXRjaGVycywgZGVmYXVsdENhc2VSZWR1Y2VyKSB7XG4gIGlmIChhY3Rpb25NYXRjaGVycyA9PT0gdm9pZCAwKSB7XG4gICAgYWN0aW9uTWF0Y2hlcnMgPSBbXTtcbiAgfVxuXG4gIHZhciBfcmVmID0gdHlwZW9mIG1hcE9yQnVpbGRlckNhbGxiYWNrID09PSAnZnVuY3Rpb24nID8gZXhlY3V0ZVJlZHVjZXJCdWlsZGVyQ2FsbGJhY2sobWFwT3JCdWlsZGVyQ2FsbGJhY2spIDogW21hcE9yQnVpbGRlckNhbGxiYWNrLCBhY3Rpb25NYXRjaGVycywgZGVmYXVsdENhc2VSZWR1Y2VyXSxcbiAgICAgIGFjdGlvbnNNYXAgPSBfcmVmWzBdLFxuICAgICAgZmluYWxBY3Rpb25NYXRjaGVycyA9IF9yZWZbMV0sXG4gICAgICBmaW5hbERlZmF1bHRDYXNlUmVkdWNlciA9IF9yZWZbMl07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgaWYgKHN0YXRlID09PSB2b2lkIDApIHtcbiAgICAgIHN0YXRlID0gaW5pdGlhbFN0YXRlO1xuICAgIH1cblxuICAgIHZhciBjYXNlUmVkdWNlcnMgPSBbYWN0aW9uc01hcFthY3Rpb24udHlwZV1dLmNvbmNhdChmaW5hbEFjdGlvbk1hdGNoZXJzLmZpbHRlcihmdW5jdGlvbiAoX3JlZjIpIHtcbiAgICAgIHZhciBtYXRjaGVyID0gX3JlZjIubWF0Y2hlcjtcbiAgICAgIHJldHVybiBtYXRjaGVyKGFjdGlvbik7XG4gICAgfSkubWFwKGZ1bmN0aW9uIChfcmVmMykge1xuICAgICAgdmFyIHJlZHVjZXIgPSBfcmVmMy5yZWR1Y2VyO1xuICAgICAgcmV0dXJuIHJlZHVjZXI7XG4gICAgfSkpO1xuXG4gICAgaWYgKGNhc2VSZWR1Y2Vycy5maWx0ZXIoZnVuY3Rpb24gKGNyKSB7XG4gICAgICByZXR1cm4gISFjcjtcbiAgICB9KS5sZW5ndGggPT09IDApIHtcbiAgICAgIGNhc2VSZWR1Y2VycyA9IFtmaW5hbERlZmF1bHRDYXNlUmVkdWNlcl07XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhc2VSZWR1Y2Vycy5yZWR1Y2UoZnVuY3Rpb24gKHByZXZpb3VzU3RhdGUsIGNhc2VSZWR1Y2VyKSB7XG4gICAgICBpZiAoY2FzZVJlZHVjZXIpIHtcbiAgICAgICAgaWYgKGlzRHJhZnQocHJldmlvdXNTdGF0ZSkpIHtcbiAgICAgICAgICAvLyBJZiBpdCdzIGFscmVhZHkgYSBkcmFmdCwgd2UgbXVzdCBhbHJlYWR5IGJlIGluc2lkZSBhIGBjcmVhdGVOZXh0U3RhdGVgIGNhbGwsXG4gICAgICAgICAgLy8gbGlrZWx5IGJlY2F1c2UgdGhpcyBpcyBiZWluZyB3cmFwcGVkIGluIGBjcmVhdGVSZWR1Y2VyYCwgYGNyZWF0ZVNsaWNlYCwgb3IgbmVzdGVkXG4gICAgICAgICAgLy8gaW5zaWRlIGFuIGV4aXN0aW5nIGRyYWZ0LiBJdCdzIHNhZmUgdG8ganVzdCBwYXNzIHRoZSBkcmFmdCB0byB0aGUgbXV0YXRvci5cbiAgICAgICAgICB2YXIgZHJhZnQgPSBwcmV2aW91c1N0YXRlOyAvLyBXZSBjYW4gYXNzdW1lIHRoaXMgaXMgYWxyZWFkeSBhIGRyYWZ0XG5cbiAgICAgICAgICB2YXIgcmVzdWx0ID0gY2FzZVJlZHVjZXIoZHJhZnQsIGFjdGlvbik7XG5cbiAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBwcmV2aW91c1N0YXRlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gZWxzZSBpZiAoIWlzRHJhZnRhYmxlKHByZXZpb3VzU3RhdGUpKSB7XG4gICAgICAgICAgLy8gSWYgc3RhdGUgaXMgbm90IGRyYWZ0YWJsZSAoZXg6IGEgcHJpbWl0aXZlLCBzdWNoIGFzIDApLCB3ZSB3YW50IHRvIGRpcmVjdGx5XG4gICAgICAgICAgLy8gcmV0dXJuIHRoZSBjYXNlUmVkdWNlciBmdW5jIGFuZCBub3Qgd3JhcCBpdCB3aXRoIHByb2R1Y2UuXG4gICAgICAgICAgdmFyIF9yZXN1bHQgPSBjYXNlUmVkdWNlcihwcmV2aW91c1N0YXRlLCBhY3Rpb24pO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiBfcmVzdWx0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKHByZXZpb3VzU3RhdGUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHByZXZpb3VzU3RhdGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IEVycm9yKCdBIGNhc2UgcmVkdWNlciBvbiBhIG5vbi1kcmFmdGFibGUgdmFsdWUgbXVzdCBub3QgcmV0dXJuIHVuZGVmaW5lZCcpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBfcmVzdWx0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmUgY3JlYXRlTmV4dFN0YXRlKCkgcHJvZHVjZXMgYW4gSW1tdXRhYmxlPERyYWZ0PFM+PiByYXRoZXJcbiAgICAgICAgICAvLyB0aGFuIGFuIEltbXV0YWJsZTxTPiwgYW5kIFR5cGVTY3JpcHQgY2Fubm90IGZpbmQgb3V0IGhvdyB0byByZWNvbmNpbGVcbiAgICAgICAgICAvLyB0aGVzZSB0d28gdHlwZXMuXG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZU5leHRTdGF0ZShwcmV2aW91c1N0YXRlLCBmdW5jdGlvbiAoZHJhZnQpIHtcbiAgICAgICAgICAgIHJldHVybiBjYXNlUmVkdWNlcihkcmFmdCwgYWN0aW9uKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJldmlvdXNTdGF0ZTtcbiAgICB9LCBzdGF0ZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFR5cGUkMShzbGljZSwgYWN0aW9uS2V5KSB7XG4gIHJldHVybiBzbGljZSArIFwiL1wiICsgYWN0aW9uS2V5O1xufVxuLyoqXHJcbiAqIEEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIGFuIGluaXRpYWwgc3RhdGUsIGFuIG9iamVjdCBmdWxsIG9mIHJlZHVjZXJcclxuICogZnVuY3Rpb25zLCBhbmQgYSBcInNsaWNlIG5hbWVcIiwgYW5kIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVzXHJcbiAqIGFjdGlvbiBjcmVhdG9ycyBhbmQgYWN0aW9uIHR5cGVzIHRoYXQgY29ycmVzcG9uZCB0byB0aGVcclxuICogcmVkdWNlcnMgYW5kIHN0YXRlLlxyXG4gKlxyXG4gKiBUaGUgYHJlZHVjZXJgIGFyZ3VtZW50IGlzIHBhc3NlZCB0byBgY3JlYXRlUmVkdWNlcigpYC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cblxuXG5mdW5jdGlvbiBjcmVhdGVTbGljZShvcHRpb25zKSB7XG4gIHZhciBuYW1lID0gb3B0aW9ucy5uYW1lLFxuICAgICAgaW5pdGlhbFN0YXRlID0gb3B0aW9ucy5pbml0aWFsU3RhdGU7XG5cbiAgaWYgKCFuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdgbmFtZWAgaXMgYSByZXF1aXJlZCBvcHRpb24gZm9yIGNyZWF0ZVNsaWNlJyk7XG4gIH1cblxuICB2YXIgcmVkdWNlcnMgPSBvcHRpb25zLnJlZHVjZXJzIHx8IHt9O1xuXG4gIHZhciBfcmVmID0gdHlwZW9mIG9wdGlvbnMuZXh0cmFSZWR1Y2VycyA9PT0gJ3VuZGVmaW5lZCcgPyBbXSA6IHR5cGVvZiBvcHRpb25zLmV4dHJhUmVkdWNlcnMgPT09ICdmdW5jdGlvbicgPyBleGVjdXRlUmVkdWNlckJ1aWxkZXJDYWxsYmFjayhvcHRpb25zLmV4dHJhUmVkdWNlcnMpIDogW29wdGlvbnMuZXh0cmFSZWR1Y2Vyc10sXG4gICAgICBfcmVmJCA9IF9yZWZbMF0sXG4gICAgICBleHRyYVJlZHVjZXJzID0gX3JlZiQgPT09IHZvaWQgMCA/IHt9IDogX3JlZiQsXG4gICAgICBfcmVmJDIgPSBfcmVmWzFdLFxuICAgICAgYWN0aW9uTWF0Y2hlcnMgPSBfcmVmJDIgPT09IHZvaWQgMCA/IFtdIDogX3JlZiQyLFxuICAgICAgX3JlZiQzID0gX3JlZlsyXSxcbiAgICAgIGRlZmF1bHRDYXNlUmVkdWNlciA9IF9yZWYkMyA9PT0gdm9pZCAwID8gdW5kZWZpbmVkIDogX3JlZiQzO1xuXG4gIHZhciByZWR1Y2VyTmFtZXMgPSBPYmplY3Qua2V5cyhyZWR1Y2Vycyk7XG4gIHZhciBzbGljZUNhc2VSZWR1Y2Vyc0J5TmFtZSA9IHt9O1xuICB2YXIgc2xpY2VDYXNlUmVkdWNlcnNCeVR5cGUgPSB7fTtcbiAgdmFyIGFjdGlvbkNyZWF0b3JzID0ge307XG4gIHJlZHVjZXJOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWR1Y2VyTmFtZSkge1xuICAgIHZhciBtYXliZVJlZHVjZXJXaXRoUHJlcGFyZSA9IHJlZHVjZXJzW3JlZHVjZXJOYW1lXTtcbiAgICB2YXIgdHlwZSA9IGdldFR5cGUkMShuYW1lLCByZWR1Y2VyTmFtZSk7XG4gICAgdmFyIGNhc2VSZWR1Y2VyO1xuICAgIHZhciBwcmVwYXJlQ2FsbGJhY2s7XG5cbiAgICBpZiAoJ3JlZHVjZXInIGluIG1heWJlUmVkdWNlcldpdGhQcmVwYXJlKSB7XG4gICAgICBjYXNlUmVkdWNlciA9IG1heWJlUmVkdWNlcldpdGhQcmVwYXJlLnJlZHVjZXI7XG4gICAgICBwcmVwYXJlQ2FsbGJhY2sgPSBtYXliZVJlZHVjZXJXaXRoUHJlcGFyZS5wcmVwYXJlO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYXNlUmVkdWNlciA9IG1heWJlUmVkdWNlcldpdGhQcmVwYXJlO1xuICAgIH1cblxuICAgIHNsaWNlQ2FzZVJlZHVjZXJzQnlOYW1lW3JlZHVjZXJOYW1lXSA9IGNhc2VSZWR1Y2VyO1xuICAgIHNsaWNlQ2FzZVJlZHVjZXJzQnlUeXBlW3R5cGVdID0gY2FzZVJlZHVjZXI7XG4gICAgYWN0aW9uQ3JlYXRvcnNbcmVkdWNlck5hbWVdID0gcHJlcGFyZUNhbGxiYWNrID8gY3JlYXRlQWN0aW9uKHR5cGUsIHByZXBhcmVDYWxsYmFjaykgOiBjcmVhdGVBY3Rpb24odHlwZSk7XG4gIH0pO1xuXG4gIHZhciBmaW5hbENhc2VSZWR1Y2VycyA9IF9leHRlbmRzKHt9LCBleHRyYVJlZHVjZXJzLCB7fSwgc2xpY2VDYXNlUmVkdWNlcnNCeVR5cGUpO1xuXG4gIHZhciByZWR1Y2VyID0gY3JlYXRlUmVkdWNlcihpbml0aWFsU3RhdGUsIGZpbmFsQ2FzZVJlZHVjZXJzLCBhY3Rpb25NYXRjaGVycywgZGVmYXVsdENhc2VSZWR1Y2VyKTtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBuYW1lLFxuICAgIHJlZHVjZXI6IHJlZHVjZXIsXG4gICAgYWN0aW9uczogYWN0aW9uQ3JlYXRvcnMsXG4gICAgY2FzZVJlZHVjZXJzOiBzbGljZUNhc2VSZWR1Y2Vyc0J5TmFtZVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRJbml0aWFsRW50aXR5U3RhdGUoKSB7XG4gIHJldHVybiB7XG4gICAgaWRzOiBbXSxcbiAgICBlbnRpdGllczoge31cbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUluaXRpYWxTdGF0ZUZhY3RvcnkoKSB7XG4gIGZ1bmN0aW9uIGdldEluaXRpYWxTdGF0ZShhZGRpdGlvbmFsU3RhdGUpIHtcbiAgICBpZiAoYWRkaXRpb25hbFN0YXRlID09PSB2b2lkIDApIHtcbiAgICAgIGFkZGl0aW9uYWxTdGF0ZSA9IHt9O1xuICAgIH1cblxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKGdldEluaXRpYWxFbnRpdHlTdGF0ZSgpLCBhZGRpdGlvbmFsU3RhdGUpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRJbml0aWFsU3RhdGU6IGdldEluaXRpYWxTdGF0ZVxuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTZWxlY3RvcnNGYWN0b3J5KCkge1xuICBmdW5jdGlvbiBnZXRTZWxlY3RvcnMoc2VsZWN0U3RhdGUpIHtcbiAgICB2YXIgc2VsZWN0SWRzID0gZnVuY3Rpb24gc2VsZWN0SWRzKHN0YXRlKSB7XG4gICAgICByZXR1cm4gc3RhdGUuaWRzO1xuICAgIH07XG5cbiAgICB2YXIgc2VsZWN0RW50aXRpZXMgPSBmdW5jdGlvbiBzZWxlY3RFbnRpdGllcyhzdGF0ZSkge1xuICAgICAgcmV0dXJuIHN0YXRlLmVudGl0aWVzO1xuICAgIH07XG5cbiAgICB2YXIgc2VsZWN0QWxsID0gY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3Ioc2VsZWN0SWRzLCBzZWxlY3RFbnRpdGllcywgZnVuY3Rpb24gKGlkcywgZW50aXRpZXMpIHtcbiAgICAgIHJldHVybiBpZHMubWFwKGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4gZW50aXRpZXNbaWRdO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB2YXIgc2VsZWN0SWQgPSBmdW5jdGlvbiBzZWxlY3RJZChfLCBpZCkge1xuICAgICAgcmV0dXJuIGlkO1xuICAgIH07XG5cbiAgICB2YXIgc2VsZWN0QnlJZCA9IGZ1bmN0aW9uIHNlbGVjdEJ5SWQoZW50aXRpZXMsIGlkKSB7XG4gICAgICByZXR1cm4gZW50aXRpZXNbaWRdO1xuICAgIH07XG5cbiAgICB2YXIgc2VsZWN0VG90YWwgPSBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihzZWxlY3RJZHMsIGZ1bmN0aW9uIChpZHMpIHtcbiAgICAgIHJldHVybiBpZHMubGVuZ3RoO1xuICAgIH0pO1xuXG4gICAgaWYgKCFzZWxlY3RTdGF0ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2VsZWN0SWRzOiBzZWxlY3RJZHMsXG4gICAgICAgIHNlbGVjdEVudGl0aWVzOiBzZWxlY3RFbnRpdGllcyxcbiAgICAgICAgc2VsZWN0QWxsOiBzZWxlY3RBbGwsXG4gICAgICAgIHNlbGVjdFRvdGFsOiBzZWxlY3RUb3RhbCxcbiAgICAgICAgc2VsZWN0QnlJZDogY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3Ioc2VsZWN0RW50aXRpZXMsIHNlbGVjdElkLCBzZWxlY3RCeUlkKVxuICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgc2VsZWN0R2xvYmFsaXplZEVudGl0aWVzID0gY3JlYXRlRHJhZnRTYWZlU2VsZWN0b3Ioc2VsZWN0U3RhdGUsIHNlbGVjdEVudGl0aWVzKTtcbiAgICByZXR1cm4ge1xuICAgICAgc2VsZWN0SWRzOiBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihzZWxlY3RTdGF0ZSwgc2VsZWN0SWRzKSxcbiAgICAgIHNlbGVjdEVudGl0aWVzOiBzZWxlY3RHbG9iYWxpemVkRW50aXRpZXMsXG4gICAgICBzZWxlY3RBbGw6IGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yKHNlbGVjdFN0YXRlLCBzZWxlY3RBbGwpLFxuICAgICAgc2VsZWN0VG90YWw6IGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yKHNlbGVjdFN0YXRlLCBzZWxlY3RUb3RhbCksXG4gICAgICBzZWxlY3RCeUlkOiBjcmVhdGVEcmFmdFNhZmVTZWxlY3RvcihzZWxlY3RHbG9iYWxpemVkRW50aXRpZXMsIHNlbGVjdElkLCBzZWxlY3RCeUlkKVxuICAgIH07XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdldFNlbGVjdG9yczogZ2V0U2VsZWN0b3JzXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNpbmdsZUFyZ3VtZW50U3RhdGVPcGVyYXRvcihtdXRhdG9yKSB7XG4gIHZhciBvcGVyYXRvciA9IGNyZWF0ZVN0YXRlT3BlcmF0b3IoZnVuY3Rpb24gKF8sIHN0YXRlKSB7XG4gICAgcmV0dXJuIG11dGF0b3Ioc3RhdGUpO1xuICB9KTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG9wZXJhdGlvbihzdGF0ZSkge1xuICAgIHJldHVybiBvcGVyYXRvcihzdGF0ZSwgdW5kZWZpbmVkKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVN0YXRlT3BlcmF0b3IobXV0YXRvcikge1xuICByZXR1cm4gZnVuY3Rpb24gb3BlcmF0aW9uKHN0YXRlLCBhcmcpIHtcbiAgICBmdW5jdGlvbiBpc1BheWxvYWRBY3Rpb25Bcmd1bWVudChhcmcpIHtcbiAgICAgIHJldHVybiBpc0ZTQShhcmcpO1xuICAgIH1cblxuICAgIHZhciBydW5NdXRhdG9yID0gZnVuY3Rpb24gcnVuTXV0YXRvcihkcmFmdCkge1xuICAgICAgaWYgKGlzUGF5bG9hZEFjdGlvbkFyZ3VtZW50KGFyZykpIHtcbiAgICAgICAgbXV0YXRvcihhcmcucGF5bG9hZCwgZHJhZnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbXV0YXRvcihhcmcsIGRyYWZ0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGlzRHJhZnQoc3RhdGUpKSB7XG4gICAgICAvLyB3ZSBtdXN0IGFscmVhZHkgYmUgaW5zaWRlIGEgYGNyZWF0ZU5leHRTdGF0ZWAgY2FsbCwgbGlrZWx5IGJlY2F1c2VcbiAgICAgIC8vIHRoaXMgaXMgYmVpbmcgd3JhcHBlZCBpbiBgY3JlYXRlUmVkdWNlcmAgb3IgYGNyZWF0ZVNsaWNlYC5cbiAgICAgIC8vIEl0J3Mgc2FmZSB0byBqdXN0IHBhc3MgdGhlIGRyYWZ0IHRvIHRoZSBtdXRhdG9yLlxuICAgICAgcnVuTXV0YXRvcihzdGF0ZSk7IC8vIHNpbmNlIGl0J3MgYSBkcmFmdCwgd2UnbGwganVzdCByZXR1cm4gaXRcblxuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBAdHMtaWdub3JlIGNyZWF0ZU5leHRTdGF0ZSgpIHByb2R1Y2VzIGFuIEltbXV0YWJsZTxEcmFmdDxTPj4gcmF0aGVyXG4gICAgICAvLyB0aGFuIGFuIEltbXV0YWJsZTxTPiwgYW5kIFR5cGVTY3JpcHQgY2Fubm90IGZpbmQgb3V0IGhvdyB0byByZWNvbmNpbGVcbiAgICAgIC8vIHRoZXNlIHR3byB0eXBlcy5cbiAgICAgIHJldHVybiBjcmVhdGVOZXh0U3RhdGUoc3RhdGUsIHJ1bk11dGF0b3IpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gc2VsZWN0SWRWYWx1ZShlbnRpdHksIHNlbGVjdElkKSB7XG4gIHZhciBrZXkgPSBzZWxlY3RJZChlbnRpdHkpO1xuXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc29sZS53YXJuKCdUaGUgZW50aXR5IHBhc3NlZCB0byB0aGUgYHNlbGVjdElkYCBpbXBsZW1lbnRhdGlvbiByZXR1cm5lZCB1bmRlZmluZWQuJywgJ1lvdSBzaG91bGQgcHJvYmFibHkgcHJvdmlkZSB5b3VyIG93biBgc2VsZWN0SWRgIGltcGxlbWVudGF0aW9uLicsICdUaGUgZW50aXR5IHRoYXQgd2FzIHBhc3NlZDonLCBlbnRpdHksICdUaGUgYHNlbGVjdElkYCBpbXBsZW1lbnRhdGlvbjonLCBzZWxlY3RJZC50b1N0cmluZygpKTtcbiAgfVxuXG4gIHJldHVybiBrZXk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVVuc29ydGVkU3RhdGVBZGFwdGVyKHNlbGVjdElkKSB7XG4gIGZ1bmN0aW9uIGFkZE9uZU11dGFibHkoZW50aXR5LCBzdGF0ZSkge1xuICAgIHZhciBrZXkgPSBzZWxlY3RJZFZhbHVlKGVudGl0eSwgc2VsZWN0SWQpO1xuXG4gICAgaWYgKGtleSBpbiBzdGF0ZS5lbnRpdGllcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN0YXRlLmlkcy5wdXNoKGtleSk7XG4gICAgc3RhdGUuZW50aXRpZXNba2V5XSA9IGVudGl0eTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZE1hbnlNdXRhYmx5KGVudGl0aWVzLCBzdGF0ZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShlbnRpdGllcykpIHtcbiAgICAgIGVudGl0aWVzID0gT2JqZWN0LnZhbHVlcyhlbnRpdGllcyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gZW50aXRpZXMsIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheShfaXRlcmF0b3IpLCBfaSA9IDAsIF9pdGVyYXRvciA9IF9pc0FycmF5ID8gX2l0ZXJhdG9yIDogX2l0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XG4gICAgICB2YXIgX3JlZjtcblxuICAgICAgaWYgKF9pc0FycmF5KSB7XG4gICAgICAgIGlmIChfaSA+PSBfaXRlcmF0b3IubGVuZ3RoKSBicmVhaztcbiAgICAgICAgX3JlZiA9IF9pdGVyYXRvcltfaSsrXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9pID0gX2l0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKF9pLmRvbmUpIGJyZWFrO1xuICAgICAgICBfcmVmID0gX2kudmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBlbnRpdHkgPSBfcmVmO1xuICAgICAgYWRkT25lTXV0YWJseShlbnRpdHksIHN0YXRlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRBbGxNdXRhYmx5KGVudGl0aWVzLCBzdGF0ZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShlbnRpdGllcykpIHtcbiAgICAgIGVudGl0aWVzID0gT2JqZWN0LnZhbHVlcyhlbnRpdGllcyk7XG4gICAgfVxuXG4gICAgc3RhdGUuaWRzID0gW107XG4gICAgc3RhdGUuZW50aXRpZXMgPSB7fTtcbiAgICBhZGRNYW55TXV0YWJseShlbnRpdGllcywgc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlT25lTXV0YWJseShrZXksIHN0YXRlKSB7XG4gICAgcmV0dXJuIHJlbW92ZU1hbnlNdXRhYmx5KFtrZXldLCBzdGF0ZSk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVNYW55TXV0YWJseShrZXlzLCBzdGF0ZSkge1xuICAgIHZhciBkaWRNdXRhdGUgPSBmYWxzZTtcbiAgICBrZXlzLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgaWYgKGtleSBpbiBzdGF0ZS5lbnRpdGllcykge1xuICAgICAgICBkZWxldGUgc3RhdGUuZW50aXRpZXNba2V5XTtcbiAgICAgICAgZGlkTXV0YXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChkaWRNdXRhdGUpIHtcbiAgICAgIHN0YXRlLmlkcyA9IHN0YXRlLmlkcy5maWx0ZXIoZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiBpZCBpbiBzdGF0ZS5lbnRpdGllcztcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUFsbE11dGFibHkoc3RhdGUpIHtcbiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCB7XG4gICAgICBpZHM6IFtdLFxuICAgICAgZW50aXRpZXM6IHt9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB0YWtlTmV3S2V5KGtleXMsIHVwZGF0ZSwgc3RhdGUpIHtcbiAgICB2YXIgb3JpZ2luYWwgPSBzdGF0ZS5lbnRpdGllc1t1cGRhdGUuaWRdO1xuICAgIHZhciB1cGRhdGVkID0gT2JqZWN0LmFzc2lnbih7fSwgb3JpZ2luYWwsIHVwZGF0ZS5jaGFuZ2VzKTtcbiAgICB2YXIgbmV3S2V5ID0gc2VsZWN0SWRWYWx1ZSh1cGRhdGVkLCBzZWxlY3RJZCk7XG4gICAgdmFyIGhhc05ld0tleSA9IG5ld0tleSAhPT0gdXBkYXRlLmlkO1xuXG4gICAgaWYgKGhhc05ld0tleSkge1xuICAgICAga2V5c1t1cGRhdGUuaWRdID0gbmV3S2V5O1xuICAgICAgZGVsZXRlIHN0YXRlLmVudGl0aWVzW3VwZGF0ZS5pZF07XG4gICAgfVxuXG4gICAgc3RhdGUuZW50aXRpZXNbbmV3S2V5XSA9IHVwZGF0ZWQ7XG4gICAgcmV0dXJuIGhhc05ld0tleTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZU9uZU11dGFibHkodXBkYXRlLCBzdGF0ZSkge1xuICAgIHJldHVybiB1cGRhdGVNYW55TXV0YWJseShbdXBkYXRlXSwgc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTWFueU11dGFibHkodXBkYXRlcywgc3RhdGUpIHtcbiAgICB2YXIgbmV3S2V5cyA9IHt9O1xuICAgIHZhciB1cGRhdGVzUGVyRW50aXR5ID0ge307XG4gICAgdXBkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uICh1cGRhdGUpIHtcbiAgICAgIC8vIE9ubHkgYXBwbHkgdXBkYXRlcyB0byBlbnRpdGllcyB0aGF0IGN1cnJlbnRseSBleGlzdFxuICAgICAgaWYgKHVwZGF0ZS5pZCBpbiBzdGF0ZS5lbnRpdGllcykge1xuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgdXBkYXRlcyB0byBvbmUgZW50aXR5LCBtZXJnZSB0aGVtIHRvZ2V0aGVyXG4gICAgICAgIHVwZGF0ZXNQZXJFbnRpdHlbdXBkYXRlLmlkXSA9IHtcbiAgICAgICAgICBpZDogdXBkYXRlLmlkLFxuICAgICAgICAgIC8vIFNwcmVhZHMgaWdub3JlIGZhbHN5IHZhbHVlcywgc28gdGhpcyB3b3JrcyBldmVuIGlmIHRoZXJlIGlzbid0XG4gICAgICAgICAgLy8gYW4gZXhpc3RpbmcgdXBkYXRlIGFscmVhZHkgYXQgdGhpcyBrZXlcbiAgICAgICAgICBjaGFuZ2VzOiBfZXh0ZW5kcyh7fSwgdXBkYXRlc1BlckVudGl0eVt1cGRhdGUuaWRdID8gdXBkYXRlc1BlckVudGl0eVt1cGRhdGUuaWRdLmNoYW5nZXMgOiBudWxsLCB7fSwgdXBkYXRlLmNoYW5nZXMpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG4gICAgdXBkYXRlcyA9IE9iamVjdC52YWx1ZXModXBkYXRlc1BlckVudGl0eSk7XG4gICAgdmFyIGRpZE11dGF0ZUVudGl0aWVzID0gdXBkYXRlcy5sZW5ndGggPiAwO1xuXG4gICAgaWYgKGRpZE11dGF0ZUVudGl0aWVzKSB7XG4gICAgICB2YXIgZGlkTXV0YXRlSWRzID0gdXBkYXRlcy5maWx0ZXIoZnVuY3Rpb24gKHVwZGF0ZSkge1xuICAgICAgICByZXR1cm4gdGFrZU5ld0tleShuZXdLZXlzLCB1cGRhdGUsIHN0YXRlKTtcbiAgICAgIH0pLmxlbmd0aCA+IDA7XG5cbiAgICAgIGlmIChkaWRNdXRhdGVJZHMpIHtcbiAgICAgICAgc3RhdGUuaWRzID0gc3RhdGUuaWRzLm1hcChmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICByZXR1cm4gbmV3S2V5c1tpZF0gfHwgaWQ7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwc2VydE9uZU11dGFibHkoZW50aXR5LCBzdGF0ZSkge1xuICAgIHJldHVybiB1cHNlcnRNYW55TXV0YWJseShbZW50aXR5XSwgc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBzZXJ0TWFueU11dGFibHkoZW50aXRpZXMsIHN0YXRlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGVudGl0aWVzKSkge1xuICAgICAgZW50aXRpZXMgPSBPYmplY3QudmFsdWVzKGVudGl0aWVzKTtcbiAgICB9XG5cbiAgICB2YXIgYWRkZWQgPSBbXTtcbiAgICB2YXIgdXBkYXRlZCA9IFtdO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IGVudGl0aWVzLCBfaXNBcnJheTIgPSBBcnJheS5pc0FycmF5KF9pdGVyYXRvcjIpLCBfaTIgPSAwLCBfaXRlcmF0b3IyID0gX2lzQXJyYXkyID8gX2l0ZXJhdG9yMiA6IF9pdGVyYXRvcjJbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcbiAgICAgIHZhciBfcmVmMjtcblxuICAgICAgaWYgKF9pc0FycmF5Mikge1xuICAgICAgICBpZiAoX2kyID49IF9pdGVyYXRvcjIubGVuZ3RoKSBicmVhaztcbiAgICAgICAgX3JlZjIgPSBfaXRlcmF0b3IyW19pMisrXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9pMiA9IF9pdGVyYXRvcjIubmV4dCgpO1xuICAgICAgICBpZiAoX2kyLmRvbmUpIGJyZWFrO1xuICAgICAgICBfcmVmMiA9IF9pMi52YWx1ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGVudGl0eSA9IF9yZWYyO1xuICAgICAgdmFyIGlkID0gc2VsZWN0SWRWYWx1ZShlbnRpdHksIHNlbGVjdElkKTtcblxuICAgICAgaWYgKGlkIGluIHN0YXRlLmVudGl0aWVzKSB7XG4gICAgICAgIHVwZGF0ZWQucHVzaCh7XG4gICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgIGNoYW5nZXM6IGVudGl0eVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkZGVkLnB1c2goZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVNYW55TXV0YWJseSh1cGRhdGVkLCBzdGF0ZSk7XG4gICAgYWRkTWFueU11dGFibHkoYWRkZWQsIHN0YXRlKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcmVtb3ZlQWxsOiBjcmVhdGVTaW5nbGVBcmd1bWVudFN0YXRlT3BlcmF0b3IocmVtb3ZlQWxsTXV0YWJseSksXG4gICAgYWRkT25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKGFkZE9uZU11dGFibHkpLFxuICAgIGFkZE1hbnk6IGNyZWF0ZVN0YXRlT3BlcmF0b3IoYWRkTWFueU11dGFibHkpLFxuICAgIHNldEFsbDogY3JlYXRlU3RhdGVPcGVyYXRvcihzZXRBbGxNdXRhYmx5KSxcbiAgICB1cGRhdGVPbmU6IGNyZWF0ZVN0YXRlT3BlcmF0b3IodXBkYXRlT25lTXV0YWJseSksXG4gICAgdXBkYXRlTWFueTogY3JlYXRlU3RhdGVPcGVyYXRvcih1cGRhdGVNYW55TXV0YWJseSksXG4gICAgdXBzZXJ0T25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwc2VydE9uZU11dGFibHkpLFxuICAgIHVwc2VydE1hbnk6IGNyZWF0ZVN0YXRlT3BlcmF0b3IodXBzZXJ0TWFueU11dGFibHkpLFxuICAgIHJlbW92ZU9uZTogY3JlYXRlU3RhdGVPcGVyYXRvcihyZW1vdmVPbmVNdXRhYmx5KSxcbiAgICByZW1vdmVNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHJlbW92ZU1hbnlNdXRhYmx5KVxuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVTb3J0ZWRTdGF0ZUFkYXB0ZXIoc2VsZWN0SWQsIHNvcnQpIHtcbiAgdmFyIF9jcmVhdGVVbnNvcnRlZFN0YXRlQSA9IGNyZWF0ZVVuc29ydGVkU3RhdGVBZGFwdGVyKHNlbGVjdElkKSxcbiAgICAgIHJlbW92ZU9uZSA9IF9jcmVhdGVVbnNvcnRlZFN0YXRlQS5yZW1vdmVPbmUsXG4gICAgICByZW1vdmVNYW55ID0gX2NyZWF0ZVVuc29ydGVkU3RhdGVBLnJlbW92ZU1hbnksXG4gICAgICByZW1vdmVBbGwgPSBfY3JlYXRlVW5zb3J0ZWRTdGF0ZUEucmVtb3ZlQWxsO1xuXG4gIGZ1bmN0aW9uIGFkZE9uZU11dGFibHkoZW50aXR5LCBzdGF0ZSkge1xuICAgIHJldHVybiBhZGRNYW55TXV0YWJseShbZW50aXR5XSwgc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkTWFueU11dGFibHkobmV3TW9kZWxzLCBzdGF0ZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShuZXdNb2RlbHMpKSB7XG4gICAgICBuZXdNb2RlbHMgPSBPYmplY3QudmFsdWVzKG5ld01vZGVscyk7XG4gICAgfVxuXG4gICAgdmFyIG1vZGVscyA9IG5ld01vZGVscy5maWx0ZXIoZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgICByZXR1cm4gIShzZWxlY3RJZFZhbHVlKG1vZGVsLCBzZWxlY3RJZCkgaW4gc3RhdGUuZW50aXRpZXMpO1xuICAgIH0pO1xuXG4gICAgaWYgKG1vZGVscy5sZW5ndGggIT09IDApIHtcbiAgICAgIG1lcmdlKG1vZGVscywgc3RhdGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEFsbE11dGFibHkobW9kZWxzLCBzdGF0ZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShtb2RlbHMpKSB7XG4gICAgICBtb2RlbHMgPSBPYmplY3QudmFsdWVzKG1vZGVscyk7XG4gICAgfVxuXG4gICAgc3RhdGUuZW50aXRpZXMgPSB7fTtcbiAgICBzdGF0ZS5pZHMgPSBbXTtcbiAgICBhZGRNYW55TXV0YWJseShtb2RlbHMsIHN0YXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZU9uZU11dGFibHkodXBkYXRlLCBzdGF0ZSkge1xuICAgIHJldHVybiB1cGRhdGVNYW55TXV0YWJseShbdXBkYXRlXSwgc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gdGFrZVVwZGF0ZWRNb2RlbChtb2RlbHMsIHVwZGF0ZSwgc3RhdGUpIHtcbiAgICBpZiAoISh1cGRhdGUuaWQgaW4gc3RhdGUuZW50aXRpZXMpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIG9yaWdpbmFsID0gc3RhdGUuZW50aXRpZXNbdXBkYXRlLmlkXTtcbiAgICB2YXIgdXBkYXRlZCA9IE9iamVjdC5hc3NpZ24oe30sIG9yaWdpbmFsLCB1cGRhdGUuY2hhbmdlcyk7XG4gICAgdmFyIG5ld0tleSA9IHNlbGVjdElkVmFsdWUodXBkYXRlZCwgc2VsZWN0SWQpO1xuICAgIGRlbGV0ZSBzdGF0ZS5lbnRpdGllc1t1cGRhdGUuaWRdO1xuICAgIG1vZGVscy5wdXNoKHVwZGF0ZWQpO1xuICAgIHJldHVybiBuZXdLZXkgIT09IHVwZGF0ZS5pZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZU1hbnlNdXRhYmx5KHVwZGF0ZXMsIHN0YXRlKSB7XG4gICAgdmFyIG1vZGVscyA9IFtdO1xuICAgIHVwZGF0ZXMuZm9yRWFjaChmdW5jdGlvbiAodXBkYXRlKSB7XG4gICAgICByZXR1cm4gdGFrZVVwZGF0ZWRNb2RlbChtb2RlbHMsIHVwZGF0ZSwgc3RhdGUpO1xuICAgIH0pO1xuXG4gICAgaWYgKG1vZGVscy5sZW5ndGggIT09IDApIHtcbiAgICAgIG1lcmdlKG1vZGVscywgc3RhdGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHVwc2VydE9uZU11dGFibHkoZW50aXR5LCBzdGF0ZSkge1xuICAgIHJldHVybiB1cHNlcnRNYW55TXV0YWJseShbZW50aXR5XSwgc3RhdGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBzZXJ0TWFueU11dGFibHkoZW50aXRpZXMsIHN0YXRlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGVudGl0aWVzKSkge1xuICAgICAgZW50aXRpZXMgPSBPYmplY3QudmFsdWVzKGVudGl0aWVzKTtcbiAgICB9XG5cbiAgICB2YXIgYWRkZWQgPSBbXTtcbiAgICB2YXIgdXBkYXRlZCA9IFtdO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gZW50aXRpZXMsIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheShfaXRlcmF0b3IpLCBfaSA9IDAsIF9pdGVyYXRvciA9IF9pc0FycmF5ID8gX2l0ZXJhdG9yIDogX2l0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XG4gICAgICB2YXIgX3JlZjtcblxuICAgICAgaWYgKF9pc0FycmF5KSB7XG4gICAgICAgIGlmIChfaSA+PSBfaXRlcmF0b3IubGVuZ3RoKSBicmVhaztcbiAgICAgICAgX3JlZiA9IF9pdGVyYXRvcltfaSsrXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9pID0gX2l0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKF9pLmRvbmUpIGJyZWFrO1xuICAgICAgICBfcmVmID0gX2kudmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBlbnRpdHkgPSBfcmVmO1xuICAgICAgdmFyIGlkID0gc2VsZWN0SWRWYWx1ZShlbnRpdHksIHNlbGVjdElkKTtcblxuICAgICAgaWYgKGlkIGluIHN0YXRlLmVudGl0aWVzKSB7XG4gICAgICAgIHVwZGF0ZWQucHVzaCh7XG4gICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgIGNoYW5nZXM6IGVudGl0eVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFkZGVkLnB1c2goZW50aXR5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVNYW55TXV0YWJseSh1cGRhdGVkLCBzdGF0ZSk7XG4gICAgYWRkTWFueU11dGFibHkoYWRkZWQsIHN0YXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFyZUFycmF5c0VxdWFsKGEsIGIpIHtcbiAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aCAmJiBpIDwgYi5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGFbaV0gPT09IGJbaV0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1lcmdlKG1vZGVscywgc3RhdGUpIHtcbiAgICBtb2RlbHMuc29ydChzb3J0KTsgLy8gSW5zZXJ0L292ZXJ3cml0ZSBhbGwgbmV3L3VwZGF0ZWRcblxuICAgIG1vZGVscy5mb3JFYWNoKGZ1bmN0aW9uIChtb2RlbCkge1xuICAgICAgc3RhdGUuZW50aXRpZXNbc2VsZWN0SWQobW9kZWwpXSA9IG1vZGVsO1xuICAgIH0pO1xuICAgIHZhciBhbGxFbnRpdGllcyA9IE9iamVjdC52YWx1ZXMoc3RhdGUuZW50aXRpZXMpO1xuICAgIGFsbEVudGl0aWVzLnNvcnQoc29ydCk7XG4gICAgdmFyIG5ld1NvcnRlZElkcyA9IGFsbEVudGl0aWVzLm1hcChzZWxlY3RJZCk7XG4gICAgdmFyIGlkcyA9IHN0YXRlLmlkcztcblxuICAgIGlmICghYXJlQXJyYXlzRXF1YWwoaWRzLCBuZXdTb3J0ZWRJZHMpKSB7XG4gICAgICBzdGF0ZS5pZHMgPSBuZXdTb3J0ZWRJZHM7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByZW1vdmVPbmU6IHJlbW92ZU9uZSxcbiAgICByZW1vdmVNYW55OiByZW1vdmVNYW55LFxuICAgIHJlbW92ZUFsbDogcmVtb3ZlQWxsLFxuICAgIGFkZE9uZTogY3JlYXRlU3RhdGVPcGVyYXRvcihhZGRPbmVNdXRhYmx5KSxcbiAgICB1cGRhdGVPbmU6IGNyZWF0ZVN0YXRlT3BlcmF0b3IodXBkYXRlT25lTXV0YWJseSksXG4gICAgdXBzZXJ0T25lOiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwc2VydE9uZU11dGFibHkpLFxuICAgIHNldEFsbDogY3JlYXRlU3RhdGVPcGVyYXRvcihzZXRBbGxNdXRhYmx5KSxcbiAgICBhZGRNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKGFkZE1hbnlNdXRhYmx5KSxcbiAgICB1cGRhdGVNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwZGF0ZU1hbnlNdXRhYmx5KSxcbiAgICB1cHNlcnRNYW55OiBjcmVhdGVTdGF0ZU9wZXJhdG9yKHVwc2VydE1hbnlNdXRhYmx5KVxuICB9O1xufVxuXG4vKipcclxuICpcclxuICogQHBhcmFtIG9wdGlvbnNcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cblxuZnVuY3Rpb24gY3JlYXRlRW50aXR5QWRhcHRlcihvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zID09PSB2b2lkIDApIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICB2YXIgX3NvcnRDb21wYXJlciRzZWxlY3RJID0gX2V4dGVuZHMoe1xuICAgIHNvcnRDb21wYXJlcjogZmFsc2UsXG4gICAgc2VsZWN0SWQ6IGZ1bmN0aW9uIHNlbGVjdElkKGluc3RhbmNlKSB7XG4gICAgICByZXR1cm4gaW5zdGFuY2UuaWQ7XG4gICAgfVxuICB9LCBvcHRpb25zKSxcbiAgICAgIHNlbGVjdElkID0gX3NvcnRDb21wYXJlciRzZWxlY3RJLnNlbGVjdElkLFxuICAgICAgc29ydENvbXBhcmVyID0gX3NvcnRDb21wYXJlciRzZWxlY3RJLnNvcnRDb21wYXJlcjtcblxuICB2YXIgc3RhdGVGYWN0b3J5ID0gY3JlYXRlSW5pdGlhbFN0YXRlRmFjdG9yeSgpO1xuICB2YXIgc2VsZWN0b3JzRmFjdG9yeSA9IGNyZWF0ZVNlbGVjdG9yc0ZhY3RvcnkoKTtcbiAgdmFyIHN0YXRlQWRhcHRlciA9IHNvcnRDb21wYXJlciA/IGNyZWF0ZVNvcnRlZFN0YXRlQWRhcHRlcihzZWxlY3RJZCwgc29ydENvbXBhcmVyKSA6IGNyZWF0ZVVuc29ydGVkU3RhdGVBZGFwdGVyKHNlbGVjdElkKTtcbiAgcmV0dXJuIF9leHRlbmRzKHtcbiAgICBzZWxlY3RJZDogc2VsZWN0SWQsXG4gICAgc29ydENvbXBhcmVyOiBzb3J0Q29tcGFyZXJcbiAgfSwgc3RhdGVGYWN0b3J5LCB7fSwgc2VsZWN0b3JzRmFjdG9yeSwge30sIHN0YXRlQWRhcHRlcik7XG59XG5cbi8vIEEgdHlwZSBvZiBwcm9taXNlLWxpa2UgdGhhdCByZXNvbHZlcyBzeW5jaHJvbm91c2x5IGFuZCBzdXBwb3J0cyBvbmx5IG9uZSBvYnNlcnZlclxuXG5jb25zdCBfaXRlcmF0b3JTeW1ib2wgPSAvKiNfX1BVUkVfXyovIHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgPyAoU3ltYm9sLml0ZXJhdG9yIHx8IChTeW1ib2wuaXRlcmF0b3IgPSBTeW1ib2woXCJTeW1ib2wuaXRlcmF0b3JcIikpKSA6IFwiQEBpdGVyYXRvclwiO1xuXG5jb25zdCBfYXN5bmNJdGVyYXRvclN5bWJvbCA9IC8qI19fUFVSRV9fKi8gdHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiA/IChTeW1ib2wuYXN5bmNJdGVyYXRvciB8fCAoU3ltYm9sLmFzeW5jSXRlcmF0b3IgPSBTeW1ib2woXCJTeW1ib2wuYXN5bmNJdGVyYXRvclwiKSkpIDogXCJAQGFzeW5jSXRlcmF0b3JcIjtcblxuLy8gQXN5bmNocm9ub3VzbHkgY2FsbCBhIGZ1bmN0aW9uIGFuZCBzZW5kIGVycm9ycyB0byByZWNvdmVyeSBjb250aW51YXRpb25cbmZ1bmN0aW9uIF9jYXRjaChib2R5LCByZWNvdmVyKSB7XG5cdHRyeSB7XG5cdFx0dmFyIHJlc3VsdCA9IGJvZHkoKTtcblx0fSBjYXRjaChlKSB7XG5cdFx0cmV0dXJuIHJlY292ZXIoZSk7XG5cdH1cblx0aWYgKHJlc3VsdCAmJiByZXN1bHQudGhlbikge1xuXHRcdHJldHVybiByZXN1bHQudGhlbih2b2lkIDAsIHJlY292ZXIpO1xuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbi8vIEJvcnJvd2VkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2FpL25hbm9pZC9ibG9iLzMuMC4yL25vbi1zZWN1cmUvaW5kZXguanNcbi8vIFRoaXMgYWxwaGFiZXQgdXNlcyBgQS1aYS16MC05Xy1gIHN5bWJvbHMuIEEgZ2VuZXRpYyBhbGdvcml0aG0gaGVscGVkXG4vLyBvcHRpbWl6ZSB0aGUgZ3ppcCBjb21wcmVzc2lvbiBmb3IgdGhpcyBhbHBoYWJldC5cbnZhciB1cmxBbHBoYWJldCA9ICdNb2R1bGVTeW1iaGFzT3duUHItMDEyMzQ1Njc4OUFCQ0RFRkdITlJWZmdjdGlVdnpfS3FZVEprTHhwWlhJalFXJztcbi8qKlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG52YXIgbmFub2lkID0gZnVuY3Rpb24gbmFub2lkKHNpemUpIHtcbiAgaWYgKHNpemUgPT09IHZvaWQgMCkge1xuICAgIHNpemUgPSAyMTtcbiAgfVxuXG4gIHZhciBpZCA9ICcnOyAvLyBBIGNvbXBhY3QgYWx0ZXJuYXRpdmUgZm9yIGBmb3IgKHZhciBpID0gMDsgaSA8IHN0ZXA7IGkrKylgLlxuXG4gIHZhciBpID0gc2l6ZTtcblxuICB3aGlsZSAoaS0tKSB7XG4gICAgLy8gYHwgMGAgaXMgbW9yZSBjb21wYWN0IGFuZCBmYXN0ZXIgdGhhbiBgTWF0aC5mbG9vcigpYC5cbiAgICBpZCArPSB1cmxBbHBoYWJldFtNYXRoLnJhbmRvbSgpICogNjQgfCAwXTtcbiAgfVxuXG4gIHJldHVybiBpZDtcbn07XG5cbnZhciBjb21tb25Qcm9wZXJ0aWVzID0gWyduYW1lJywgJ21lc3NhZ2UnLCAnc3RhY2snLCAnY29kZSddO1xuXG52YXIgUmVqZWN0V2l0aFZhbHVlID0gZnVuY3Rpb24gUmVqZWN0V2l0aFZhbHVlKHBheWxvYWQpIHtcbiAgdGhpcy5wYXlsb2FkID0gcGF5bG9hZDtcbiAgdGhpcy5uYW1lID0gJ1JlamVjdFdpdGhWYWx1ZSc7XG4gIHRoaXMubWVzc2FnZSA9ICdSZWplY3RlZCc7XG59OyAvLyBSZXdvcmtlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9zaW5kcmVzb3JodXMvc2VyaWFsaXplLWVycm9yXG5cblxudmFyIG1pbmlTZXJpYWxpemVFcnJvciA9IGZ1bmN0aW9uIG1pbmlTZXJpYWxpemVFcnJvcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCkge1xuICAgIHZhciBzaW1wbGVFcnJvciA9IHt9O1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gY29tbW9uUHJvcGVydGllcywgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5KF9pdGVyYXRvciksIF9pID0gMCwgX2l0ZXJhdG9yID0gX2lzQXJyYXkgPyBfaXRlcmF0b3IgOiBfaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSgpOzspIHtcbiAgICAgIHZhciBfcmVmO1xuXG4gICAgICBpZiAoX2lzQXJyYXkpIHtcbiAgICAgICAgaWYgKF9pID49IF9pdGVyYXRvci5sZW5ndGgpIGJyZWFrO1xuICAgICAgICBfcmVmID0gX2l0ZXJhdG9yW19pKytdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX2kgPSBfaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICBpZiAoX2kuZG9uZSkgYnJlYWs7XG4gICAgICAgIF9yZWYgPSBfaS52YWx1ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIHByb3BlcnR5ID0gX3JlZjtcblxuICAgICAgaWYgKHR5cGVvZiB2YWx1ZVtwcm9wZXJ0eV0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHNpbXBsZUVycm9yW3Byb3BlcnR5XSA9IHZhbHVlW3Byb3BlcnR5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2ltcGxlRXJyb3I7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG1lc3NhZ2U6IFN0cmluZyh2YWx1ZSlcbiAgfTtcbn07XG4vKipcclxuICpcclxuICogQHBhcmFtIHR5cGVQcmVmaXhcclxuICogQHBhcmFtIHBheWxvYWRDcmVhdG9yXHJcbiAqIEBwYXJhbSBvcHRpb25zXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZUFzeW5jVGh1bmsodHlwZVByZWZpeCwgcGF5bG9hZENyZWF0b3IsIG9wdGlvbnMpIHtcbiAgdmFyIGZ1bGZpbGxlZCA9IGNyZWF0ZUFjdGlvbih0eXBlUHJlZml4ICsgJy9mdWxmaWxsZWQnLCBmdW5jdGlvbiAocmVzdWx0LCByZXF1ZXN0SWQsIGFyZykge1xuICAgIHJldHVybiB7XG4gICAgICBwYXlsb2FkOiByZXN1bHQsXG4gICAgICBtZXRhOiB7XG4gICAgICAgIGFyZzogYXJnLFxuICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3RJZCxcbiAgICAgICAgcmVxdWVzdFN0YXR1czogJ2Z1bGZpbGxlZCdcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbiAgdmFyIHBlbmRpbmcgPSBjcmVhdGVBY3Rpb24odHlwZVByZWZpeCArICcvcGVuZGluZycsIGZ1bmN0aW9uIChyZXF1ZXN0SWQsIGFyZykge1xuICAgIHJldHVybiB7XG4gICAgICBwYXlsb2FkOiB1bmRlZmluZWQsXG4gICAgICBtZXRhOiB7XG4gICAgICAgIGFyZzogYXJnLFxuICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3RJZCxcbiAgICAgICAgcmVxdWVzdFN0YXR1czogJ3BlbmRpbmcnXG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG4gIHZhciByZWplY3RlZCA9IGNyZWF0ZUFjdGlvbih0eXBlUHJlZml4ICsgJy9yZWplY3RlZCcsIGZ1bmN0aW9uIChlcnJvciwgcmVxdWVzdElkLCBhcmcpIHtcbiAgICB2YXIgcmVqZWN0ZWRXaXRoVmFsdWUgPSBlcnJvciBpbnN0YW5jZW9mIFJlamVjdFdpdGhWYWx1ZTtcbiAgICB2YXIgYWJvcnRlZCA9ICEhZXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InO1xuICAgIHZhciBjb25kaXRpb24gPSAhIWVycm9yICYmIGVycm9yLm5hbWUgPT09ICdDb25kaXRpb25FcnJvcic7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBheWxvYWQ6IGVycm9yIGluc3RhbmNlb2YgUmVqZWN0V2l0aFZhbHVlID8gZXJyb3IucGF5bG9hZCA6IHVuZGVmaW5lZCxcbiAgICAgIGVycm9yOiAob3B0aW9ucyAmJiBvcHRpb25zLnNlcmlhbGl6ZUVycm9yIHx8IG1pbmlTZXJpYWxpemVFcnJvcikoZXJyb3IgfHwgJ1JlamVjdGVkJyksXG4gICAgICBtZXRhOiB7XG4gICAgICAgIGFyZzogYXJnLFxuICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3RJZCxcbiAgICAgICAgcmVqZWN0ZWRXaXRoVmFsdWU6IHJlamVjdGVkV2l0aFZhbHVlLFxuICAgICAgICByZXF1ZXN0U3RhdHVzOiAncmVqZWN0ZWQnLFxuICAgICAgICBhYm9ydGVkOiBhYm9ydGVkLFxuICAgICAgICBjb25kaXRpb246IGNvbmRpdGlvblxuICAgICAgfVxuICAgIH07XG4gIH0pO1xuICB2YXIgZGlzcGxheWVkV2FybmluZyA9IGZhbHNlO1xuICB2YXIgQUMgPSB0eXBlb2YgQWJvcnRDb250cm9sbGVyICE9PSAndW5kZWZpbmVkJyA/IEFib3J0Q29udHJvbGxlciA6XG4gIC8qI19fUFVSRV9fKi9cbiAgZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIF9jbGFzcygpIHtcbiAgICAgIHRoaXMuc2lnbmFsID0ge1xuICAgICAgICBhYm9ydGVkOiBmYWxzZSxcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcigpIHt9LFxuICAgICAgICBkaXNwYXRjaEV2ZW50OiBmdW5jdGlvbiBkaXNwYXRjaEV2ZW50KCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgb25hYm9ydDogZnVuY3Rpb24gb25hYm9ydCgpIHt9LFxuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyOiBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKCkge31cbiAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIF9wcm90byA9IF9jbGFzcy5wcm90b3R5cGU7XG5cbiAgICBfcHJvdG8uYWJvcnQgPSBmdW5jdGlvbiBhYm9ydCgpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmICghZGlzcGxheWVkV2FybmluZykge1xuICAgICAgICAgIGRpc3BsYXllZFdhcm5pbmcgPSB0cnVlO1xuICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIlRoaXMgcGxhdGZvcm0gZG9lcyBub3QgaW1wbGVtZW50IEFib3J0Q29udHJvbGxlci4gXFxuSWYgeW91IHdhbnQgdG8gdXNlIHRoZSBBYm9ydENvbnRyb2xsZXIgdG8gcmVhY3QgdG8gYGFib3J0YCBldmVudHMsIHBsZWFzZSBjb25zaWRlciBpbXBvcnRpbmcgYSBwb2x5ZmlsbCBsaWtlICdhYm9ydGNvbnRyb2xsZXItcG9seWZpbGwvZGlzdC9hYm9ydGNvbnRyb2xsZXItcG9seWZpbGwtb25seScuXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBfY2xhc3M7XG4gIH0oKTtcblxuICBmdW5jdGlvbiBhY3Rpb25DcmVhdG9yKGFyZykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoZGlzcGF0Y2gsIGdldFN0YXRlLCBleHRyYSkge1xuICAgICAgdmFyIHJlcXVlc3RJZCA9IG5hbm9pZCgpO1xuICAgICAgdmFyIGFib3J0Q29udHJvbGxlciA9IG5ldyBBQygpO1xuICAgICAgdmFyIGFib3J0UmVhc29uO1xuICAgICAgdmFyIGFib3J0ZWRQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKF8sIHJlamVjdCkge1xuICAgICAgICByZXR1cm4gYWJvcnRDb250cm9sbGVyLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KHtcbiAgICAgICAgICAgIG5hbWU6ICdBYm9ydEVycm9yJyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGFib3J0UmVhc29uIHx8ICdBYm9ydGVkJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgdmFyIHN0YXJ0ZWQgPSBmYWxzZTtcblxuICAgICAgZnVuY3Rpb24gYWJvcnQocmVhc29uKSB7XG4gICAgICAgIGlmIChzdGFydGVkKSB7XG4gICAgICAgICAgYWJvcnRSZWFzb24gPSByZWFzb247XG4gICAgICAgICAgYWJvcnRDb250cm9sbGVyLmFib3J0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIHByb21pc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIF90ZW1wMyA9IGZ1bmN0aW9uIF90ZW1wMyhfcmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoX2V4aXQyKSByZXR1cm4gX3Jlc3VsdDtcbiAgICAgICAgICAgIC8vIFdlIGRpc3BhdGNoIHRoZSByZXN1bHQgYWN0aW9uIF9hZnRlcl8gdGhlIGNhdGNoLCB0byBhdm9pZCBoYXZpbmcgYW55IGVycm9yc1xuICAgICAgICAgICAgLy8gaGVyZSBnZXQgc3dhbGxvd2VkIGJ5IHRoZSB0cnkvY2F0Y2ggYmxvY2ssXG4gICAgICAgICAgICAvLyBwZXIgaHR0cHM6Ly90d2l0dGVyLmNvbS9kYW5fYWJyYW1vdi9zdGF0dXMvNzcwOTE0MjIxNjM4OTQyNzIwXG4gICAgICAgICAgICAvLyBhbmQgaHR0cHM6Ly9yZWR1eC10b29sa2l0LmpzLm9yZy90dXRvcmlhbHMvYWR2YW5jZWQtdHV0b3JpYWwjYXN5bmMtZXJyb3ItaGFuZGxpbmctbG9naWMtaW4tdGh1bmtzXG4gICAgICAgICAgICB2YXIgc2tpcERpc3BhdGNoID0gb3B0aW9ucyAmJiAhb3B0aW9ucy5kaXNwYXRjaENvbmRpdGlvblJlamVjdGlvbiAmJiByZWplY3RlZC5tYXRjaChmaW5hbEFjdGlvbikgJiYgZmluYWxBY3Rpb24ubWV0YS5jb25kaXRpb247XG5cbiAgICAgICAgICAgIGlmICghc2tpcERpc3BhdGNoKSB7XG4gICAgICAgICAgICAgIGRpc3BhdGNoKGZpbmFsQWN0aW9uKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZpbmFsQWN0aW9uO1xuICAgICAgICAgIH07XG5cbiAgICAgICAgICB2YXIgX2V4aXQyID0gZmFsc2U7XG4gICAgICAgICAgdmFyIGZpbmFsQWN0aW9uO1xuXG4gICAgICAgICAgdmFyIF90ZW1wNCA9IF9jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmNvbmRpdGlvbiAmJiBvcHRpb25zLmNvbmRpdGlvbihhcmcsIHtcbiAgICAgICAgICAgICAgZ2V0U3RhdGU6IGdldFN0YXRlLFxuICAgICAgICAgICAgICBleHRyYTogZXh0cmFcbiAgICAgICAgICAgIH0pID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdGhyb3ctbGl0ZXJhbFxuICAgICAgICAgICAgICB0aHJvdyB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ0NvbmRpdGlvbkVycm9yJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQWJvcnRlZCBkdWUgdG8gY29uZGl0aW9uIGNhbGxiYWNrIHJldHVybmluZyBmYWxzZS4nXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgZGlzcGF0Y2gocGVuZGluZyhyZXF1ZXN0SWQsIGFyZykpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShQcm9taXNlLnJhY2UoW2Fib3J0ZWRQcm9taXNlLCBQcm9taXNlLnJlc29sdmUocGF5bG9hZENyZWF0b3IoYXJnLCB7XG4gICAgICAgICAgICAgIGRpc3BhdGNoOiBkaXNwYXRjaCxcbiAgICAgICAgICAgICAgZ2V0U3RhdGU6IGdldFN0YXRlLFxuICAgICAgICAgICAgICBleHRyYTogZXh0cmEsXG4gICAgICAgICAgICAgIHJlcXVlc3RJZDogcmVxdWVzdElkLFxuICAgICAgICAgICAgICBzaWduYWw6IGFib3J0Q29udHJvbGxlci5zaWduYWwsXG4gICAgICAgICAgICAgIHJlamVjdFdpdGhWYWx1ZTogZnVuY3Rpb24gcmVqZWN0V2l0aFZhbHVlKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBSZWplY3RXaXRoVmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSZWplY3RXaXRoVmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0ZWQocmVzdWx0LCByZXF1ZXN0SWQsIGFyZyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gZnVsZmlsbGVkKHJlc3VsdCwgcmVxdWVzdElkLCBhcmcpO1xuICAgICAgICAgICAgfSldKSkudGhlbihmdW5jdGlvbiAoX1Byb21pc2UkcmFjZSkge1xuICAgICAgICAgICAgICBmaW5hbEFjdGlvbiA9IF9Qcm9taXNlJHJhY2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICBmaW5hbEFjdGlvbiA9IHJlamVjdGVkKGVyciwgcmVxdWVzdElkLCBhcmcpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShfdGVtcDQgJiYgX3RlbXA0LnRoZW4gPyBfdGVtcDQudGhlbihfdGVtcDMpIDogX3RlbXAzKF90ZW1wNCkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgICB9KCk7XG5cbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHByb21pc2UsIHtcbiAgICAgICAgYWJvcnQ6IGFib3J0LFxuICAgICAgICByZXF1ZXN0SWQ6IHJlcXVlc3RJZCxcbiAgICAgICAgYXJnOiBhcmdcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmFzc2lnbihhY3Rpb25DcmVhdG9yLCB7XG4gICAgcGVuZGluZzogcGVuZGluZyxcbiAgICByZWplY3RlZDogcmVqZWN0ZWQsXG4gICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXG4gICAgdHlwZVByZWZpeDogdHlwZVByZWZpeFxuICB9KTtcbn1cbi8qKlxyXG4gKiBAcHVibGljXHJcbiAqL1xuXG5mdW5jdGlvbiB1bndyYXBSZXN1bHQoYWN0aW9uKSB7XG4gIGlmIChhY3Rpb24ubWV0YSAmJiBhY3Rpb24ubWV0YS5yZWplY3RlZFdpdGhWYWx1ZSkge1xuICAgIHRocm93IGFjdGlvbi5wYXlsb2FkO1xuICB9XG5cbiAgaWYgKGFjdGlvbi5lcnJvcikge1xuICAgIHRocm93IGFjdGlvbi5lcnJvcjtcbiAgfVxuXG4gIHJldHVybiBhY3Rpb24ucGF5bG9hZDtcbn1cblxudmFyIGhhc01hdGNoRnVuY3Rpb24gPSBmdW5jdGlvbiBoYXNNYXRjaEZ1bmN0aW9uKHYpIHtcbiAgcmV0dXJuIHYgJiYgdHlwZW9mIHYubWF0Y2ggPT09ICdmdW5jdGlvbic7XG59O1xuXG52YXIgbWF0Y2hlcyA9IGZ1bmN0aW9uIG1hdGNoZXMobWF0Y2hlciwgYWN0aW9uKSB7XG4gIGlmIChoYXNNYXRjaEZ1bmN0aW9uKG1hdGNoZXIpKSB7XG4gICAgcmV0dXJuIG1hdGNoZXIubWF0Y2goYWN0aW9uKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbWF0Y2hlcihhY3Rpb24pO1xuICB9XG59O1xuLyoqXHJcbiAqIEEgaGlnaGVyLW9yZGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgbWF5IGJlIHVzZWQgdG8gY2hlY2tcclxuICogd2hldGhlciBhbiBhY3Rpb24gbWF0Y2hlcyBhbnkgb25lIG9mIHRoZSBzdXBwbGllZCB0eXBlIGd1YXJkcyBvciBhY3Rpb25cclxuICogY3JlYXRvcnMuXHJcbiAqXHJcbiAqIEBwYXJhbSBtYXRjaGVycyBUaGUgdHlwZSBndWFyZHMgb3IgYWN0aW9uIGNyZWF0b3JzIHRvIG1hdGNoIGFnYWluc3QuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cblxuZnVuY3Rpb24gaXNBbnlPZigpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1hdGNoZXJzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIG1hdGNoZXJzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICByZXR1cm4gbWF0Y2hlcnMuc29tZShmdW5jdGlvbiAobWF0Y2hlcikge1xuICAgICAgcmV0dXJuIG1hdGNoZXMobWF0Y2hlciwgYWN0aW9uKTtcbiAgICB9KTtcbiAgfTtcbn1cbi8qKlxyXG4gKiBBIGhpZ2hlci1vcmRlciBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBmdW5jdGlvbiB0aGF0IG1heSBiZSB1c2VkIHRvIGNoZWNrXHJcbiAqIHdoZXRoZXIgYW4gYWN0aW9uIG1hdGNoZXMgYWxsIG9mIHRoZSBzdXBwbGllZCB0eXBlIGd1YXJkcyBvciBhY3Rpb25cclxuICogY3JlYXRvcnMuXHJcbiAqXHJcbiAqIEBwYXJhbSBtYXRjaGVycyBUaGUgdHlwZSBndWFyZHMgb3IgYWN0aW9uIGNyZWF0b3JzIHRvIG1hdGNoIGFnYWluc3QuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXG5cbmZ1bmN0aW9uIGlzQWxsT2YoKSB7XG4gIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgbWF0Y2hlcnMgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICBtYXRjaGVyc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICByZXR1cm4gbWF0Y2hlcnMuZXZlcnkoZnVuY3Rpb24gKG1hdGNoZXIpIHtcbiAgICAgIHJldHVybiBtYXRjaGVzKG1hdGNoZXIsIGFjdGlvbik7XG4gICAgfSk7XG4gIH07XG59XG4vKipcclxuICogQHBhcmFtIGFjdGlvbiBBIHJlZHV4IGFjdGlvblxyXG4gKiBAcGFyYW0gdmFsaWRTdGF0dXMgQW4gYXJyYXkgb2YgdmFsaWQgbWV0YS5yZXF1ZXN0U3RhdHVzIHZhbHVlc1xyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXG5cbmZ1bmN0aW9uIGhhc0V4cGVjdGVkUmVxdWVzdE1ldGFkYXRhKGFjdGlvbiwgdmFsaWRTdGF0dXMpIHtcbiAgaWYgKCFhY3Rpb24gfHwgIWFjdGlvbi5tZXRhKSByZXR1cm4gZmFsc2U7XG4gIHZhciBoYXNWYWxpZFJlcXVlc3RJZCA9IHR5cGVvZiBhY3Rpb24ubWV0YS5yZXF1ZXN0SWQgPT09ICdzdHJpbmcnO1xuICB2YXIgaGFzVmFsaWRSZXF1ZXN0U3RhdHVzID0gdmFsaWRTdGF0dXMuaW5kZXhPZihhY3Rpb24ubWV0YS5yZXF1ZXN0U3RhdHVzKSA+IC0xO1xuICByZXR1cm4gaGFzVmFsaWRSZXF1ZXN0SWQgJiYgaGFzVmFsaWRSZXF1ZXN0U3RhdHVzO1xufVxuXG5mdW5jdGlvbiBpc0FzeW5jVGh1bmtBcnJheShhKSB7XG4gIHJldHVybiB0eXBlb2YgYVswXSA9PT0gJ2Z1bmN0aW9uJyAmJiAncGVuZGluZycgaW4gYVswXSAmJiAnZnVsZmlsbGVkJyBpbiBhWzBdICYmICdyZWplY3RlZCcgaW4gYVswXTtcbn1cblxuZnVuY3Rpb24gaXNQZW5kaW5nKCkge1xuICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGFzeW5jVGh1bmtzID0gbmV3IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgYXN5bmNUaHVua3NbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgfVxuXG4gIGlmIChhc3luY1RodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgcmV0dXJuIGhhc0V4cGVjdGVkUmVxdWVzdE1ldGFkYXRhKGFjdGlvbiwgWydwZW5kaW5nJ10pO1xuICAgIH07XG4gIH1cblxuICBpZiAoIWlzQXN5bmNUaHVua0FycmF5KGFzeW5jVGh1bmtzKSkge1xuICAgIHJldHVybiBpc1BlbmRpbmcoKShhc3luY1RodW5rc1swXSk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgIC8vIG5vdGU6IHRoaXMgdHlwZSB3aWxsIGJlIGNvcnJlY3QgYmVjYXVzZSB3ZSBoYXZlIGF0IGxlYXN0IDEgYXN5bmNUaHVua1xuICAgIHZhciBtYXRjaGVycyA9IGFzeW5jVGh1bmtzLm1hcChmdW5jdGlvbiAoYXN5bmNUaHVuaykge1xuICAgICAgcmV0dXJuIGFzeW5jVGh1bmsucGVuZGluZztcbiAgICB9KTtcbiAgICB2YXIgY29tYmluZWRNYXRjaGVyID0gaXNBbnlPZi5hcHBseSh2b2lkIDAsIG1hdGNoZXJzKTtcbiAgICByZXR1cm4gY29tYmluZWRNYXRjaGVyKGFjdGlvbik7XG4gIH07XG59XG5mdW5jdGlvbiBpc1JlamVjdGVkKCkge1xuICBmb3IgKHZhciBfbGVuNCA9IGFyZ3VtZW50cy5sZW5ndGgsIGFzeW5jVGh1bmtzID0gbmV3IEFycmF5KF9sZW40KSwgX2tleTQgPSAwOyBfa2V5NCA8IF9sZW40OyBfa2V5NCsrKSB7XG4gICAgYXN5bmNUaHVua3NbX2tleTRdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgfVxuXG4gIGlmIChhc3luY1RodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgcmV0dXJuIGhhc0V4cGVjdGVkUmVxdWVzdE1ldGFkYXRhKGFjdGlvbiwgWydyZWplY3RlZCddKTtcbiAgICB9O1xuICB9XG5cbiAgaWYgKCFpc0FzeW5jVGh1bmtBcnJheShhc3luY1RodW5rcykpIHtcbiAgICByZXR1cm4gaXNSZWplY3RlZCgpKGFzeW5jVGh1bmtzWzBdKTtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgLy8gbm90ZTogdGhpcyB0eXBlIHdpbGwgYmUgY29ycmVjdCBiZWNhdXNlIHdlIGhhdmUgYXQgbGVhc3QgMSBhc3luY1RodW5rXG4gICAgdmFyIG1hdGNoZXJzID0gYXN5bmNUaHVua3MubWFwKGZ1bmN0aW9uIChhc3luY1RodW5rKSB7XG4gICAgICByZXR1cm4gYXN5bmNUaHVuay5yZWplY3RlZDtcbiAgICB9KTtcbiAgICB2YXIgY29tYmluZWRNYXRjaGVyID0gaXNBbnlPZi5hcHBseSh2b2lkIDAsIG1hdGNoZXJzKTtcbiAgICByZXR1cm4gY29tYmluZWRNYXRjaGVyKGFjdGlvbik7XG4gIH07XG59XG5mdW5jdGlvbiBpc1JlamVjdGVkV2l0aFZhbHVlKCkge1xuICBmb3IgKHZhciBfbGVuNSA9IGFyZ3VtZW50cy5sZW5ndGgsIGFzeW5jVGh1bmtzID0gbmV3IEFycmF5KF9sZW41KSwgX2tleTUgPSAwOyBfa2V5NSA8IF9sZW41OyBfa2V5NSsrKSB7XG4gICAgYXN5bmNUaHVua3NbX2tleTVdID0gYXJndW1lbnRzW19rZXk1XTtcbiAgfVxuXG4gIHZhciBoYXNGbGFnID0gZnVuY3Rpb24gaGFzRmxhZyhhY3Rpb24pIHtcbiAgICByZXR1cm4gYWN0aW9uICYmIGFjdGlvbi5tZXRhICYmIGFjdGlvbi5tZXRhLnJlamVjdGVkV2l0aFZhbHVlO1xuICB9O1xuXG4gIGlmIChhc3luY1RodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgdmFyIGNvbWJpbmVkTWF0Y2hlciA9IGlzQWxsT2YoaXNSZWplY3RlZC5hcHBseSh2b2lkIDAsIGFzeW5jVGh1bmtzKSwgaGFzRmxhZyk7XG4gICAgICByZXR1cm4gY29tYmluZWRNYXRjaGVyKGFjdGlvbik7XG4gICAgfTtcbiAgfVxuXG4gIGlmICghaXNBc3luY1RodW5rQXJyYXkoYXN5bmNUaHVua3MpKSB7XG4gICAgcmV0dXJuIGlzUmVqZWN0ZWRXaXRoVmFsdWUoKShhc3luY1RodW5rc1swXSk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgIHZhciBjb21iaW5lZE1hdGNoZXIgPSBpc0FsbE9mKGlzUmVqZWN0ZWQuYXBwbHkodm9pZCAwLCBhc3luY1RodW5rcyksIGhhc0ZsYWcpO1xuICAgIHJldHVybiBjb21iaW5lZE1hdGNoZXIoYWN0aW9uKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIGlzRnVsZmlsbGVkKCkge1xuICBmb3IgKHZhciBfbGVuNiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFzeW5jVGh1bmtzID0gbmV3IEFycmF5KF9sZW42KSwgX2tleTYgPSAwOyBfa2V5NiA8IF9sZW42OyBfa2V5NisrKSB7XG4gICAgYXN5bmNUaHVua3NbX2tleTZdID0gYXJndW1lbnRzW19rZXk2XTtcbiAgfVxuXG4gIGlmIChhc3luY1RodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgcmV0dXJuIGhhc0V4cGVjdGVkUmVxdWVzdE1ldGFkYXRhKGFjdGlvbiwgWydmdWxmaWxsZWQnXSk7XG4gICAgfTtcbiAgfVxuXG4gIGlmICghaXNBc3luY1RodW5rQXJyYXkoYXN5bmNUaHVua3MpKSB7XG4gICAgcmV0dXJuIGlzRnVsZmlsbGVkKCkoYXN5bmNUaHVua3NbMF0pO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAvLyBub3RlOiB0aGlzIHR5cGUgd2lsbCBiZSBjb3JyZWN0IGJlY2F1c2Ugd2UgaGF2ZSBhdCBsZWFzdCAxIGFzeW5jVGh1bmtcbiAgICB2YXIgbWF0Y2hlcnMgPSBhc3luY1RodW5rcy5tYXAoZnVuY3Rpb24gKGFzeW5jVGh1bmspIHtcbiAgICAgIHJldHVybiBhc3luY1RodW5rLmZ1bGZpbGxlZDtcbiAgICB9KTtcbiAgICB2YXIgY29tYmluZWRNYXRjaGVyID0gaXNBbnlPZi5hcHBseSh2b2lkIDAsIG1hdGNoZXJzKTtcbiAgICByZXR1cm4gY29tYmluZWRNYXRjaGVyKGFjdGlvbik7XG4gIH07XG59XG5mdW5jdGlvbiBpc0FzeW5jVGh1bmtBY3Rpb24oKSB7XG4gIGZvciAodmFyIF9sZW43ID0gYXJndW1lbnRzLmxlbmd0aCwgYXN5bmNUaHVua3MgPSBuZXcgQXJyYXkoX2xlbjcpLCBfa2V5NyA9IDA7IF9rZXk3IDwgX2xlbjc7IF9rZXk3KyspIHtcbiAgICBhc3luY1RodW5rc1tfa2V5N10gPSBhcmd1bWVudHNbX2tleTddO1xuICB9XG5cbiAgaWYgKGFzeW5jVGh1bmtzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICByZXR1cm4gaGFzRXhwZWN0ZWRSZXF1ZXN0TWV0YWRhdGEoYWN0aW9uLCBbJ3BlbmRpbmcnLCAnZnVsZmlsbGVkJywgJ3JlamVjdGVkJ10pO1xuICAgIH07XG4gIH1cblxuICBpZiAoIWlzQXN5bmNUaHVua0FycmF5KGFzeW5jVGh1bmtzKSkge1xuICAgIHJldHVybiBpc0FzeW5jVGh1bmtBY3Rpb24oKShhc3luY1RodW5rc1swXSk7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgIC8vIG5vdGU6IHRoaXMgdHlwZSB3aWxsIGJlIGNvcnJlY3QgYmVjYXVzZSB3ZSBoYXZlIGF0IGxlYXN0IDEgYXN5bmNUaHVua1xuICAgIHZhciBtYXRjaGVycyA9IFtdO1xuXG4gICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gYXN5bmNUaHVua3MsIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheShfaXRlcmF0b3IpLCBfaSA9IDAsIF9pdGVyYXRvciA9IF9pc0FycmF5ID8gX2l0ZXJhdG9yIDogX2l0ZXJhdG9yW1N5bWJvbC5pdGVyYXRvcl0oKTs7KSB7XG4gICAgICB2YXIgX3JlZjtcblxuICAgICAgaWYgKF9pc0FycmF5KSB7XG4gICAgICAgIGlmIChfaSA+PSBfaXRlcmF0b3IubGVuZ3RoKSBicmVhaztcbiAgICAgICAgX3JlZiA9IF9pdGVyYXRvcltfaSsrXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9pID0gX2l0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgaWYgKF9pLmRvbmUpIGJyZWFrO1xuICAgICAgICBfcmVmID0gX2kudmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBhc3luY1RodW5rID0gX3JlZjtcbiAgICAgIG1hdGNoZXJzLnB1c2goYXN5bmNUaHVuay5wZW5kaW5nLCBhc3luY1RodW5rLnJlamVjdGVkLCBhc3luY1RodW5rLmZ1bGZpbGxlZCk7XG4gICAgfVxuXG4gICAgdmFyIGNvbWJpbmVkTWF0Y2hlciA9IGlzQW55T2YuYXBwbHkodm9pZCAwLCBtYXRjaGVycyk7XG4gICAgcmV0dXJuIGNvbWJpbmVkTWF0Y2hlcihhY3Rpb24pO1xuICB9O1xufVxuXG4vLyB3ZSBhc3N1bWUgUlRLIHdpbGwgYmUgdXNlZCB3aXRoIFJlYWN0IE5hdGl2ZSBhbmQgb3RoZXIgUHJveHktbGVzc1xuLy8gZW52aXJvbm1lbnRzLiAgSW4gYWRkaXRpb24sIHRoYXQncyBob3cgSW1tZXIgNCBiZWhhdmVkLCBhbmQgc2luY2Vcbi8vIHdlIHdhbnQgdG8gc2hpcCB0aGlzIGluIGFuIFJUSyBtaW5vciwgd2Ugc2hvdWxkIGtlZXAgdGhlIHNhbWUgYmVoYXZpb3IuXG5cbmVuYWJsZUVTNSgpO1xuXG5leHBvcnQgeyBNaWRkbGV3YXJlQXJyYXksIGNvbmZpZ3VyZVN0b3JlLCBjcmVhdGVBY3Rpb24sIGNyZWF0ZUFzeW5jVGh1bmssIGNyZWF0ZURyYWZ0U2FmZVNlbGVjdG9yLCBjcmVhdGVFbnRpdHlBZGFwdGVyLCBjcmVhdGVJbW11dGFibGVTdGF0ZUludmFyaWFudE1pZGRsZXdhcmUsIGNyZWF0ZVJlZHVjZXIsIGNyZWF0ZVNlcmlhbGl6YWJsZVN0YXRlSW52YXJpYW50TWlkZGxld2FyZSwgY3JlYXRlU2xpY2UsIGZpbmROb25TZXJpYWxpemFibGVWYWx1ZSwgZ2V0RGVmYXVsdE1pZGRsZXdhcmUsIGdldFR5cGUsIGlzQWxsT2YsIGlzQW55T2YsIGlzQXN5bmNUaHVua0FjdGlvbiwgaXNGdWxmaWxsZWQsIGlzSW1tdXRhYmxlRGVmYXVsdCwgaXNQZW5kaW5nLCBpc1BsYWluLCBpc1BsYWluT2JqZWN0LCBpc1JlamVjdGVkLCBpc1JlamVjdGVkV2l0aFZhbHVlLCBuYW5vaWQsIHVud3JhcFJlc3VsdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVkdXgtdG9vbGtpdC5lc20uanMubWFwXG4iLCIvKiFcbiAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG4gKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXG4gKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc3RlZmFucGVubmVyL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG4gKiBAdmVyc2lvbiAgIDMuMy4xXG4gKi9cblxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgICAoZ2xvYmFsLkVTNlByb21pc2UgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIG9iamVjdE9yRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG59XG5cbnZhciBfaXNBcnJheSA9IHVuZGVmaW5lZDtcbmlmICghQXJyYXkuaXNBcnJheSkge1xuICBfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgfTtcbn0gZWxzZSB7XG4gIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbn1cblxudmFyIGlzQXJyYXkgPSBfaXNBcnJheTtcblxudmFyIGxlbiA9IDA7XG52YXIgdmVydHhOZXh0ID0gdW5kZWZpbmVkO1xudmFyIGN1c3RvbVNjaGVkdWxlckZuID0gdW5kZWZpbmVkO1xuXG52YXIgYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICBxdWV1ZVtsZW5dID0gY2FsbGJhY2s7XG4gIHF1ZXVlW2xlbiArIDFdID0gYXJnO1xuICBsZW4gKz0gMjtcbiAgaWYgKGxlbiA9PT0gMikge1xuICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cbiAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cbiAgICBpZiAoY3VzdG9tU2NoZWR1bGVyRm4pIHtcbiAgICAgIGN1c3RvbVNjaGVkdWxlckZuKGZsdXNoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVGbHVzaCgpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcbiAgY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xufVxuXG5mdW5jdGlvbiBzZXRBc2FwKGFzYXBGbikge1xuICBhc2FwID0gYXNhcEZuO1xufVxuXG52YXIgYnJvd3NlcldpbmRvdyA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkO1xudmFyIGJyb3dzZXJHbG9iYWwgPSBicm93c2VyV2luZG93IHx8IHt9O1xudmFyIEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbnZhciBpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmICh7fSkudG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXG4vLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxudmFyIGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJztcblxuLy8gbm9kZVxuZnVuY3Rpb24gdXNlTmV4dFRpY2soKSB7XG4gIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gIH07XG59XG5cbi8vIHZlcnR4XG5mdW5jdGlvbiB1c2VWZXJ0eFRpbWVyKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZlcnR4TmV4dChmbHVzaCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHVzZU11dGF0aW9uT2JzZXJ2ZXIoKSB7XG4gIHZhciBpdGVyYXRpb25zID0gMDtcbiAgdmFyIG9ic2VydmVyID0gbmV3IEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGZsdXNoKTtcbiAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gIG9ic2VydmVyLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgbm9kZS5kYXRhID0gaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDI7XG4gIH07XG59XG5cbi8vIHdlYiB3b3JrZXJcbmZ1bmN0aW9uIHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZsdXNoO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuICB9O1xufVxuXG5mdW5jdGlvbiB1c2VTZXRUaW1lb3V0KCkge1xuICAvLyBTdG9yZSBzZXRUaW1lb3V0IHJlZmVyZW5jZSBzbyBlczYtcHJvbWlzZSB3aWxsIGJlIHVuYWZmZWN0ZWQgYnlcbiAgLy8gb3RoZXIgY29kZSBtb2RpZnlpbmcgc2V0VGltZW91dCAobGlrZSBzaW5vbi51c2VGYWtlVGltZXJzKCkpXG4gIHZhciBnbG9iYWxTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2xvYmFsU2V0VGltZW91dChmbHVzaCwgMSk7XG4gIH07XG59XG5cbnZhciBxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcbmZ1bmN0aW9uIGZsdXNoKCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgdmFyIGNhbGxiYWNrID0gcXVldWVbaV07XG4gICAgdmFyIGFyZyA9IHF1ZXVlW2kgKyAxXTtcblxuICAgIGNhbGxiYWNrKGFyZyk7XG5cbiAgICBxdWV1ZVtpXSA9IHVuZGVmaW5lZDtcbiAgICBxdWV1ZVtpICsgMV0gPSB1bmRlZmluZWQ7XG4gIH1cblxuICBsZW4gPSAwO1xufVxuXG5mdW5jdGlvbiBhdHRlbXB0VmVydHgoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHIgPSByZXF1aXJlO1xuICAgIHZhciB2ZXJ0eCA9IHIoJ3ZlcnR4Jyk7XG4gICAgdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcbiAgICByZXR1cm4gdXNlVmVydHhUaW1lcigpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHVzZVNldFRpbWVvdXQoKTtcbiAgfVxufVxuXG52YXIgc2NoZWR1bGVGbHVzaCA9IHVuZGVmaW5lZDtcbi8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG5pZiAoaXNOb2RlKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VOZXh0VGljaygpO1xufSBlbHNlIGlmIChCcm93c2VyTXV0YXRpb25PYnNlcnZlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTXV0YXRpb25PYnNlcnZlcigpO1xufSBlbHNlIGlmIChpc1dvcmtlcikge1xuICBzY2hlZHVsZUZsdXNoID0gdXNlTWVzc2FnZUNoYW5uZWwoKTtcbn0gZWxzZSBpZiAoYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSBhdHRlbXB0VmVydHgoKTtcbn0gZWxzZSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VTZXRUaW1lb3V0KCk7XG59XG5cbmZ1bmN0aW9uIHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7XG5cbiAgdmFyIHBhcmVudCA9IHRoaXM7XG5cbiAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3Iobm9vcCk7XG5cbiAgaWYgKGNoaWxkW1BST01JU0VfSURdID09PSB1bmRlZmluZWQpIHtcbiAgICBtYWtlUHJvbWlzZShjaGlsZCk7XG4gIH1cblxuICB2YXIgX3N0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblxuICBpZiAoX3N0YXRlKSB7XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjYWxsYmFjayA9IF9hcmd1bWVudHNbX3N0YXRlIC0gMV07XG4gICAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGludm9rZUNhbGxiYWNrKF9zdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCBwYXJlbnQuX3Jlc3VsdCk7XG4gICAgICB9KTtcbiAgICB9KSgpO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG4gIH1cblxuICByZXR1cm4gY2hpbGQ7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIHJlc29sdmVkIHdpdGggdGhlXG4gIHBhc3NlZCBgdmFsdWVgLiBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVzb2x2ZSgxKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoMSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZXNvbHZlXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBbnl9IHZhbHVlIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuXG4gIGB2YWx1ZWBcbiovXG5mdW5jdGlvbiByZXNvbHZlKG9iamVjdCkge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3Rvcikge1xuICAgIHJldHVybiBvYmplY3Q7XG4gIH1cblxuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcbiAgX3Jlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcbiAgcmV0dXJuIHByb21pc2U7XG59XG5cbnZhciBQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDE2KTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnZhciBQRU5ESU5HID0gdm9pZCAwO1xudmFyIEZVTEZJTExFRCA9IDE7XG52YXIgUkVKRUNURUQgPSAyO1xuXG52YXIgR0VUX1RIRU5fRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTtcblxuZnVuY3Rpb24gc2VsZkZ1bGZpbGxtZW50KCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XG59XG5cbmZ1bmN0aW9uIGNhbm5vdFJldHVybk93bigpIHtcbiAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcbn1cblxuZnVuY3Rpb24gZ2V0VGhlbihwcm9taXNlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHByb21pc2UudGhlbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBHRVRfVEhFTl9FUlJPUi5lcnJvciA9IGVycm9yO1xuICAgIHJldHVybiBHRVRfVEhFTl9FUlJPUjtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlUaGVuKHRoZW4sIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcbiAgdHJ5IHtcbiAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4pIHtcbiAgYXNhcChmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgIHZhciBzZWFsZWQgPSBmYWxzZTtcbiAgICB2YXIgZXJyb3IgPSB0cnlUaGVuKHRoZW4sIHRoZW5hYmxlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmIChzZWFsZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuXG4gICAgICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSwgJ1NldHRsZTogJyArIChwcm9taXNlLl9sYWJlbCB8fCAnIHVua25vd24gcHJvbWlzZScpKTtcblxuICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgX3JlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgfVxuICB9LCBwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHtcbiAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gRlVMRklMTEVEKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgX3JlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIHtcbiAgICBzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuJCQpIHtcbiAgaWYgKG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IgPT09IHByb21pc2UuY29uc3RydWN0b3IgJiYgdGhlbiQkID09PSB0aGVuICYmIG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gcmVzb2x2ZSkge1xuICAgIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0aGVuJCQgPT09IEdFVF9USEVOX0VSUk9SKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIEdFVF9USEVOX0VSUk9SLmVycm9yKTtcbiAgICB9IGVsc2UgaWYgKHRoZW4kJCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbih0aGVuJCQpKSB7XG4gICAgICBoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgX3JlamVjdChwcm9taXNlLCBzZWxmRnVsZmlsbG1lbnQoKSk7XG4gIH0gZWxzZSBpZiAob2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlLCBnZXRUaGVuKHZhbHVlKSk7XG4gIH0gZWxzZSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XG4gIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XG4gICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuICB9XG5cbiAgcHVibGlzaChwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gZnVsZmlsbChwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcbiAgcHJvbWlzZS5fc3RhdGUgPSBGVUxGSUxMRUQ7XG5cbiAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgIGFzYXAocHVibGlzaCwgcHJvbWlzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gX3JlamVjdChwcm9taXNlLCByZWFzb24pIHtcbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHByb21pc2UuX3N0YXRlID0gUkVKRUNURUQ7XG4gIHByb21pc2UuX3Jlc3VsdCA9IHJlYXNvbjtcblxuICBhc2FwKHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpO1xufVxuXG5mdW5jdGlvbiBzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgdmFyIF9zdWJzY3JpYmVycyA9IHBhcmVudC5fc3Vic2NyaWJlcnM7XG4gIHZhciBsZW5ndGggPSBfc3Vic2NyaWJlcnMubGVuZ3RoO1xuXG4gIHBhcmVudC5fb25lcnJvciA9IG51bGw7XG5cbiAgX3N1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuICBfc3Vic2NyaWJlcnNbbGVuZ3RoICsgUkVKRUNURURdID0gb25SZWplY3Rpb247XG5cbiAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG4gICAgYXNhcChwdWJsaXNoLCBwYXJlbnQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHB1Ymxpc2gocHJvbWlzZSkge1xuICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcbiAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcblxuICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGNoaWxkID0gdW5kZWZpbmVkLFxuICAgICAgY2FsbGJhY2sgPSB1bmRlZmluZWQsXG4gICAgICBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG4gICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2soZGV0YWlsKTtcbiAgICB9XG4gIH1cblxuICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xufVxuXG5mdW5jdGlvbiBFcnJvck9iamVjdCgpIHtcbiAgdGhpcy5lcnJvciA9IG51bGw7XG59XG5cbnZhciBUUllfQ0FUQ0hfRVJST1IgPSBuZXcgRXJyb3JPYmplY3QoKTtcblxuZnVuY3Rpb24gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xuICB0cnkge1xuICAgIHJldHVybiBjYWxsYmFjayhkZXRhaWwpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcbiAgICByZXR1cm4gVFJZX0NBVENIX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgdmFyIGhhc0NhbGxiYWNrID0gaXNGdW5jdGlvbihjYWxsYmFjayksXG4gICAgICB2YWx1ZSA9IHVuZGVmaW5lZCxcbiAgICAgIGVycm9yID0gdW5kZWZpbmVkLFxuICAgICAgc3VjY2VlZGVkID0gdW5kZWZpbmVkLFxuICAgICAgZmFpbGVkID0gdW5kZWZpbmVkO1xuXG4gIGlmIChoYXNDYWxsYmFjaykge1xuICAgIHZhbHVlID0gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCk7XG5cbiAgICBpZiAodmFsdWUgPT09IFRSWV9DQVRDSF9FUlJPUikge1xuICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7XG4gICAgICB2YWx1ZSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIGNhbm5vdFJldHVybk93bigpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFsdWUgPSBkZXRhaWw7XG4gICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gUEVORElORykge1xuICAgIC8vIG5vb3BcbiAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcbiAgICAgIF9yZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGZhaWxlZCkge1xuICAgICAgX3JlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBGVUxGSUxMRUQpIHtcbiAgICAgIGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gUkVKRUNURUQpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcbiAgdHJ5IHtcbiAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSkge1xuICAgICAgX3Jlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7XG4gICAgICBfcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBfcmVqZWN0KHByb21pc2UsIGUpO1xuICB9XG59XG5cbnZhciBpZCA9IDA7XG5mdW5jdGlvbiBuZXh0SWQoKSB7XG4gIHJldHVybiBpZCsrO1xufVxuXG5mdW5jdGlvbiBtYWtlUHJvbWlzZShwcm9taXNlKSB7XG4gIHByb21pc2VbUFJPTUlTRV9JRF0gPSBpZCsrO1xuICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xufVxuXG5mdW5jdGlvbiBFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcblxuICBpZiAoIXRoaXMucHJvbWlzZVtQUk9NSVNFX0lEXSkge1xuICAgIG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG4gIH1cblxuICBpZiAoaXNBcnJheShpbnB1dCkpIHtcbiAgICB0aGlzLl9pbnB1dCA9IGlucHV0O1xuICAgIHRoaXMubGVuZ3RoID0gaW5wdXQubGVuZ3RoO1xuICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblxuICAgIHRoaXMuX3Jlc3VsdCA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7XG5cbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XG4gICAgICB0aGlzLl9lbnVtZXJhdGUoKTtcbiAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcbiAgICAgICAgZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIF9yZWplY3QodGhpcy5wcm9taXNlLCB2YWxpZGF0aW9uRXJyb3IoKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yKCdBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXknKTtcbn07XG5cbkVudW1lcmF0b3IucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgdmFyIF9pbnB1dCA9IHRoaXMuX2lucHV0O1xuXG4gIGZvciAodmFyIGkgPSAwOyB0aGlzLl9zdGF0ZSA9PT0gUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB0aGlzLl9lYWNoRW50cnkoX2lucHV0W2ldLCBpKTtcbiAgfVxufTtcblxuRW51bWVyYXRvci5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uIChlbnRyeSwgaSkge1xuICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7XG4gIHZhciByZXNvbHZlJCQgPSBjLnJlc29sdmU7XG5cbiAgaWYgKHJlc29sdmUkJCA9PT0gcmVzb2x2ZSkge1xuICAgIHZhciBfdGhlbiA9IGdldFRoZW4oZW50cnkpO1xuXG4gICAgaWYgKF90aGVuID09PSB0aGVuICYmIGVudHJ5Ll9zdGF0ZSAhPT0gUEVORElORykge1xuICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgX3RoZW4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XG4gICAgfSBlbHNlIGlmIChjID09PSBQcm9taXNlKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKG5vb3ApO1xuICAgICAgaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgX3RoZW4pO1xuICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHByb21pc2UsIGkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24gKHJlc29sdmUkJCkge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSQkKGVudHJ5KTtcbiAgICAgIH0pLCBpKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5fd2lsbFNldHRsZUF0KHJlc29sdmUkJChlbnRyeSksIGkpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fc2V0dGxlZEF0ID0gZnVuY3Rpb24gKHN0YXRlLCBpLCB2YWx1ZSkge1xuICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcblxuICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IFBFTkRJTkcpIHtcbiAgICB0aGlzLl9yZW1haW5pbmctLTtcblxuICAgIGlmIChzdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICAgIF9yZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICB9XG59O1xuXG5FbnVtZXJhdG9yLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24gKHByb21pc2UsIGkpIHtcbiAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXG4gIHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoRlVMRklMTEVELCBpLCB2YWx1ZSk7XG4gIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICByZXR1cm4gZW51bWVyYXRvci5fc2V0dGxlZEF0KFJFSkVDVEVELCBpLCByZWFzb24pO1xuICB9KTtcbn07XG5cbi8qKlxuICBgUHJvbWlzZS5hbGxgIGFjY2VwdHMgYW4gYXJyYXkgb2YgcHJvbWlzZXMsIGFuZCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2hcbiAgaXMgZnVsZmlsbGVkIHdpdGggYW4gYXJyYXkgb2YgZnVsZmlsbG1lbnQgdmFsdWVzIGZvciB0aGUgcGFzc2VkIHByb21pc2VzLCBvclxuICByZWplY3RlZCB3aXRoIHRoZSByZWFzb24gb2YgdGhlIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIGJlIHJlamVjdGVkLiBJdCBjYXN0cyBhbGxcbiAgZWxlbWVudHMgb2YgdGhlIHBhc3NlZCBpdGVyYWJsZSB0byBwcm9taXNlcyBhcyBpdCBydW5zIHRoaXMgYWxnb3JpdGhtLlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSByZXNvbHZlKDIpO1xuICBsZXQgcHJvbWlzZTMgPSByZXNvbHZlKDMpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gVGhlIGFycmF5IGhlcmUgd291bGQgYmUgWyAxLCAyLCAzIF07XG4gIH0pO1xuICBgYGBcblxuICBJZiBhbnkgb2YgdGhlIGBwcm9taXNlc2AgZ2l2ZW4gdG8gYGFsbGAgYXJlIHJlamVjdGVkLCB0aGUgZmlyc3QgcHJvbWlzZVxuICB0aGF0IGlzIHJlamVjdGVkIHdpbGwgYmUgZ2l2ZW4gYXMgYW4gYXJndW1lbnQgdG8gdGhlIHJldHVybmVkIHByb21pc2VzJ3NcbiAgcmVqZWN0aW9uIGhhbmRsZXIuIEZvciBleGFtcGxlOlxuXG4gIEV4YW1wbGU6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSByZXNvbHZlKDEpO1xuICBsZXQgcHJvbWlzZTIgPSByZWplY3QobmV3IEVycm9yKFwiMlwiKSk7XG4gIGxldCBwcm9taXNlMyA9IHJlamVjdChuZXcgRXJyb3IoXCIzXCIpKTtcbiAgbGV0IHByb21pc2VzID0gWyBwcm9taXNlMSwgcHJvbWlzZTIsIHByb21pc2UzIF07XG5cbiAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oYXJyYXkpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zIGJlY2F1c2UgdGhlcmUgYXJlIHJlamVjdGVkIHByb21pc2VzIVxuICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgIC8vIGVycm9yLm1lc3NhZ2UgPT09IFwiMlwiXG4gIH0pO1xuICBgYGBcblxuICBAbWV0aG9kIGFsbFxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IGVudHJpZXMgYXJyYXkgb2YgcHJvbWlzZXNcbiAgQHBhcmFtIHtTdHJpbmd9IGxhYmVsIG9wdGlvbmFsIHN0cmluZyBmb3IgbGFiZWxpbmcgdGhlIHByb21pc2UuXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gcHJvbWlzZSB0aGF0IGlzIGZ1bGZpbGxlZCB3aGVuIGFsbCBgcHJvbWlzZXNgIGhhdmUgYmVlblxuICBmdWxmaWxsZWQsIG9yIHJlamVjdGVkIGlmIGFueSBvZiB0aGVtIGJlY29tZSByZWplY3RlZC5cbiAgQHN0YXRpY1xuKi9cbmZ1bmN0aW9uIGFsbChlbnRyaWVzKSB7XG4gIHJldHVybiBuZXcgRW51bWVyYXRvcih0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xufVxuXG4vKipcbiAgYFByb21pc2UucmFjZWAgcmV0dXJucyBhIG5ldyBwcm9taXNlIHdoaWNoIGlzIHNldHRsZWQgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZVxuICBmaXJzdCBwYXNzZWQgcHJvbWlzZSB0byBzZXR0bGUuXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVzb2x2ZSgncHJvbWlzZSAxJyk7XG4gICAgfSwgMjAwKTtcbiAgfSk7XG5cbiAgbGV0IHByb21pc2UyID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDInKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyByZXN1bHQgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgaXQgd2FzIHJlc29sdmVkIGJlZm9yZSBwcm9taXNlMVxuICAgIC8vIHdhcyByZXNvbHZlZC5cbiAgfSk7XG4gIGBgYFxuXG4gIGBQcm9taXNlLnJhY2VgIGlzIGRldGVybWluaXN0aWMgaW4gdGhhdCBvbmx5IHRoZSBzdGF0ZSBvZiB0aGUgZmlyc3RcbiAgc2V0dGxlZCBwcm9taXNlIG1hdHRlcnMuIEZvciBleGFtcGxlLCBldmVuIGlmIG90aGVyIHByb21pc2VzIGdpdmVuIHRvIHRoZVxuICBgcHJvbWlzZXNgIGFycmF5IGFyZ3VtZW50IGFyZSByZXNvbHZlZCwgYnV0IHRoZSBmaXJzdCBzZXR0bGVkIHByb21pc2UgaGFzXG4gIGJlY29tZSByZWplY3RlZCBiZWZvcmUgdGhlIG90aGVyIHByb21pc2VzIGJlY2FtZSBmdWxmaWxsZWQsIHRoZSByZXR1cm5lZFxuICBwcm9taXNlIHdpbGwgYmVjb21lIHJlamVjdGVkOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ3Byb21pc2UgMicpKTtcbiAgICB9LCAxMDApO1xuICB9KTtcblxuICBQcm9taXNlLnJhY2UoW3Byb21pc2UxLCBwcm9taXNlMl0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAvLyBDb2RlIGhlcmUgbmV2ZXIgcnVuc1xuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAncHJvbWlzZSAyJyBiZWNhdXNlIHByb21pc2UgMiBiZWNhbWUgcmVqZWN0ZWQgYmVmb3JlXG4gICAgLy8gcHJvbWlzZSAxIGJlY2FtZSBmdWxmaWxsZWRcbiAgfSk7XG4gIGBgYFxuXG4gIEFuIGV4YW1wbGUgcmVhbC13b3JsZCB1c2UgY2FzZSBpcyBpbXBsZW1lbnRpbmcgdGltZW91dHM6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBQcm9taXNlLnJhY2UoW2FqYXgoJ2Zvby5qc29uJyksIHRpbWVvdXQoNTAwMCldKVxuICBgYGBcblxuICBAbWV0aG9kIHJhY2VcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FycmF5fSBwcm9taXNlcyBhcnJheSBvZiBwcm9taXNlcyB0byBvYnNlcnZlXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHdoaWNoIHNldHRsZXMgaW4gdGhlIHNhbWUgd2F5IGFzIHRoZSBmaXJzdCBwYXNzZWRcbiAgcHJvbWlzZSB0byBzZXR0bGUuXG4qL1xuZnVuY3Rpb24gcmFjZShlbnRyaWVzKSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKCFpc0FycmF5KGVudHJpZXMpKSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAoXywgcmVqZWN0KSB7XG4gICAgICByZXR1cm4gcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYW4gYXJyYXkgdG8gcmFjZS4nKSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGg7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yZWplY3RgIHJldHVybnMgYSBwcm9taXNlIHJlamVjdGVkIHdpdGggdGhlIHBhc3NlZCBgcmVhc29uYC5cbiAgSXQgaXMgc2hvcnRoYW5kIGZvciB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEluc3RlYWQgb2Ygd3JpdGluZyB0aGUgYWJvdmUsIHlvdXIgY29kZSBub3cgc2ltcGx5IGJlY29tZXMgdGhlIGZvbGxvd2luZzpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdXSE9PUFMnKSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyBDb2RlIGhlcmUgZG9lc24ndCBydW4gYmVjYXVzZSB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCFcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyByZWFzb24ubWVzc2FnZSA9PT0gJ1dIT09QUydcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgcmVqZWN0XG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBbnl9IHJlYXNvbiB2YWx1ZSB0aGF0IHRoZSByZXR1cm5lZCBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aC5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgZ2l2ZW4gYHJlYXNvbmAuXG4qL1xuZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcbiAgX3JlamVjdChwcm9taXNlLCByZWFzb24pO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xufVxuXG5mdW5jdGlvbiBuZWVkc05ldygpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcbn1cblxuLyoqXG4gIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcbiAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcbiAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG4gIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXG4gIFRlcm1pbm9sb2d5XG4gIC0tLS0tLS0tLS0tXG5cbiAgLSBgcHJvbWlzZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJlaGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi5cbiAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLlxuICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG4gIC0gYGV4Y2VwdGlvbmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cgc3RhdGVtZW50LlxuICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuXG4gIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG4gIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblxuICBQcm9taXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZhbHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZFxuICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxuXG4gIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYVxuICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG4gIHNldHRsZWQgc3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IHJlamVjdHMgd2lsbFxuICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsXG4gIGl0c2VsZiBmdWxmaWxsLlxuXG5cbiAgQmFzaWMgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLVxuXG4gIGBgYGpzXG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgLy8gb24gc3VjY2Vzc1xuICAgIHJlc29sdmUodmFsdWUpO1xuXG4gICAgLy8gb24gZmFpbHVyZVxuICAgIHJlamVjdChyZWFzb24pO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyBvbiByZWplY3Rpb25cbiAgfSk7XG4gIGBgYFxuXG4gIEFkdmFuY2VkIFVzYWdlOlxuICAtLS0tLS0tLS0tLS0tLS1cblxuICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG4gIGBYTUxIdHRwUmVxdWVzdGBzLlxuXG4gIGBgYGpzXG4gIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICB4aHIuc2VuZCgpO1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcbiAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0IGNvbXBvc2FibGUgcHJpbWl0aXZlcy5cblxuICBgYGBqc1xuICBQcm9taXNlLmFsbChbXG4gICAgZ2V0SlNPTignL3Bvc3RzJyksXG4gICAgZ2V0SlNPTignL2NvbW1lbnRzJylcbiAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cbiAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9KTtcbiAgYGBgXG5cbiAgQGNsYXNzIFByb21pc2VcbiAgQHBhcmFtIHtmdW5jdGlvbn0gcmVzb2x2ZXJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAY29uc3RydWN0b3JcbiovXG5mdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKSB7XG4gIHRoaXNbUFJPTUlTRV9JRF0gPSBuZXh0SWQoKTtcbiAgdGhpcy5fcmVzdWx0ID0gdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cbiAgaWYgKG5vb3AgIT09IHJlc29sdmVyKSB7XG4gICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIG5lZWRzUmVzb2x2ZXIoKTtcbiAgICB0aGlzIGluc3RhbmNlb2YgUHJvbWlzZSA/IGluaXRpYWxpemVQcm9taXNlKHRoaXMsIHJlc29sdmVyKSA6IG5lZWRzTmV3KCk7XG4gIH1cbn1cblxuUHJvbWlzZS5hbGwgPSBhbGw7XG5Qcm9taXNlLnJhY2UgPSByYWNlO1xuUHJvbWlzZS5yZXNvbHZlID0gcmVzb2x2ZTtcblByb21pc2UucmVqZWN0ID0gcmVqZWN0O1xuUHJvbWlzZS5fc2V0U2NoZWR1bGVyID0gc2V0U2NoZWR1bGVyO1xuUHJvbWlzZS5fc2V0QXNhcCA9IHNldEFzYXA7XG5Qcm9taXNlLl9hc2FwID0gYXNhcDtcblxuUHJvbWlzZS5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBQcm9taXNlLFxuXG4gIC8qKlxuICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuICAgIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXG4gICAgcmVhc29uIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlXG4gICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIENoYWluaW5nXG4gICAgLS0tLS0tLS1cbiAgXG4gICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcbiAgICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XG4gICAgb3IgcmVqZWN0aW9uIGhhbmRsZXIsIG9yIHJlamVjdGVkIGlmIHRoZSBoYW5kbGVyIHRocm93cyBhbiBleGNlcHRpb24uXG4gIFxuICAgIGBgYGpzXG4gICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICByZXR1cm4gdXNlci5uYW1lO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcbiAgICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkge1xuICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXG4gICAgfSk7XG4gIFxuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScpO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgLy8gaWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jy5cbiAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuICAgIH0pO1xuICAgIGBgYFxuICAgIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuICBcbiAgICBgYGBqc1xuICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgdGhyb3cgbmV3IFBlZGFnb2dpY2FsRXhjZXB0aW9uKCdVcHN0cmVhbSBlcnJvcicpO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAvLyBUaGUgYFBlZGdhZ29jaWFsRXhjZXB0aW9uYCBpcyBwcm9wYWdhdGVkIGFsbCB0aGUgd2F5IGRvd24gdG8gaGVyZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBBc3NpbWlsYXRpb25cbiAgICAtLS0tLS0tLS0tLS1cbiAgXG4gICAgU29tZXRpbWVzIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byBwcm9wYWdhdGUgdG8gYSBkb3duc3RyZWFtIHByb21pc2UgY2FuIG9ubHkgYmVcbiAgICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG4gICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcbiAgICB1bnRpbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBzZXR0bGVkLiBUaGlzIGlzIGNhbGxlZCAqYXNzaW1pbGF0aW9uKi5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cbiAgXG4gICAgYGBganNcbiAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgcmVqZWN0cywgd2UnbGwgaGF2ZSB0aGUgcmVhc29uIGhlcmVcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgU2ltcGxlIEV4YW1wbGVcbiAgICAtLS0tLS0tLS0tLS0tLVxuICBcbiAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBsZXQgcmVzdWx0O1xuICBcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfVxuICAgIGBgYFxuICBcbiAgICBFcnJiYWNrIEV4YW1wbGVcbiAgXG4gICAgYGBganNcbiAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgfVxuICAgIH0pO1xuICAgIGBgYFxuICBcbiAgICBQcm9taXNlIEV4YW1wbGU7XG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAvLyBmYWlsdXJlXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEFkdmFuY2VkIEV4YW1wbGVcbiAgICAtLS0tLS0tLS0tLS0tLVxuICBcbiAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG4gIFxuICAgIGBgYGphdmFzY3JpcHRcbiAgICBsZXQgYXV0aG9yLCBib29rcztcbiAgXG4gICAgdHJ5IHtcbiAgICAgIGF1dGhvciA9IGZpbmRBdXRob3IoKTtcbiAgICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9XG4gICAgYGBgXG4gIFxuICAgIEVycmJhY2sgRXhhbXBsZVxuICBcbiAgICBgYGBqc1xuICBcbiAgICBmdW5jdGlvbiBmb3VuZEJvb2tzKGJvb2tzKSB7XG4gIFxuICAgIH1cbiAgXG4gICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcbiAgXG4gICAgfVxuICBcbiAgICBmaW5kQXV0aG9yKGZ1bmN0aW9uKGF1dGhvciwgZXJyKXtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGZpbmRCb29va3NCeUF1dGhvcihhdXRob3IsIGZ1bmN0aW9uKGJvb2tzLCBlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcbiAgICAgICAgICAgICAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgIGZhaWx1cmUoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIFByb21pc2UgRXhhbXBsZTtcbiAgXG4gICAgYGBgamF2YXNjcmlwdFxuICAgIGZpbmRBdXRob3IoKS5cbiAgICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XG4gICAgICAgIC8vIGZvdW5kIGJvb2tzXG4gICAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEBtZXRob2QgdGhlblxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXG4gICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3RlZFxuICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuICB0aGVuOiB0aGVuLFxuXG4gIC8qKlxuICAgIGBjYXRjaGAgaXMgc2ltcGx5IHN1Z2FyIGZvciBgdGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uKWAgd2hpY2ggbWFrZXMgaXQgdGhlIHNhbWVcbiAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuICBcbiAgICBgYGBqc1xuICAgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcbiAgICAgIHRocm93IG5ldyBFcnJvcignY291bGRuJ3QgZmluZCB0aGF0IGF1dGhvcicpO1xuICAgIH1cbiAgXG4gICAgLy8gc3luY2hyb25vdXNcbiAgICB0cnkge1xuICAgICAgZmluZEF1dGhvcigpO1xuICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgIH1cbiAgXG4gICAgLy8gYXN5bmMgd2l0aCBwcm9taXNlc1xuICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICB9KTtcbiAgICBgYGBcbiAgXG4gICAgQG1ldGhvZCBjYXRjaFxuICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG4gICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG4gICdjYXRjaCc6IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikge1xuICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuICB9XG59O1xuXG5mdW5jdGlvbiBwb2x5ZmlsbCgpIHtcbiAgICB2YXIgbG9jYWwgPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbG9jYWwgPSBnbG9iYWw7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbG9jYWwgPSBzZWxmO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgUCA9IGxvY2FsLlByb21pc2U7XG5cbiAgICBpZiAoUCkge1xuICAgICAgICB2YXIgcHJvbWlzZVRvU3RyaW5nID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHByb21pc2VUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIHNpbGVudGx5IGlnbm9yZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcm9taXNlVG9TdHJpbmcgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsb2NhbC5Qcm9taXNlID0gUHJvbWlzZTtcbn1cblxucG9seWZpbGwoKTtcbi8vIFN0cmFuZ2UgY29tcGF0Li5cblByb21pc2UucG9seWZpbGwgPSBwb2x5ZmlsbDtcblByb21pc2UuUHJvbWlzZSA9IFByb21pc2U7XG5cbnJldHVybiBQcm9taXNlO1xuXG59KSkpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXM2LXByb21pc2UubWFwIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcbiIsImltcG9ydCB7IGNyZWF0ZVNsaWNlLCBQYXlsb2FkQWN0aW9uIH0gZnJvbSBcIkByZWR1eGpzL3Rvb2xraXRcIjtcbmltcG9ydCB7IElkZWEsIElkZWFTdGF0ZSB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgeyBmZXRjaElkZWFzIH0gZnJvbSBcIi4vbWlkZGxld2FyZXNcIjtcblxuY29uc3QgaW5pdGlhbFN0YXRlID0ge1xuICBpZGVhczogW10sXG59IGFzIElkZWFTdGF0ZVxuXG5jb25zdCBpZGVhc1NsaWNlID0gY3JlYXRlU2xpY2Uoe1xuICBuYW1lOiAnaWRlYXMnLFxuICBpbml0aWFsU3RhdGUsXG4gIHJlZHVjZXJzOiB7XG4gICAgc2V0SWRlYXMgKHN0YXRlOiBJZGVhU3RhdGUsIGFjdGlvbjogUGF5bG9hZEFjdGlvbjxJZGVhW10+KSB7XG4gICAgICBzdGF0ZS5pZGVhcyA9IGFjdGlvbi5wYXlsb2FkXG4gICAgfSxcbiAgICBhZGRJZGVhIChzdGF0ZTogSWRlYVN0YXRlLCBhY3Rpb246IFBheWxvYWRBY3Rpb248SWRlYT4pIHtcbiAgICAgIGNvbnN0IGlkZWEgPSBhY3Rpb24ucGF5bG9hZFxuICAgICAgc3RhdGUuaWRlYXMucHVzaChpZGVhKVxuICAgIH0sXG4gICAgcmVtb3ZlSWRlYSAoc3RhdGU6IElkZWFTdGF0ZSwgYWN0aW9uOiBQYXlsb2FkQWN0aW9uPG51bWJlcj4pIHtcbiAgICAgIHN0YXRlLmlkZWFzLnNwbGljZShzdGF0ZS5pZGVhcy5maW5kSW5kZXgoaWRlYSA9PiBpZGVhLmlkID09PSBhY3Rpb24ucGF5bG9hZCksIDEpO1xuICAgIH1cbiAgfSxcbiAgZXh0cmFSZWR1Y2VyczogYnVpbGRlciA9PiB7XG4gICAgYnVpbGRlci5hZGRDYXNlKGZldGNoSWRlYXMuZnVsZmlsbGVkLCAoc3RhdGU6IElkZWFTdGF0ZSwgYWN0aW9uOiBQYXlsb2FkQWN0aW9uPElkZWFbXT4pID0+IHtcbiAgICAgIHN0YXRlLmlkZWFzID0gYWN0aW9uLnBheWxvYWRcbiAgICB9KVxuICB9XG59KVxuXG5leHBvcnQgY29uc3Qge1xuICBzZXRJZGVhcyxcbiAgYWRkSWRlYSxcbn0gPSBpZGVhc1NsaWNlLmFjdGlvbnNcblxuZXhwb3J0IGRlZmF1bHQgaWRlYXNTbGljZS5yZWR1Y2VyXG4iLCJmdW5jdGlvbiBkZWZhdWx0RXF1YWxpdHlDaGVjayhhLCBiKSB7XG4gIHJldHVybiBhID09PSBiO1xufVxuXG5mdW5jdGlvbiBhcmVBcmd1bWVudHNTaGFsbG93bHlFcXVhbChlcXVhbGl0eUNoZWNrLCBwcmV2LCBuZXh0KSB7XG4gIGlmIChwcmV2ID09PSBudWxsIHx8IG5leHQgPT09IG51bGwgfHwgcHJldi5sZW5ndGggIT09IG5leHQubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gRG8gdGhpcyBpbiBhIGZvciBsb29wIChhbmQgbm90IGEgYGZvckVhY2hgIG9yIGFuIGBldmVyeWApIHNvIHdlIGNhbiBkZXRlcm1pbmUgZXF1YWxpdHkgYXMgZmFzdCBhcyBwb3NzaWJsZS5cbiAgdmFyIGxlbmd0aCA9IHByZXYubGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKCFlcXVhbGl0eUNoZWNrKHByZXZbaV0sIG5leHRbaV0pKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0TWVtb2l6ZShmdW5jKSB7XG4gIHZhciBlcXVhbGl0eUNoZWNrID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBkZWZhdWx0RXF1YWxpdHlDaGVjaztcblxuICB2YXIgbGFzdEFyZ3MgPSBudWxsO1xuICB2YXIgbGFzdFJlc3VsdCA9IG51bGw7XG4gIC8vIHdlIHJlZmVyZW5jZSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgdGhlbSBmb3IgcGVyZm9ybWFuY2UgcmVhc29uc1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmICghYXJlQXJndW1lbnRzU2hhbGxvd2x5RXF1YWwoZXF1YWxpdHlDaGVjaywgbGFzdEFyZ3MsIGFyZ3VtZW50cykpIHtcbiAgICAgIC8vIGFwcGx5IGFyZ3VtZW50cyBpbnN0ZWFkIG9mIHNwcmVhZGluZyBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICBsYXN0UmVzdWx0ID0gZnVuYy5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIGxhc3RBcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBsYXN0UmVzdWx0O1xuICB9O1xufVxuXG5mdW5jdGlvbiBnZXREZXBlbmRlbmNpZXMoZnVuY3MpIHtcbiAgdmFyIGRlcGVuZGVuY2llcyA9IEFycmF5LmlzQXJyYXkoZnVuY3NbMF0pID8gZnVuY3NbMF0gOiBmdW5jcztcblxuICBpZiAoIWRlcGVuZGVuY2llcy5ldmVyeShmdW5jdGlvbiAoZGVwKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBkZXAgPT09ICdmdW5jdGlvbic7XG4gIH0pKSB7XG4gICAgdmFyIGRlcGVuZGVuY3lUeXBlcyA9IGRlcGVuZGVuY2llcy5tYXAoZnVuY3Rpb24gKGRlcCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBkZXA7XG4gICAgfSkuam9pbignLCAnKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlbGVjdG9yIGNyZWF0b3JzIGV4cGVjdCBhbGwgaW5wdXQtc2VsZWN0b3JzIHRvIGJlIGZ1bmN0aW9ucywgJyArICgnaW5zdGVhZCByZWNlaXZlZCB0aGUgZm9sbG93aW5nIHR5cGVzOiBbJyArIGRlcGVuZGVuY3lUeXBlcyArICddJykpO1xuICB9XG5cbiAgcmV0dXJuIGRlcGVuZGVuY2llcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNlbGVjdG9yQ3JlYXRvcihtZW1vaXplKSB7XG4gIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBtZW1vaXplT3B0aW9ucyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICBtZW1vaXplT3B0aW9uc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgZnVuY3MgPSBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgZnVuY3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICB9XG5cbiAgICB2YXIgcmVjb21wdXRhdGlvbnMgPSAwO1xuICAgIHZhciByZXN1bHRGdW5jID0gZnVuY3MucG9wKCk7XG4gICAgdmFyIGRlcGVuZGVuY2llcyA9IGdldERlcGVuZGVuY2llcyhmdW5jcyk7XG5cbiAgICB2YXIgbWVtb2l6ZWRSZXN1bHRGdW5jID0gbWVtb2l6ZS5hcHBseSh1bmRlZmluZWQsIFtmdW5jdGlvbiAoKSB7XG4gICAgICByZWNvbXB1dGF0aW9ucysrO1xuICAgICAgLy8gYXBwbHkgYXJndW1lbnRzIGluc3RlYWQgb2Ygc3ByZWFkaW5nIGZvciBwZXJmb3JtYW5jZS5cbiAgICAgIHJldHVybiByZXN1bHRGdW5jLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgfV0uY29uY2F0KG1lbW9pemVPcHRpb25zKSk7XG5cbiAgICAvLyBJZiBhIHNlbGVjdG9yIGlzIGNhbGxlZCB3aXRoIHRoZSBleGFjdCBzYW1lIGFyZ3VtZW50cyB3ZSBkb24ndCBuZWVkIHRvIHRyYXZlcnNlIG91ciBkZXBlbmRlbmNpZXMgYWdhaW4uXG4gICAgdmFyIHNlbGVjdG9yID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcGFyYW1zID0gW107XG4gICAgICB2YXIgbGVuZ3RoID0gZGVwZW5kZW5jaWVzLmxlbmd0aDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBhcHBseSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgYW5kIG11dGF0ZSBhIGxvY2FsIGxpc3Qgb2YgcGFyYW1zIGZvciBwZXJmb3JtYW5jZS5cbiAgICAgICAgcGFyYW1zLnB1c2goZGVwZW5kZW5jaWVzW2ldLmFwcGx5KG51bGwsIGFyZ3VtZW50cykpO1xuICAgICAgfVxuXG4gICAgICAvLyBhcHBseSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgZm9yIHBlcmZvcm1hbmNlLlxuICAgICAgcmV0dXJuIG1lbW9pemVkUmVzdWx0RnVuYy5hcHBseShudWxsLCBwYXJhbXMpO1xuICAgIH0pO1xuXG4gICAgc2VsZWN0b3IucmVzdWx0RnVuYyA9IHJlc3VsdEZ1bmM7XG4gICAgc2VsZWN0b3IuZGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzO1xuICAgIHNlbGVjdG9yLnJlY29tcHV0YXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHJlY29tcHV0YXRpb25zO1xuICAgIH07XG4gICAgc2VsZWN0b3IucmVzZXRSZWNvbXB1dGF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiByZWNvbXB1dGF0aW9ucyA9IDA7XG4gICAgfTtcbiAgICByZXR1cm4gc2VsZWN0b3I7XG4gIH07XG59XG5cbmV4cG9ydCB2YXIgY3JlYXRlU2VsZWN0b3IgPSBjcmVhdGVTZWxlY3RvckNyZWF0b3IoZGVmYXVsdE1lbW9pemUpO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3RydWN0dXJlZFNlbGVjdG9yKHNlbGVjdG9ycykge1xuICB2YXIgc2VsZWN0b3JDcmVhdG9yID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBjcmVhdGVTZWxlY3RvcjtcblxuICBpZiAodHlwZW9mIHNlbGVjdG9ycyAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyZWF0ZVN0cnVjdHVyZWRTZWxlY3RvciBleHBlY3RzIGZpcnN0IGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCAnICsgKCd3aGVyZSBlYWNoIHByb3BlcnR5IGlzIGEgc2VsZWN0b3IsIGluc3RlYWQgcmVjZWl2ZWQgYSAnICsgdHlwZW9mIHNlbGVjdG9ycykpO1xuICB9XG4gIHZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMoc2VsZWN0b3JzKTtcbiAgcmV0dXJuIHNlbGVjdG9yQ3JlYXRvcihvYmplY3RLZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHNlbGVjdG9yc1trZXldO1xuICB9KSwgZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgdmFsdWVzID0gQXJyYXkoX2xlbjMpLCBfa2V5MyA9IDA7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcbiAgICAgIHZhbHVlc1tfa2V5M10gPSBhcmd1bWVudHNbX2tleTNdO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZXMucmVkdWNlKGZ1bmN0aW9uIChjb21wb3NpdGlvbiwgdmFsdWUsIGluZGV4KSB7XG4gICAgICBjb21wb3NpdGlvbltvYmplY3RLZXlzW2luZGV4XV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiBjb21wb3NpdGlvbjtcbiAgICB9LCB7fSk7XG4gIH0pO1xufSIsIi8qIGdsb2JhbCB3aW5kb3cgKi9cbmltcG9ydCBwb255ZmlsbCBmcm9tICcuL3BvbnlmaWxsLmpzJztcblxudmFyIHJvb3Q7XG5cbmlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgcm9vdCA9IHNlbGY7XG59IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSB3aW5kb3c7XG59IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSBnbG9iYWw7XG59IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSBtb2R1bGU7XG59IGVsc2Uge1xuICByb290ID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbn1cblxudmFyIHJlc3VsdCA9IHBvbnlmaWxsKHJvb3QpO1xuZXhwb3J0IGRlZmF1bHQgcmVzdWx0O1xuIiwiZnVuY3Rpb24gY3JlYXRlVGh1bmtNaWRkbGV3YXJlKGV4dHJhQXJndW1lbnQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChfcmVmKSB7XG4gICAgdmFyIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaCxcbiAgICAgICAgZ2V0U3RhdGUgPSBfcmVmLmdldFN0YXRlO1xuICAgIHJldHVybiBmdW5jdGlvbiAobmV4dCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhY3Rpb24gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICByZXR1cm4gYWN0aW9uKGRpc3BhdGNoLCBnZXRTdGF0ZSwgZXh0cmFBcmd1bWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV4dChhY3Rpb24pO1xuICAgICAgfTtcbiAgICB9O1xuICB9O1xufVxuXG52YXIgdGh1bmsgPSBjcmVhdGVUaHVua01pZGRsZXdhcmUoKTtcbnRodW5rLndpdGhFeHRyYUFyZ3VtZW50ID0gY3JlYXRlVGh1bmtNaWRkbGV3YXJlO1xuXG5leHBvcnQgZGVmYXVsdCB0aHVuazsiXSwic291cmNlUm9vdCI6IiJ9