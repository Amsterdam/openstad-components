window.OpenStadComponents=function(r){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=r,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=86)}([function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r(3),c=r.n(n),i=r(2),o=r.n(i);r(71);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=u(o);return t=a?(e=u(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==s(n)&&"function"!=typeof n?d(r):n}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,o.a.Component);var e,t,r,a=p(u);function u(r){var e,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var i=d(e=a.call(this,r));if(r.attributes&&Object.keys(r.attributes).forEach(function(e){var t=r.attributes[e];i[t.name]=t.value}),"string"==typeof i.config)try{i.config=JSON.parse(i.config)}catch(e){}var o=function t(r){if("object"!=s(r))return r;Object.keys(r).forEach(function(e){void 0!==r[e]&&null!=r[e]||delete r[e],"object"==s(r[e])&&(r[e]=t(r[e]))});return r}(o=r.config||{});return i.config=c.a.recursive({siteId:null,api:{url:null,headers:null,isUserLoggedIn:!1},user:{}},t,n,o),i.divId=i.divId||i.config&&i.config.divId||r.id||"openstad-component-".concat(parseInt(1e8*Math.random())),window[i.divId]=i,e}return e=u,(t=[{key:"componentDidMount",value:function(){}}])&&l(e.prototype,t),r&&l(e,r),u}()},function(e,t,r){"use strict";r(11),r(2),r(6),r(83);var n=r(3),i=r.n(n);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){var t,r,n=window.location.search.match(/(?:\?|&)jwt=([A-Za-z0-9-_=]+\.[A-Za-z0-9-_=]+\.?[A-Za-z0-9-_.+/=]*)(?:&|$)/);return n&&(t=n[1],c.set("osc-jwt",t),"?"==(r=document.location.search.replace("jwt="+t,""))&&(r=""),document.location.search=r),t=c.get("osc-jwt"),e&&e.jwt&&(t=e.jwt,c.set("osc-jwt",t)),t}var u={get:function(e){var t=sessionStorage.getItem(e);try{t=JSON.parse(t)}catch(e){}return t},set:function(e,t){if("string"==typeof e){if(void 0===t&&(t=""),"object"==o(t))try{t=JSON.stringify(t)}catch(e){}sessionStorage.setItem(e,t)}},remove:function(e){sessionStorage.removeItem(e)}},c=u,s={admin:["admin","moderator","editor","member","anonymous","all"],moderator:["moderator","editor","member","anonymous","all"],editor:["editor","member","anonymous","all"],member:["member","anonymous","all"],anonymous:["anonymous","all"],all:["all"],owner:null};function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f={get:function(e){var t=localStorage.getItem(e);try{t=JSON.parse(t)}catch(e){}return t},set:function(e,t){if("string"==typeof e){if(void 0===t&&(t=""),"object"==l(t))try{t=JSON.stringify(t)}catch(e){}localStorage.setItem(e,t)}},remove:function(e){localStorage.removeItem(e)}},p={api:{getHeaders:function(e){var t=i.a.recursive({"Content-type":"application/json"},e&&e.api&&e.api.headers),r=a();return r&&(t=i.a.recursive({"X-Authorization":"Bearer "+r},t)),t}},user:{getUser:function(e,t){t=t||function(e){console.log("getUser: next not defined."),console.log(e)};var r=e.user||c.get("osc-user");if(r)return t(null,r);var n=a(e);if(!n)return t(null,{});var i="".concat(e.api.url,"/oauth/site/").concat(e.siteId,"/me"),o={"X-Authorization":"Bearer ".concat(n),"Content-Type":"application/json"};fetch(i,{headers:o}).then(function(e){if(!e.ok)throw new Error("Error on fetch");return e.json()}).then(function(e){c.set("osc-user",e),t(null,e)}).catch(function(e){t(e)})},getJWT:a,logout:function(e,t){t=t||function(e){console.log("logout: next not defined.")};var r=e.user||c.get("osc-user");if(r)return t(null,r);var n=a(e);if(!n)return t(null,{});var i=e.api.url+"/oauth/site/"+e.siteId+"/me";fetch(i,{headers:{"X-Authorization":"Bearer "+n,"Content-Type":"application/json"}}).then(function(e){if(!e.ok)throw new Error("Error on fetch");return e.json()}).then(function(e){c.set("osc-user",e),t(null,e)}).catch(function(e){t(e)})},hasRole:function(e,t){var r=e.role;return Object.keys(s).includes(r)||(r="all"),s[r].includes(t)}},ideasSort:function(e){var t=e.ideas,r=e.sortOrder,n=e.center;switch(r=r||"random"){case"title":t=t.sort(function(e,t){return e.title.toLowerCase()<t.title.toLowerCase()?-1:t.title.toLowerCase()<e.title.toLowerCase()?1:0});break;case"ranking,asc":t=t.sort(function(e,t){return e.ranking-t.ranking});break;case"likes,asc":t=t.sort(function(e,t){return e.yes-t.yes});break;case"likes,desc":t=t.sort(function(e,t){return t.yes-e.yes});break;case"createdtime,desc":t=t.sort(function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()});break;case"createdtime,asc":t=t.sort(function(e,t){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()});break;case"distance":(n=n||{lat:52.37104644463586,lng:900402911007405}).coordinates&&(n.lat=n.coordinates[0],n.lng=n.coordinates[1]),t=t.map(function(e){return e._distance=Math.sqrt(Math.pow(e.location.coordinates[0]-n.lat,2)+Math.pow(e.location.coordinates[1]-n.lng,2)),e}).sort(function(e,t){return e._distance-t._distance});break;case"args,desc":t=t.sort(function(e,t){return t.argCount-e.argCount});break;case"args,asc":t=t.sort(function(e,t){return e.argCount-t.argCount});break;case"random":default:t=t.sort(function(e,t){return Math.random()-.5})}return t},localStorage:f,sessionStorage:c,reactTemplate:function(e){var t=e.html,r=void 0===t?"":t,n=e;delete n.html;var i=0;return Object.keys(n).forEach(function(e){var t=new RegExp("^((?:.|\n|\r)*)\\{".concat(e,"\\}((?:.|\n|\r)*)$"),"g").exec(r);t&&(i++,r=React.createElement("span",null,React.createElement("span",{dangerouslySetInnerHTML:{__html:t[1]}}),n[e],React.createElement("span",{dangerouslySetInnerHTML:{__html:t[2]}})))}),0==i&&(r=React.createElement("span",{dangerouslySetInnerHTML:{__html:r}})),r}};t.a=p},function(e,t){e.exports=window.React},function(e,t,r){(function(e){function t(e,t,r){var n=r[0],i=r.length;!e&&"object"===s(n)||(n={});for(var o=0;o<i;++o){var a,u=r[o];if("object"===s(u))for(var c in u){"__proto__"!==c&&(a=e?l.clone(u[c]):u[c],n[c]=t?function e(t,r){if("object"!==s(t))return r;for(var n in r)"object"===s(t[n])&&"object"===s(r[n])?t[n]=e(t[n],r[n]):t[n]=r[n];return t}(n[c],a):a)}}return n}function s(e){return{}.toString.call(e).slice(8,-1).toLowerCase()}var r,l;r=e&&"object"==typeof e.exports&&e.exports,(l=function(e){return t(!0===e,!1,arguments)}).recursive=function(e){return t(!0===e,!0,arguments)},l.clone=function(e){var t,r,n=e,i=s(e);if("array"===i)for(n=[],r=e.length,t=0;t<r;++t)n[t]=l.clone(e[t]);else if("object"===i)for(t in n={},e)n[t]=l.clone(e[t]);return n},r?e.exports=l:window.merge=l}).call(this,r(70)(e))},function(r,e,t){(function(e){function t(e){return e&&e.Math==Math&&e}r.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof e&&e)||Function("return this")()}).call(this,t(21))},function(e,t,r){"use strict";r(11),r(2),r(6),r(87);var a=r(0);r(1);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=f(o);return t=a?(e=f(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==u(n)&&"function"!=typeof n?l(r):n}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,a["a"]);var e,t,r,n=s(i);function i(e){var t,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),l(t=n.call(this,e,{choices:[],name:"",placeholder:"",disabled:!1,required:!1},r)).state={value:null!=u(e.value)?e.value:"",error:null},t.onChange=e.onChange,t}return e=i,(t=[{key:"validate",value:function(e){var t=e.showErrors,r=!this.config.required||!!this.state.value,n=!r&&t?!0:"";return this.setState({isValid:r,error:n}),r}},{key:"handleOnChange",value:function(e){var t=this;e=e||{},t.setState(e,function(){t.validate({})}),"function"==typeof t.onChange&&t.onChange({name:t.config.name,value:e.value})}}])&&o(e.prototype,t),r&&o(e,r),i}();function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=m(o);return t=a?(e=m(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==d(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,p);var e,t,r,n=y(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return e=i,(t=[{key:"render",value:function(){var t=this;return React.createElement("input",{type:"hidden",value:this.state.value,disabled:this.props.disabled,placeholder:this.config.placeholder,onChange:function(){return t.handleOnChange({value:t.input.value})},ref:function(e){return t.input=e}})}}])&&v(e.prototype,t),r&&v(e,r),i}(),n=r(48),i=r(74),g=r.n(i),_=r(75),b=r.n(_),T=r(76),I=r.n(T),O=r(77),w=r.n(O);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=A(o);return t=a?(e=A(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==R(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object(n.registerPlugin)(g.a,b.a,I.a,w.a);var C=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(o,p);var e,t,r,i=P(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=i.call(this,e,{name:"image",allowMultiple:!1,imageserver:{process:"/image",fetch:"/image"}});var r=[],n=e.value||[];return Array.isArray(n)||(n=[n]),n.forEach(function(e){var t="object"==R(e)?e.src:e;r.push({source:{url:t},options:{type:"local",file:{name:t},metadata:{poster:t}}})}),t.state={uploadedFiles:r},t}return e=o,(t=[{key:"validate",value:function(){var t=!0;return this.imageuploader&&this.imageuploader.getFiles&&this.imageuploader.getFiles().forEach(function(e){e.serverId||(t=!1)}),t}},{key:"init",value:function(){}},{key:"updateUploadedFiles",value:function(e){e.addFile;var t,r=e.removeFile,n=e.next;this.imageuploader&&this.imageuploader.getFiles&&(t=this.imageuploader.getFiles(),r&&(t=t.filter(function(e){return e.serverId!=r.serverId})),this.setState({uploadedFiles:t.map(function(e){return e.file})},function(){n&&n(t)}))}},{key:"updateValue",value:function(e){var r=[],n=this.config.as&&"json"==this.config.as;e.forEach(function(e){try{var t="string"==typeof e.serverId?JSON.parse(e.serverId):e.serverId;r.push(n?{src:t.url}:t.url)}catch(e){console.log(e)}}),this.handleOnChange({name:this.config.name,value:r})}},{key:"render",value:function(){var t=this,r=this;return React.createElement(n.FilePond,{ref:function(e){return t.imageuploader=e},files:this.state.uploadedFiles,oninit:r.init,onprocessfile:function(e,t){return r.updateUploadedFiles({addFile:t,next:function(e){return r.updateValue(e)}})},onremovefile:function(e,t){return r.updateUploadedFiles({removeFile:t,next:function(e){return r.updateValue(e)}})},name:r.config.name,server:this.config.imageserver.process,allowMultiple:this.config.allowMultiple,acceptedFileTypes:["image/*"],allowFileSizeValidation:"true",allowReorder:!0,styleItemPanelAspectRatio:"1",maxFileSize:"8mb",maxFiles:"5",allowBrowse:"true",imageResizeTargetWidth:"80",imageResizeTargetHeight:"80",imageCropAspectRatio:"16:9",labelIdle:"Sleep afbeelding(en) naar deze plek of <span class='filepond--label-action'>KLIK HIER</span>",labelInvalidField:"Field contains invalid files",labelFileWaitingForSize:"Wachtend op grootte",labelFileSizeNotAvailable:"Grootte niet beschikbaar",labelFileCountSingular:"Bestand in lijst",labelFileCountPlural:"Bestanden in lijst",labelFileLoading:"Laden",labelFileAdded:"Toegevoegd",labelFileLoadError:"Fout bij het uploaden",labelFileRemoved:"Verwijderd",labelFileRemoveError:"Fout bij het verwijderen",labelFileProcessing:"Laden",labelFileProcessingComplete:"Afbeelding geladen",labelFileProcessingAborted:"Upload cancelled",labelFileProcessingError:"Error during upload",labelFileProcessingRevertError:"Error during revert",labelTapToCancel:"tap to cancel",labelTapToRetry:"tap to retry",labelTapToUndo:"tap to undo",labelButtonRemoveItem:"Verwijderen",labelButtonAbortItemLoad:"Abort",labelButtonRetryItemLoad:"Retry",labelButtonAbortItemProcessing:"Verwijder",labelButtonUndoItemProcessing:"Undo",labelButtonRetryItemProcessing:"Retry",labelButtonProcessItem:"Upload"})}}])&&S(e.prototype,t),r&&S(e,r),o}();function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=k(o);return t=a?(e=k(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==M(n)&&"function"!=typeof n?j(r):n}}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(i,a["a"]);var e,t,r,n=x(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this,e)).state={value:t.props.value},t.onKeyUpx=t.onKeyUpx.bind(j(t)),t}return e=i,(t=[{key:"componentDidMount",value:function(){var e=this.props.value,e=this.filterHTML(e);this.input.innerHTML=e}},{key:"filterHTML",value:function(e){return e=(e=(e=e.replace(/<(\/?\s*(?:a [^>]+|a|b|i|strong|em|p|div|br|ul|li)\s*\/?)>/g,"[[[$1]]]")).replace(/<[^>]+>/g,"")).replace(/\[\[\[([^\]]+)\]\]\]/g,"<$1>")}},{key:"executeAction",value:function(e,t,r){e.preventDefault(),e.stopPropagation(),document.execCommand(t,!1,r),this.onKeyUp()}},{key:"onFocus",value:function(e){this.props.onFocus&&this.props.onFocus(e)}},{key:"onBlur",value:function(e){this.props.onBlur&&this.props.onBlur(e),this.props.onChange&&this.props.onChange({value:this.state.value})}},{key:"onKeyUpx",value:function(){var e=this.input.innerHTML,e=this.filterHTML(e);this.setState({value:e}),this.props.onKeyUp&&this.props.onKeyUp(e)}},{key:"render",value:function(){var t=this;return React.createElement("div",{className:"osc-html-editor"},React.createElement("div",{className:"osc-html-editor-buttons"},React.createElement("div",{className:"osc-html-editor-button osc-html-editor-button-bold",onMouseDown:function(e){return t.executeAction(e,"bold")}}," "),React.createElement("div",{className:"osc-html-editor-button osc-html-editor-button-italic",onMouseDown:function(e){return t.executeAction(e,"italic")}}," "),React.createElement("div",{className:"osc-html-editor-button osc-html-editor-button-insertunorderedlist",onMouseDown:function(e){return t.executeAction(e,"insertunorderedlist")}}," "),React.createElement("div",{className:"osc-html-editor-button osc-html-editor-button-createlink",onMouseDown:function(e){return t.executeAction(e,"createlink",prompt("Lank naar","http://"))}}," ")),React.createElement("div",{className:"osc-html-editor-content",contentEditable:!0,onFocus:function(e){return t.onFocus(e)},onBlur:function(e){return t.onBlur(e)},onKeyUp:function(){return t.onKeyUpx()},ref:function(e){return t.input=e}}))}}])&&L(e.prototype,t),r&&L(e,r),i}();function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=z(o);return t=a?(e=z(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==F(n)&&"function"!=typeof n?q(r):n}}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(i,a["a"]);var e,t,r,n=B(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=q(t=n.call(this,e,{name:"tekst",inputType:"input",minLength:5,maxLength:1024,placeholder:""}));return r.id=e.id||"osc-formfields-plaintext-with-counter-"+parseInt(1e6*Math.random()),r.state={focused:!1,value:e.value||"",valueLength:e.value&&e.value.length||0},r.key=e.useKey||(r.id||"osc-input-with-counter-")+parseInt(1e7*Math.random),t.onChange=e.onChange,r.handleOnChange=r.handleOnChange.bind(q(t)),r.onInputFocus=r.onInputFocus.bind(q(t)),r.onInputBlur=r.onInputBlur.bind(q(t)),r.onInputKeyUp=r.onInputKeyUp.bind(q(t)),t}return e=i,(t=[{key:"isValid",value:function(){var e={isValid:!0,warning:null};return this.state.valueLength<this.config.minLength&&(e.warning="De tekst is te kort",e.isValid=!1),this.state.valueLength>this.config.maxLength&&(e.warning="De tekst is te lang",e.isValid=!1),this.setState(e),e.isValid}},{key:"validate",value:function(){return this.setState({showWarning:!0}),this.isValid()}},{key:"handleOnChange",value:function(e){e=e||{},this.setState(e),"function"==typeof this.onChange&&this.onChange({name:this.config.name,value:e.value})}},{key:"onInputFocus",value:function(){var e={focused:!0,showWarning:!1};this.setState(e)}},{key:"onInputBlur",value:function(){var e={focused:!1};this.setState(e)}},{key:"onInputKeyUp",value:function(e){var t={};t.value=e||this.input.value;var r=t.value.length;t.valueLength=r,t.isValid=r>=this.config.minLength&&r<=this.config.maxLength,this.setState(t)}},{key:"render",value:function(){var e,t=this,r=this,n=null,i=null;r.state.focused&&(n=r.state.valueLength<r.config.minLength?React.createElement("div",{className:"osc-form-counter osc-form-error"},"Nog minimaal ",React.createElement("span",{className:""},r.config.minLength-r.state.valueLength)," tekens"):(e=r.state.valueLength>r.config.maxLength?"osc-form-error":"",React.createElement("div",{className:"osc-form-counter "+e},"Je hebt nog ",React.createElement("span",{className:""},r.config.maxLength-r.state.valueLength)," tekens over."))),r.state.showWarning&&r.state.warning&&(i=React.createElement("div",{className:"osc-form-warning",ref:function(e){return t["form-warning"]=e}},r.state.warning));var o=null;switch(r.config.inputType){case"htmlarea":o=React.createElement(G,{value:this.state.value,onChange:r.handleOnChange,onFocus:r.onInputFocus,onBlur:r.onInputBlur,onKeyUp:r.onInputKeyUp});break;case"textarea":o=React.createElement("textarea",{key:r.key,ref:function(e){return r.input=e},value:this.state.value,disabled:this.props.disabled,placeholder:this.config.placeholder,onChange:function(){return r.handleOnChange({value:r.input.value})},onKeyUp:function(){return r.onInputKeyUp()},onFocus:function(e){return r.onInputFocus(e)},onBlur:function(e){return r.onInputBlur(e)}});break;case"input":default:o=React.createElement("input",{key:r.key,ref:function(e){return r.input=e},value:this.state.value,disabled:this.props.disabled,placeholder:this.config.placeholder,onChange:function(){return r.handleOnChange({value:r.input.value})},onKeyUp:function(){return r.onInputKeyUp()},onFocus:function(e){return r.onInputFocus(e)},onBlur:function(e){return r.onInputBlur(e)}})}return React.createElement("div",{id:r.id,ref:function(e){return r.instance=e},className:"osc-input-with-counter"},React.createElement("div",{className:"osc-form-feedback"},o,n,i))}}])&&U(e.prototype,t),r&&U(e,r),i}();function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=Z(o);return t=a?(e=Z(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==H(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(i,p);var e,t,r,n=Q(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return e=i,(t=[{key:"render",value:function(){var t=this,e=null;return t.state.error&&(e=React.createElement("div",{className:"osc-form-error osc-form-field-error"},"Je hebt nog geen keuze gemaakt")),React.createElement("div",{className:"osc-radios"},t.config.choices.map(function(e){return e.dangerousDescription?React.createElement("div",{className:"osc-radio-container",key:e.value},React.createElement("div",{className:"osc-radio-input".concat(t.state.value==e.value?" osc-radio-input-checked":"")},React.createElement("input",{type:"radio",name:t.divId,value:e.value,onChange:function(){return t.handleOnChange({value:e.value})}})),React.createElement("div",{className:"osc-radio-text",dangerouslySetInnerHTML:{__html:e.dangerousDescription}})):React.createElement("div",{className:"osc-radio-container",key:e.value},React.createElement("div",{className:"osc-radio-input".concat(t.state.value==e.value?" osc-radio-input-checked":"")},React.createElement("input",{type:"radio",name:t.divId,value:e.value,onChange:function(){return t.handleOnChange({value:e.value})}})),React.createElement("div",{className:"osc-radio-text"},e.dangerousDescription?null:e.description||e.title||e.value))}),e)}}])&&W(e.prototype,t),r&&W(e,r),i}();function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=re(o);return t=a?(e=re(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==$(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(i,p);var e,t,r,n=te(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return e=i,(t=[{key:"validate",value:function(e){var t=e.showErrors,r=!0,n="";return this.state.value&&this.state.value.match(/^\s*\d{4}\s*[a-zA-Z][a-zA-Z]\s*$/)||(r=!1,t&&(n="Dit is geen postcode")),this.config.required&&!this.state.value&&(r=!1,t&&(n="Je hebt nog niets ingevuld")),this.setState({isValid:r,error:n}),r}},{key:"render",value:function(){var t=this,e=null;return t.state.error&&(e=React.createElement("div",{className:"osc-form-error osc-form-field-error"},t.state.error)),React.createElement("div",{className:"osc-textinput"},React.createElement("input",{type:"text",value:this.state.value,disabled:this.props.disabled,placeholder:this.config.placeholder,onChange:function(){return t.handleOnChange({value:t.input.value})},ref:function(e){return t.input=e}}),e)}}])&&J(e.prototype,t),r&&J(e,r),i}();function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=ce(o);return t=a?(e=ce(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==ie(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var se=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(i,p);var e,t,r,n=ue(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return e=i,(t=[{key:"componentDidMount",value:function(){var e=this.state.value||this.config.choices[0]&&this.config.choices[0].value;this.handleOnChange({value:e})}},{key:"render",value:function(){var t=this,e=null;return t.state.error&&(e=React.createElement("div",{className:"osc-form-error osc-form-field-error"},"Je hebt nog geen keuze gemaakt")),React.createElement("div",{className:"osc-select"},React.createElement("select",{value:this.state.value||"",disabled:this.props.disabled,placeholder:this.config.placeholder,onChange:function(){return t.handleOnChange({value:t.input.value})},ref:function(e){return t.input=e}},t.config.choices.map(function(e,t){var r=e.description||e.title||e.value;return React.createElement("option",{value:e.value||"",key:"".concat(r,"-").concat(e.value,"-").concat(t)},r)})),e)}}])&&oe(e.prototype,t),r&&oe(e,r),i}();function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=ve(o);return t=a?(e=ve(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==le(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(i,p);var e,t,r,n=de(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return e=i,(t=[{key:"render",value:function(){var t=this,e=null;return t.state.error&&(e=React.createElement("div",{className:"osc-form-error osc-form-field-error"},"Je hebt nog niets ingevuld")),React.createElement("div",{className:"osc-textinput"},React.createElement("input",{type:"text",value:this.state.value,disabled:this.props.disabled,placeholder:this.config.placeholder,onChange:function(){return t.handleOnChange({value:t.input.value})},ref:function(e){return t.input=e}}),e)}}])&&fe(e.prototype,t),r&&fe(e,r),i}();function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ge(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=_e(o);return t=a?(e=_e(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==ye(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(i,p);var e,t,r,n=ge(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n.apply(this,arguments)}return e=i,(t=[{key:"render",value:function(){var t=this,e=null;return t.state.error&&(e=React.createElement("div",{className:"osc-form-error osc-form-field-error"},"Je hebt nog niets ingevuld")),React.createElement("div",{className:"osc-textarea"},React.createElement("textarea",{value:this.state.value,disabled:this.props.disabled,placeholder:this.config.placeholder,onChange:function(){return t.handleOnChange({value:t.input.value})},ref:function(e){return t.input=e}},this.state.value),e)}}])&&me(e.prototype,t),r&&me(e,r),i}();function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Oe(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(o),!0).forEach(function(e){var t,r,n;t=i,n=o[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):Ie(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))})}return i}function we(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=Pe(o);return t=a?(e=Pe(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==Te(n)&&"function"!=typeof n?De(r):n}}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ae=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(i,a["a"]);var e,t,r,n=Se(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=De(t=n.call(this,e,{inputType:null,validateAction:null,changeAction:null,required:!1,title:null,description:null,choices:[]}));return r.config.name=r.config.name||r.config.title.toLowerCase(),r.state={value:e.initValue||void 0},r.handleOnChange=r.handleOnChange.bind(r),r.onChange=e.onChange,t}return e=i,(t=[{key:"validate",value:function(e){var t=e.showErrors;return!this.input||this.input.validate({showErrors:t})}},{key:"handleOnChange",value:function(e){"function"==typeof this.onChange&&this.onChange(e)}},{key:"render",value:function(){var t=this,e=null;t.config.title&&(e=React.createElement("h3",{className:"osc-form-title"},t.config.title));var r=null;t.config.description&&(r=React.createElement("div",{className:"osc-form-description",dangerouslySetInnerHTML:{__html:t.config.description}}));var n=null;switch(t.config.inputType){case"hidden":n=React.createElement(E,{config:t.config,value:this.state.value,onChange:t.handleOnChange,ref:function(e){return t.input=e}});break;case"html-with-counter":case"htmlarea-with-counter":n=React.createElement(Y,{config:Oe(Oe({},t.config),{},{inputType:"htmlarea"}),value:this.state.value,onChange:t.handleOnChange,ref:function(e){return t.input=e}});break;case"image-upload":n=React.createElement(C,{config:t.config,value:this.state.value,onChange:t.handleOnChange,ref:function(e){return t.input=e}});break;case"input-with-counter":case"text-with-counter":n=React.createElement(Y,{config:Oe({inputType:"input"},t.config),value:this.state.value,onChange:t.handleOnChange,ref:function(e){return t.input=e}});break;case"postcode":n=React.createElement(ne,{config:t.config,value:this.state.value,onChange:t.handleOnChange,ref:function(e){return t.input=e}});break;case"radios":n=React.createElement(K,{config:t.config,value:this.state.value,onChange:t.handleOnChange,ref:function(e){return t.input=e}});break;case"select":case"multiple-choice":n=React.createElement(se,{config:t.config,value:this.state.value,onChange:t.handleOnChange,ref:function(e){return t.input=e}});break;case"text":n=React.createElement(he,{config:t.config,value:this.state.value,onChange:t.handleOnChange,ref:function(e){return t.input=e}});break;case"textarea":n=React.createElement(be,{config:t.config,value:this.state.value,onChange:t.handleOnChange,ref:function(e){return t.input=e}});break;case"textarea-with-counter":n=React.createElement(Y,{config:Oe(Oe({},t.config),{},{inputType:"textarea"}),value:this.state.value,onChange:t.handleOnChange,ref:function(e){return t.input=e}});break;default:console.log("Form field "+t.config.inputType+"not yet implemented")}return React.createElement("div",{id:t.id,ref:function(e){return t.instance=e},className:"osc-form-field"},e,r,n)}}])&&we(e.prototype,t),r&&we(e,r),i}();function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Le(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=Ge(o);return t=a?(e=Ge(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==Ce(n)&&"function"!=typeof n?ke(r):n}}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fe=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(o,a["a"]);var e,t,r,i=je(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=ke(t=i.call(this,e,{title:null,intro:null,fields:[]})),n=e.values;return!n&&r.config.fields&&r.config.fields.length&&(n={},r.config.fields.map(function(e,t){var r=e.name||e.title.toLowerCase();n[r]=e.value})),r.state={values:n||{}},r.handleOnChange=r.handleOnChange.bind(ke(t)),r.fields=[],t}return e=o,(t=[{key:"getValues",value:function(){return this.state.values}},{key:"validate",value:function(e){var t=e.showErrors,r=e.scrollTo,n=!0,i=null;return this.fields.forEach(function(e){e.validate({showErrors:t})||(n=!1,i=i||e)}),r&&i&&i.instance&&i.instance.scrollIntoView&&i.instance.scrollIntoView({behavior:"smooth"}),n}},{key:"handleOnChange",value:function(e){var t=this,r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Me(Object(r),!0).forEach(function(e){Le(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},this.state.values);r[e.name]=e.value,this.setState({values:r},function(){"function"==typeof t.props.onChange&&t.props.onChange(e)})}},{key:"render",value:function(){var r=this,e=null;r.config.title&&(e=React.createElement("h2",{className:"osc-form-title"},r.config.title));var t=null;r.config.intro&&(t=React.createElement("div",{className:"osc-form-intro",dangerouslySetInnerHTML:{__html:r.config.intro}}));var n=null;return r.config.fields&&r.config.fields.length&&(n=React.createElement("div",{className:"osc-form-fields"},r.config.fields.map(function(e,t){return React.createElement(Ae,Le({config:e,initValue:e.value,onChange:r.handleOnChange,ref:function(e){return r.input=e},key:"osc-form-field-".concat(t)},"ref",function(e){r.fields[t]=e}))}))),React.createElement("div",{id:r.divId,className:"osc-form",ref:function(e){return r.instance=e}},e,t,n)}}])&&Ne(e.prototype,t),r&&Ne(e,r),o}();function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=Ye(o);return t=a?(e=Ye(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==Ue(n)&&"function"!=typeof n?ze(r):n}}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var He=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(i,a["a"]);var e,t,r,n=qe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this,e)).state={value:t.props.value,touched:t.props.touched||!1},t.handleChange=t.handleChange.bind(ze(t)),t}return e=i,(t=[{key:"handleChange",value:function(e){var t=e.target.value;"function"==typeof this.props.onChange&&this.props.onChange(t),this.setState({value:t,touched:!0})}},{key:"doTouch",value:function(){"function"==typeof this.props.onChange&&this.props.onChange(50),this.setState({touched:!0})}},{key:"calcProgress",value:function(e,t,r){return 2*(r-e)/(t-e)-1}},{key:"render",value:function(){var t=this,e=t.state,r=e.value,n=e.touched,i=t.props,o=i.min,a=i.max,u=i.step;return React.createElement("div",{className:"".concat(t.props.className," osc-slider")},React.createElement("div",{className:"osc-slider-track-container"},React.createElement("div",{className:"osc-slider-track"}),React.createElement("div",{className:"osc-slider-track-progress-container"},React.createElement("div",{className:"osc-slider-track-progress",style:{transform:"scaleX("+t.calcProgress(o,a,r)+")"}})),React.createElement("div",{className:"osc-slider-track-dot-end osc-slider-track-dot-left"}),React.createElement("div",{className:"osc-slider-track-dot-start osc-slider-track-dot-center"}),React.createElement("div",{className:"osc-slider-track-dot-end osc-slider-track-dot-right"})),React.createElement("input",{type:"range",min:o,max:a,step:u,value:r,onClick:function(){n||t.doTouch()},onChange:t.handleChange,className:n?"osc-slider-input-range":"osc-slider-input-range osc-slider-untouched",ref:function(e){return t.input=e}}))}}])&&Ve(e.prototype,t),r&&Ve(e,r),i}();t.a={Form:Fe,FormField:Ae,Hidden:E,ImageUpload:C,InputWithCounter:Y,Postcode:ne,Radios:K,Select:se,Text:he,Textarea:be,Slider:He}},function(e,t){e.exports=window.ReactDOM},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(9);e.exports=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){"use strict";(function(o){var t,r,n="URLSearchParams"in self,i="Symbol"in self&&"iterator"in Symbol,u="FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in self,c="ArrayBuffer"in self;function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function e(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return i&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function p(e){if(e.bodyUsed)return o.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(r){return new o(function(e,t){r.onload=function(){e(r.result)},r.onerror=function(){t(r.error)}})}function v(e){var t=new FileReader,r=d(t);return t.readAsArrayBuffer(e),r}function h(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:u&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:n&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&u&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=h(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||r(e))?this._bodyArrayBuffer=h(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return o.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return o.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return o.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||o.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var e,t,r,n=p(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=d(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return o.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return o.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}c&&(t=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(e){return e&&-1<t.indexOf(Object.prototype.toString.call(e))}),f.prototype.append=function(e,t){e=s(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},f.prototype.delete=function(e){delete this.map[s(e)]},f.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},f.prototype.set=function(e,t){this.map[s(e)]=l(t)},f.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},f.prototype.keys=function(){var r=[];return this.forEach(function(e,t){r.push(t)}),e(r)},f.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),e(t)},f.prototype.entries=function(){var r=[];return this.forEach(function(e,t){r.push([t,e])}),e(r)},i&&(f.prototype[Symbol.iterator]=f.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function E(e,t){var r,n,i=(t=t||{}).body;if(e instanceof E){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),-1<m.indexOf(n)?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function g(e){var i=new FormData;return e.trim().split("&").forEach(function(e){var t,r,n;e&&(r=(t=e.split("=")).shift().replace(/\+/g," "),n=t.join("=").replace(/\+/g," "),i.append(decodeURIComponent(r),decodeURIComponent(n)))}),i}function _(e,t){t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},y.call(E.prototype),y.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];_.redirect=function(e,t){if(-1===b.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})};var T=self.DOMException;try{new T}catch(e){(T=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),T.prototype.constructor=T}function I(i,a){return new o(function(n,e){var t=new E(i,a);if(t.signal&&t.signal.aborted)return e(new T("Aborted","AbortError"));var o=new XMLHttpRequest;function r(){o.abort()}o.onload=function(){var e,i,t={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",i=new f,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t,r=e.split(":"),n=r.shift().trim();n&&(t=r.join(":").trim(),i.append(n,t))}),i)};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var r="response"in o?o.response:o.responseText;n(new _(r,t))},o.onerror=function(){e(new TypeError("Network request failed"))},o.ontimeout=function(){e(new TypeError("Network request failed"))},o.onabort=function(){e(new T("Aborted","AbortError"))},o.open(t.method,t.url,!0),"include"===t.credentials?o.withCredentials=!0:"omit"===t.credentials&&(o.withCredentials=!1),"responseType"in o&&u&&(o.responseType="blob"),t.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),t.signal&&(t.signal.addEventListener("abort",r),o.onreadystatechange=function(){4===o.readyState&&t.signal.removeEventListener("abort",r)}),o.send(void 0===t._bodyInit?null:t._bodyInit)})}I.polyfill=!0,self.fetch||(self.fetch=I,self.Headers=f,self.Request=E,self.Response=_)}).call(this,r(12))},function(e,t,r){e.exports=r(67).Promise},function(e,t,r){var n=r(8),i=r(14),o=r(23);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(8),i=r(25),o=r(15),a=r(24),u=Object.defineProperty;t.f=n?u:function(e,t,r){if(o(e),t=a(t,!0),o(r),i)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(10);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,r){var n=r(42),i=r(44);e.exports=function(e){return n(i(e))}},function(e,t,r){var n=r(4),i=r(13);e.exports=function(t,r){try{i(n,t,r)}catch(e){n[t]=r}return r}},function(e,t){e.exports={}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},,function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(8),i=r(49),o=r(23),a=r(16),u=r(24),c=r(7),s=r(25),l=Object.getOwnPropertyDescriptor;t.f=n?l:function(e,t){if(e=a(e),t=u(t,!0),s)try{return l(e,t)}catch(e){}if(c(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var i=r(10);e.exports=function(e,t){if(!i(e))return e;var r,n;if(t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;if("function"==typeof(r=e.valueOf)&&!i(n=r.call(e)))return n;if(!t&&"function"==typeof(r=e.toString)&&!i(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(8),i=r(9),o=r(26);e.exports=!n&&!i(function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(4),i=r(10),o=n.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,r){var n=r(28),i=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return i.call(e)}),e.exports=n.inspectSource},function(e,t,r){var n=r(4),i=r(17),o="__core-js_shared__",a=n[o]||i(o,{});e.exports=a},function(e,t,r){var n=r(30),i=r(31),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t,r){var n=r(53),i=r(28);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:n?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+n).toString(36)}},function(e,t,r){function n(e){return"function"==typeof e?e:void 0}var i=r(56),o=r(4);e.exports=function(e,t){return arguments.length<2?n(i[e])||n(o[e]):i[e]&&i[e][t]||o[e]&&o[e][t]}},function(e,t,r){var a=r(7),u=r(16),c=r(34).indexOf,s=r(18);e.exports=function(e,t){var r,n=u(e),i=0,o=[];for(r in n)!a(s,r)&&a(n,r)&&o.push(r);for(;t.length>i;)a(n,r=t[i++])&&(~c(o,r)||o.push(r));return o}},function(e,t,r){function n(u){return function(e,t,r){var n,i=c(e),o=s(i.length),a=l(r,o);if(u&&t!=t){for(;a<o;)if((n=i[a++])!=n)return!0}else for(;a<o;a++)if((u||a in i)&&i[a]===t)return u||a||0;return!u&&-1}}var c=r(16),s=r(45),l=r(58);e.exports={includes:n(!0),indexOf:n(!1)}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?n:r)(e)}},function(e,t,r){var n=r(9);e.exports=!!Object.getOwnPropertySymbols&&!n(function(){return!String(Symbol())})},function(e,t,r){var l=r(4),f=r(22).f,p=r(13),d=r(50),v=r(17),h=r(54),y=r(60);e.exports=function(e,t){var r,n,i,o,a=e.target,u=e.global,c=e.stat,s=u?l:c?l[a]||v(a,{}):(l[a]||{}).prototype;if(s)for(r in t){if(i=t[r],n=e.noTargetGet?(o=f(s,r))&&o.value:s[r],!y(u?r:a+(c?".":"#")+r,e.forced)&&void 0!==n){if(typeof i==typeof n)continue;h(i,n)}(e.sham||n&&n.sham)&&p(i,"sham",!0),d(s,r,i,e)}}},function(e,t,r){var n=r(47),i=r(63),o=r(14),a=n("unscopables"),u=Array.prototype;null==u[a]&&o.f(u,a,{configurable:!0,value:i(null)}),e.exports=function(e){u[a][e]=!0}},function(e,t,r){function a(e){throw e}var u=r(8),c=r(9),s=r(7),l=Object.defineProperty,f={};e.exports=function(e,t){if(s(f,e))return f[e];var r=[][e],n=!!s(t=t||{},"ACCESSORS")&&t.ACCESSORS,i=s(t,0)?t[0]:a,o=s(t,1)?t[1]:void 0;return f[e]=!!r&&!c(function(){if(n&&!u)return!0;var e={length:-1};n?l(e,1,{enumerable:!0,get:a}):e[1]=1,r.call(e,i,o)})}},function(e,t,r){var n=r(4),i=r(46),o=Function.call;e.exports=function(e,t,r){return i(o,n[e].prototype[t],r)}},,function(e,t,r){var n=r(9),i=r(43),o="".split;e.exports=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,r){var n=r(35),i=Math.min;e.exports=function(e){return 0<e?i(n(e),9007199254740991):0}},function(e,t,r){var o=r(61);e.exports=function(n,i,e){if(o(n),void 0===i)return n;switch(e){case 0:return function(){return n.call(i)};case 1:return function(e){return n.call(i,e)};case 2:return function(e,t){return n.call(i,e,t)};case 3:return function(e,t,r){return n.call(i,e,t,r)}}return function(){return n.apply(i,arguments)}}},function(e,t,r){var n=r(4),i=r(30),o=r(7),a=r(31),u=r(36),c=r(62),s=i("wks"),l=n.Symbol,f=c?l:l&&l.withoutSetter||a;e.exports=function(e){return o(s,e)||(u&&o(l,e)?s[e]=l[e]:s[e]=f("Symbol."+e)),s[e]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilePond=t.FileStatus=t.registerPlugin=void 0;var n=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e};function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o,s=r(2),a=(o=s)&&o.__esModule?o:{default:o},u=r(88);t.registerPlugin=u.registerPlugin,t.FileStatus=u.FileStatus;var c=(0,u.supported)(),l=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"];t.FilePond=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(f,a.default.Component),n(f,[{key:"componentDidMount",value:function(){var e,t,r=this;c&&((e=Object.assign({},this.props)).onupdatefiles&&(t=e.onupdatefiles,e.onupdatefiles=function(e){r.allowFilesSync=!1,t(e)}),this._pond=(0,u.create)(this._element,e),Object.keys(this._pond).filter(function(e){return!l.includes(e)}).forEach(function(e){r[e]=r._pond[e]}))}},{key:"componentWillUnmount",value:function(){this._pond&&(this._pond.destroy(),this.allowFilesSync=!0)}},{key:"shouldComponentUpdate",value:function(){return!!this.allowFilesSync||!(this.allowFilesSync=!0)}},{key:"componentDidUpdate",value:function(){var e;this._pond&&(delete(e=Object.assign({},this.props)).onupdatefiles,this._pond.setOptions(e))}},{key:"render",value:function(){var t=this,e=this.props,r=e.id,n=e.name,i=e.className,o=e.allowMultiple,a=e.required,u=e.captureMethod,c=e.acceptedFileTypes;return(0,s.createElement)("div",{className:"filepond--wrapper"},(0,s.createElement)("input",{type:"file",name:n,id:r,accept:c,multiple:o,required:a,className:i,capture:u,ref:function(e){return t._element=e}}))}}]),f);function f(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,e));return t.allowFilesSync=!0,t}},function(e,t,r){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},function(e,t,r){var u=r(4),c=r(13),s=r(7),l=r(17),n=r(27),i=r(51),o=i.get,f=i.enforce,p=String(String).split("String");(e.exports=function(e,t,r,n){var i=!!n&&!!n.unsafe,o=!!n&&!!n.enumerable,a=!!n&&!!n.noTargetGet;"function"==typeof r&&("string"!=typeof t||s(r,"name")||c(r,"name",t),f(r).source=p.join("string"==typeof t?t:"")),e!==u?(i?!a&&e[t]&&(o=!0):delete e[t],o?e[t]=r:c(e,t,r)):o?e[t]=r:l(t,r)})(Function.prototype,"toString",function(){return"function"==typeof this&&o(this).source||n(this)})},function(e,t,r){var n,i,o,a,u,c,s,l,f=r(52),p=r(4),d=r(10),v=r(13),h=r(7),y=r(29),m=r(18),E=p.WeakMap;s=f?(n=new E,i=n.get,o=n.has,a=n.set,u=function(e,t){return a.call(n,e,t),t},c=function(e){return i.call(n,e)||{}},function(e){return o.call(n,e)}):(m[l=y("state")]=!0,u=function(e,t){return v(e,l,t),t},c=function(e){return h(e,l)?e[l]:{}},function(e){return h(e,l)}),e.exports={set:u,get:c,has:s,enforce:function(e){return s(e)?c(e):u(e,{})},getterFor:function(r){return function(e){var t;if(!d(e)||(t=c(e)).type!==r)throw TypeError("Incompatible receiver, "+r+" required");return t}}}},function(e,t,r){var n=r(4),i=r(27),o=n.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},function(e,t){e.exports=!1},function(e,t,r){var u=r(7),c=r(55),s=r(22),l=r(14);e.exports=function(e,t){for(var r=c(t),n=l.f,i=s.f,o=0;o<r.length;o++){var a=r[o];u(e,a)||n(e,a,i(t,a))}}},function(e,t,r){var n=r(32),i=r(57),o=r(59),a=r(15);e.exports=n("Reflect","ownKeys")||function(e){var t=i.f(a(e)),r=o.f;return r?t.concat(r(e)):t}},function(e,t,r){var n=r(4);e.exports=n},function(e,t,r){var n=r(33),i=r(19).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(35),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){function n(e,t){var r=u[a(e)];return r==s||r!=c&&("function"==typeof t?i(t):!!t)}var i=r(9),o=/#|\.prototype\./,a=n.normalize=function(e){return String(e).replace(o,".").toLowerCase()},u=n.data={},c=n.NATIVE="N",s=n.POLYFILL="P";e.exports=n},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,r){var n=r(36);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,r){function n(){}function i(e){return"<script>"+e+"</"+v+">"}var o,a=r(15),u=r(64),c=r(19),s=r(18),l=r(66),f=r(26),p=r(29),d="prototype",v="script",h=p("IE_PROTO"),y=function(){try{o=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;y=o?function(e){e.write(i("")),e.close();var t=e.parentWindow.Object;return e=null,t}(o):((t=f("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(i("document.F=Object")),e.close(),e.F);for(var r=c.length;r--;)delete y[d][c[r]];return y()};s[h]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(n[d]=a(e),r=new n,n[d]=null,r[h]=e):r=y(),void 0===t?r:u(r,t)}},function(e,t,r){var n=r(8),a=r(14),u=r(15),c=r(65);e.exports=n?Object.defineProperties:function(e,t){u(e);for(var r,n=c(t),i=n.length,o=0;o<i;)a.f(e,r=n[o++],t[r]);return e}},function(e,t,r){var n=r(33),i=r(19);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(32);e.exports=n("document","documentElement")},function(e,t,fe){(function(ce,se){var le;e.exports=function(){"use strict";function r(e){return typeof e==="function"||typeof e==="object"&&e!==null}function s(e){return typeof e==="function"}var e=undefined;if(!Array.isArray){e=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}else{e=Array.isArray}var n=e,i=0,o=undefined,a=undefined,u=function e(t,r){_[i]=t;_[i+1]=r;i+=2;if(i===2){if(a){a(b)}else{I()}}};function t(e){a=e}function c(e){u=e}var l=typeof window!=="undefined"?window:undefined,f=l||{},p=f.MutationObserver||f.WebKitMutationObserver,d=typeof self==="undefined"&&typeof ce!=="undefined"&&{}.toString.call(ce)==="[object process]",v=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function h(){return function(){return ce.nextTick(b)}}function y(){return function(){o(b)}}function m(){var e=0;var t=new p(b);var r=document.createTextNode("");t.observe(r,{characterData:true});return function(){r.data=e=++e%2}}function E(){var e=new MessageChannel;e.port1.onmessage=b;return function(){return e.port2.postMessage(0)}}function g(){var e=setTimeout;return function(){return e(b,1)}}var _=new Array(1e3);function b(){for(var e=0;e<i;e+=2){var t=_[e];var r=_[e+1];t(r);_[e]=undefined;_[e+1]=undefined}i=0}function T(){try{var e=le;var t=fe(69);o=t.runOnLoop||t.runOnContext;return y()}catch(e){return g()}}var I=undefined;if(d){I=h()}else if(p){I=m()}else if(v){I=E()}else if(l===undefined&&"function"==="function"){I=T()}else{I=g()}function O(e,t){var r=arguments;var n=this;var i=new this.constructor(S);if(i[R]===undefined){$(i)}var o=n._state;if(o){(function(){var e=r[o-1];u(function(){return X(o,i,e,n._result)})})()}else{q(n,i,e,t)}return i}function w(e){var t=this;if(e&&typeof e==="object"&&e.constructor===t){return e}var r=new t(S);F(r,e);return r}var R=Math.random().toString(36).substring(16);function S(){}var D=void 0,P=1,A=2,C=new Y;function M(){return new TypeError("You cannot resolve a promise with itself")}function L(){return new TypeError("A promises callback cannot return that same promise.")}function N(e){try{return e.then}catch(e){C.error=e;return C}}function x(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function j(e,n,i){u(function(t){var r=false;var e=x(i,n,function(e){if(r){return}r=true;if(n!==e){F(t,e)}else{V(t,e)}},function(e){if(r){return}r=true;B(t,e)},"Settle: "+(t._label||" unknown promise"));if(!r&&e){r=true;B(t,e)}},e)}function k(t,e){if(e._state===P){V(t,e._result)}else if(e._state===A){B(t,e._result)}else{q(e,undefined,function(e){return F(t,e)},function(e){return B(t,e)})}}function G(e,t,r){if(t.constructor===e.constructor&&r===O&&t.constructor.resolve===w){k(e,t)}else{if(r===C){B(e,C.error)}else if(r===undefined){V(e,t)}else if(s(r)){j(e,t,r)}else{V(e,t)}}}function F(e,t){if(e===t){B(e,M())}else if(r(t)){G(e,t,N(t))}else{V(e,t)}}function U(e){if(e._onerror){e._onerror(e._result)}z(e)}function V(e,t){if(e._state!==D){return}e._result=t;e._state=P;if(e._subscribers.length!==0){u(z,e)}}function B(e,t){if(e._state!==D){return}e._state=A;e._result=t;u(U,e)}function q(e,t,r,n){var i=e._subscribers;var o=i.length;e._onerror=null;i[o]=t;i[o+P]=r;i[o+A]=n;if(o===0&&e._state){u(z,e)}}function z(e){var t=e._subscribers;var r=e._state;if(t.length===0){return}var n=undefined,i=undefined,o=e._result;for(var a=0;a<t.length;a+=3){n=t[a];i=t[a+r];if(n){X(r,n,i,o)}else{i(o)}}e._subscribers.length=0}function Y(){this.error=null}var H=new Y;function W(e,t){try{return e(t)}catch(e){H.error=e;return H}}function X(e,t,r,n){var i=s(r),o=undefined,a=undefined,u=undefined,c=undefined;if(i){o=W(r,n);if(o===H){c=true;a=o.error;o=null}else{u=true}if(t===o){B(t,L());return}}else{o=n;u=true}if(t._state!==D){}else if(i&&u){F(t,o)}else if(c){B(t,a)}else if(e===P){V(t,o)}else if(e===A){B(t,o)}}function Q(r,e){try{e(function e(t){F(r,t)},function e(t){B(r,t)})}catch(e){B(r,e)}}var Z=0;function K(){return Z++}function $(e){e[R]=Z++;e._state=undefined;e._result=undefined;e._subscribers=[]}function J(e,t){this._instanceConstructor=e;this.promise=new e(S);if(!this.promise[R]){$(this.promise)}if(n(t)){this._input=t;this.length=t.length;this._remaining=t.length;this._result=new Array(this.length);if(this.length===0){V(this.promise,this._result)}else{this.length=this.length||0;this._enumerate();if(this._remaining===0){V(this.promise,this._result)}}}else{B(this.promise,ee())}}function ee(){return new Error("Array Methods must be provided an Array")}function te(e){return new J(this,e).promise}function re(i){var o=this;if(n(i))return new o(function(e,t){for(var r=i.length,n=0;n<r;n++)o.resolve(i[n]).then(e,t)});else return new o(function(e,t){return t(new TypeError("You must pass an array to race."))})}function ne(e){var t=new this(S);return B(t,e),t}function ie(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function oe(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function ae(e){this[R]=K();this._result=this._state=undefined;this._subscribers=[];if(S!==e){typeof e!=="function"&&ie();this instanceof ae?Q(this,e):oe()}}function ue(){var e=undefined;if(typeof se!=="undefined"){e=se}else if(typeof self!=="undefined"){e=self}else{try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if(r==="[object Promise]"&&!t.cast){return}}e.Promise=ae}return J.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===D&&r<e;r++)this._eachEntry(t[r],r)},J.prototype._eachEntry=function(t,e){var r,n,i=this._instanceConstructor,o=i.resolve;o===w?(r=N(t))===O&&t._state!==D?this._settledAt(t._state,e,t._result):"function"!=typeof r?(this._remaining--,this._result[e]=t):i===ae?(G(n=new i(S),t,r),this._willSettleAt(n,e)):this._willSettleAt(new i(function(e){return e(t)}),e):this._willSettleAt(o(t),e)},J.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===D&&(this._remaining--,e===A?B(n,r):this._result[t]=r),0===this._remaining&&V(n,this._result)},J.prototype._willSettleAt=function(e,t){var r=this;q(e,void 0,function(e){return r._settledAt(P,t,e)},function(e){return r._settledAt(A,t,e)})},ae.all=function(e){return new J(this,e).promise},ae.race=function(i){var o=this;return n(i)?new o(function(e,t){for(var r=i.length,n=0;n<r;n++)o.resolve(i[n]).then(e,t)}):new o(function(e,t){return t(new TypeError("You must pass an array to race."))})},ae.resolve=w,ae.reject=function(e){var t=new this(S);return B(t,e),t},ae._setScheduler=function(e){a=e},ae._setAsap=function(e){u=e},ae._asap=u,ae.prototype={constructor:ae,then:O,catch:function(e){return this.then(null,e)}},ue(),ae.polyfill=ue,ae.Promise=ae}()}).call(this,fe(68),fe(21))},function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var c,s=[],l=!1,f=-1;function p(){l&&c&&(l=!1,c.length?s=c.concat(s):f=-1,s.length&&d())}function d(){if(!l){var e=u(p);l=!0;for(var t=s.length;t;){for(c=s,s=[];++f<t;)c&&c[f].run();f=-1,t=s.length}c=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function h(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new v(e,t)),1!==s.length||l||u(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){r(72);var n=r(40);e.exports=n("Array","includes")},function(e,t,r){"use strict";var n=r(37),i=r(34).includes,o=r(38);n({target:"Array",proto:!0,forced:!r(39)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(e,t){return i(this,e,1<arguments.length?t:void 0)}}),o("includes")},,function(e,t,r){(function(Ht){e.exports=function(){"use strict";var h=function e(t){return/^image/.test(t.type)},s;function t(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){(function(e){return typeof e})}else{(function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})}return t(e)}function e(e,t,r,n){if(!s){typeof Symbol==="function"&&Symbol.for&&Symbol.for("react.element")||60103}var i=e&&e.defaultProps;var o=arguments.length-3;if(!t&&o!==0){({children:void 0})}if(t&&i){for(var a in i){if(t[a]===void 0){t[a]=i[a]}}}else if(!t){i||{}}if(o===1){t.children=n}else if(o>1){var u=new Array(o);for(var c=0;c<o;c++){u[c]=arguments[c+3]}t.children=u}return{$$typeof:s,type:e,key:r===undefined?null:""+r,ref:null,props:t,_owner:null}}function r(e){var t;if(typeof Symbol==="function"){if(Symbol.asyncIterator){e[Symbol.asyncIterator];if(t!=null)return t.call(e)}if(Symbol.iterator){e[Symbol.iterator];if(t!=null)return t.call(e)}}throw new TypeError("Object is not async iterable")}function l(e){this.wrapped=e}function n(o){var a,u;function e(n,i){return new Ht(function(e,t){var r={key:n,arg:i,resolve:e,reject:t,next:null};if(u){u=u.next=r}else{a=u=r;c(n,i)}})}function c(e,t){try{var r=o[e](t);var n=r.value;var i=n instanceof l;Ht.resolve(i?n.wrapped:n).then(function(e){if(i){c("next",e);return}s(r.done?"return":"normal",e)},function(e){c("throw",e)})}catch(e){s("throw",e)}}function s(e,t){switch(e){case"return":a.resolve({value:t,done:true});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:false});break}a=a.next;if(a){c(a.key,a.arg)}else{u=null}}this._invoke=e;if(typeof o.return!=="function"){this.return=undefined}}if(typeof Symbol==="function"&&Symbol.asyncIterator){n.prototype[Symbol.asyncIterator]=function(){return this}}function i(e){return function(){return new n(e.apply(this,arguments))}}function o(e){return new l(e)}function a(n,e){var t={},r=false;function i(t,r){true;new Ht(function(e){e(n[t](r))});return{done:false,value:e(r)}}if(typeof Symbol==="function"&&Symbol.iterator){t[Symbol.iterator]=function(){return this}}t.next=function(e){if(r){false;return e}return i("next",e)};if(typeof n.throw==="function"){t.throw=function(e){if(r){false;throw e}return i("throw",e)}}if(typeof n.return==="function"){t.return=function(e){return i("return",e)}}return t}function c(e,t,r,n,i,o,a){try{var u=e[o](a);var c=u.value}catch(e){r(e);return}if(u.done){t(c)}else{Ht.resolve(c).then(n,i)}}function u(u){return function(){var e=this,a=arguments;return new Ht(function(t,r){var n=u.apply(e,a);function i(e){c(n,t,r,i,o,"next",e)}function o(e){c(n,t,r,i,o,"throw",e)}i(undefined)})}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function d(e,t,r){if(t)p(e.prototype,t);if(r)p(e,r);return e}function v(e,t){for(var r in t){var n=t[r];n.configurable=n.enumerable=true;if("value"in n)n.writable=true;Object.defineProperty(e,r,n)}if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(var o=0;o<i.length;o++){var a=i[o];var n=t[a];n.configurable=n.enumerable=true;if("value"in n)n.writable=true;Object.defineProperty(e,a,n)}}return e}function y(e,t){var r=Object.getOwnPropertyNames(t);for(var n=0;n<r.length;n++){var i=r[n];var o=Object.getOwnPropertyDescriptor(t,i);if(o&&o.configurable&&e[i]===undefined){Object.defineProperty(e,i,o)}}return e}function m(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function E(){Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return E.apply(this,arguments)}function g(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){m(t,e,r[e])})}return t}function _(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)I(e,t)}function b(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function T(e){Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return T(e)}function I(e,t){Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return I(e,t)}function O(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function w(e,t,r){if(O()){Reflect.construct}else{(function e(t,r,n){var i=[null];i.push.apply(i,r);var o=Function.bind.apply(t,i);var a=new o;if(n)I(a,n.prototype);return a})}return w.apply(null,arguments)}function R(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function S(e){var n=typeof Map==="function"?new Map:undefined;(function e(t){if(t===null||!R(t))return t;if(typeof t!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof n!=="undefined"){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return w(t,arguments,T(this).constructor)}Object.create(t.prototype,{constructor:{value:r,enumerable:false,writable:true,configurable:true}});return I(r,t)});return S(e)}function D(e,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return t[Symbol.hasInstance](e)}else{return e instanceof t}}function P(e){return e&&e.__esModule?e:{default:e}}function A(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function C(e,t){if(e!==t){throw new TypeError("Cannot instantiate an arrow function")}}function M(e){if(e==null)throw new TypeError("Cannot destructure undefined")}function L(e,t){if(e==null)return{};var r={};var n=Object.keys(e);var i,o;for(0;o<n.length;o++){n[o];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function N(e,t){if(e==null)return{};var r=L(e,t);var n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(0;i<o.length;i++){o[i];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function x(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function j(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return x(e)}function k(e,t){while(!Object.prototype.hasOwnProperty.call(e,t)){T(e);if(e===null)break}return e}function G(e,t,r){if(typeof Reflect!=="undefined"&&Reflect.get){Reflect.get}else{(function e(t,r,n){var i=k(t,r);if(!i)return;var o=Object.getOwnPropertyDescriptor(i,r);if(o.get){return o.get.call(n)}return o.value})}return G(e,t,r||e)}function F(e,t,r,n){if(typeof Reflect!=="undefined"&&Reflect.set){Reflect.set}else{(function e(t,r,n,i){var o=k(t,r);var a;if(o){Object.getOwnPropertyDescriptor(o,r);if(a.set){a.set.call(i,n);return true}else if(!a.writable){return false}}Object.getOwnPropertyDescriptor(i,r);if(a){if(!a.writable){return false}a.value=n;Object.defineProperty(i,r,a)}else{m(i,r,n)}return true})}return F(e,t,r,n)}function U(e,t,r,n,i){var o=F(e,t,r,n||e);if(!o&&i){throw new Error("failed to set property")}return r}function V(e,t){if(!t){e.slice(0)}return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function B(e,t){if(!t){e.slice(0)}e.raw=t;return e}function q(e,t){if(e===H){throw new ReferenceError(t+" is not defined - temporal dead zone")}else{return e}}function z(e){throw new Error('"'+e+'" is read-only')}function Y(e){throw new Error('Class "'+e+'" cannot be referenced in computed property keys.')}n.prototype.next=function(e){return this._invoke("next",e)},n.prototype.throw=function(e){return this._invoke("throw",e)},n.prototype.return=function(e){return this._invoke("return",e)};var H={};function W(e,t){return $(e)||ee(e,t)||ne()}function X(e,t){return $(e)||te(e,t)||ne()}function Q(e){return $(e)||J(e)||ne()}function Z(e){return K(e)||J(e)||re()}function K(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function $(e){if(Array.isArray(e))return e}function J(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function ee(e,t){var r=[];var n=true;var i=false;var o=undefined;try{for(var a=e[Symbol.iterator](),u;!(n=(u=a.next()).done);n=true){r.push(u.value);if(t&&r.length===t)break}}catch(e){i=true;o=e}finally{try{if(!n&&a["return"]!=null)a["return"]()}finally{if(i)throw o}}return r}function te(e,t){var r=[];for(var n=e[Symbol.iterator](),i;!n.next().done;){r.push(i.value);if(t&&r.length===t)break}return r}function re(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function ne(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function ie(t){return function(){var e=t.apply(this,arguments);e.next();return e}}function oe(e,t){if(typeof e!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if(typeof n!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ae(e){var t=oe(e,"string");return typeof t==="symbol"?t:String(t)}function ue(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and set to use loose mode. "+"To use proposal-class-properties in spec mode with decorators, wait for "+"the next major version of decorators in stage 2.")}function ce(e,t,r,n){if(!r)return;Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function se(r,n,e,t,i){var o={};Object.keys(t).forEach(function(e){o[e]=t[e]});o.enumerable=!!o.enumerable;o.configurable=!!o.configurable;if("value"in o||o.initializer){o.writable=true}e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o);if(i&&o.initializer!==void 0){o.value=o.initializer?o.initializer.call(i):void 0;o.initializer=undefined}if(o.initializer===void 0){Object.defineProperty(r,n,o);null}return o}var le=0;function fe(e){return"__private_"+le+++"_"+e}function pe(e,t){if(!Object.prototype.hasOwnProperty.call(e,t)){throw new TypeError("attempted to use private field on non-instance")}return e}function de(e,t){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}var r=t.get(e);if(r.get){return r.get.call(e)}return r.value}function ve(e,t,r){if(!t.has(e)){throw new TypeError("attempted to set private field on non-instance")}var n=t.get(e);if(n.set){n.set.call(e,r)}else{if(!n.writable){throw new TypeError("attempted to set read only private field")}n.value=r}return r}function he(e,t,r){if(e!==t){throw new TypeError("Private static access of wrong provenance")}return r.value}function ye(e,t,r,n){if(e!==t){throw new TypeError("Private static access of wrong provenance")}if(!r.writable){throw new TypeError("attempted to set read only private field")}r.value=n;return n}function me(e,t,r){if(e!==t){throw new TypeError("Private static access of wrong provenance")}return r}function Ee(){throw new TypeError("attempted to set read only static private field")}function ge(e,t,r,n){var i=_e();if(n){for(var o=0;o<n.length;o++){n[o](i)}}var a=t(function e(t){i.initializeInstanceElements(t,u.elements)},r);var u=i.decorateClass(Ie(a.d.map(be)),e);i.initializeClassElements(a.F,u.elements);return i.runClassFinishers(a.F,u.finishers)}function _e(){(function(){return e});var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(r,e){["method","field"].forEach(function(t){e.forEach(function(e){if(e.kind===t&&e.placement==="own"){this.defineClassElement(r,e)}},this)},this)},initializeClassElements:function(i,e){var o=i.prototype;["method","field"].forEach(function(n){e.forEach(function(e){var t=e.placement;if(e.kind===n&&(t==="static"||t==="prototype")){var r=t==="static"?i:o;this.defineClassElement(r,e)}},this)},this)},defineClassElement:function(e,t){var r=t.descriptor;if(t.kind==="field"){var n=t.initializer;({enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:n===void 0?void 0:n.call(e)})}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[];var n=[];var i={static:[],prototype:[],own:[]};e.forEach(function(e){this.addElementPlacement(e,i)},this);e.forEach(function(e){if(!Oe(e))return r.push(e);var t=this.decorateElement(e,i);r.push(t.element);r.push.apply(r,t.extras);n.push.apply(n,t.finishers)},this);if(!t){return{elements:r,finishers:n}}var o=this.decorateConstructor(r,t);n.push.apply(n,o.finishers);o.finishers=n;return o},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&n.indexOf(e.key)!==-1){throw new TypeError("Duplicated element ("+e.key+")")}n.push(e.key)},decorateElement:function(e,t){var r=[];var n=[];for(var i=e.decorators,o=i.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var u=this.fromElementDescriptor(e);var c=this.toElementFinisherExtras((0,i[o])(u)||u);c.element;this.addElementPlacement(e,t);if(c.finisher){n.push(c.finisher)}var s=c.extras;if(s){for(var l=0;l<s.length;l++){this.addElementPlacement(s[l],t)}r.push.apply(r,s)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){var r=[];for(var n=t.length-1;n>=0;n--){var i=this.fromClassDescriptor(e);var o=this.toClassDescriptor((0,t[n])(i)||i);if(o.finisher!==undefined){r.push(o.finisher)}if(o.elements!==undefined){o.elements;for(var a=0;a<e.length-1;a++){for(var u=a+1;u<e.length;u++){if(e[a].key===e[u].key&&e[a].placement===e[u].placement){throw new TypeError("Duplicated element ("+e[a].key+")")}}}}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};var r={value:"Descriptor",configurable:true};Object.defineProperty(t,Symbol.toStringTag,r);if(e.kind==="field")t.initializer=e.initializer;return t},toElementDescriptors:function(e){if(e===undefined)return;return Q(e).map(function(e){var t=this.toElementDescriptor(e);this.disallowProperty(e,"finisher","An element descriptor");this.disallowProperty(e,"extras","An element descriptor");return t},this)},toElementDescriptor:function(e){var t=String(e.kind);if(t!=="method"&&t!=="field"){throw new TypeError('An element descriptor\'s .kind property must be either "method" or'+' "field", but a decorator created an element descriptor with'+' .kind "'+t+'"')}var r=ae(e.key);var n=String(e.placement);if(n!=="static"&&n!=="prototype"&&n!=="own"){throw new TypeError('An element descriptor\'s .placement property must be one of "static",'+' "prototype" or "own", but a decorator created an element descriptor'+' with .placement "'+n+'"')}var i=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:r,placement:n,descriptor:Object.assign({},i)};if(t!=="field"){this.disallowProperty(e,"initializer","A method descriptor")}else{this.disallowProperty(i,"get","The property descriptor of a field descriptor");this.disallowProperty(i,"set","The property descriptor of a field descriptor");this.disallowProperty(i,"value","The property descriptor of a field descriptor");o.initializer=e.initializer}return o},toElementFinisherExtras:function(e){var t=this.toElementDescriptor(e);var r=Re(e,"finisher");var n=this.toElementDescriptors(e.extras);return{element:t,finisher:r,extras:n}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};var r={value:"Descriptor",configurable:true};Object.defineProperty(t,Symbol.toStringTag,r);return t},toClassDescriptor:function(e){var t=String(e.kind);if(t!=="class"){throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator'+' created a class descriptor with .kind "'+t+'"')}this.disallowProperty(e,"key","A class descriptor");this.disallowProperty(e,"placement","A class descriptor");this.disallowProperty(e,"descriptor","A class descriptor");this.disallowProperty(e,"initializer","A class descriptor");this.disallowProperty(e,"extras","A class descriptor");var r=Re(e,"finisher");var n=this.toElementDescriptors(e.elements);return{elements:n,finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(n!==undefined){if(typeof n!=="function"){throw new TypeError("Finishers must return a constructor.")}n}}return e},disallowProperty:function(e,t,r){if(e[t]!==undefined){throw new TypeError(r+" can't have a ."+t+" property.")}}};return e}function be(e){var t=ae(e.key);var r;if(e.kind==="method"){({value:e.value,writable:true,configurable:true,enumerable:false})}else if(e.kind==="get"){({get:e.value,configurable:true,enumerable:false})}else if(e.kind==="set"){({set:e.value,configurable:true,enumerable:false})}else if(e.kind==="field"){({configurable:true,writable:true,enumerable:true})}var n={kind:e.kind==="field"?"field":"method",key:t,placement:e.static?"static":e.kind==="field"?"own":"prototype",descriptor:r};if(e.decorators)n.decorators=e.decorators;if(e.kind==="field")n.initializer=e.value;return n}function Te(e,t){if(e.descriptor.get!==undefined){t.descriptor.get=e.descriptor.get}else{t.descriptor.set=e.descriptor.set}}function Ie(e){var t=[];var r=function(e){return e.kind==="method"&&e.key===i.key&&e.placement===i.placement};for(var n=0;n<e.length;n++){var i=e[n];var o;if(i.kind==="method"&&t.find(r)){if(we(i.descriptor)||we(o.descriptor)){if(Oe(i)||Oe(o)){throw new ReferenceError("Duplicated methods ("+i.key+") can't be decorated.")}o.descriptor=i.descriptor}else{if(Oe(i)){if(Oe(o)){throw new ReferenceError("Decorators can't be placed on different accessors with for "+"the same property ("+i.key+").")}o.decorators=i.decorators}Te(i,o)}}else{t.push(i)}}return t}function Oe(e){return e.decorators&&e.decorators.length}function we(e){return e!==undefined&&!(e.value===undefined&&e.writable===undefined)}function Re(e,t){var r=e[t];if(r!==undefined&&typeof r!=="function"){throw new TypeError("Expected '"+t+"' to be a function")}return r}function Se(e,t,r){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return r}function De(){throw new TypeError("attempted to reassign private method")}function Pe(e,t){(function(e,t){return new r(e,t)});var n=S(RegExp);var i=RegExp.prototype;var o=new WeakMap;function r(e,t){var r=n.call(this,e);o.set(r,t);return r}_(r,n);(function(e){var t=i.exec.call(this,e);if(t)t.groups=a(t,this);return t});Symbol.replace,function(e,t){if(typeof t==="string"){var r=o.get(this);return i[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+r[t]}))}else if(typeof t==="function"){var n=this;return i[Symbol.replace].call(this,e,function(){var e=[];e.push.apply(e,arguments);if(typeof e[e.length-1]!=="object"){e.push(a(e,n))}return t.apply(this,e)})}else{return i[Symbol.replace].call(this,e,t)}};function a(r,e){var n=o.get(e);return Object.keys(n).reduce(function(e,t){e[t]=r[n[t]];return e},Object.create(null))}return Pe.apply(this,arguments)}var Ae=function e(t,r){return Ne(t.x*r,t.y*r)},Ce=function e(t,r){return Ne(t.x+r.x,t.y+r.y)},Me=function e(t){var r=Math.sqrt(t.x*t.x+t.y*t.y);if(r===0){return{x:0,y:0}}return Ne(t.x/r,t.y/r)},Le=function e(t,r,n){var i=Math.cos(r);var o=Math.sin(r);var a=Ne(t.x-n.x,t.y-n.y);return Ne(n.x+i*a.x-o*a.y,n.y+o*a.x+i*a.y)},Ne=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return{x:t,y:r}},xe=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var i=arguments.length>3?arguments[3]:undefined;if(typeof t==="string"){return parseFloat(t)*n}if(typeof t==="number"){return t*(i?r[i]:Math.min(r.width,r.height))}return},je=function e(t,r,n){var i=t.borderStyle||t.lineStyle||"solid";var o=t.backgroundColor||t.fontColor||"transparent";var a=t.borderColor||t.lineColor||"transparent";var u=xe(t.borderWidth||t.lineWidth,r,n);var c=t.lineCap||"round";var s=t.lineJoin||"round";var l=typeof i==="string"?"":i.map(function(e){return xe(e,r,n)}).join(",");var f=t.opacity||1;return{"stroke-linecap":c,"stroke-linejoin":s,"stroke-width":u||0,"stroke-dasharray":l,stroke:a,fill:o,opacity:f}},ke=function e(t){return t!=null},Ge=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var i=xe(t.x,r,n,"width")||xe(t.left,r,n,"width");var o=xe(t.y,r,n,"height")||xe(t.top,r,n,"height");var a=xe(t.width,r,n,"width");var u=xe(t.height,r,n,"height");var c=xe(t.right,r,n,"width");var s=xe(t.bottom,r,n,"height");if(!ke(o)){if(ke(u)&&ke(s)){o=r.height-u-s}else{o=s}}if(!ke(i)){if(ke(a)&&ke(c)){i=r.width-a-c}else{i=c}}if(!ke(a)){if(ke(i)&&ke(c)){a=r.width-i-c}else{a=0}}if(!ke(u)){if(ke(o)&&ke(s)){u=r.height-o-s}else{u=0}}return{x:i||0,y:o||0,width:a||0,height:u||0}},Fe=function e(t){return t.map(function(e,t){return"".concat(t===0?"M":"L"," ").concat(e.x," ").concat(e.y)}).join(" ")},Ue=function e(t,r){return Object.keys(r).forEach(function(e){return t.setAttribute(e,r[e])})},Ve="http://www.w3.org/2000/svg",Be=function e(t,r){var n=document.createElementNS(Ve,t);if(r){Ue(n,r)}return n},qe,ze,Ye={contain:"xMidYMid meet",cover:"xMidYMid slice"},He,We={left:"start",center:"middle",right:"end"},Xe,Qe,Ze,Ke=function e(t){return function(e){return Be(t,{id:e.id})}},$e,Je,et={image:function e(t){var r=Be("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});r.onload=function(){r.setAttribute("opacity",t.opacity||1)};r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src);return r},rect:Ke("rect"),ellipse:Ke("ellipse"),text:Ke("text"),path:Ke("path"),line:function e(t){var r=Be("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"});var n=Be("line");r.appendChild(n);var i=Be("path");r.appendChild(i);var o=Be("path");r.appendChild(o);return r}},tt={rect:function e(t){return Ue(t,Object.assign({},t.rect,t.styles))},ellipse:function e(t){var r=t.rect.x+t.rect.width*.5;var n=t.rect.y+t.rect.height*.5;var i=t.rect.width*.5;var o=t.rect.height*.5;return Ue(t,Object.assign({cx:r,cy:n,rx:i,ry:o},t.styles))},image:function e(t,r){Ue(t,Object.assign({},t.rect,t.styles,{preserveAspectRatio:Ye[r.fit]||"none"}))},text:function e(t,r,n,i){var o=xe(r.fontSize,n,i);var a=r.fontFamily||"sans-serif";var u=r.fontWeight||"normal";var c=We[r.textAlign]||"start";Ue(t,Object.assign({},t.rect,t.styles,{"stroke-width":0,"font-weight":u,"font-size":o,"font-family":a,"text-anchor":c}));if(t.text!==r.text){t.text=r.text;t.textContent=r.text.length?r.text:" "}},path:function e(t,r,n,i){Ue(t,Object.assign({},t.styles,{fill:"none",d:Fe(r.points.map(function(e){return{x:xe(e.x,n,i,"width"),y:xe(e.y,n,i,"height")}}))}))},line:function e(t,r,n,i){Ue(t,Object.assign({},t.rect,t.styles,{fill:"none"}));var o=t.childNodes[0];var a=t.childNodes[1];var u=t.childNodes[2];var c=t.rect;var s={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};Ue(o,{x1:c.x,y1:c.y,x2:s.x,y2:s.y});if(!r.lineDecoration)return;a.style.display="none";u.style.display="none";var l=Me({x:s.x-c.x,y:s.y-c.y});var f=xe(.05,n,i);if(r.lineDecoration.indexOf("arrow-begin")!==-1){var p=Ae(l,f);var d=Ce(c,p);var v=Le(c,2,d);var h=Le(c,-2,d);Ue(a,{style:"display:block;",d:"M".concat(v.x,",").concat(v.y," L").concat(c.x,",").concat(c.y," L").concat(h.x,",").concat(h.y)})}if(r.lineDecoration.indexOf("arrow-end")!==-1){var y=Ae(l,-f);var m=Ce(s,y);var E=Le(s,2,m);var g=Le(s,-2,m);Ue(u,{style:"display:block;",d:"M".concat(E.x,",").concat(E.y," L").concat(s.x,",").concat(s.y," L").concat(g.x,",").concat(g.y)})}}},rt=function e(t,r){return et[t](r)},nt=function e(t,r,n,i,o){if(r!=="path"){t.rect=Ge(n,i,o)}t.styles=je(n,i,o);tt[r](t,n,i,o)},it=["x","y","left","top","right","bottom","width","height"],ot=function e(t){return typeof t==="string"&&/%/.test(t)?parseFloat(t)/100:t},at=function e(t){var r=W(t,2),n=r[0],i=r[1];var o=i.points?{}:it.reduce(function(e,t){e[t]=ot(i[t]);return e},{});return[n,Object.assign({zIndex:0},i,o)]},ut=function e(t,r){if(t[1].zIndex>r[1].zIndex){return 1}if(t[1].zIndex<r[1].zIndex){return-1}return 0},ct=function e(t){return t.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:true,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:function e(t){var o=t.root,r=t.props;if(!r.dirty)return;var n=r.crop,i=r.resize,a=r.markup;var u=r.width;var c=r.height;var s=n.width;var l=n.height;if(i){var f=i.size;var p=f&&f.width;var d=f&&f.height;var v=i.mode;var h=i.upscale;if(p&&!d)d=p;if(d&&!p)p=d;var y=s<p&&l<d;if(!y||y&&h){var m=p/s;var E=d/l;if(v==="force"){s=p;l=d}else{var g;if(v==="cover"){g=Math.max(m,E)}else if(v==="contain"){g=Math.min(m,E)}s=s*g;l=l*g}}}var _={width:u,height:c};o.element.setAttribute("width",_.width);o.element.setAttribute("height",_.height);var b=Math.min(u/s,c/l);o.element.innerHTML="";var T=o.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");a.filter(T).map(at).sort(ut).forEach(function(e){var t=W(e,2),r=t[0],n=t[1];var i=rt(r,n);nt(i,r,n,_,b);o.element.appendChild(i)})}})},st=function e(t,r){return{x:t,y:r}},lt=function e(t,r){return t.x*r.x+t.y*r.y},ft=function e(t,r){return st(t.x-r.x,t.y-r.y)},pt=function e(t,r){return lt(ft(t,r),ft(t,r))},dt=function e(t,r){return Math.sqrt(pt(t,r))},vt=function e(t,r){var n=t;var i=1.5707963267948966;var o=r;var a=1.5707963267948966-r;var u=Math.sin(i);var c=Math.sin(o);var s=Math.sin(a);var l=Math.cos(a);var f=n/u;var p=f*c;var d=f*s;return st(l*p,l*d)},ht=function e(t,r){var n=t.width;var i=t.height;var o=vt(n,r);var a=vt(i,r);var u=st(t.x+Math.abs(o.x),t.y-Math.abs(o.y));var c=st(t.x+t.width+Math.abs(a.y),t.y+Math.abs(a.x));var s=st(t.x-Math.abs(a.y),t.y+t.height-Math.abs(a.x));return{width:dt(u,c),height:dt(u,s)}},yt=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var i=t.height/t.width;var o=1;var a=r;var u=1;var c=i;if(c>a){c=a;u=c/i}var s=Math.max(o/u,a/c);var l=t.width/(n*s*u);var f=l*r;return{width:l,height:f}},mt=function e(t,r,n,i){var o=i.x>.5?1-i.x:i.x;var a=i.y>.5?1-i.y:i.y;var u=o*2*t.width;var c=a*2*t.height;var s=ht(r,n);return Math.max(s.width/u,s.height/c)},Et=function e(t,r){var n=t.width;var i=n*r;if(i>t.height){i=t.height;n=i/r}var o=(t.width-n)*.5;var a=(t.height-i)*.5;return{x:o,y:a,width:n,height:i}},gt=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=r.zoom,i=r.rotation,o=r.center,a=r.aspectRatio;if(!a)a=t.height/t.width;var u=yt(t,a,n);var c={x:u.width*.5,y:u.height*.5};var s={x:0,y:0,width:u.width,height:u.height,center:c};var l=typeof r.scaleToFit==="undefined"||r.scaleToFit;var f=mt(t,Et(s,a),i,l?o:{x:.5,y:.5});var p=n*f;return{widthFloat:u.width/p,heightFloat:u.height/p,width:Math.round(u.width/p),height:Math.round(u.height/p)}},_t={type:"spring",stiffness:.5,damping:.45,mass:10},bt=function e(t){return t.utils.createView({name:"image-bitmap",ignoreRect:true,mixins:{styles:["scaleX","scaleY"]},create:function e(t){var r=t.root,n=t.props;r.appendChild(n.image)}})},Tt=function e(i){return i.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:true,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:_t,originY:_t,scaleX:_t,scaleY:_t,translateX:_t,translateY:_t,rotateZ:_t}},create:function e(t){var r=t.root,n=t.props;n.width=n.image.width;n.height=n.image.height;r.ref.bitmap=r.appendChildView(r.createChildView(bt(i),{image:n.image}))},write:function e(t){var r=t.root,n=t.props;var i=n.crop.flip;var o=r.ref.bitmap;o.scaleX=i.horizontal?-1:1;o.scaleY=i.vertical?-1:1}})},It=function e(o){return o.utils.createView({name:"image-clip",tag:"div",ignoreRect:true,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function e(t){var r=t.root,n=t.props;if(!n.background)return;r.element.style.backgroundColor=n.background},create:function e(t){var r=t.root,n=t.props;r.ref.image=r.appendChildView(r.createChildView(Tt(o),Object.assign({},n)));r.ref.createMarkup=function(){if(r.ref.markup)return;r.ref.markup=r.appendChildView(r.createChildView(ct(o),Object.assign({},n)))};r.ref.destroyMarkup=function(){if(!r.ref.markup)return;r.removeChildView(r.ref.markup);r.ref.markup=null};var i=r.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");if(i===null)return;if(i==="grid"){r.element.dataset.transparencyIndicator=i}else{r.element.dataset.transparencyIndicator="color"}},write:function e(t){var r=t.root,n=t.props,i=t.shouldOptimize;var o=n.crop,a=n.markup,u=n.resize,c=n.dirty,s=n.width,l=n.height;r.ref.image.crop=o;var f={x:0,y:0,width:s,height:l,center:{x:s*.5,y:l*.5}};var p={width:r.ref.image.width,height:r.ref.image.height};var d={x:o.center.x*p.width,y:o.center.y*p.height};var v={x:f.center.x-p.width*o.center.x,y:f.center.y-p.height*o.center.y};var h=Math.PI*2+o.rotation%(Math.PI*2);var y=o.aspectRatio||p.height/p.width;var m=typeof o.scaleToFit==="undefined"||o.scaleToFit;var E=mt(p,Et(f,y),h,m?o.center:{x:.5,y:.5});var g=o.zoom*E;if(a&&a.length){r.ref.createMarkup();r.ref.markup.width=s;r.ref.markup.height=l;r.ref.markup.resize=u;r.ref.markup.dirty=c;r.ref.markup.markup=a;r.ref.markup.crop=gt(p,o)}else if(r.ref.markup){r.ref.destroyMarkup()}var _=r.ref.image;if(i){_.originX=null;_.originY=null;_.translateX=null;_.translateY=null;_.rotateZ=null;_.scaleX=null;_.scaleY=null;return}_.originX=d.x;_.originY=d.y;_.translateX=v.x;_.translateY=v.y;_.rotateZ=h;_.scaleX=g;_.scaleY=g}})},Ot=function e(i){return i.utils.createView({name:"image-preview",tag:"div",ignoreRect:true,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:_t,scaleY:_t,translateY:_t,opacity:{type:"tween",duration:400}}},create:function e(t){var r=t.root,n=t.props;r.ref.clip=r.appendChildView(r.createChildView(It(i),{id:n.id,image:n.image,crop:n.crop,markup:n.markup,resize:n.resize,dirty:n.dirty,background:n.background}))},write:function e(t){var r=t.root,n=t.props,i=t.shouldOptimize;var o=r.ref.clip;var a=n.image,u=n.crop,c=n.markup,s=n.resize,l=n.dirty;o.crop=u;o.markup=c;o.resize=s;o.dirty=l;o.opacity=i?0:1;if(i||r.rect.element.hidden)return;var f=a.height/a.width;var p=u.aspectRatio||f;var d=r.rect.inner.width;var v=r.rect.inner.height;var h=r.query("GET_IMAGE_PREVIEW_HEIGHT");var y=r.query("GET_IMAGE_PREVIEW_MIN_HEIGHT");var m=r.query("GET_IMAGE_PREVIEW_MAX_HEIGHT");var E=r.query("GET_PANEL_ASPECT_RATIO");var g=r.query("GET_ALLOW_MULTIPLE");if(E&&!g){h=d*E;p=E}var _=h!==null?h:Math.max(y,Math.min(d*p,m));var b=_/p;if(b>d){b=d;_=b*p}if(_>v){_=v;b=v/p}o.width=b;o.height=_}})},wt='<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">\n    <defs>\n        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">\n            <stop offset=\'50%\' stop-color=\'#000000\'/>\n            <stop offset=\'56%\' stop-color=\'#0a0a0a\'/>\n            <stop offset=\'63%\' stop-color=\'#262626\'/>\n            <stop offset=\'69%\' stop-color=\'#4f4f4f\'/>\n            <stop offset=\'75%\' stop-color=\'#808080\'/>\n            <stop offset=\'81%\' stop-color=\'#b1b1b1\'/>\n            <stop offset=\'88%\' stop-color=\'#dadada\'/>\n            <stop offset=\'94%\' stop-color=\'#f6f6f6\'/>\n            <stop offset=\'100%\' stop-color=\'#ffffff\'/>\n        </radialGradient>\n        <mask id="mask-__UID__">\n            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>\n        </mask>\n    </defs>\n    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>\n</svg>',Rt=false,St=0,Dt=function e(t){return t.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:true,create:function e(t){var r=t.root,n=t.props;if(!Rt&&document.querySelector("base")){wt=wt.replace(/url\(\#/g,"url("+window.location.href.replace(window.location.hash,"")+"#");Rt=true}St++;r.element.classList.add("filepond--image-preview-overlay-".concat(n.status));r.element.innerHTML=wt.replace(/__UID__/g,St)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}})},Pt=function e(){self.onmessage=function(t){createImageBitmap(t.data.message.file).then(function(e){self.postMessage({id:t.data.id,message:e},[e])})}},At=function e(){self.onmessage=function(e){var t=e.data.message.imageData;var r=e.data.message.colorMatrix;var n=t.data;var i=n.length;var o=r[0];var a=r[1];var u=r[2];var c=r[3];var s=r[4];var l=r[5];var f=r[6];var p=r[7];var d=r[8];var v=r[9];var h=r[10];var y=r[11];var m=r[12];var E=r[13];var g=r[14];var _=r[15];var b=r[16];var T=r[17];var I=r[18];var O=r[19];var w=0,R=0,S=0,D=0,P=0;for(;w<i;w+=4){R=n[w]/255;S=n[w+1]/255;D=n[w+2]/255;P=n[w+3]/255;n[w]=Math.max(0,Math.min((R*o+S*a+D*u+P*c+s)*255,255));n[w+1]=Math.max(0,Math.min((R*l+S*f+D*p+P*d+v)*255,255));n[w+2]=Math.max(0,Math.min((R*h+S*y+D*m+P*E+g)*255,255));n[w+3]=Math.max(0,Math.min((R*_+S*b+D*T+P*I+O)*255,255))}self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},Ct=function e(t,r){var n=new Image;n.onload=function(){var e=n.naturalWidth;var t=n.naturalHeight;n=null;r(e,t)};n.src=t},Mt={1:function e(){return[1,0,0,1,0,0]},2:function e(t){return[-1,0,0,1,t,0]},3:function e(t,r){return[-1,0,0,-1,t,r]},4:function e(t,r){return[1,0,0,-1,0,r]},5:function e(){return[0,1,1,0,0,0]},6:function e(t,r){return[0,1,-1,0,r,0]},7:function e(t,r){return[0,-1,-1,0,r,t]},8:function e(t){return[0,-1,1,0,0,t]}},Lt=function e(t,r,n,i){if(i===-1){return}t.transform.apply(t,Mt[i](r,n))},Nt=function e(t,r,n,i){r=Math.round(r);n=Math.round(n);var o=document.createElement("canvas");o.width=r;o.height=n;var a=o.getContext("2d");if(i>=5&&i<=8){var u=[n,r];r=u[0];n=u[1]}Lt(a,r,n,i);a.drawImage(t,0,0,r,n);return o},xt=function e(t){return/^image/.test(t.type)&&!/svg/.test(t.type)},jt=10,kt=10,Gt=function e(t){var r=Math.min(jt/t.width,kt/t.height);var n=document.createElement("canvas");var i=n.getContext("2d");var o=n.width=Math.ceil(t.width*r);var a=n.height=Math.ceil(t.height*r);i.drawImage(t,0,0,o,a);var u=null;try{u=i.getImageData(0,0,o,a).data}catch(e){return null}var c=u.length;var s=0;var l=0;var f=0;var p=0;for(;p<c;p+=4){s+=u[p]*u[p];l+=u[p+1]*u[p+1];f+=u[p+2]*u[p+2]}s=Ft(s,c);l=Ft(l,c);f=Ft(f,c);return{r:s,g:l,b:f}},Ft=function e(t,r){return Math.floor(Math.sqrt(t/(r/4)))},Ut=function e(t,r){r=r||document.createElement("canvas");r.width=t.width;r.height=t.height;var n=r.getContext("2d");n.drawImage(t,0,0);return r},Vt=function e(t){var r;try{r=new ImageData(t.width,t.height)}catch(e){var n=document.createElement("canvas");var i=n.getContext("2d");r=i.createImageData(t.width,t.height)}r.data.set(new Uint8ClampedArray(t.data));return r},Bt=function e(n){return new Ht(function(e,t){var r=new Image;r.crossOrigin="Anonymous";r.onload=function(){e(r)};r.onerror=function(e){t(e)};r.src=n})},qt=function e(t){var n=Dt(t);var d=Ot(t);var a=t.utils.createWorker;var T=function e(n,i,o){return new Ht(function(t){if(!n.ref.imageData){n.ref.imageData=o.getContext("2d").getImageData(0,0,o.width,o.height)}var e=Vt(n.ref.imageData);if(!i||i.length!==20){o.getContext("2d").putImageData(e,0,0);return t()}var r=a(At);r.post({imageData:e,colorMatrix:i},function(e){o.getContext("2d").putImageData(e,0,0);r.terminate();t()},[e.data.buffer])})};var i=function e(t,r){t.removeChildView(r);r.image.width=1;r.image.height=1;r._destroy()};var l=function e(t){var r=t.root;var n=r.ref.images.shift();n.opacity=0;n.translateY=-15;r.ref.imageViewBin.push(n);return n};var I=function e(t){var r=t.root,n=t.props,i=t.image;var o=n.id;var a=r.query("GET_ITEM",{id:o});if(!a)return;var u=a.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:false,vertical:false},zoom:1,rotation:0,aspectRatio:null};var c=r.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");var s;var l;var f=false;if(r.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")){s=a.getMetadata("markup")||[];l=a.getMetadata("resize");f=true}var p=r.appendChildView(r.createChildView(d,{id:o,image:i,crop:u,resize:l,markup:s,dirty:f,background:c,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),r.childViews.length);r.ref.images.push(p);p.opacity=1;p.scaleX=1;p.scaleY=1;p.translateY=0;setTimeout(function(){r.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:o})},250)};var f=function e(t){var r=t.root,n=t.props;var i=r.query("GET_ITEM",{id:n.id});if(!i)return;var o=r.ref.images[r.ref.images.length-1];o.crop=i.getMetadata("crop");o.background=r.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");if(r.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")){o.dirty=true;o.resize=i.getMetadata("resize");o.markup=i.getMetadata("markup")}};var r=function e(t){var r=t.root,n=t.props,i=t.action;if(!/crop|filter|markup|resize/.test(i.change.key))return;if(!r.ref.images.length)return;var o=r.query("GET_ITEM",{id:n.id});if(!o)return;if(/filter/.test(i.change.key)){var a=r.ref.images[r.ref.images.length-1];T(r,i.change.value,a.image);return}if(/crop|markup|resize/.test(i.change.key)){var u=o.getMetadata("crop");var c=r.ref.images[r.ref.images.length-1];if(Math.abs(u.aspectRatio-c.crop.aspectRatio)>1e-5){var s=l({root:r});I({root:r,props:n,image:Ut(s.image)})}else{f({root:r,props:n})}}};var u=function e(t){var r=window.navigator.userAgent;var n=r.match(/Firefox\/([0-9]+)\./);var i=n?parseInt(n[1]):null;if(i<=58)return false;return"createImageBitmap"in window&&xt(t)};var o=function e(t){var r=t.root,n=t.props;var i=n.id;var o=r.query("GET_ITEM",i);if(!o)return;var a=URL.createObjectURL(o.file);Ct(a,function(e,t){r.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:i,width:e,height:t})})};var c=function e(t){var E=t.root,g=t.props;var r=g.id;var _=E.query("GET_ITEM",r);if(!_)return;var b=URL.createObjectURL(_.file);var n=function e(){Bt(b).then(i)};var i=function e(r){URL.revokeObjectURL(b);var t=_.getMetadata("exif")||{};var n=t.orientation||-1;var i=r.width,o=r.height;if(!i||!o)return;if(n>=5&&n<=8){var a=[o,i];i=a[0];o=a[1]}var u=Math.max(1,window.devicePixelRatio*.75);var c=E.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR");var s=c*u;var l=o/i;var f=E.rect.element.width;var p=E.rect.element.height;var d=f;var v=d*l;if(l>1){d=Math.min(i,f*s);v=d*l}else{v=Math.min(o,p*s);d=v/l}var h=Nt(r,d,v,n);var y=function e(){var t=E.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?Gt(data):null;_.setMetadata("color",t,true);if("close"in r){r.close()}E.ref.overlayShadow.opacity=1;I({root:E,props:g,image:h})};var m=_.getMetadata("filter");if(m){T(E,m,h).then(y)}else{y()}};if(u(_.file)){var o=a(Pt);o.post({file:_.file},function(e){o.terminate();if(!e){n();return}i(e)})}else{n()}};var s=function e(t){var r=t.root;var n=r.ref.images[r.ref.images.length-1];n.translateY=0;n.scaleX=1;n.scaleY=1;n.opacity=1};var p=function e(t){var r=t.root;r.ref.overlayShadow.opacity=1;r.ref.overlayError.opacity=0;r.ref.overlaySuccess.opacity=0};var v=function e(t){var r=t.root;r.ref.overlayShadow.opacity=.25;r.ref.overlayError.opacity=1};var h=function e(t){var r=t.root;r.ref.overlayShadow.opacity=.25;r.ref.overlaySuccess.opacity=1};var y=function e(t){var r=t.root;r.ref.images=[];r.ref.imageData=null;r.ref.imageViewBin=[];r.ref.overlayShadow=r.appendChildView(r.createChildView(n,{opacity:0,status:"idle"}));r.ref.overlaySuccess=r.appendChildView(r.createChildView(n,{opacity:0,status:"success"}));r.ref.overlayError=r.appendChildView(r.createChildView(n,{opacity:0,status:"failure"}))};return t.utils.createView({name:"image-preview-wrapper",create:y,styles:["height"],apis:["height"],destroy:function e(t){var r=t.root;r.ref.images.forEach(function(e){e.image.width=1;e.image.height=1})},didWriteView:function e(t){var r=t.root;r.ref.images.forEach(function(e){e.dirty=false})},write:t.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:s,DID_IMAGE_PREVIEW_CONTAINER_CREATE:o,DID_FINISH_CALCULATE_PREVIEWSIZE:c,DID_UPDATE_ITEM_METADATA:r,DID_THROW_ITEM_LOAD_ERROR:v,DID_THROW_ITEM_PROCESSING_ERROR:v,DID_THROW_ITEM_INVALID:v,DID_COMPLETE_ITEM_PROCESSING:h,DID_START_ITEM_PROCESSING:p,DID_REVERT_ITEM_PROCESSING:p},function(e){var t=e.root;var r=t.ref.imageViewBin.filter(function(e){return e.opacity===0});t.ref.imageViewBin=t.ref.imageViewBin.filter(function(e){return e.opacity>0});r.forEach(function(e){return i(t,e)});r.length=0})})},zt=function e(t){var r=t.addFilter,n=t.utils;var i=n.Type,u=n.createRoute,d=n.isFile;var v=qt(t);r("CREATE_VIEW",function(e){var t=e.is,f=e.view,p=e.query;if(!t("file")||!p("GET_ALLOW_IMAGE_PREVIEW"))return;var r=function e(t){var r=t.root,n=t.props;var i=n.id;var o=p("GET_ITEM",i);if(!o||!d(o.file)||o.archived)return;var a=o.file;if(!h(a))return;if(!p("GET_IMAGE_PREVIEW_FILTER_ITEM")(o))return;var u="createImageBitmap"in(window||{});var c=p("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!u&&c&&a.size>c)return;r.ref.imagePreview=f.appendChildView(f.createChildView(v,{id:i}));var s=r.query("GET_IMAGE_PREVIEW_HEIGHT");if(s){r.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:o.id,height:s})}var l=!u&&a.size>p("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");r.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:i},l)};var n=function e(t,r){if(!t.ref.imagePreview)return;var n=r.id;var i=t.query("GET_ITEM",{id:n});if(!i)return;var o=t.query("GET_PANEL_ASPECT_RATIO");var a=t.query("GET_ITEM_PANEL_ASPECT_RATIO");var u=t.query("GET_IMAGE_PREVIEW_HEIGHT");if(o||a||u)return;var c=t.ref,s=c.imageWidth,l=c.imageHeight;if(!s||!l)return;var f=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT");var p=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT");var d=i.getMetadata("exif")||{};var v=d.orientation||-1;if(v>=5&&v<=8){var h=[l,s];s=h[0];l=h[1]}if(!xt(i.file)||t.query("GET_IMAGE_PREVIEW_UPSCALE")){var y=2048/s;s*=y;l*=y}var m=l/s;var E=(i.getMetadata("crop")||{}).aspectRatio||m;var g=Math.max(f,Math.min(l,p));var _=t.rect.element.width;var b=Math.min(_*E,g);t.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i.id,height:b})};var i=function e(t){var r=t.root;r.ref.shouldRescale=true};var o=function e(t){var r=t.root,n=t.action;if(n.change.key!=="crop")return;r.ref.shouldRescale=true};var a=function e(t){var r=t.root,n=t.action;r.ref.imageWidth=n.width;r.ref.imageHeight=n.height;r.ref.shouldRescale=true;r.ref.shouldDrawPreview=true;r.dispatch("KICK")};f.registerWriter(u({DID_RESIZE_ROOT:i,DID_STOP_RESIZE:i,DID_LOAD_ITEM:r,DID_IMAGE_PREVIEW_CALCULATE_SIZE:a,DID_UPDATE_ITEM_METADATA:o},function(e){var t=e.root,r=e.props;if(!t.ref.imagePreview)return;if(t.rect.element.hidden)return;if(t.ref.shouldRescale){n(t,r);t.ref.shouldRescale=false}if(t.ref.shouldDrawPreview){requestAnimationFrame(function(){t.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:r.id})});t.ref.shouldDrawPreview=false}}))});return{options:{allowImagePreview:[true,i.BOOLEAN],imagePreviewFilterItem:[function(){return true},i.FUNCTION],imagePreviewHeight:[null,i.INT],imagePreviewMinHeight:[44,i.INT],imagePreviewMaxHeight:[256,i.INT],imagePreviewMaxFileSize:[null,i.INT],imagePreviewZoomFactor:[2,i.INT],imagePreviewUpscale:[false,i.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,i.INT],imagePreviewTransparencyIndicator:[null,i.STRING],imagePreviewCalculateAverageImageColor:[false,i.BOOLEAN],imagePreviewMarkupShow:[true,i.BOOLEAN],imagePreviewMarkupFilter:[function(){return true},i.FUNCTION]}}},Yt;if(typeof window!=="undefined"&&typeof window.document!=="undefined"){document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:zt}))}return zt}()}).call(this,r(12))},function(e,t,r){(function(h){e.exports=function(){"use strict";var e=function e(t){var r=t.addFilter,n=t.utils;var i=n.Type,o=n.isString,c=n.replaceInString,a=n.guesstimateMimeType,u=n.getExtensionFromFilename,s=n.getFilenameFromURL;var l=function e(t,r){var n=(/^[^/]+/.exec(t)||[]).pop();var i=r.slice(0,-2);return n===i};var f=function e(t,r){return t.some(function(e){if(/\*$/.test(e)){return l(r,e)}return e===r})};var p=function e(t){var r="";if(o(t)){var n=s(t);var i=u(n);if(i){r=a(i)}}else{r=t.type}return r};var d=function e(n,i,o){if(i.length===0){return true}var a=p(n);if(!o){return f(i,a)}return new h(function(t,r){o(n,a).then(function(e){if(f(i,e)){t()}else{r()}}).catch(r)})};var v=function e(t){return function(e){return t[e]===null?false:t[e]||e}};r("SET_ATTRIBUTE_TO_OPTION_MAP",function(e){return Object.assign(e,{accept:"acceptedFileTypes"})});r("ALLOW_HOPPER_ITEM",function(e,t){var r=t.query;if(!r("GET_ALLOW_FILE_TYPE_VALIDATION")){return true}return d(e,r("GET_ACCEPTED_FILE_TYPES"))});r("LOAD_FILE",function(a,e){var u=e.query;return new h(function(e,r){if(!u("GET_ALLOW_FILE_TYPE_VALIDATION")){e(a);return}var n=u("GET_ACCEPTED_FILE_TYPES");var t=u("GET_FILE_VALIDATE_TYPE_DETECT_TYPE");var i=d(a,n,t);var o=function e(){var t=n.map(v(u("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(function(e){return e!==false});r({status:{main:u("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:c(u("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:t.join(", "),allButLastType:t.slice(0,-1).join(", "),lastType:t[t.length-1]})}})};if(typeof i==="boolean"){if(!i){return o()}return e(a)}i.then(function(){e(a)}).catch(o)})});return{options:{allowFileTypeValidation:[true,i.BOOLEAN],acceptedFileTypes:[[],i.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",i.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",i.STRING],fileValidateTypeLabelExpectedTypesMap:[{},i.OBJECT],fileValidateTypeDetectType:[null,i.FUNCTION]}}},t;if(typeof window!=="undefined"&&typeof window.document!=="undefined"){document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e}))}return e}()}).call(this,r(12))},function(e,t,r){(function(o){e.exports=function(){"use strict";var e=function e(t){var r=t.addFilter,n=t.utils;var i=n.Type,s=n.replaceInString,l=n.toNaturalFileSize;r("ALLOW_HOPPER_ITEM",function(e,t){var r=t.query;if(!r("GET_ALLOW_FILE_SIZE_VALIDATION")){return true}var n=r("GET_MAX_FILE_SIZE");if(n!==null&&e.size>=n){return false}var i=r("GET_MIN_FILE_SIZE");if(i!==null&&e.size<=i){return false}return true});r("LOAD_FILE",function(u,e){var c=e.query;return new o(function(e,t){if(!c("GET_ALLOW_FILE_SIZE_VALIDATION")){return e(u)}var r=c("GET_FILE_VALIDATE_SIZE_FILTER");if(r&&!r(u)){return e(u)}var n=c("GET_MAX_FILE_SIZE");if(n!==null&&u.size>=n){t({status:{main:c("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:s(c("GET_LABEL_MAX_FILE_SIZE"),{filesize:l(n)})}});return}var i=c("GET_MIN_FILE_SIZE");if(i!==null&&u.size<=i){t({status:{main:c("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:s(c("GET_LABEL_MIN_FILE_SIZE"),{filesize:l(i)})}});return}var o=c("GET_MAX_TOTAL_FILE_SIZE");if(o!==null){var a=c("GET_ACTIVE_ITEMS").reduce(function(e,t){return e+t.fileSize},0);if(a>o){t({status:{main:c("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:s(c("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:l(o)})}});return}}e(u)})});return{options:{allowFileSizeValidation:[true,i.BOOLEAN],maxFileSize:[null,i.INT],minFileSize:[null,i.INT],maxTotalFileSize:[null,i.INT],fileValidateSizeFilter:[null,i.FUNCTION],labelMinFileSizeExceeded:["File is too small",i.STRING],labelMinFileSize:["Minimum file size is {filesize}",i.STRING],labelMaxFileSizeExceeded:["File is too large",i.STRING],labelMaxFileSize:["Maximum file size is {filesize}",i.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",i.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",i.STRING]}}},t;if(typeof window!=="undefined"&&typeof window.document!=="undefined"){document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e}))}return e}()}).call(this,r(12))},function(e,t,r){(function(T){e.exports=function(){"use strict";var r={type:"spring",stiffness:.5,damping:.45,mass:10},l=function e(t){return t.utils.createView({name:"file-poster",tag:"div",ignoreRect:true,create:function e(t){var r=t.root;r.ref.image=document.createElement("img");r.element.appendChild(r.ref.image)},write:t.utils.createRoute({DID_FILE_POSTER_LOAD:function e(t){var r=t.root,n=t.props;var i=n.id;var o=r.query("GET_ITEM",{id:n.id});if(!o)return;var a=o.getMetadata("poster");r.ref.image.src=a;r.dispatch("DID_FILE_POSTER_DRAW",{id:i})}}),mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:r,scaleY:r,opacity:{type:"tween",duration:750}}}})},i=function e(t,r){r.width=t.width;r.height=t.height;var n=r.getContext("2d");n.drawImage(t,0,0)},f=function e(t){return t.utils.createView({name:"file-poster-overlay",tag:"canvas",ignoreRect:true,create:function e(t){var r=t.root,n=t.props;i(n.template,r.element)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}})},p=function e(t,r){var n=new Image;n.onload=function(){var e=n.naturalWidth;var t=n.naturalHeight;n=null;r(e,t)};n.src=t},d=function e(t){return-.5*(Math.cos(Math.PI*t)-1)},s=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:d;var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:10;var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;var u=1-a;var c=r.join(",");for(var s=0;s<=o;s++){var l=s/o;var f=a+u*l;t.addColorStop(f,"rgba(".concat(c,", ").concat(i(l)*n,")"))}},v=10,h=10,y=function e(t){var r=Math.min(v/t.width,h/t.height);var n=document.createElement("canvas");var i=n.getContext("2d");var o=n.width=Math.ceil(t.width*r);var a=n.height=Math.ceil(t.height*r);i.drawImage(t,0,0,o,a);var u=null;try{u=i.getImageData(0,0,o,a).data}catch(e){return null}var c=u.length;var s=0;var l=0;var f=0;var p=0;for(;p<c;p+=4){s+=u[p]*u[p];l+=u[p+1]*u[p+1];f+=u[p+2]*u[p+2]}s=m(s,c);l=m(l,c);f=m(f,c);return{r:s,g:l,b:f}},m=function e(t,r){return Math.floor(Math.sqrt(t/(r/4)))},e=function e(t,r,n,i,o){t.width=r;t.height=n;var a=t.getContext("2d");var u=r*.5;var c=a.createRadialGradient(u,n+110,n-100,u,n+110,n+100);s(c,i,o,undefined,8,.4);a.save();a.translate(-r*.5,0);a.scale(2,1);a.fillStyle=c;a.fillRect(0,0,r,n);a.restore()},t=typeof navigator!=="undefined",n=500,o=200,E=t&&document.createElement("canvas"),g=t&&document.createElement("canvas"),_=t&&document.createElement("canvas");if(t){e(E,n,o,[40,40,40],.85);e(g,n,o,[196,78,71],1);e(_,n,o,[54,151,99],1)}var b=function e(n,i){return new T(function(e,t){var r=new Image;if(typeof crossOrigin==="string"){r.crossOrigin=i}r.onload=function(){e(r)};r.onerror=function(e){t(e)};r.src=n})},a=function e(o){var a=f(o);var t=function e(t){var n=t.root,r=t.props;var i=r.id;var o=n.query("GET_ITEM",i);if(!o)return;var a=o.getMetadata("poster");var u=function e(t){var r=n.query("GET_FILE_POSTER_CALCULATE_AVERAGE_IMAGE_COLOR")?y(t):null;o.setMetadata("color",r,true);n.dispatch("DID_FILE_POSTER_LOAD",{id:i,data:t})};p(a,function(e,t){n.dispatch("DID_FILE_POSTER_CALCULATE_SIZE",{id:i,width:e,height:t});b(a,n.query("GET_FILE_POSTER_CROSS_ORIGIN_ATTRIBUTE_VALUE")).then(u)})};var r=function e(t){var r=t.root;r.ref.overlayShadow.opacity=1};var n=function e(t){var r=t.root;var n=r.ref.image;n.scaleX=1;n.scaleY=1;n.opacity=1};var i=function e(t){var r=t.root;r.ref.overlayShadow.opacity=1;r.ref.overlayError.opacity=0;r.ref.overlaySuccess.opacity=0};var u=function e(t){var r=t.root;r.ref.overlayShadow.opacity=.25;r.ref.overlayError.opacity=1};var c=function e(t){var r=t.root;r.ref.overlayShadow.opacity=.25;r.ref.overlaySuccess.opacity=1};var s=function e(t){var r=t.root,n=t.props;var i=l(o);r.ref.image=r.appendChildView(r.createChildView(i,{id:n.id,scaleX:1.25,scaleY:1.25,opacity:0}));r.ref.overlayShadow=r.appendChildView(r.createChildView(a,{template:E,opacity:0}));r.ref.overlaySuccess=r.appendChildView(r.createChildView(a,{template:_,opacity:0}));r.ref.overlayError=r.appendChildView(r.createChildView(a,{template:g,opacity:0}))};return o.utils.createView({name:"file-poster-wrapper",create:s,write:o.utils.createRoute({DID_FILE_POSTER_LOAD:r,DID_FILE_POSTER_DRAW:n,DID_FILE_POSTER_CONTAINER_CREATE:t,DID_THROW_ITEM_LOAD_ERROR:u,DID_THROW_ITEM_PROCESSING_ERROR:u,DID_THROW_ITEM_INVALID:u,DID_COMPLETE_ITEM_PROCESSING:c,DID_START_ITEM_PROCESSING:i,DID_REVERT_ITEM_PROCESSING:i})})},u=function e(t){var r=t.addFilter,n=t.utils;var i=n.Type,s=n.createRoute;var l=a(t);r("CREATE_VIEW",function(e){var t=e.is,o=e.view,a=e.query;if(!t("file")||!a("GET_ALLOW_FILE_POSTER"))return;var r=function e(t){var r=t.root,n=t.props;u(r,n)};var n=function e(t){var r=t.root,n=t.props,i=t.action;if(!/poster/.test(i.change.key))return;u(r,n)};var u=function e(t,r){var n=r.id;var i=a("GET_ITEM",n);if(!i||!i.getMetadata("poster")||i.archived)return;if(!a("GET_FILE_POSTER_FILTER_ITEM")(i))return;if(t.ref.filePoster){o.removeChildView(t.ref.filePoster)}t.ref.filePoster=o.appendChildView(o.createChildView(l,{id:n}));t.dispatch("DID_FILE_POSTER_CONTAINER_CREATE",{id:n})};var i=function e(t){var r=t.root,n=t.action;if(!r.ref.filePoster)return;r.ref.imageWidth=n.width;r.ref.imageHeight=n.height;r.ref.shouldUpdatePanelHeight=true;r.dispatch("KICK")};var c=function e(t){var r=t.root;var n=r.query("GET_FILE_POSTER_HEIGHT");if(n){return n}var i=r.query("GET_FILE_POSTER_MIN_HEIGHT");var o=r.query("GET_FILE_POSTER_MAX_HEIGHT");if(i&&r.ref.imageHeight<i){return i}var a=r.rect.element.width*(r.ref.imageHeight/r.ref.imageWidth);if(i&&a<i){return i}if(o&&a>o){return o}return a};o.registerWriter(s({DID_LOAD_ITEM:r,DID_FILE_POSTER_CALCULATE_SIZE:i,DID_UPDATE_ITEM_METADATA:n},function(e){var t=e.root,r=e.props;if(!t.ref.filePoster)return;if(t.rect.element.hidden)return;if(t.ref.shouldUpdatePanelHeight){t.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:r.id,height:c({root:t})});t.ref.shouldUpdatePanelHeight=false}}))});return{options:{allowFilePoster:[true,i.BOOLEAN],filePosterHeight:[null,i.INT],filePosterMinHeight:[null,i.INT],filePosterMaxHeight:[null,i.INT],filePosterFilterItem:[function(){return true},i.FUNCTION],filePosterCalculateAverageImageColor:[false,i.BOOLEAN],filePosterCrossOriginAttributeValue:["Anonymous",i.STRING]}}},c;if(typeof window!=="undefined"&&typeof window.document!=="undefined"){document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:u}))}return u}()}).call(this,r(12))},,,,,,function(e,t,r){},,,function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return R}),r.d(t,"Poll",function(){return R});r(11);var n=r(2),i=r.n(n),o=r(6),a=r.n(o),u=(r(101),r(0)),d=r(1),v=r(5);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function l(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(Object(o),!0).forEach(function(e){var t,r,n;t=i,n=o[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))})}return i}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=y(o);return t=a?(e=y(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==c(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(r):n}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(i,u["a"]);var e,t,r,n=h(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this,e,{user:{},questionMinLength:30,questionMaxLength:500,titleMinLength:30,titleMaxLength:500,descriptionMinLength:30,descriptionMaxLength:500,allowChoiceTitles:!0})).state={user:e.user,pollId:e.pollId,poll:e.poll,isBusy:!1},t}return e=i,(t=[{key:"componentDidMount",value:function(){var r=this;r.state.user&&r.state.user.role?r.state.poll||r.fetchData():d.a.user.getUser({user:r.config.user,jwt:r.config.jwt,siteId:r.config.siteId,api:r.config.api},function(e,t){r.setState({user:t},function(){r.state.poll||r.fetchData()})})}},{key:"fetchData",value:function(r){var n=this;if(!n.state.pollId)return n.setState({poll:{question:"",choices:{1:{},2:{}}}});var e="".concat(n.config.api&&n.config.api.url,"/api/site/").concat(n.config.siteId,"/idea/").concat(n.config.ideaId,"/poll/").concat(n.config.pollId,"?withUser=1&withVotes=1"),t=d.a.api.getHeaders(n.config);fetch(e,{headers:t}).then(function(e){if(e.ok)return e.json();throw e.text()}).then(function(e){var t=l({},n.state);t.poll=e,n.setState(t,function(){if(r)return r()})}).catch(function(e){console.log(e),e.then(function(e){return console.log(e)})})}},{key:"validatedResult",value:function(){var n=this,e=n.state.poll,t=n["question-input"],i=t.validate(),o={question:t.state.value,choices:{}};return Object.keys(e.choices).forEach(function(e){var t=n["title-input-".concat(e)],r=n["description-input-".concat(e)];(t&&t.state.value||r.state.value)&&(o.choices[e]={},n.config.allowChoiceTitles&&t.state.value&&(o.choices[e].title=t.state.value,t.validate()||(i=!1)),r.state.value&&(o.choices[e].description=r.state.value,r.validate()||(i=!1)))}),!i||Object.keys(o.choices).length<2?null:o}},{key:"handleOnChange",value:function(e){var t=l({},this.state.poll);e.choice&&(t.choices[e.choice.id]={title:this.config.allowChoiceTitles&&e.choice.title,description:e.choice.description}),e.question&&(t.question=e.question),this.setState({poll:t},function(){})}},{key:"addChoice",value:function(){var e=l({},this.state.poll),t=Object.keys(e.choices).sort(),r=parseInt(t[t.length-1])+1;e.choices[r]={},this.setState({poll:e})}},{key:"canSubmit",value:function(){if(this.state.poll&&this.state.poll.can)return this.state.poll.can.edit;var e=this.config.requiredUserRole,t="moderator";return("anonymous"==e?t:"member"==e&&!0)||"editor"==e&&!0||"moderator"==e&&!0||"admin"==e&&!1}},{key:"submitForm",value:function(){var o=this;o.setState({isBusy:!0},function(){var r=o.validatedResult();if(r){if(!o.canSubmit())return alert("Je bent niet ingelogd");var n=!0,e="".concat(o.config.api&&o.config.api.url,"/api/site/").concat(o.config.siteId,"/idea/").concat(o.config.ideaId,"/poll"),t="POST";o.state.poll&&o.state.poll.id&&(e+="/".concat(o.state.poll.id),n=!(t="PUT"));var i=d.a.api.getHeaders(o.config);fetch(e,{method:t,headers:i,body:JSON.stringify(r)}).then(function(e){if(e.ok)return e.json();throw e.text()}).then(function(e){var t=new CustomEvent("osc-new-poll-stored",{detail:e});n||(t=new CustomEvent("osc-poll-edited",{detail:e})),document.dispatchEvent(t),"function"==typeof o.config.onFinished&&o.config.onFinished(r)}).catch(function(e){console.log(e),e.then(function(e){return alert(e),console.log(e)}),o.setState({isBusy:!1})})}else o.setState({isBusy:!1})})}},{key:"render",value:function(){var e=this,n=this,i=n.state.poll||{},t=null;n.config.formIntro&&(t=React.createElement("div",{className:"osc-intro"},n.config.formIntro));var r=null,r=n.canSubmit()?React.createElement("div",{className:"osc-align-right-container"},React.createElement("button",{className:"osc-button-blue",onClick:function(){n.config.onFinished&&n.config.onFinished()}},"Terug"),React.createElement("button",{onClick:function(){n.state.isBusy||n.submitForm()},className:"osc-button-blue osc-margin-left".concat(n.state.isBusy?" osc-disabled":"")},"Verzenden")):React.createElement("div",{className:"osc-align-right-container"},React.createElement("button",{className:"osc-button-blue",onClick:function(){n.config.onFinished&&n.config.onFinished()}},"Terug"),React.createElement("button",{onClick:function(){d.a.localStorage.set("osc-reactions-login-pending",!0),document.location.href=n.config.loginUrl},className:"osc-button-blue osc-not-logged-in-button osc-margin-left"},"Inloggen"));return React.createElement("div",{id:n.divId,className:"osc-form",ref:function(e){return n.instance=e}},t,React.createElement("h4",null,"Vraag"),React.createElement(v.a.InputWithCounter,{config:{inputType:"text",minLength:n.config.questionMinLength,maxLength:n.config.questionMaxLength,placeholder:"Vraag"},value:i.question,onChange:function(e){return n.handleOnChange({question:e.value})},ref:function(e){return n["question-input"]=e}}),React.createElement("h4",null,"Keuzemogelijkheden"),React.createElement("ol",{className:"osc-poll-form-choices"},i&&i.choices&&Object.keys(i.choices).sort().map(function(t){var e=i.choices[t],r=null;return n.config.allowChoiceTitles&&(r=React.createElement(v.a.InputWithCounter,{config:{inputType:"text",minLength:n.config.titleMinLength,maxLength:n.config.titleMaxLength,placeholder:"Titel"},value:e.title,onChange:function(e){return n.handleOnChange({choice:{id:t,title:e.value}})},ref:function(e){return n["title-input-".concat(t)]=e}})),React.createElement("li",{className:"osc-poll-form-choice",key:"osc-key-".concat(t)},r,React.createElement(v.a.InputWithCounter,{config:{inputType:"text",minLength:n.config.descriptionMinLength,maxLength:n.config.descriptionMaxLength,placeholder:"Beschrijving"},value:e.description,onChange:function(e){return n.handleOnChange({choice:{id:t,description:e.value}})},ref:function(e){return n["description-input-".concat(t)]=e}}))})),React.createElement("a",{className:"osc-add-choice-button",onClick:function(){return e.addChoice()}},"Nog een keuzemogelijkheid toevoegen"),r)}}])&&f(e.prototype,t),r&&f(e,r),i}();function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?g(Object(o),!0).forEach(function(e){var t,r,n;t=i,n=o[r=e],r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):g(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))})}return i}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(o){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,r,n,i=w(o);return t=a?(e=w(this).constructor,Reflect.construct(i,arguments,e)):i.apply(this,arguments),r=this,!(n=t)||"object"!==E(n)&&"function"!=typeof n?O(r):n}}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(i,u["a"]);var e,t,r,n=I(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=O(t=n.call(this,e,{siteId:null,ideaId:null,title:null,titleMinLength:30,titleMaxLength:500,descriptionMinLength:30,descriptionMaxLength:500,user:null,loginUrl:"",api:{url:null,headers:null},requiredUserRole:"member",withPercentage:!0,allowChoiceTitles:!0,allowShowResultsIfNotVoted:!1}));return r.config.loginUrl=r.config.loginUrl||"/oauth/login?returnTo="+encodeURIComponent(document.location.href),r.hideEditForm=r.hideEditForm.bind(r),r.state={user:r.config.user,poll:e.poll,pollId:e.poll&&e.poll.id||r.config.pollId,selectedChoice:null,showResult:!1,showQuestion:!1,editMode:!1,showVoteSucceeded:!1},r.state.poll&&(r.parseVoteCount(r.state.poll),r.state.poll.userVote&&(r.state.selectedChoice=r.state.poll.userVote)),t}return e=i,(t=[{key:"componentDidMount",value:function(){var r=this;r.state.user&&r.state.user.role?!r.state.poll&&r.config.ideaId&&r.fetchData():d.a.user.getUser({user:r.config.user,jwt:r.config.jwt,siteId:r.config.siteId,api:r.config.api},function(e,t){r.setState({user:t},function(){!r.state.poll&&r.config.ideaId&&r.fetchData()})})}},{key:"fetchData",value:function(r){var n=this;if(!n.state.pollId)return n.setState({editMode:!0},function(){});var e="".concat(n.config.api&&n.config.api.url,"/api/site/").concat(n.config.siteId,"/idea/").concat(n.config.ideaId,"/poll/").concat(n.state.pollId,"?withUser=1&withUserVote=1&withVoteCount=1&withVotes=1"),t=d.a.api.getHeaders(n.config);fetch(e,{headers:t}).then(function(e){if(e.ok)return e.json();throw e.text()}).then(function(e){var t=_(_({},n.state),{},{showResult:!1,showQuestion:!1});t.poll=e,t.pollId=e.id,n.parseVoteCount(t.poll),t.poll.userVote&&(t.selectedChoice=t.poll.userVote),n.setState(t,function(){if(r)return r()})}).catch(function(e){console.log(e),e.then(function(e){return console.log(e)})})}},{key:"parseVoteCount",value:function(r){r.voteCount&&Object.keys(r.choices).sort().forEach(function(e){var t=r.choices[e];t.votesAbs=r.voteCount[e],t.votesPrc=parseInt(r.voteCount[e]/r.voteCount.total*100),t.votesPrc=t.votesPrc||0})}},{key:"showEditForm",value:function(){this.setState({editMode:!0})}},{key:"hideEditForm",value:function(){this.setState({editMode:!1},function(){this.fetchData()})}},{key:"setShowResult",value:function(){this.setState({showResult:!0})}},{key:"setShowQuestion",value:function(){this.setState({showQuestion:!0})}},{key:"selectChoice",value:function(e){this.setState({selectedChoice:e.choice})}},{key:"onReactionEdited",value:function(){this.fetchData()}},{key:"isValid",value:function(){return!!this.state.selectedChoice}},{key:"canSubmit",value:function(){var e=this.config.requiredUserRole,t=this.state.user&&this.state.user.role;return"anonymous"==e&&t||"member"==e&&("member"==t||"admin"==t)||"admin"==e&&"admin"==t}},{key:"submitVote",value:function(){var n=this;n.setState({isBusy:!0},function(){if(n.isValid()){if(!n.canSubmit())return alert("Je bent niet ingelogd");var e="".concat(n.config.api&&n.config.api.url,"/api/site/").concat(n.config.siteId,"/idea/").concat(n.config.ideaId,"/poll/").concat(n.state.poll.id,"/vote"),t=d.a.api.getHeaders(n.config),r={choice:n.state.selectedChoice};fetch(e,{method:"POST",headers:t,body:JSON.stringify(r)}).then(function(e){if(e.ok)return e.json();throw e.text()}).then(function(t){n.fetchData(function(){n.setState({isBusy:!1,showVoteSucceeded:!0},function(){var e=new CustomEvent("osc-poll-voted",{detail:t});document.dispatchEvent(e)})}),"function"==typeof n.config.onSubmit&&n.config.onSubmit({description:n.state.description})}).catch(function(e){e.then(function(e){return alert(e),console.log(e)}),n.setState({isBusy:!1,isValid:!1})})}else n.setState({isBusy:!1,isValid:!1})})}},{key:"deletePoll",value:function(){var n=this;n.setState({isBusy:!0},function(){var e=n.state.poll;if(!(e&&e.can&&e.can.delete))return alert("U kunt deze poll niet verwijderen");if(!e||!e.id)return alert("U kunt deze poll niet verwijderen");var t="".concat(n.config.api&&n.config.api.url,"/api/site/").concat(n.config.siteId,"/idea/").concat(n.config.ideaId,"/poll/").concat(n.state.poll.id),r=d.a.api.getHeaders(n.config);fetch(t,{method:"DELETE",headers:r}).then(function(e){if(e.ok)return e.json();throw e.text()}).then(function(e){var t=new CustomEvent("osc-poll-deleted",{detail:e});document.dispatchEvent(t)}).catch(function(e){console.log(e),e.then(function(e){return alert(e),console.log(e)}),n.setState({isBusy:!1})})})}},{key:"render",value:function(){var t=this,a=this,u=a.state.poll||{};if(a.state.editMode)return React.createElement("div",{id:this.id,className:a.props.className||"osc-poll",ref:function(e){t.instance=e}},React.createElement(m,{config:_(_({},a.config),{},{onFinished:a.hideEditForm}),pollId:a.state.poll&&a.state.poll.id,poll:a.state.poll,user:a.state.user}));var r,e,n,i=null;(u&&u.choices&&!u.userVote||a.state.showQuestion)&&(r={name:"pollChoice",choices:[]},Object.keys(u.choices).sort().map(function(e){var t=a.config.allowChoiceTitles&&u.choices[e].title?"<h4>".concat(u.choices[e].title,"</h4>"):"";t+=u.choices[e].description||"",r.choices.push({dangerousDescription:t,value:e})}),e=null,e=a.canSubmit()?React.createElement("button",{onClick:function(){a.state.isBusy||a.submitVote()},className:"osc-button-blue".concat(a.isValid()?"":" osc-disabled")},"Stemmen"):React.createElement("button",{onClick:function(){d.a.localStorage.set("osc-poll-login-pending",!0),document.location.href=a.config.loginUrl},className:"osc-button-blue osc-not-logged-in-button"},"Inloggen"),n=null,!a.config.allowShowResultsIfNotVoted||u.userVote||a.state.showResult||(n=React.createElement("a",{className:"osc-show-result-button",onClick:function(){return t.setShowResult()}},"Resultaat bekijken")),i=React.createElement("div",{className:"osc-poll-question osc-form"},React.createElement(v.a.Radios,{config:r,value:a.state.selectedChoice,onChange:function(e){return a.selectChoice({choice:e.value})},ref:function(e){return a.description=e}}),React.createElement("div",{className:"osc-poll-question-buttons"},e,n)));var o,c,s,l=null;u&&(u.userVote||a.state.showResult)&&(o=null,a.state.showQuestion||u&&u.choices&&!u.userVote||(o=React.createElement("a",{className:"osc-show-question-button",onClick:function(){return t.setShowQuestion()}},"Stem aanpassen")),s=null,u.voteCount&&u.voteCount.total&&(c=1==u.voteCount.total?"stem":"stemmen",s=React.createElement("div",null,"Totaal ",u.voteCount.total," ",c,React.createElement("br",null),React.createElement("br",null))),l=React.createElement("ul",{className:"osc-choices"},Object.keys(u.choices).sort().map(function(e){var t=u.choices[e],r=null;a.config.allowChoiceTitles&&t.title&&(r=React.createElement("h4",null,t.title));var n=null;t.description&&(n=React.createElement("div",null,t.description));var i=null;a.config.withPercentage&&(i=React.createElement("div",{className:"osc-percentage"},t.votesPrc,"%"));var o=React.createElement("div",{className:"osc-choice-default"},r,n,React.createElement("div",{className:"osc-choice-bar".concat(a.config.withPercentage?" osc-with-percentage":"")},React.createElement("div",{className:"osc-choice-bar-mask"}),React.createElement("div",{className:"osc-choice-bar-progress",style:{width:(t.votesPrc||0)+"%"}})),i);return React.createElement("li",{className:"osc-choice",key:"osc-key-".concat(e)},o)}),s,o));var f=null;a.state.poll&&a.state.poll.can&&a.state.poll.can.edit&&(f=React.createElement("div",{className:"osc-editbuttons"},React.createElement("button",{className:"osc-editbutton osc-edit",onClick:function(){return a.showEditForm()}},"Bewerk poll"),React.createElement("button",{className:"osc-editbutton osc-delete",onClick:function(){confirm("Weet u het zeker")&&a.deletePoll()}},"Verwijder poll")));var p=null;return a.state.showVoteSucceeded&&(p=React.createElement("div",{className:"osc-vote-succeeded"},"Uw stem is opgeslagen")),React.createElement("div",{id:this.id,className:a.props.className||"osc-poll",ref:function(e){t.instance=e}},f,p,React.createElement("h4",null,u.question),i,l,React.createElement("br",null),React.createElement("br",null))}}])&&b(e.prototype,t),r&&b(e,r),i}();R.renderElement=function(e,t){var r=e.attributes;a.a.render(i.a.createElement(R,{attributes:r,config:t}),e)}},function(e,t,r){},function(e,t,r){(function(Hu){!function(i){"use strict";var t=function e(t){return t instanceof HTMLElement},L=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var i=Object.assign({},t);var o=[];var a=[];var u=function e(){return Object.assign({},i)};var c=function e(){var t=[].concat(o);o.length=0;return t};var s=function e(){var t=[].concat(a);a.length=0;t.forEach(function(e){var t=e.type,r=e.data;l(t,r)})};var l=function e(t,r,n){if(n&&!document.hidden){a.push({type:t,data:r});return}if(v[t]){v[t](r)}o.push({type:t,data:r})};var f=function e(t){var r;for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++){i[o-1]=arguments[o]}return d[t]?(r=d)[t].apply(r,i):null};var p={getState:u,processActionQueue:c,processDispatchQueue:s,dispatch:l,query:f};var d={};r.forEach(function(e){d=Object.assign({},e(i),{},d)});var v={};n.forEach(function(e){v=Object.assign({},e(l,f,i),{},v)});return p},n=function e(t,r,n){if(typeof n==="function"){t[r]=n;return}Object.defineProperty(t,r,Object.assign({},n))},m=function e(t,r){for(var n in t){if(!t.hasOwnProperty(n)){continue}r(n,t[n])}},B=function e(t){var r={};m(t,function(e){n(r,e,t[e])});return r},s=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(n===null){return t.getAttribute(r)||t.hasAttribute(r)}t.setAttribute(r,n)},o="http://www.w3.org/2000/svg",r=["svg","path"],a=function e(t){return r.includes(t)},q=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(typeof r==="object"){n=r;r=null}var i=a(t)?document.createElementNS(o,t):document.createElement(t);if(r){if(a(t)){s(i,"class",r)}else{i.className=r}}m(n,function(e,t){s(i,e,t)});return i},z=function e(r){return function(e,t){if(typeof t!=="undefined"&&r.children[t]){r.insertBefore(e,r.children[t])}else{r.appendChild(e)}}},Y=function e(t,r){return function(e,t){if(typeof t!=="undefined"){r.splice(t,0,e)}else{r.push(e)}return e}},H=function e(t,r){return function(e){r.splice(r.indexOf(e),1);if(e.element.parentNode){t.removeChild(e.element)}return e}},u=function(){return typeof window!=="undefined"&&typeof window.document!=="undefined"}(),c=function e(){return u},e,W="children"in(c()?q("svg"):{})?function(e){return e.children.length}:function(e){return e.childNodes.length},X=function e(t,r,n,i){var o=n[0]||t.left;var a=n[1]||t.top;var u=o+t.width;var c=a+t.height*(i[1]||1);var s={element:Object.assign({},t),inner:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},outer:{left:o,top:a,right:u,bottom:c}};r.filter(function(e){return!e.isRectIgnored()}).map(function(e){return e.rect}).forEach(function(e){l(s.inner,Object.assign({},e.inner));l(s.outer,Object.assign({},e.outer))});f(s.inner);s.outer.bottom+=s.element.marginBottom;s.outer.right+=s.element.marginRight;f(s.outer);return s},l=function e(t,r){r.top+=t.top;r.right+=t.left;r.bottom+=t.top;r.left+=t.left;if(r.bottom>t.bottom){t.bottom=r.bottom}if(r.right>t.right){t.right=r.right}},f=function e(t){t.width=t.right-t.left;t.height=t.bottom-t.top},N=function e(t){return typeof t==="number"},h=function e(t,r,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:.001;return Math.abs(t-r)<i&&Math.abs(n)<i},p,d=function e(t){return t},y=function e(t){return t<.5?2*t*t:-1+(4-2*t)*t},v,E={spring:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},r=t.stiffness,i=r===void 0?.5:r,n=t.damping,o=n===void 0?.75:n,a=t.mass,u=a===void 0?10:a;var c=null;var s=null;var l=0;var f=false;var p=function e(t,r){if(f)return;if(!(N(c)&&N(s))){f=true;l=0;return}var n=-(s-c)*i;l+=n/u;s+=l;l*=o;if(h(s,c,l)||r){s=c;l=0;f=true;v.onupdate(s);v.oncomplete(s)}else{v.onupdate(s)}};var d=function e(t){if(N(t)&&!N(s)){s=t}if(c===null){c=t;s=t}c=t;if(s===c||typeof c==="undefined"){f=true;l=0;v.onupdate(s);v.oncomplete(s);return}f=false};var v=B({interpolate:p,target:{set:d,get:function e(){return c}},resting:{get:function e(){return f}},onupdate:function e(t){},oncomplete:function e(t){}});return v},tween:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},r=t.duration,n=r===void 0?500:r,i=t.easing,o=i===void 0?y:i,a=t.delay,u=a===void 0?0:a;var c=null;var s;var l;var f=true;var p=false;var d=null;var v=function e(t,r){if(f||d===null)return;if(c===null){c=t}if(t-c<u)return;s=t-c-u;if(s>=n||r){s=1;l=p?0:1;h.onupdate(l*d);h.oncomplete(l*d);f=true}else{l=s/n;h.onupdate((s>=0?o(p?1-l:l):0)*d)}};var h=B({interpolate:v,target:{get:function e(){return p?0:d},set:function e(t){if(d===null){d=t;h.onupdate(t);h.oncomplete(t);return}if(t<d){d=1;p=true}else{p=false;d=t}f=false;c=null}},resting:{get:function e(){return f}},onupdate:function e(t){},oncomplete:function e(t){}});return h}},g=function e(t,r,n){var i=t[r]&&typeof t[r][n]==="object"?t[r][n]:t[r]||t;var o=typeof i==="string"?i:i.type;var a=typeof i==="object"?Object.assign({},i):{};return E[o]?E[o](a):null},_=function e(t,r,o){var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;r=Array.isArray(r)?r:[r];r.forEach(function(i){t.forEach(function(r){var e=r;var t=function e(){return o[r]};var n=function e(t){return o[r]=t};if(typeof r==="object"){e=r.key;t=r.getter||t;n=r.setter||n}if(i[e]&&!a){return}i[e]={get:t,set:n}})})},b,T=function e(r){return function(e,t){r.addEventListener(e,t)}},I=function e(r){return function(e,t){r.removeEventListener(e,t)}},O,w,R=function e(t){return t!=null},S={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},D=function e(t){var r=t.mixinConfig,n=t.viewProps,i=t.viewInternalAPI,o=t.viewExternalAPI,a=t.view;var u=Object.assign({},n);var c={};_(r,[i,o],n);var s=function e(){return[n["translateX"]||0,n["translateY"]||0]};var l=function e(){return[n["scaleX"]||0,n["scaleY"]||0]};var f=function e(){return a.rect?X(a.rect,a.childViews,s(),l()):null};i.rect={get:f};o.rect={get:f};r.forEach(function(e){n[e]=typeof u[e]==="undefined"?S[e]:u[e]});return{write:function e(){if(!P(c,n)){return}A(a.element,n);Object.assign(c,Object.assign({},n));return true},destroy:function e(){}}},P=function e(t,r){if(Object.keys(t).length!==Object.keys(r).length){return true}for(var n in r){if(r[n]!==t[n]){return true}}return false},A=function e(t,r){var n=r.opacity,i=r.perspective,o=r.translateX,a=r.translateY,u=r.scaleX,c=r.scaleY,s=r.rotateX,l=r.rotateY,f=r.rotateZ,p=r.originX,d=r.originY,v=r.width,h=r.height;var y="";var m="";if(R(p)||R(d)){m+="transform-origin: "+(p||0)+"px "+(d||0)+"px;"}if(R(i)){y+="perspective("+i+"px) "}if(R(o)||R(a)){y+="translate3d("+(o||0)+"px, "+(a||0)+"px, 0) "}if(R(u)||R(c)){y+="scale3d("+(R(u)?u:1)+", "+(R(c)?c:1)+", 1) "}if(R(f)){y+="rotateZ("+f+"rad) "}if(R(s)){y+="rotateX("+s+"rad) "}if(R(l)){y+="rotateY("+l+"rad) "}if(y.length){m+="transform:"+y+";"}if(R(n)){m+="opacity:"+n+";";if(n===0){m+="visibility:hidden;"}if(n<1){m+="pointer-events:none;"}}if(R(h)){m+="height:"+h+"px;"}if(R(v)){m+="width:"+v+"px;"}var E=t.elementCurrentStyle||"";if(m.length!==E.length||m!==E){t.style.cssText=m;t.elementCurrentStyle=m}},Q={styles:D,listeners:function e(t){var r=t.mixinConfig,n=t.viewProps,i=t.viewInternalAPI,o=t.viewExternalAPI,a=t.viewState,u=t.view;var c=[];var s=T(u.element);var l=I(u.element);o.on=function(e,t){c.push({type:e,fn:t});s(e,t)};o.off=function(t,r){c.splice(c.findIndex(function(e){return e.type===t&&e.fn===r}),1);l(t,r)};return{write:function e(){return true},destroy:function e(){c.forEach(function(e){l(e.type,e.fn)})}}},animations:function i(e){var t=e.mixinConfig,o=e.viewProps,a=e.viewInternalAPI,u=e.viewExternalAPI;var c=Object.assign({},o);var i=[];m(t,function(t,e){var r=g(e);if(!r){return}r.onupdate=function(e){o[t]=e};r.target=c[t];var n={key:t,setter:function e(t){if(r.target===t){return}r.target=t},getter:function e(){return o[t]}};_([n],[a,u],o,true);i.push(r)});return{write:function e(t){var r=document.hidden;var n=true;i.forEach(function(e){if(!e.resting)n=false;e.interpolate(t,r)});return n},destroy:function e(){}}},apis:function e(t){var r=t.mixinConfig,n=t.viewProps,i=t.viewExternalAPI;_(r,i,n)}},Z=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!r.layoutCalculated){t.paddingTop=parseInt(n.paddingTop,10)||0;t.marginTop=parseInt(n.marginTop,10)||0;t.marginRight=parseInt(n.marginRight,10)||0;t.marginBottom=parseInt(n.marginBottom,10)||0;t.marginLeft=parseInt(n.marginLeft,10)||0;r.layoutCalculated=true}t.left=r.offsetLeft||0;t.top=r.offsetTop||0;t.width=r.offsetWidth||0;t.height=r.offsetHeight||0;t.right=t.left+t.width;t.bottom=t.top+t.height;t.scrollTop=r.scrollTop;t.hidden=r.offsetParent===null;return t},C=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},r=t.tag,P=r===void 0?"div":r,n=t.name,A=n===void 0?null:n,i=t.attributes,C=i===void 0?{}:i,o=t.read,M=o===void 0?function(){}:o,a=t.write,L=a===void 0?function(){}:a,u=t.create,N=u===void 0?function(){}:u,c=t.destroy,x=c===void 0?function(){}:c,s=t.filterFrameActionsForChild,j=s===void 0?function(e,t){return t}:s,l=t.didCreateView,k=l===void 0?function(){}:l,f=t.didWriteView,G=f===void 0?function(){}:f,p=t.ignoreRect,F=p===void 0?false:p,d=t.ignoreRectUpdate,U=d===void 0?false:d,v=t.mixins,V=v===void 0?[]:v;return function(e){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n=q(P,"filepond--"+A,C);var i=window.getComputedStyle(n,null);var o=Z();var u=null;var t=false;var c=[];var s=[];var r={};var l={};var f=[L];var p=[M];var d=[x];var v=function e(){return n};var h=function e(){return c.concat()};var y=function e(){return r};var m=function e(r){return function(e,t){return e(r,t)}};var E=function e(){if(u){return u}u=X(o,c,[0,0],[1,1]);return u};var g=function e(){return i};var _=function e(){u=null;c.forEach(function(e){return e._read()});var t=!(U&&o.width&&o.height);if(t){Z(o,n,i)}var r={root:S,props:a,rect:o};p.forEach(function(e){return e(r)})};var b=function e(r,n,i){var o=n.length===0;f.forEach(function(e){var t=e({props:a,root:S,actions:n,timestamp:r,shouldOptimize:i});if(t===false){o=false}});s.forEach(function(e){var t=e.write(r);if(t===false){o=false}});c.filter(function(e){return!!e.element.parentNode}).forEach(function(e){var t=e._write(r,j(e,n),i);if(!t){o=false}});c.forEach(function(e,t){if(e.element.parentNode){return}S.appendChild(e.element,t);e._read();e._write(r,j(e,n),i);o=false});t=o;G({props:a,root:S,actions:n,timestamp:r});return o};var T=function e(){s.forEach(function(e){return e.destroy()});d.forEach(function(e){e({root:S,props:a})});c.forEach(function(e){return e._destroy()})};var I={element:{get:v},style:{get:g},childViews:{get:h}};var O=Object.assign({},I,{rect:{get:E},ref:{get:y},is:function e(t){return A===t},appendChild:z(n),createChildView:m(e),linkView:function e(t){c.push(t);return t},unlinkView:function e(t){c.splice(c.indexOf(t),1)},appendChildView:Y(n,c),removeChildView:H(n,c),registerWriter:function e(t){return f.push(t)},registerReader:function e(t){return p.push(t)},registerDestroyer:function e(t){return d.push(t)},invalidateLayout:function e(){return n.layoutCalculated=false},dispatch:e.dispatch,query:e.query});var w={element:{get:v},childViews:{get:h},rect:{get:E},resting:{get:function e(){return t}},isRectIgnored:function e(){return F},_read:_,_write:b,_destroy:T};var R=Object.assign({},I,{rect:{get:function e(){return o}}});Object.keys(V).sort(function(e,t){if(e==="styles"){return 1}else if(t==="styles"){return-1}return 0}).forEach(function(e){var t=Q[e]({mixinConfig:V[e],viewProps:a,viewState:l,viewInternalAPI:O,viewExternalAPI:w,view:B(R)});if(t){s.push(t)}});var S=B(O);N({root:S,props:a});var D=W(n);c.forEach(function(e,t){S.appendChild(e.element,D+t)});k(S);return B(w)}},M=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:60;var i="__framePainter";if(window[i]){window[i].readers.push(t);window[i].writers.push(r);return}window[i]={readers:[t],writers:[r]};var o=window[i];var a=1e3/n;var u=null;var c=null;var s=null;var l=null;var f=function e(){if(document.hidden){s=function e(){return window.setTimeout(function(){return p(performance.now())},a)};l=function e(){return window.clearTimeout(c)}}else{s=function e(){return window.requestAnimationFrame(p)};l=function e(){return window.cancelAnimationFrame(c)}}};document.addEventListener("visibilitychange",function(){if(l)l();f();p(performance.now())});var p=function e(t){c=s(e);if(!u){u=t}var r=t-u;if(r<=a){return}u=t-r%a;o.readers.forEach(function(e){return e()});o.writers.forEach(function(e){return e(t)})};f();p(performance.now());return{pause:function e(){l(c)}}},x=function e(u,c){return function(e){var t=e.root,r=e.props,n=e.actions,i=n===void 0?[]:n,o=e.timestamp,a=e.shouldOptimize;i.filter(function(e){return u[e.type]}).forEach(function(e){return u[e.type]({root:t,props:r,action:e.data,timestamp:o,shouldOptimize:a})});if(c){c({root:t,props:r,actions:i,timestamp:o,shouldOptimize:a})}}},j=function e(t,r){return r.parentNode.insertBefore(t,r)},k=function e(t,r){return r.parentNode.insertBefore(t,r.nextSibling)},G=function e(t){return Array.isArray(t)},U=function e(t){return t==null},F=function e(t){return t.trim()},V=function e(t){return""+t},K,$=function e(t){return typeof t==="boolean"},J=function e(t){return $(t)?t:t==="true"},ee=function e(t){return typeof t==="string"},te=function e(t){return N(t)?t:ee(t)?V(t).replace(/[a-z]+/gi,""):0},re=function e(t){return parseInt(te(t),10)},ne=function e(t){return parseFloat(te(t))},ie=function e(t){return N(t)&&isFinite(t)&&Math.floor(t)===t},oe=function e(t){if(ie(t)){return t}var r=V(t).trim();if(/MB$/i.test(r)){r=r.replace(/MB$i/,"").trim();return re(r)*1e3*1e3}if(/KB/i.test(r)){r=r.replace(/KB$i/,"").trim();return re(r)*1e3}return re(r)},ae=function e(t){return typeof t==="function"},ue=function e(t){var r=self;var n=t.split(".");var i=null;while(i=n.shift()){r=r[i];if(!r){return null}}return r},ce={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},se=function e(t){var r={};r.url=ee(t)?t:t.url||"";r.timeout=t.timeout?parseInt(t.timeout,10):0;r.headers=t.headers?t.headers:{};m(ce,function(e){r[e]=le(e,t[e],ce[e],r.timeout,r.headers)});r.remove=t.remove||null;delete r.headers;return r},le=function e(t,r,n,i,o){if(r===null){return null}if(typeof r==="function"){return r}var a={url:n==="GET"||n==="PATCH"?"?"+t+"=":"",method:n,headers:o,withCredentials:false,timeout:i,onload:null,ondata:null,onerror:null};if(ee(r)){a.url=r;return a}Object.assign(a,r);if(ee(a.headers)){var u=a.headers.split(/:(.+)/);a.headers={header:u[0],value:u[1]}}a.withCredentials=J(a.withCredentials);return a},fe,pe=function e(t){return t===null},de=function e(t){return typeof t==="object"&&t!==null},ve=function e(t){return de(t)&&ee(t.url)&&de(t.process)&&de(t.revert)&&de(t.restore)&&de(t.fetch)},he=function e(t){if(G(t)){return"array"}if(pe(t)){return"null"}if(ie(t)){return"int"}if(/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(t)){return"bytes"}if(ve(t)){return"api"}return typeof t},ye=function e(t){return t.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",')},me={array:function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:",";if(U(t)){return[]}if(G(t)){return t}return V(t).split(r).map(F).filter(function(e){return e.length})},boolean:J,int:function e(t){return he(t)==="bytes"?oe(t):re(t)},number:ne,float:ne,bytes:oe,string:function e(t){return ae(t)?t:V(t)},function:function e(t){return ue(t)},serverapi:function e(t){return se(t)},object:function e(t){try{return JSON.parse(ye(t))}catch(e){return null}}},Ee=function e(t,r){return me[r](t)},ge=function e(t,r,n){if(t===r){return t}var i=he(t);if(i!==n){var o=Ee(t,n);i=he(o);if(o===null){throw'Trying to assign value with incorrect type to "'+option+'", allowed type: "'+n+'"'}else{t=o}}return t},_e=function e(r,n){var i=r;return{enumerable:true,get:function e(){return i},set:function e(t){i=ge(t,r,n)}}},be=function e(r){var n={};m(r,function(e){var t=r[e];n[e]=_e(t[0],t[1])});return B(n)},Te=function e(t){return{items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:be(t)}},Ie=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"-";return t.split(/(?=[A-Z])/).map(function(e){return e.toLowerCase()}).join(r)},Oe=function e(n,t){var i={};m(t,function(r){i[r]={get:function e(){return n.getState().options[r]},set:function e(t){n.dispatch("SET_"+Ie(r,"_").toUpperCase(),{value:t})}}});return i},we=function e(t){return function(n,e,i){var o={};m(t,function(t){var r=Ie(t,"_").toUpperCase();o["SET_"+r]=function(e){try{i.options[t]=e.value}catch(e){}n("DID_SET_"+r,{value:i.options[t]})}});return o}},Re=function e(t){return function(r){var e={};m(t,function(t){e["GET_"+Ie(t,"_").toUpperCase()]=function(e){return r.options[t]}});return e}},Se={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},De=function e(){return Math.random().toString(36).substr(2,9)},Pe;function Ae(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){(function(e){return typeof e})}else{(function(e){return e&&typeof Symbol==="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})}return Ae(e)}function Ce(e,t,r,n){if(!Pe){typeof Symbol==="function"&&Symbol["for"]&&Symbol["for"]("react.element")||60103}var i=e&&e.defaultProps;var o=arguments.length-3;if(!t&&o!==0){({children:void 0})}if(t&&i){for(var a in i){if(t[a]===void 0){t[a]=i[a]}}}else if(!t){i||{}}if(o===1){t.children=n}else if(o>1){var u=new Array(o);for(var c=0;c<o;c++){u[c]=arguments[c+3]}t.children=u}return{$$typeof:Pe,type:e,key:r===undefined?null:""+r,ref:null,props:t,_owner:null}}function Me(e){var t;if(typeof Symbol!=="undefined"){if(Symbol.asyncIterator){e[Symbol.asyncIterator];if(t!=null)return t.call(e)}if(Symbol.iterator){e[Symbol.iterator];if(t!=null)return t.call(e)}}throw new TypeError("Object is not async iterable")}function Le(e){this.wrapped=e}function Ne(o){var a,u;function e(n,i){return new Hu(function(e,t){var r={key:n,arg:i,resolve:e,reject:t,next:null};if(u){u=u.next=r}else{a=u=r;c(n,i)}})}function c(e,t){try{var r=o[e](t);var n=r.value;var i=n instanceof Le;Hu.resolve(i?n.wrapped:n).then(function(e){if(i){c("next",e);return}s(r.done?"return":"normal",e)},function(e){c("throw",e)})}catch(e){s("throw",e)}}function s(e,t){switch(e){case"return":a.resolve({value:t,done:true});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:false});break}a=a.next;if(a){c(a.key,a.arg)}else{u=null}}this._invoke=e;if(typeof o.return!=="function"){this.return=undefined}}if(typeof Symbol==="function"&&Symbol.asyncIterator){Ne.prototype[Symbol.asyncIterator]=function(){return this}}function xe(e){return function(){return new Ne(e.apply(this,arguments))}}function je(e){return new Le(e)}function ke(n,e){var t={},r=false;function i(t,r){true;new Hu(function(e){e(n[t](r))});return{done:false,value:e(r)}}if(typeof Symbol==="function"&&Symbol.iterator){t[Symbol.iterator]=function(){return this}}t.next=function(e){if(r){false;return e}return i("next",e)};if(typeof n.throw==="function"){t.throw=function(e){if(r){false;throw e}return i("throw",e)}}if(typeof n.return==="function"){t.return=function(e){return i("return",e)}}return t}function Ge(e,t,r,n,i,o,a){try{var u=e[o](a);var c=u.value}catch(e){r(e);return}if(u.done){t(c)}else{Hu.resolve(c).then(n,i)}}function Fe(u){return function(){var e=this,a=arguments;return new Hu(function(t,r){var n=u.apply(e,a);function i(e){Ge(n,t,r,i,o,"next",e)}function o(e){Ge(n,t,r,i,o,"throw",e)}i(undefined)})}}function Ue(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function Ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function Be(e,t,r){if(t)Ve(e.prototype,t);if(r)Ve(e,r);return e}function qe(e,t){for(var r in t){var n=t[r];n.configurable=n.enumerable=true;if("value"in n)n.writable=true;Object.defineProperty(e,r,n)}if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(var o=0;o<i.length;o++){var a=i[o];var n=t[a];n.configurable=n.enumerable=true;if("value"in n)n.writable=true;Object.defineProperty(e,a,n)}}return e}function ze(e,t){var r=Object.getOwnPropertyNames(t);for(var n=0;n<r.length;n++){var i=r[n];var o=Object.getOwnPropertyDescriptor(t,i);if(o&&o.configurable&&e[i]===undefined){Object.defineProperty(e,i,o)}}return e}function Ye(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function He(){Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r){if(Object.prototype.hasOwnProperty.call(r,n)){e[n]=r[n]}}}return e};return He.apply(this,arguments)}function We(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(e){Ye(t,e,r[e])})}return t}function Xe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);if(e)n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable});r.push.apply(r,n)}return r}function Qe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};if(e%2){Xe(r,true).forEach(function(e){Ye(t,e,r[e])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))}else{Xe(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}}return t}function Ze(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)Je(e,t)}function Ke(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}function $e(e){Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return $e(e)}function Je(e,t){Object.setPrototypeOf||function e(t,r){t.__proto__=r;return t};return Je(e,t)}function et(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}function tt(e,t,r){if(et()){Reflect.construct}else{(function e(t,r,n){var i=[null];i.push.apply(i,r);var o=Function.bind.apply(t,i);var a=new o;if(n)Je(a,n.prototype);return a})}return tt.apply(null,arguments)}function rt(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function nt(e){var n=typeof Map==="function"?new Map:undefined;(function e(t){if(t===null||!rt(t))return t;if(typeof t!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof n!=="undefined"){if(n.has(t))return n.get(t);n.set(t,r)}function r(){return tt(t,arguments,$e(this).constructor)}Object.create(t.prototype,{constructor:{value:r,enumerable:false,writable:true,configurable:true}});return Je(r,t)});return nt(e)}function it(e,t){if(t!=null&&typeof Symbol!=="undefined"&&t[Symbol.hasInstance]){return!!t[Symbol.hasInstance](e)}else{return e instanceof t}}function ot(e){return e&&e.__esModule?e:{default:e}}function at(e){if(e&&e.__esModule){return e}else{var t={};if(e!=null){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};if(n.get||n.set){Object.defineProperty(t,r,n)}else{t[r]=e[r]}}}}t.default=e;return t}}function ut(e,t){if(e!==t){throw new TypeError("Cannot instantiate an arrow function")}}function ct(e){if(e==null)throw new TypeError("Cannot destructure undefined")}function st(e,t){if(e==null)return{};var r={};var n=Object.keys(e);var i,o;for(o=0;o<n.length;o++){i=n[o];if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}function lt(e,t){if(e==null)return{};var r=st(e,t);var n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++){n=o[i];if(t.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;r[n]=e[n]}}return r}function ft(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function pt(e,t){if(t&&(typeof t==="object"||typeof t==="function")){return t}return ft(e)}function dt(e,t){while(!Object.prototype.hasOwnProperty.call(e,t)){$e(e);if(e===null)break}return e}function vt(e,t,r){if(typeof Reflect!=="undefined"&&Reflect.get){Reflect.get}else{(function e(t,r,n){var i=dt(t,r);if(!i)return;var o=Object.getOwnPropertyDescriptor(i,r);if(o.get){return o.get.call(n)}return o.value})}return vt(e,t,r||e)}function ht(e,t,r,n){if(typeof Reflect!=="undefined"&&Reflect.set){Reflect.set}else{(function e(t,r,n,i){var o=dt(t,r);var a;if(o){Object.getOwnPropertyDescriptor(o,r);if(a.set){a.set.call(i,n);return true}else if(!a.writable){return false}}Object.getOwnPropertyDescriptor(i,r);if(a){if(!a.writable){return false}a.value=n;Object.defineProperty(i,r,a)}else{Ye(i,r,n)}return true})}return ht(e,t,r,n)}function yt(e,t,r,n,i){var o=ht(e,t,r,n||e);if(!o&&i){throw new Error("failed to set property")}return r}function mt(e,t){if(!t){e.slice(0)}return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function Et(e,t){if(!t){e.slice(0)}e.raw=t;return e}function gt(e,t){if(e===Tt){throw new ReferenceError(t+" is not defined - temporal dead zone")}else{return e}}function _t(e){throw new Error('"'+e+'" is read-only')}function bt(e){throw new Error('Class "'+e+'" cannot be referenced in computed property keys.')}Ne.prototype.next=function(e){return this._invoke("next",e)},Ne.prototype.throw=function(e){return this._invoke("throw",e)},Ne.prototype.return=function(e){return this._invoke("return",e)};var Tt={};function It(e,t){return Dt(e)||At(e,t)||Lt()}function Ot(e,t){return Dt(e)||Ct(e,t)||Lt()}function wt(e){return Dt(e)||Pt(e)||Lt()}function Rt(e){return St(e)||Pt(e)||Mt()}function St(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function Dt(e){if(Array.isArray(e))return e}function Pt(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function At(e,t){var r=[];var n=true;var i=false;var o=undefined;try{for(var a=e[Symbol.iterator](),u;!a.next().done;true){r.push(u.value);if(t&&r.length===t)break}}catch(e){true;e}finally{try{if(!n&&a["return"]!=null)a["return"]()}finally{if(i)throw o}}return r}function Ct(e,t){var r=[];for(var n=e[Symbol.iterator](),i;!n.next().done;){r.push(i.value);if(t&&r.length===t)break}return r}function Mt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Lt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Nt(t){return function(){var e=t.apply(this,arguments);e.next();return e}}function xt(e,t){if(typeof e!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==undefined){var n=r.call(e,t||"default");if(typeof n!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jt(e){var t=xt(e,"string");return typeof t==="symbol"?t:String(t)}function kt(e,t){throw new Error("Decorating class property failed. Please ensure that "+"proposal-class-properties is enabled and set to use loose mode. "+"To use proposal-class-properties in spec mode with decorators, wait for "+"the next major version of decorators in stage 2.")}function Gt(e,t,r,n){if(!r)return;Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function Ft(r,n,e,t,i){var o={};Object.keys(t).forEach(function(e){o[e]=t[e]});o.enumerable=!!o.enumerable;o.configurable=!!o.configurable;if("value"in o||o.initializer){o.writable=true}e.slice().reverse().reduce(function(e,t){return t(r,n,e)||e},o);if(i&&o.initializer!==void 0){o.value=o.initializer?o.initializer.call(i):void 0;o.initializer=undefined}if(o.initializer===void 0){Object.defineProperty(r,n,o);null}return o}var Ut=0;function Vt(e){return"__private_"+Ut+++"_"+e}function Bt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t)){throw new TypeError("attempted to use private field on non-instance")}return e}function qt(e,t){var r=t.get(e);if(!r){throw new TypeError("attempted to get private field on non-instance")}if(r.get){return r.get.call(e)}return r.value}function zt(e,t,r){var n=t.get(e);if(!n){throw new TypeError("attempted to set private field on non-instance")}if(n.set){n.set.call(e,r)}else{if(!n.writable){throw new TypeError("attempted to set read only private field")}n.value=r}return r}function Yt(t,e){if(!e.has(t)){throw new TypeError("attempted to set private field on non-instance")}var r=e.get(t);if(r.set){if(!("__destrObj"in r)){r.__destrObj={set value(e){r.set.call(t,e)}}}return r.__destrObj}else{if(!r.writable){throw new TypeError("attempted to set read only private field")}return r}}function Ht(e,t,r){if(e!==t){throw new TypeError("Private static access of wrong provenance")}return r.value}function Wt(e,t,r,n){if(e!==t){throw new TypeError("Private static access of wrong provenance")}if(!r.writable){throw new TypeError("attempted to set read only private field")}r.value=n;return n}function Xt(e,t,r){if(e!==t){throw new TypeError("Private static access of wrong provenance")}return r}function Qt(){throw new TypeError("attempted to set read only static private field")}function Zt(e,t,r,n){var i=Kt();if(n){for(var o=0;o<n.length;o++){n[o](i)}}var a=t(function e(t){i.initializeInstanceElements(t,u.elements)},r);var u=i.decorateClass(er(a.d.map($t)),e);i.initializeClassElements(a.F,u.elements);return i.runClassFinishers(a.F,u.finishers)}function Kt(){(function(){return e});var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(r,e){["method","field"].forEach(function(t){e.forEach(function(e){if(e.kind===t&&e.placement==="own"){this.defineClassElement(r,e)}},this)},this)},initializeClassElements:function(i,e){var o=i.prototype;["method","field"].forEach(function(n){e.forEach(function(e){var t=e.placement;if(e.kind===n&&(t==="static"||t==="prototype")){var r=t==="static"?i:o;this.defineClassElement(r,e)}},this)},this)},defineClassElement:function(e,t){var r=t.descriptor;if(t.kind==="field"){var n=t.initializer;({enumerable:r.enumerable,writable:r.writable,configurable:r.configurable,value:n===void 0?void 0:n.call(e)})}Object.defineProperty(e,t.key,r)},decorateClass:function(e,t){var r=[];var n=[];var i={static:[],prototype:[],own:[]};e.forEach(function(e){this.addElementPlacement(e,i)},this);e.forEach(function(e){if(!tr(e))return r.push(e);var t=this.decorateElement(e,i);r.push(t.element);r.push.apply(r,t.extras);n.push.apply(n,t.finishers)},this);if(!t){return{elements:r,finishers:n}}var o=this.decorateConstructor(r,t);n.push.apply(n,o.finishers);o.finishers=n;return o},addElementPlacement:function(e,t,r){var n=t[e.placement];if(!r&&n.indexOf(e.key)!==-1){throw new TypeError("Duplicated element ("+e.key+")")}n.push(e.key)},decorateElement:function(e,t){var r=[];var n=[];for(var i=e.decorators,o=i.length-1;o>=0;o--){var a=t[e.placement];a.splice(a.indexOf(e.key),1);var u=this.fromElementDescriptor(e);var c=this.toElementFinisherExtras((0,i[o])(u)||u);c.element;this.addElementPlacement(e,t);if(c.finisher){n.push(c.finisher)}var s=c.extras;if(s){for(var l=0;l<s.length;l++){this.addElementPlacement(s[l],t)}r.push.apply(r,s)}}return{element:e,finishers:n,extras:r}},decorateConstructor:function(e,t){var r=[];for(var n=t.length-1;n>=0;n--){var i=this.fromClassDescriptor(e);var o=this.toClassDescriptor((0,t[n])(i)||i);if(o.finisher!==undefined){r.push(o.finisher)}if(o.elements!==undefined){o.elements;for(var a=0;a<e.length-1;a++){for(var u=a+1;u<e.length;u++){if(e[a].key===e[u].key&&e[a].placement===e[u].placement){throw new TypeError("Duplicated element ("+e[a].key+")")}}}}}return{elements:e,finishers:r}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};var r={value:"Descriptor",configurable:true};Object.defineProperty(t,Symbol.toStringTag,r);if(e.kind==="field")t.initializer=e.initializer;return t},toElementDescriptors:function(e){if(e===undefined)return;return wt(e).map(function(e){var t=this.toElementDescriptor(e);this.disallowProperty(e,"finisher","An element descriptor");this.disallowProperty(e,"extras","An element descriptor");return t},this)},toElementDescriptor:function(e){var t=String(e.kind);if(t!=="method"&&t!=="field"){throw new TypeError('An element descriptor\'s .kind property must be either "method" or'+' "field", but a decorator created an element descriptor with'+' .kind "'+t+'"')}var r=jt(e.key);var n=String(e.placement);if(n!=="static"&&n!=="prototype"&&n!=="own"){throw new TypeError('An element descriptor\'s .placement property must be one of "static",'+' "prototype" or "own", but a decorator created an element descriptor'+' with .placement "'+n+'"')}var i=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var o={kind:t,key:r,placement:n,descriptor:Object.assign({},i)};if(t!=="field"){this.disallowProperty(e,"initializer","A method descriptor")}else{this.disallowProperty(i,"get","The property descriptor of a field descriptor");this.disallowProperty(i,"set","The property descriptor of a field descriptor");this.disallowProperty(i,"value","The property descriptor of a field descriptor");o.initializer=e.initializer}return o},toElementFinisherExtras:function(e){var t=this.toElementDescriptor(e);var r=nr(e,"finisher");var n=this.toElementDescriptors(e.extras);return{element:t,finisher:r,extras:n}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};var r={value:"Descriptor",configurable:true};Object.defineProperty(t,Symbol.toStringTag,r);return t},toClassDescriptor:function(e){var t=String(e.kind);if(t!=="class"){throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator'+' created a class descriptor with .kind "'+t+'"')}this.disallowProperty(e,"key","A class descriptor");this.disallowProperty(e,"placement","A class descriptor");this.disallowProperty(e,"descriptor","A class descriptor");this.disallowProperty(e,"initializer","A class descriptor");this.disallowProperty(e,"extras","A class descriptor");var r=nr(e,"finisher");var n=this.toElementDescriptors(e.elements);return{elements:n,finisher:r}},runClassFinishers:function(e,t){for(var r=0;r<t.length;r++){var n=(0,t[r])(e);if(n!==undefined){if(typeof n!=="function"){throw new TypeError("Finishers must return a constructor.")}n}}return e},disallowProperty:function(e,t,r){if(e[t]!==undefined){throw new TypeError(r+" can't have a ."+t+" property.")}}};return e}function $t(e){var t=jt(e.key);var r;if(e.kind==="method"){({value:e.value,writable:true,configurable:true,enumerable:false})}else if(e.kind==="get"){({get:e.value,configurable:true,enumerable:false})}else if(e.kind==="set"){({set:e.value,configurable:true,enumerable:false})}else if(e.kind==="field"){({configurable:true,writable:true,enumerable:true})}var n={kind:e.kind==="field"?"field":"method",key:t,placement:e.static?"static":e.kind==="field"?"own":"prototype",descriptor:r};if(e.decorators)n.decorators=e.decorators;if(e.kind==="field")n.initializer=e.value;return n}function Jt(e,t){if(e.descriptor.get!==undefined){t.descriptor.get=e.descriptor.get}else{t.descriptor.set=e.descriptor.set}}function er(e){var t=[];var r=function(e){return e.kind==="method"&&e.key===i.key&&e.placement===i.placement};for(var n=0;n<e.length;n++){var i=e[n];var o;if(i.kind==="method"&&t.find(r)){if(rr(i.descriptor)||rr(o.descriptor)){if(tr(i)||tr(o)){throw new ReferenceError("Duplicated methods ("+i.key+") can't be decorated.")}o.descriptor=i.descriptor}else{if(tr(i)){if(tr(o)){throw new ReferenceError("Decorators can't be placed on different accessors with for "+"the same property ("+i.key+").")}o.decorators=i.decorators}Jt(i,o)}}else{t.push(i)}}return t}function tr(e){return e.decorators&&e.decorators.length}function rr(e){return e!==undefined&&!(e.value===undefined&&e.writable===undefined)}function nr(e,t){var r=e[t];if(r!==undefined&&typeof r!=="function"){throw new TypeError("Expected '"+t+"' to be a function")}return r}function ir(e,t,r){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return r}function or(){throw new TypeError("attempted to reassign private method")}function ar(e,t){(function(e,t){return new r(e,t)});var n=nt(RegExp);var i=RegExp.prototype;var o=new WeakMap;function r(e,t){var r=n.call(this,e);o.set(r,t);return r}Ze(r,n);(function(e){var t=i.exec.call(this,e);if(t)t.groups=a(t,this);return t});Symbol.replace,function(e,t){if(typeof t==="string"){var r=o.get(this);return i[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+r[t]}))}else if(typeof t==="function"){var n=this;return i[Symbol.replace].call(this,e,function(){var e=[];e.push.apply(e,arguments);if(typeof e[e.length-1]!=="object"){e.push(a(e,n))}return t.apply(this,e)})}else{return i[Symbol.replace].call(this,e,t)}};function a(r,e){var n=o.get(e);return Object.keys(n).reduce(function(e,t){e[t]=r[n[t]];return e},Object.create(null))}return ar.apply(this,arguments)}var ur=function e(t,r){return t.splice(r,1)},cr=function e(t,r){if(r){t()}else if(document.hidden){Hu.resolve(1).then(t)}else{setTimeout(t,0)}},sr=function e(){var i=[];var n=function e(t,r){ur(i,i.findIndex(function(e){return e.event===t&&(e.cb===r||!r)}))};var o=function e(t,r,n){i.filter(function(e){return e.event===t}).map(function(e){return e.cb}).forEach(function(e){return cr(function(){return e.apply(void 0,Rt(r))},n)})};return{fireSync:function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}o(t,n,true)},fire:function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}o(t,n,false)},on:function e(t,r){i.push({event:t,cb:r})},onOnce:function e(t,r){i.push({event:t,cb:function e(){n(t,r);r.apply(void 0,arguments)}})},off:n}},lr=function e(t,r,n){Object.getOwnPropertyNames(t).filter(function(e){return!n.includes(e)}).forEach(function(e){return Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})},fr=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],pr=function e(t){var r={};lr(t,r,fr);return r},dr=function e(r){r.forEach(function(e,t){if(e.released){ur(r,t)}})},vr={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},hr={INPUT:1,LIMBO:2,LOCAL:3},yr=function e(t){return/[^0-9]+/.exec(t)},mr=function e(){return yr(1.1.toLocaleString())[0]},Er=function e(){var t=mr();var r=1e3.toLocaleString();var n=1e3.toString();if(r!==n){return yr(r)[0]}return t==="."?",":"."},gr={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},_r=[],br=function e(i,o,a){return new Hu(function(t,r){var e=_r.filter(function(e){return e.key===i}).map(function(e){return e.cb});if(e.length===0){t(o);return}var n=e.shift();e.reduce(function(e,t){return e.then(function(e){return t(e,a)})},n(o,a)).then(function(e){return t(e)}).catch(function(e){return r(e)})})},Tr=function e(t,r,n){return _r.filter(function(e){return e.key===t}).map(function(e){return e.cb(r,n)})},Ir=function e(t,r){return _r.push({key:t,cb:r})},Or=function e(t){return Object.assign(Sr,t)},wr=function e(){return Object.assign({},Sr)},Rr=function e(t){m(t,function(e,t){if(!Sr[e]){return}Sr[e][0]=ge(t,Sr[e][0],Sr[e][1])})},Sr={id:[null,gr.STRING],name:["filepond",gr.STRING],disabled:[false,gr.BOOLEAN],className:[null,gr.STRING],required:[false,gr.BOOLEAN],captureMethod:[null,gr.STRING],allowSyncAcceptAttribute:[true,gr.BOOLEAN],allowDrop:[true,gr.BOOLEAN],allowBrowse:[true,gr.BOOLEAN],allowPaste:[true,gr.BOOLEAN],allowMultiple:[false,gr.BOOLEAN],allowReplace:[true,gr.BOOLEAN],allowRevert:[true,gr.BOOLEAN],allowRemove:[true,gr.BOOLEAN],allowProcess:[true,gr.BOOLEAN],allowReorder:[false,gr.BOOLEAN],allowDirectoriesOnly:[false,gr.BOOLEAN],forceRevert:[false,gr.BOOLEAN],maxFiles:[null,gr.INT],checkValidity:[false,gr.BOOLEAN],itemInsertLocationFreedom:[true,gr.BOOLEAN],itemInsertLocation:["before",gr.STRING],itemInsertInterval:[75,gr.INT],dropOnPage:[false,gr.BOOLEAN],dropOnElement:[true,gr.BOOLEAN],dropValidation:[false,gr.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],gr.ARRAY],instantUpload:[true,gr.BOOLEAN],maxParallelUploads:[2,gr.INT],chunkUploads:[false,gr.BOOLEAN],chunkForce:[false,gr.BOOLEAN],chunkSize:[5e6,gr.INT],chunkRetryDelays:[[500,1e3,3e3],gr.Array],server:[null,gr.SERVER_API],labelDecimalSeparator:[mr(),gr.STRING],labelThousandsSeparator:[Er(),gr.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',gr.STRING],labelInvalidField:["Field contains invalid files",gr.STRING],labelFileWaitingForSize:["Waiting for size",gr.STRING],labelFileSizeNotAvailable:["Size not available",gr.STRING],labelFileCountSingular:["file in list",gr.STRING],labelFileCountPlural:["files in list",gr.STRING],labelFileLoading:["Loading",gr.STRING],labelFileAdded:["Added",gr.STRING],labelFileLoadError:["Error during load",gr.STRING],labelFileRemoved:["Removed",gr.STRING],labelFileRemoveError:["Error during remove",gr.STRING],labelFileProcessing:["Uploading",gr.STRING],labelFileProcessingComplete:["Upload complete",gr.STRING],labelFileProcessingAborted:["Upload cancelled",gr.STRING],labelFileProcessingError:["Error during upload",gr.STRING],labelFileProcessingRevertError:["Error during revert",gr.STRING],labelTapToCancel:["tap to cancel",gr.STRING],labelTapToRetry:["tap to retry",gr.STRING],labelTapToUndo:["tap to undo",gr.STRING],labelButtonRemoveItem:["Remove",gr.STRING],labelButtonAbortItemLoad:["Abort",gr.STRING],labelButtonRetryItemLoad:["Retry",gr.STRING],labelButtonAbortItemProcessing:["Cancel",gr.STRING],labelButtonUndoItemProcessing:["Undo",gr.STRING],labelButtonRetryItemProcessing:["Retry",gr.STRING],labelButtonProcessItem:["Upload",gr.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',gr.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',gr.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',gr.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',gr.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',gr.STRING],oninit:[null,gr.FUNCTION],onwarning:[null,gr.FUNCTION],onerror:[null,gr.FUNCTION],onactivatefile:[null,gr.FUNCTION],oninitfile:[null,gr.FUNCTION],onaddfilestart:[null,gr.FUNCTION],onaddfileprogress:[null,gr.FUNCTION],onaddfile:[null,gr.FUNCTION],onprocessfilestart:[null,gr.FUNCTION],onprocessfileprogress:[null,gr.FUNCTION],onprocessfileabort:[null,gr.FUNCTION],onprocessfilerevert:[null,gr.FUNCTION],onprocessfile:[null,gr.FUNCTION],onprocessfiles:[null,gr.FUNCTION],onremovefile:[null,gr.FUNCTION],onpreparefile:[null,gr.FUNCTION],onupdatefiles:[null,gr.FUNCTION],onreorderfiles:[null,gr.FUNCTION],beforeDropFile:[null,gr.FUNCTION],beforeAddFile:[null,gr.FUNCTION],beforeRemoveFile:[null,gr.FUNCTION],stylePanelLayout:[null,gr.STRING],stylePanelAspectRatio:[null,gr.STRING],styleItemPanelAspectRatio:[null,gr.STRING],styleButtonRemoveItemPosition:["left",gr.STRING],styleButtonProcessItemPosition:["right",gr.STRING],styleLoadIndicatorPosition:["right",gr.STRING],styleProgressIndicatorPosition:["right",gr.STRING],styleButtonRemoveItemAlign:[false,gr.BOOLEAN],files:[[],gr.ARRAY]},Dr=function e(t,r){if(U(r)){return t[0]||null}if(ie(r)){return t[r]||null}if(typeof r==="object"){r=r.id}return t.find(function(e){return e.id===r})||null},Pr=function e(t){if(U(t)){return t}if(/:/.test(t)){var r=t.split(":");return r[1]/r[0]}return parseFloat(t)},Ar=function e(t){return t.filter(function(e){return!e.archived})},Cr={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4},Mr=[vr.LOAD_ERROR,vr.PROCESSING_ERROR,vr.PROCESSING_REVERT_ERROR],Lr=[vr.LOADING,vr.PROCESSING,vr.PROCESSING_QUEUED,vr.INIT],Nr=[vr.PROCESSING_COMPLETE],xr=function e(t){return Mr.includes(t.status)},jr=function e(t){return Lr.includes(t.status)},kr=function e(t){return Nr.includes(t.status)},Gr=function e(u){return{GET_STATUS:function e(){var t=Ar(u.items);var r=Cr.EMPTY,n=Cr.ERROR,i=Cr.BUSY,o=Cr.IDLE,a=Cr.READY;if(t.length===0)return r;if(t.some(xr))return n;if(t.some(jr))return i;if(t.some(kr))return a;return o},GET_ITEM:function e(t){return Dr(u.items,t)},GET_ACTIVE_ITEM:function e(t){return Dr(Ar(u.items),t)},GET_ACTIVE_ITEMS:function e(){return Ar(u.items)},GET_ITEMS:function e(){return u.items},GET_ITEM_NAME:function e(t){var r=Dr(u.items,t);return r?r.filename:null},GET_ITEM_SIZE:function e(t){var r=Dr(u.items,t);return r?r.fileSize:null},GET_STYLES:function e(){return Object.keys(u.options).filter(function(e){return/^style/.test(e)}).map(function(e){return{name:e,value:u.options[e]}})},GET_PANEL_ASPECT_RATIO:function e(){var t=/circle/.test(u.options.stylePanelLayout);var r=t?1:Pr(u.options.stylePanelAspectRatio);return r},GET_ITEM_PANEL_ASPECT_RATIO:function e(){return u.options.styleItemPanelAspectRatio},GET_ITEMS_BY_STATUS:function e(t){return Ar(u.items).filter(function(e){return e.status===t})},GET_TOTAL_ITEMS:function e(){return Ar(u.items).length},IS_ASYNC:function e(){return de(u.options.server)&&(de(u.options.server.process)||ae(u.options.server.process))}}},Fr=function e(t){var r=Ar(t.items).length;if(!t.options.allowMultiple){return r===0}var n=t.options.maxFiles;if(n===null){return true}if(r<n){return true}return false},Ur=function e(t,r,n){return Math.max(Math.min(n,t),r)},Vr=function e(t,r,n){return t.splice(r,0,n)},Br=function e(t,r,n){if(U(r)){return null}if(typeof n==="undefined"){t.push(r);return r}n=Ur(n,0,t.length);Vr(t,n,r);return r},qr=function e(t){return/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(t)},zr=function e(t){return t.split("/").pop().split("?").shift()},Yr=function e(t){return t.split(".").pop()},Hr=function e(t){if(typeof t!=="string"){return""}var r=t.split("/").pop();if(/svg/.test(r)){return"svg"}if(/zip|compressed/.test(r)){return"zip"}if(/plain/.test(r)){return"txt"}if(/msword/.test(r)){return"doc"}if(/[a-z]+/.test(r)){if(r==="jpeg"){return"jpg"}return r}return""},Wr=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";return(r+t).slice(-r.length)},Xr=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new Date;return t.getFullYear()+"-"+Wr(t.getMonth()+1,"00")+"-"+Wr(t.getDate(),"00")+"_"+Wr(t.getHours(),"00")+"-"+Wr(t.getMinutes(),"00")+"-"+Wr(t.getSeconds(),"00")},Qr=function e(t,r){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;var o=typeof n==="string"?t.slice(0,t.size,n):t.slice(0,t.size,t.type);o.lastModifiedDate=new Date;if(t._relativePath)o._relativePath=t._relativePath;if(!ee(r)){r=Xr()}if(r&&i===null&&Yr(r)){o.name=r}else{i=i||Hr(o.type);o.name=r+(i?"."+i:"")}return o},Zr=function e(){return window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder},Kr=function e(t,r){var n=Zr();if(n){var i=new n;i.append(t);return i.getBlob(r)}return new Blob([t],{type:r})},$r=function e(t,r){var n=new ArrayBuffer(t.length);var i=new Uint8Array(n);for(var o=0;o<t.length;o++){i[o]=t.charCodeAt(o)}return Kr(n,r)},Jr=function e(t){return(/^data:(.+);/.exec(t)||[])[1]||null},en=function e(t){var r=t.split(",")[1];return r.replace(/\s/g,"")},tn=function e(t){return atob(en(t))},rn=function e(t){var r=Jr(t);var n=tn(t);return $r(n,r)},nn=function e(t,r,n){return Qr(rn(t),r,null,n)},on=function e(t){if(!/^content-disposition:/i.test(t))return null;var r=t.split(/filename=|filename\*=.+''/).splice(1).map(function(e){return e.trim().replace(/^["']|[;"']{0,2}$/g,"")}).filter(function(e){return e.length});return r.length?decodeURI(r[r.length-1]):null},an=function e(t){if(/content-length:/i.test(t)){var r=t.match(/[0-9]+/)[0];return r?parseInt(r,10):null}return null},un=function e(t){if(/x-content-transfer-id:/i.test(t)){var r=(t.split(":")[1]||"").trim();return r||null}return null},cn=function e(t){var r={source:null,name:null,size:null};var n=t.split("\n");var i=true;var o=false;var a=undefined;try{for(var u=n[Symbol.iterator](),c;!(i=(c=u.next()).done);i=true){var s=c.value;var l=on(s);if(l){r.name=l;continue}var f=an(s);if(f){r.size=f;continue}var p=un(s);if(p){r.source=p;continue}}}catch(e){o=true;a=e}finally{try{if(!i&&u.return!=null){u.return()}}finally{if(o){throw a}}}return r},sn=function e(r){var n={source:null,complete:false,progress:0,size:null,timestamp:null,duration:0,request:null};var t=function e(){return n.progress};var i=function e(){if(n.request&&n.request.abort){n.request.abort()}};var o=function e(){var t=n.source;u.fire("init",t);if(t instanceof File){u.fire("load",t)}else if(t instanceof Blob){u.fire("load",Qr(t,t.name))}else if(qr(t)){u.fire("load",nn(t))}else{a(t)}};var a=function e(t){if(!r){u.fire("error",{type:"error",body:"Can't load URL",code:400});return}n.timestamp=Date.now();n.request=r(t,function(e){n.duration=Date.now()-n.timestamp;n.complete=true;if(e instanceof Blob){e=Qr(e,e.name||zr(t))}u.fire("load",e instanceof Blob?e:e?e.body:null)},function(e){u.fire("error",typeof e==="string"?{type:"error",code:0,body:e}:e)},function(e,t,r){if(r){n.size=r}n.duration=Date.now()-n.timestamp;if(!e){n.progress=null;return}n.progress=t/r;u.fire("progress",n.progress)},function(){u.fire("abort")},function(e){var t=cn(typeof e==="string"?e:e.headers);u.fire("meta",{size:n.size||t.size,filename:t.name,source:t.source})})};var u=Object.assign({},sr(),{setSource:function e(t){return n.source=t},getProgress:t,abort:i,load:o});return u},ln=function e(t){return/GET|HEAD/.test(t)},fn=function e(t,r,n){var i={onheaders:function e(){},onprogress:function e(){},onload:function e(){},ontimeout:function e(){},onerror:function e(){},onabort:function e(){},abort:function e(){o=true;u.abort()}};var o=false;var a=false;n=Object.assign({method:"POST",headers:{},withCredentials:false},n);r=encodeURI(r);if(ln(n.method)&&t){r=""+r+encodeURIComponent(typeof t==="string"?t:JSON.stringify(t))}var u=new XMLHttpRequest;var c=ln(n.method)?u:u.upload;c.onprogress=function(e){if(o){return}i.onprogress(e.lengthComputable,e.loaded,e.total)};u.onreadystatechange=function(){if(u.readyState<2){return}if(u.readyState===4&&u.status===0){return}if(a){return}a=true;i.onheaders(u)};u.onload=function(){if(u.status>=200&&u.status<300){i.onload(u)}else{i.onerror(u)}};u.onerror=function(){return i.onerror(u)};u.onabort=function(){o=true;i.onabort()};u.ontimeout=function(){return i.ontimeout(u)};u.open(n.method,r,true);if(ie(n.timeout)){u.timeout=n.timeout}Object.keys(n.headers).forEach(function(e){var t=unescape(encodeURIComponent(n.headers[e]));u.setRequestHeader(e,t)});if(n.responseType){u.responseType=n.responseType}if(n.withCredentials){u.withCredentials=true}u.send(t);return i},pn=function e(t,r,n,i){return{type:t,code:r,body:n,headers:i}},dn=function e(t){return function(e){t(pn("error",0,"Timeout",e.getAllResponseHeaders()))}},vn=function e(t){return/\?/.test(t)},hn=function e(){var t="";for(var r=arguments.length,n=new Array(r),i=0;i<r;i++){n[i]=arguments[i]}n.forEach(function(e){t+=vn(t)&&vn(e)?e.replace(/\?/,"&"):e});return t},yn=function e(){var u=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var c=arguments.length>1?arguments[1]:undefined;if(typeof c==="function"){return c}if(!c||!ee(c.url)){return null}var s=c.onload||function(e){return e};var l=c.onerror||function(e){return null};return function(n,i,t,e,r,o){var a=fn(n,hn(u,c.url),Object.assign({},c,{responseType:"blob"}));a.onload=function(e){var t=e.getAllResponseHeaders();var r=cn(t).name||zr(n);i(pn("load",e.status,c.method==="HEAD"?null:Qr(s(e.response),r),t))};a.onerror=function(e){t(pn("error",e.status,l(e.response)||e.statusText,e.getAllResponseHeaders()))};a.onheaders=function(e){o(pn("headers",e.status,null,e.getAllResponseHeaders()))};a.ontimeout=dn(t);a.onprogress=e;a.onabort=r;return a}},mn={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},En=function e(u,a,c,s,l,t,f,n,p,r,i){var d=[];var o=i.chunkTransferId,v=i.chunkServer,h=i.chunkSize,y=i.chunkRetryDelays;var m={serverId:o,aborted:false};var E=a.ondata||function(e){return e};var g=a.onload||function(e,t){return t==="HEAD"?e.getResponseHeader("Upload-Offset"):e.response};var _=a.onerror||function(e){return null};var b=function e(t){var r=new FormData;if(de(l))r.append(c,JSON.stringify(l));var n=typeof a.headers==="function"?a.headers(s,l):Object.assign({},a.headers,{"Upload-Length":s.size});var i=Object.assign({},a,{headers:n});var o=fn(E(r),hn(u,a.url),i);o.onload=function(e){return t(g(e,i.method))};o.onerror=function(e){return f(pn("error",e.status,_(e.response)||e.statusText,e.getAllResponseHeaders()))};o.ontimeout=dn(f)};var T=function e(t){var r=hn(u,v.url,m.serverId);var n=typeof a.headers==="function"?a.headers(m.serverId):Object.assign({},a.headers);var i={headers:n,method:"HEAD"};var o=fn(null,r,i);o.onload=function(e){return t(g(e,i.method))};o.onerror=function(e){return f(pn("error",e.status,_(e.response)||e.statusText,e.getAllResponseHeaders()))};o.ontimeout=dn(f)};var I=Math.floor(s.size/h);for(var O=0;O<=I;O++){var w=O*h;var R=s.slice(w,w+h,"application/offset+octet-stream");d[O]={index:O,size:R.size,offset:w,data:R,file:s,progress:0,retries:Rt(y),status:mn.QUEUED,error:null,request:null,timeout:null}}var S=function e(){return t(m.serverId)};var D=function e(t){return t.status===mn.QUEUED||t.status===mn.ERROR};var P=function e(n){if(m.aborted)return;n=n||d.find(D);if(!n){if(d.every(function(e){return e.status===mn.COMPLETE})){S()}return}n.status=mn.PROCESSING;n.progress=null;var t=v.ondata||function(e){return e};var r=v.onerror||function(e){return null};var i=hn(u,v.url,m.serverId);var o=typeof v.headers==="function"?v.headers(n):Object.assign({},v.headers,{"Content-Type":"application/offset+octet-stream","Upload-Offset":n.offset,"Upload-Length":s.size,"Upload-Name":s.name});var a=n.request=fn(t(n.data),i,Object.assign({},v,{headers:o}));a.onload=function(){n.status=mn.COMPLETE;n.request=null;M()};a.onprogress=function(e,t,r){n.progress=e?t:null;C()};a.onerror=function(e){n.status=mn.ERROR;n.request=null;n.error=r(e.response)||e.statusText;if(!A(n)){f(pn("error",e.status,r(e.response)||e.statusText,e.getAllResponseHeaders()))}};a.ontimeout=function(e){n.status=mn.ERROR;n.request=null;if(!A(n)){dn(f)(e)}};a.onabort=function(){n.status=mn.QUEUED;n.request=null;p()}};var A=function e(t){if(t.retries.length===0)return false;t.status=mn.WAITING;clearTimeout(t.timeout);t.timeout=setTimeout(function(){P(t)},t.retries.shift());return true};var C=function e(){var t=d.reduce(function(e,t){if(e===null||t.progress===null)return null;return e+t.progress},0);if(t===null)return n(false,0,0);var r=d.reduce(function(e,t){return e+t.size},0);n(true,t,r)};var M=function e(){var t=d.filter(function(e){return e.status===mn.PROCESSING}).length;if(t>=1)return;P()};var L=function e(){d.forEach(function(e){clearTimeout(e.timeout);if(e.request){e.request.abort()}})};if(!m.serverId){b(function(e){if(m.aborted)return;r(e);m.serverId=e;M()})}else{T(function(t){if(m.aborted)return;d.filter(function(e){return e.offset<t}).forEach(function(e){e.status=mn.COMPLETE;e.progress=e.size});M()})}return{abort:function e(){m.aborted=true;L()}}},gn=function e(h,y,m,E){return function(e,t,r,n,i,o,a){if(!e)return;var u=E.chunkUploads;var c=u&&e.size>E.chunkSize;var s=u&&(c||E.chunkForce);if(e instanceof Blob&&s)return En(h,y,m,e,t,r,n,i,o,a,E);var l=y.ondata||function(e){return e};var f=y.onload||function(e){return e};var p=y.onerror||function(e){return null};var d=new FormData;if(de(t)){d.append(m,JSON.stringify(t))}(e instanceof Blob?[{name:null,file:e}]:e).forEach(function(e){d.append(m,e.file,e.name===null?e.file.name:""+e.name+e.file.name)});var v=fn(l(d),hn(h,y.url),y);v.onload=function(e){r(pn("load",e.status,f(e.response),e.getAllResponseHeaders()))};v.onerror=function(e){n(pn("error",e.status,p(e.response)||e.statusText,e.getAllResponseHeaders()))};v.ontimeout=dn(n);v.onprogress=i;v.onabort=o;return v}},_n=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var n=arguments.length>1?arguments[1]:undefined;var i=arguments.length>2?arguments[2]:undefined;var o=arguments.length>3?arguments[3]:undefined;if(typeof n==="function")return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}return n.apply(void 0,[i].concat(t,[o]))};if(!n||!ee(n.url))return null;return gn(t,n,i,o)},bn=function e(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var o=arguments.length>1?arguments[1]:undefined;if(typeof o==="function"){return o}if(!o||!ee(o.url)){return function(e,t){return t()}}var a=o.onload||function(e){return e};var u=o.onerror||function(e){return null};return function(e,t,r){var n=fn(e,i+o.url,o);n.onload=function(e){t(pn("load",e.status,a(e.response),e.getAllResponseHeaders()))};n.onerror=function(e){r(pn("error",e.status,u(e.response)||e.statusText,e.getAllResponseHeaders()))};n.ontimeout=dn(r);return n}},Tn=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return t+Math.random()*(r-t)},In=function e(i){var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1e3;var t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var a=arguments.length>3&&arguments[3]!==undefined?arguments[3]:25;var u=arguments.length>4&&arguments[4]!==undefined?arguments[4]:250;var c=null;var s=Date.now();var r=function e(){var t=Date.now()-s;var r=Tn(a,u);if(t+r>o){r=t+r-o}var n=t/o;if(n>=1||document.hidden){i(1);return}i(n);c=setTimeout(e,r)};r();return{clear:function e(){clearTimeout(c)}}},On=function e(o){var a={complete:false,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null};var t=function e(t,r){var n=function e(){if(a.duration===0||a.progress===null)return;c.fire("progress",c.getProgress())};var i=function e(){a.complete=true;c.fire("load-perceived",a.response.body)};c.fire("start");a.timestamp=Date.now();a.perceivedPerformanceUpdater=In(function(e){a.perceivedProgress=e;a.perceivedDuration=Date.now()-a.timestamp;n();if(a.response&&a.perceivedProgress===1&&!a.complete){i()}},Tn(750,1500));a.request=o(t,r,function(e){a.response=de(e)?e:{type:"load",code:200,body:""+e,headers:{}};a.duration=Date.now()-a.timestamp;a.progress=1;c.fire("load",a.response.body);if(a.perceivedProgress===1){i()}},function(e){a.perceivedPerformanceUpdater.clear();c.fire("error",de(e)?e:{type:"error",code:0,body:""+e})},function(e,t,r){a.duration=Date.now()-a.timestamp;a.progress=e?t/r:null;n()},function(){a.perceivedPerformanceUpdater.clear();c.fire("abort",a.response?a.response.body:null)},function(e){c.fire("transfer",e)})};var r=function e(){if(!a.request)return;a.perceivedPerformanceUpdater.clear();if(a.request.abort)a.request.abort();a.complete=true};var n=function e(){r();a.complete=false;a.perceivedProgress=0;a.progress=0;a.timestamp=null;a.perceivedDuration=0;a.duration=0;a.request=null;a.response=null};var i=function e(){return a.progress?Math.min(a.progress,a.perceivedProgress):null};var u=function e(){return Math.min(a.duration,a.perceivedDuration)};var c=Object.assign({},sr(),{process:t,abort:r,getProgress:i,getDuration:u,reset:n});return c},wn=function e(t){return t.substr(0,t.lastIndexOf("."))||t},Rn=function e(t){var r=[t.name,t.size,t.type];if(t instanceof Blob||qr(t)){r[0]=t.name||Xr()}else if(qr(t)){r[1]=t.length;r[2]=Jr(t)}else if(ee(t)){r[0]=zr(t);r[1]=0;r[2]="application/octet-stream"}return{name:r[0],size:r[1],type:r[2]}},Sn=function e(t){return!!(t instanceof File||t instanceof Blob&&t.name)},Dn=function e(t){if(!de(t))return t;var r=G(t)?[]:{};for(var n in t){if(!t.hasOwnProperty(n))continue;var i=t[n];r[n]=i&&de(i)?e(i):i}return r},Pn=function e(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var n=De();var o={archived:false,frozen:false,released:false,source:null,file:r,serverFileReference:t,transferId:null,processingAborted:false,status:t?vr.PROCESSING_COMPLETE:vr.INIT,activeLoader:null,activeProcessor:null};var a=null;var c={};var u=function e(t){return o.status=t};var s=function e(t){if(o.released||o.frozen)return;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++){n[i-1]=arguments[i]}I.fire.apply(I,[t].concat(n))};var l=function e(){return Yr(o.file.name)};var f=function e(){return o.file.type};var p=function e(){return o.file.size};var d=function e(){return o.file};var v=function e(t,r,n){o.source=t;I.fireSync("init");if(o.file){I.fireSync("load-skip");return}o.file=Rn(t);r.on("init",function(){s("load-init")});r.on("meta",function(e){o.file.size=e.size;o.file.filename=e.filename;if(e.source){i=hr.LIMBO;o.serverFileReference=e.source;o.status=vr.PROCESSING_COMPLETE}s("load-meta")});r.on("progress",function(e){u(vr.LOADING);s("load-progress",e)});r.on("error",function(e){u(vr.LOAD_ERROR);s("load-request-error",e)});r.on("abort",function(){u(vr.INIT);s("load-abort")});r.on("load",function(r){o.activeLoader=null;var e=function e(t){o.file=Sn(t)?t:o.file;if(i===hr.LIMBO&&o.serverFileReference){u(vr.PROCESSING_COMPLETE)}else{u(vr.IDLE)}s("load")};var t=function e(t){o.file=r;s("load-meta");u(vr.LOAD_ERROR);s("load-file-error",t)};if(o.serverFileReference){e(r);return}n(r,e,t)});r.setSource(t);o.activeLoader=r;r.load()};var h=function e(){if(!o.activeLoader){return}o.activeLoader.load()};var y=function e(){if(o.activeLoader){o.activeLoader.abort();return}u(vr.INIT);s("load-abort")};var m=function e(r,t){if(o.processingAborted){o.processingAborted=false;return}u(vr.PROCESSING);a=null;if(!(o.file instanceof Blob)){I.on("load",function(){e(r,t)});return}r.on("load",function(e){o.transferId=null;o.serverFileReference=e});r.on("transfer",function(e){o.transferId=e});r.on("load-perceived",function(e){o.activeProcessor=null;o.transferId=null;o.serverFileReference=e;u(vr.PROCESSING_COMPLETE);s("process-complete",e)});r.on("start",function(){s("process-start")});r.on("error",function(e){o.activeProcessor=null;u(vr.PROCESSING_ERROR);s("process-error",e)});r.on("abort",function(e){o.activeProcessor=null;o.transferId=null;o.serverFileReference=e;u(vr.IDLE);s("process-abort");if(a){a()}});r.on("progress",function(e){s("process-progress",e)});var n=function e(t){if(o.archived)return;r.process(t,Object.assign({},c))};var i=console.error;t(o.file,n,i);o.activeProcessor=r};var E=function e(){o.processingAborted=false;u(vr.PROCESSING_QUEUED)};var g=function e(){return new Hu(function(t){if(!o.activeProcessor){o.processingAborted=true;u(vr.IDLE);s("process-abort");t();return}a=function e(){t()};o.activeProcessor.abort()})};var _=function e(n,i){return new Hu(function(t,r){if(o.serverFileReference===null){t();return}n(o.serverFileReference,function(){o.serverFileReference=null;t()},function(e){if(!i){t();return}u(vr.PROCESSING_REVERT_ERROR);s("process-revert-error");r(e)});u(vr.IDLE);s("process-revert")})};var b=function e(t,r,n){var i=t.split(".");var o=i[0];var a=i.pop();var u=c;i.forEach(function(e){return u=u[e]});if(JSON.stringify(u[a])===JSON.stringify(r))return;u[a]=r;if(n)return;s("metadata-update",{key:o,value:c[o]})};var T=function e(t){return Dn(t?c[t]:c)};var I=Object.assign({id:{get:function e(){return n}},origin:{get:function e(){return i}},serverId:{get:function e(){return o.serverFileReference}},transferId:{get:function e(){return o.transferId}},status:{get:function e(){return o.status}},filename:{get:function e(){return o.file.name}},filenameWithoutExtension:{get:function e(){return wn(o.file.name)}},fileExtension:{get:l},fileType:{get:f},fileSize:{get:p},file:{get:d},relativePath:{get:function e(){return o.file._relativePath}},source:{get:function e(){return o.source}},getMetadata:T,setMetadata:function e(t,r,n){if(de(t)){var i=t;Object.keys(i).forEach(function(e){b(e,i[e],r)});return t}b(t,r,n);return r},extend:function e(t,r){return O[t]=r},abortLoad:y,retryLoad:h,requestProcessing:E,abortProcessing:g,load:v,process:m,revert:_},sr(),{freeze:function e(){return o.frozen=true},release:function e(){return o.released=true},released:{get:function e(){return o.released}},archive:function e(){return o.archived=true},archived:{get:function e(){return o.archived}}});var O=B(I);return O},An=function e(t,r){if(U(r)){return 0}if(!ee(r)){return-1}return t.findIndex(function(e){return e.id===r})},Cn=function e(t,r){var n=An(t,r);if(n<0){return}return t[n]||null},Mn=function e(n,i,t,r,o,a){var u=fn(null,n,{method:"GET",responseType:"blob"});u.onload=function(e){var t=e.getAllResponseHeaders();var r=cn(t).name||zr(n);i(pn("load",e.status,Qr(e.response,r),t))};u.onerror=function(e){t(pn("error",e.status,e.statusText,e.getAllResponseHeaders()))};u.onheaders=function(e){a(pn("headers",e.status,null,e.getAllResponseHeaders()))};u.ontimeout=dn(t);u.onprogress=r;u.onabort=o;return u},Ln=function e(t){if(t.indexOf("//")===0){t=location.protocol+t}return t.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]},Nn=function e(t){return(t.indexOf(":")>-1||t.indexOf("//")>-1)&&Ln(location.href)!==Ln(t)},xn=function e(t){return function(){return ae(t)?t.apply(void 0,arguments):t}},jn=function e(t){return!Sn(t.file)},kn=function e(t,r){clearTimeout(r.listUpdateTimeout);r.listUpdateTimeout=setTimeout(function(){t("DID_UPDATE_ITEMS",{items:Ar(r.items)})},0)},Gn=function e(r){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++){n[i-1]=arguments[i]}return new Hu(function(e){if(!r){return e(true)}var t=r.apply(void 0,n);if(t==null){return e(true)}if(typeof t==="boolean"){return e(t)}if(typeof t.then==="function"){t.then(e)}})},Fn=function e(t,r){t.items.sort(function(e,t){return r(pr(e),pr(t))})},Un=function e(c,s){return function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=e.query,r=e.success,n=r===void 0?function(){}:r,i=e.failure,o=i===void 0?function(){}:i,a=lt(e,["query","success","failure"]);var u=Dr(c.items,t);if(!u){o({error:pn("error",0,"Item not found"),file:null});return}s(u,n,o,a||{})}},Vn=function e(O,w,R){return{ABORT_ALL:function e(){Ar(R.items).forEach(function(e){e.freeze();e.abortLoad();e.abortProcessing()})},DID_SET_FILES:function e(t){var r=t.value,n=r===void 0?[]:r;var i=n.map(function(e){return{source:e.source?e.source:e,options:e.options}});var o=Ar(R.items);o.forEach(function(t){if(!i.find(function(e){return e.source===t.source||e.source===t.file})){O("REMOVE_ITEM",{query:t,remove:false})}});o=Ar(R.items);i.forEach(function(t,e){if(o.find(function(e){return e.source===t.source||e.file===t.source}))return;O("ADD_ITEM",Object.assign({},t,{interactionMethod:Se.NONE,index:e}))})},DID_UPDATE_ITEM_METADATA:function e(t){var i=t.id;clearTimeout(R.itemUpdateTimeout);R.itemUpdateTimeout=setTimeout(function(){var r=Cn(R.items,i);if(!w("IS_ASYNC")){br("SHOULD_PREPARE_OUTPUT",false,{item:r,query:w}).then(function(e){if(!e){return}O("REQUEST_PREPARE_OUTPUT",{query:i,item:r,success:function e(t){O("DID_PREPARE_OUTPUT",{id:i,file:t})}},true)});return}var n=function e(){setTimeout(function(){O("REQUEST_ITEM_PROCESSING",{query:i})},32)};var e=function e(t){r.revert(bn(R.options.server.url,R.options.server.revert),w("GET_FORCE_REVERT")).then(t?n:function(){}).catch(function(){})};var t=function e(t){r.abortProcessing().then(t?n:function(){})};if(r.status===vr.PROCESSING_COMPLETE){return e(R.options.instantUpload)}if(r.status===vr.PROCESSING){return t(R.options.instantUpload)}if(R.options.instantUpload){n()}},0)},MOVE_ITEM:function e(t){var r=t.query,n=t.index;var i=Dr(R.items,r);if(!i)return;var o=R.items.indexOf(i);n=Ur(n,0,R.items.length-1);if(o===n)return;R.items.splice(n,0,R.items.splice(o,1)[0])},SORT:function e(t){var r=t.compare;Fn(R,r);O("DID_SORT_ITEMS",{items:w("GET_ACTIVE_ITEMS")})},ADD_ITEMS:function e(t){var r=t.items,n=t.index,i=t.interactionMethod,o=t.success,a=o===void 0?function(){}:o,u=t.failure,c=u===void 0?function(){}:u;var s=n;if(n===-1||typeof n==="undefined"){var l=w("GET_ITEM_INSERT_LOCATION");var f=w("GET_TOTAL_ITEMS");s=l==="before"?0:f}var p=w("GET_IGNORED_FILES");var d=function e(t){return Sn(t)?!p.includes(t.name.toLowerCase()):!U(t)};var v=r.filter(d);var h=v.map(function(r){return new Hu(function(e,t){O("ADD_ITEM",{interactionMethod:i,source:r.source||r,success:e,failure:t,index:s++,options:r.options||{}})})});Hu.all(h).then(a).catch(c)},ADD_ITEM:function e(t){var n=t.source,r=t.index,i=r===void 0?-1:r,o=t.interactionMethod,a=t.success,u=a===void 0?function(){}:a,c=t.failure,s=c===void 0?function(){}:c,l=t.options,f=l===void 0?{}:l;if(U(n)){s({error:pn("error",0,"No source"),file:null});return}if(Sn(n)&&R.options.ignoredFiles.includes(n.name.toLowerCase())){return}if(!Fr(R)){if(R.options.allowMultiple||!R.options.allowMultiple&&!R.options.allowReplace){var p=pn("warning",0,"Max files");O("DID_THROW_MAX_FILES",{source:n,error:p});s({error:p,file:null});return}var d=Ar(R.items)[0];if(d.status===vr.PROCESSING_COMPLETE||d.status===vr.PROCESSING_REVERT_ERROR){var v=w("GET_FORCE_REVERT");d.revert(bn(R.options.server.url,R.options.server.revert),v).then(function(){if(!v)return;O("ADD_ITEM",{source:n,index:i,interactionMethod:o,success:u,failure:s,options:f})}).catch(function(){});if(v)return}O("REMOVE_ITEM",{query:d.id})}var h=f.type==="local"?hr.LOCAL:f.type==="limbo"?hr.LIMBO:hr.INPUT;var y=Pn(h,h===hr.INPUT?null:n,f.file);Object.keys(f.metadata||{}).forEach(function(e){y.setMetadata(e,f.metadata[e])});Tr("DID_CREATE_ITEM",y,{query:w,dispatch:O});var m=w("GET_ITEM_INSERT_LOCATION");if(!R.options.itemInsertLocationFreedom){i=m==="before"?-1:R.items.length}Br(R.items,y,i);if(ae(m)&&n){Fn(R,m)}var E=y.id;y.on("init",function(){O("DID_INIT_ITEM",{id:E})});y.on("load-init",function(){O("DID_START_ITEM_LOAD",{id:E})});y.on("load-meta",function(){O("DID_UPDATE_ITEM_META",{id:E})});y.on("load-progress",function(e){O("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:E,progress:e})});y.on("load-request-error",function(e){var t=xn(R.options.labelFileLoadError)(e);if(e.code>=400&&e.code<500){O("DID_THROW_ITEM_INVALID",{id:E,error:e,status:{main:t,sub:e.code+" ("+e.body+")"}});s({error:e,file:pr(y)});return}O("DID_THROW_ITEM_LOAD_ERROR",{id:E,error:e,status:{main:t,sub:R.options.labelTapToRetry}})});y.on("load-file-error",function(e){O("DID_THROW_ITEM_INVALID",{id:E,error:e.status,status:e.status});s({error:e.status,file:pr(y)})});y.on("load-abort",function(){O("REMOVE_ITEM",{query:E})});y.on("load-skip",function(){O("COMPLETE_LOAD_ITEM",{query:E,item:y,data:{source:n,success:u}})});y.on("load",function(){var e=function e(t){if(!t){O("REMOVE_ITEM",{query:E});return}y.on("metadata-update",function(e){O("DID_UPDATE_ITEM_METADATA",{id:E,change:e})});br("SHOULD_PREPARE_OUTPUT",false,{item:y,query:w}).then(function(e){var r=function e(){O("COMPLETE_LOAD_ITEM",{query:E,item:y,data:{source:n,success:u}});kn(O,R)};if(e){O("REQUEST_PREPARE_OUTPUT",{query:E,item:y,success:function e(t){O("DID_PREPARE_OUTPUT",{id:E,file:t});r()}},true);return}r()})};br("DID_LOAD_ITEM",y,{query:w,dispatch:O}).then(function(){Gn(w("GET_BEFORE_ADD_FILE"),pr(y)).then(e)}).catch(function(){e(false)})});y.on("process-start",function(){O("DID_START_ITEM_PROCESSING",{id:E})});y.on("process-progress",function(e){O("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:E,progress:e})});y.on("process-error",function(e){O("DID_THROW_ITEM_PROCESSING_ERROR",{id:E,error:e,status:{main:xn(R.options.labelFileProcessingError)(e),sub:R.options.labelTapToRetry}})});y.on("process-revert-error",function(e){O("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:E,error:e,status:{main:xn(R.options.labelFileProcessingRevertError)(e),sub:R.options.labelTapToRetry}})});y.on("process-complete",function(e){O("DID_COMPLETE_ITEM_PROCESSING",{id:E,error:null,serverFileReference:e});O("DID_DEFINE_VALUE",{id:E,value:e})});y.on("process-abort",function(){O("DID_ABORT_ITEM_PROCESSING",{id:E})});y.on("process-revert",function(){O("DID_REVERT_ITEM_PROCESSING",{id:E});O("DID_DEFINE_VALUE",{id:E,value:null})});O("DID_ADD_ITEM",{id:E,index:i,interactionMethod:o});kn(O,R);var g=R.options.server||{},_=g.url,b=g.load,T=g.restore,I=g.fetch;y.load(n,sn(h===hr.INPUT?ee(n)&&Nn(n)?I?yn(_,I):Mn:Mn:h===hr.LIMBO?yn(_,T):yn(_,b)),function(e,t,r){br("LOAD_FILE",e,{query:w}).then(t).catch(r)})},REQUEST_PREPARE_OUTPUT:function e(t){var r=t.item,n=t.success,i=t.failure,o=i===void 0?function(){}:i;var a={error:pn("error",0,"Item not found"),file:null};if(r.archived)return o(a);br("PREPARE_OUTPUT",r.file,{query:w,item:r}).then(function(e){br("COMPLETE_PREPARE_OUTPUT",e,{query:w,item:r}).then(function(e){if(r.archived)return o(a);n(e)})})},COMPLETE_LOAD_ITEM:function e(t){var r=t.item,n=t.data;var i=n.success,o=n.source;var a=w("GET_ITEM_INSERT_LOCATION");if(ae(a)&&o){Fn(R,a)}O("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===hr.INPUT?null:o});i(pr(r));if(r.origin===hr.LOCAL){O("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===hr.LIMBO){O("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:o});O("DID_DEFINE_VALUE",{id:r.id,value:o});return}if(w("IS_ASYNC")&&R.options.instantUpload){O("REQUEST_ITEM_PROCESSING",{query:r.id})}},RETRY_ITEM_LOAD:Un(R,function(e){e.retryLoad()}),REQUEST_ITEM_PREPARE:Un(R,function(r,n,e){O("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:function e(t){O("DID_PREPARE_OUTPUT",{id:r.id,file:t});n({file:r,output:t})},failure:e},true)}),REQUEST_ITEM_PROCESSING:Un(R,function(t,r,n){var e=t.status===vr.IDLE||t.status===vr.PROCESSING_ERROR;if(!e){var i=function e(){return O("REQUEST_ITEM_PROCESSING",{query:t,success:r,failure:n})};var o=function e(){return document.hidden?i():setTimeout(i,32)};if(t.status===vr.PROCESSING_COMPLETE||t.status===vr.PROCESSING_REVERT_ERROR){t.revert(bn(R.options.server.url,R.options.server.revert),w("GET_FORCE_REVERT")).then(o).catch(function(){})}else if(t.status===vr.PROCESSING){t.abortProcessing().then(o)}return}if(t.status===vr.PROCESSING_QUEUED)return;t.requestProcessing();O("DID_REQUEST_ITEM_PROCESSING",{id:t.id});O("PROCESS_ITEM",{query:t,success:r,failure:n},true)}),PROCESS_ITEM:Un(R,function(n,t,r){var e=w("GET_MAX_PARALLEL_UPLOADS");var i=w("GET_ITEMS_BY_STATUS",vr.PROCESSING).length;if(i===e){R.processingQueue.push({id:n.id,success:t,failure:r});return}if(n.status===vr.PROCESSING)return;var o=function e(){var t=R.processingQueue.shift();if(!t)return;var r=t.id,n=t.success,i=t.failure;var o=Dr(R.items,r);if(!o||o.archived){e();return}O("PROCESS_ITEM",{query:r,success:n,failure:i},true)};n.onOnce("process-complete",function(){t(pr(n));o();var e=w("GET_ITEMS_BY_STATUS",vr.PROCESSING_COMPLETE).length===R.items.length;if(e){O("DID_COMPLETE_ITEM_PROCESSING_ALL")}});n.onOnce("process-error",function(e){r({error:e,file:pr(n)});o()});var a=R.options;n.process(On(_n(a.server.url,a.server.process,a.name,{chunkTransferId:n.transferId,chunkServer:a.server.patch,chunkUploads:a.chunkUploads,chunkForce:a.chunkForce,chunkSize:a.chunkSize,chunkRetryDelays:a.chunkRetryDelays})),function(e,t,r){br("PREPARE_OUTPUT",e,{query:w,item:n}).then(function(e){O("DID_PREPARE_OUTPUT",{id:n.id,file:e});t(e)}).catch(r)})}),RETRY_ITEM_PROCESSING:Un(R,function(e){O("REQUEST_ITEM_PROCESSING",{query:e})}),REQUEST_REMOVE_ITEM:Un(R,function(t){Gn(w("GET_BEFORE_REMOVE_FILE"),pr(t)).then(function(e){if(!e){return}O("REMOVE_ITEM",{query:t})})}),RELEASE_ITEM:Un(R,function(e){e.release()}),REMOVE_ITEM:Un(R,function(r,n,e,t){var i=function e(){var t=r.id;Cn(R.items,t).archive();O("DID_REMOVE_ITEM",{error:null,id:t,item:r});kn(O,R);n(pr(r))};var o=R.options.server;if(r.origin===hr.LOCAL&&o&&ae(o.remove)&&t.remove!==false){O("DID_START_ITEM_REMOVE",{id:r.id});o.remove(r.source,function(){return i()},function(e){O("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:pn("error",0,e,null),status:{main:xn(R.options.labelFileRemoveError)(e),sub:R.options.labelTapToRetry}})})}else{if(t.revert&&r.origin!==hr.LOCAL&&r.serverId!==null){r.revert(bn(R.options.server.url,R.options.server.revert),w("GET_FORCE_REVERT"))}i()}}),ABORT_ITEM_LOAD:Un(R,function(e){e.abortLoad()}),ABORT_ITEM_PROCESSING:Un(R,function(t){if(t.serverId){O("REVERT_ITEM_PROCESSING",{id:t.id});return}t.abortProcessing().then(function(){var e=R.options.instantUpload;if(e){O("REMOVE_ITEM",{query:t.id})}})}),REQUEST_REVERT_ITEM_PROCESSING:Un(R,function(r){if(!R.options.instantUpload){O("REVERT_ITEM_PROCESSING",{query:r});return}var e=function e(t){if(!t)return;O("REVERT_ITEM_PROCESSING",{query:r})};var t=w("GET_BEFORE_REMOVE_FILE");if(!t){return e(true)}var n=t(pr(r));if(n==null){return e(true)}if(typeof n==="boolean"){return e(n)}if(typeof n.then==="function"){n.then(e)}}),REVERT_ITEM_PROCESSING:Un(R,function(t){t.revert(bn(R.options.server.url,R.options.server.revert),w("GET_FORCE_REVERT")).then(function(){var e=R.options.instantUpload||jn(t);if(e){O("REMOVE_ITEM",{query:t.id})}}).catch(function(){})}),SET_OPTIONS:function e(t){var r=t.options;m(r,function(e,t){O("SET_"+Ie(e,"_").toUpperCase(),{value:t})})}}},Bn=function e(t){return t},qn=function e(t){return document.createElement(t)},zn=function e(t,r){var n=t.childNodes[0];if(!n){n=document.createTextNode(r);t.appendChild(n)}else if(r!==n.nodeValue){n.nodeValue=r}},Yn=function e(t,r,n,i){var o=(i%360-90)*Math.PI/180;return{x:t+n*Math.cos(o),y:r+n*Math.sin(o)}},Hn=function e(t,r,n,i,o,a){var u=Yn(t,r,n,o);var c=Yn(t,r,n,i);return["M",u.x,u.y,"A",n,n,0,a,0,c.x,c.y].join(" ")},Wn=function e(t,r,n,i,o){var a=1;if(o>i&&o-i<=.5){a=0}if(i>o&&i-o>=.5){a=0}return Hn(t,r,n,Math.min(.9999,i)*360,Math.min(.9999,o)*360,a)},Xn,Qn,Zn=C({tag:"div",name:"progress-indicator",ignoreRectUpdate:true,ignoreRect:true,create:function e(t){var r=t.root,n=t.props;n.spin=false;n.progress=0;n.opacity=0;var i=q("svg");r.ref.path=q("path",{"stroke-width":2,"stroke-linecap":"round"});i.appendChild(r.ref.path);r.ref.svg=i;r.appendChild(i)},write:function e(t){var r=t.root,n=t.props;if(n.opacity===0){return}if(n.align){r.element.dataset.align=n.align}var i=parseInt(s(r.ref.path,"stroke-width"),10);var o=r.rect.element.width*.5;var a=0;var u=0;if(n.spin){a=0;u=.5}else{a=0;u=n.progress}var c=Wn(o,o,o-i,a,u);s(r.ref.path,"d",c);s(r.ref.path,"stroke-opacity",n.spin||n.progress>0?1:0)},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Kn,$n,Jn=C({tag:"button",attributes:{type:"button"},ignoreRect:true,ignoreRectUpdate:true,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:true},create:function e(t){var r=t.root,n=t.props;r.element.innerHTML=(n.icon||"")+("<span>"+n.label+"</span>");n.isDisabled=false},write:function e(t){var r=t.root,n=t.props;var i=n.isDisabled;var o=r.query("GET_DISABLED")||n.opacity===0;if(o&&!i){n.isDisabled=true;s(r.element,"disabled","disabled")}else if(!o&&i){n.isDisabled=false;r.element.removeAttribute("disabled")}}}),ei=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:".";t=Math.round(Math.abs(t));if(t<1e3){return t+" bytes"}if(t<ri){return Math.floor(t/ti)+" KB"}if(t<ni){return ii(t/ri,1,r)+" MB"}return ii(t/ni,2,r)+" GB"},ti=1e3,ri=1e6,ni=1e9,ii=function e(t,r,n){return t.toFixed(r).split(".").filter(function(e){return e!=="0"}).join(n)},oi,ai=function e(t){var r=t.root,n=t.props;zn(r.ref.fileSize,ei(r.query("GET_ITEM_SIZE",n.id)));zn(r.ref.fileName,Bn(r.query("GET_ITEM_NAME",n.id)))},ui=function e(t){var r=t.root,n=t.props;if(ie(r.query("GET_ITEM_SIZE",n.id))){return}zn(r.ref.fileSize,r.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},ci=C({name:"file-info",ignoreRect:true,ignoreRectUpdate:true,write:x({DID_LOAD_ITEM:ai,DID_UPDATE_ITEM_META:ai,DID_THROW_ITEM_LOAD_ERROR:ui,DID_THROW_ITEM_INVALID:ui}),didCreateView:function e(t){Tr("CREATE_VIEW",Object.assign({},t,{view:t}))},create:function e(t){var r=t.root,n=t.props;var i=qn("span");i.className="filepond--file-info-main";s(i,"aria-hidden","true");r.appendChild(i);r.ref.fileName=i;var o=qn("span");o.className="filepond--file-info-sub";r.appendChild(o);r.ref.fileSize=o;zn(o,r.query("GET_LABEL_FILE_WAITING_FOR_SIZE"));zn(i,Bn(r.query("GET_ITEM_NAME",n.id)))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),si=function e(t){return Math.round(t*100)},li=function e(t){var r=t.root;var n=qn("span");n.className="filepond--file-status-main";r.appendChild(n);r.ref.main=n;var i=qn("span");i.className="filepond--file-status-sub";r.appendChild(i);r.ref.sub=i;fi({root:r,action:{progress:null}})},fi=function e(t){var r=t.root,n=t.action;var i=n.progress===null?r.query("GET_LABEL_FILE_LOADING"):r.query("GET_LABEL_FILE_LOADING")+" "+si(n.progress)+"%";zn(r.ref.main,i);zn(r.ref.sub,r.query("GET_LABEL_TAP_TO_CANCEL"))},pi,di,vi,hi,yi=function e(t){var r=t.root;zn(r.ref.main,"");zn(r.ref.sub,"")},mi=function e(t){var r=t.root,n=t.action;zn(r.ref.main,n.status.main);zn(r.ref.sub,n.status.sub)},Ei=C({name:"file-status",ignoreRect:true,ignoreRectUpdate:true,write:x({DID_LOAD_ITEM:yi,DID_REVERT_ITEM_PROCESSING:yi,DID_REQUEST_ITEM_PROCESSING:function e(t){var r=t.root;zn(r.ref.main,r.query("GET_LABEL_FILE_PROCESSING"));zn(r.ref.sub,r.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:function e(t){var r=t.root;zn(r.ref.main,r.query("GET_LABEL_FILE_PROCESSING_ABORTED"));zn(r.ref.sub,r.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:function e(t){var r=t.root;zn(r.ref.main,r.query("GET_LABEL_FILE_PROCESSING_COMPLETE"));zn(r.ref.sub,r.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:function e(t){var r=t.root,n=t.action;var i=n.progress===null?r.query("GET_LABEL_FILE_PROCESSING"):r.query("GET_LABEL_FILE_PROCESSING")+" "+si(n.progress)+"%";zn(r.ref.main,i);zn(r.ref.sub,r.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:fi,DID_THROW_ITEM_LOAD_ERROR:mi,DID_THROW_ITEM_INVALID:mi,DID_THROW_ITEM_PROCESSING_ERROR:mi,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:mi,DID_THROW_ITEM_REMOVE_ERROR:mi}),didCreateView:function e(t){Tr("CREATE_VIEW",Object.assign({},t,{view:t}))},create:li,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),gi={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},_i=[];m(gi,function(e){_i.push(e)});var bi=function e(t){var r=t.ref.buttonRemoveItem.rect.element;return r.hidden?null:r.width+r.left},Ti=function e(t){var r=t.ref.buttonAbortItemLoad.rect.element;return r.width},Ii=function e(t){return Math.floor(t.ref.buttonRemoveItem.rect.element.height/4)},Oi=function e(t){return Math.floor(t.ref.buttonRemoveItem.rect.element.left/2)},wi,Ri,Si=function e(t){return t.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION")},Di={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:function e(t){return t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}},processProgressIndicator:{opacity:0,align:function e(t){return t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Pi={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:bi},status:{translateX:bi}},Ai={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},Ci={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:bi},status:{translateX:bi,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:bi},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Si},info:{translateX:bi},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Si},buttonRemoveItem:{opacity:1},info:{translateX:bi},status:{opacity:1,translateX:bi}},DID_LOAD_ITEM:Pi,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:bi},status:{translateX:bi}},DID_START_ITEM_PROCESSING:Ai,DID_REQUEST_ITEM_PROCESSING:Ai,DID_UPDATE_ITEM_PROCESS_PROGRESS:Ai,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:bi}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:bi},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Pi},Mi=C({create:function e(t){var r=t.root;r.element.innerHTML=r.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:true,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Li,Ni=function e(t){var o=t.root,r=t.actions,n=t.props;xi({root:o,actions:r,props:n});var i=r.concat().filter(function(e){return/^DID_/.test(e.type)}).reverse().find(function(e){return Ci[e.type]});if(i){o.ref.activeStyles=[];var a=Ci[i.type];m(Di,function(n,e){var i=o.ref[n];m(e,function(e,t){var r=a[n]&&typeof a[n][e]!=="undefined"?a[n][e]:t;o.ref.activeStyles.push({control:i,key:e,value:r})})})}o.ref.activeStyles.forEach(function(e){var t=e.control,r=e.key,n=e.value;t[r]=typeof n==="function"?n(o):n})},xi=x({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:function e(t){var r=t.root,n=t.action;r.ref.buttonAbortItemProcessing.label=n.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:function e(t){var r=t.root,n=t.action;r.ref.buttonAbortItemLoad.label=n.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:function e(t){var r=t.root,n=t.action;r.ref.buttonAbortItemRemoval.label=n.value},DID_REQUEST_ITEM_PROCESSING:function e(t){var r=t.root;r.ref.processProgressIndicator.spin=true;r.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:function e(t){var r=t.root;r.ref.loadProgressIndicator.spin=true;r.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:function e(t){var r=t.root;r.ref.processProgressIndicator.spin=true;r.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:function e(t){var r=t.root,n=t.action;r.ref.loadProgressIndicator.spin=false;r.ref.loadProgressIndicator.progress=n.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:function e(t){var r=t.root,n=t.action;r.ref.processProgressIndicator.spin=false;r.ref.processProgressIndicator.progress=n.progress}}),ji=C({create:function e(t){var n=t.root,r=t.props;var i=r.id;var o=n.query("GET_ALLOW_REVERT");var a=n.query("GET_ALLOW_REMOVE");var u=n.query("GET_ALLOW_PROCESS");var c=n.query("GET_INSTANT_UPLOAD");var s=n.query("IS_ASYNC");var l=n.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");var f;if(s){if(u&&!o){f=function e(t){return!/RevertItemProcessing/.test(t)}}else if(!u&&o){f=function e(t){return!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(t)}}else if(!u&&!o){f=function e(t){return!/Process/.test(t)}}}else{f=function e(t){return!/Process/.test(t)}}var p=f?_i.filter(f):_i.concat();if(c&&o){gi["RevertItemProcessing"].label="GET_LABEL_BUTTON_REMOVE_ITEM";gi["RevertItemProcessing"].icon="GET_ICON_REMOVE"}if(s&&!o){var d=Ci["DID_COMPLETE_ITEM_PROCESSING"];d.info.translateX=Oi;d.info.translateY=Ii;d.status.translateY=Ii;d.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(s&&!u){["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(function(e){Ci[e].status.translateY=Ii});Ci["DID_THROW_ITEM_PROCESSING_ERROR"].status.translateX=Ti}if(l&&o){gi["RevertItemProcessing"].align="BUTTON_REMOVE_ITEM_POSITION";var v=Ci["DID_COMPLETE_ITEM_PROCESSING"];v.info.translateX=bi;v.status.translateY=Ii;v.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(!a){gi["RemoveItem"].disabled=true}m(gi,function(e,t){var r=n.createChildView(Jn,{label:n.query(t.label),icon:n.query(t.icon),opacity:0});if(p.includes(e)){n.appendChildView(r)}if(t.disabled){r.element.setAttribute("disabled","disabled");r.element.setAttribute("hidden","hidden")}r.element.dataset.align=n.query("GET_STYLE_"+t.align);r.element.classList.add(t.className);r.on("click",function(e){e.stopPropagation();if(t.disabled)return;n.dispatch(t.action,{query:i})});n.ref["button"+e]=r});n.ref.processingCompleteIndicator=n.appendChildView(n.createChildView(Mi));n.ref.processingCompleteIndicator.element.dataset.align=n.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION");n.ref.info=n.appendChildView(n.createChildView(ci,{id:i}));n.ref.status=n.appendChildView(n.createChildView(Ei,{id:i}));var h=n.appendChildView(n.createChildView(Zn,{opacity:0,align:n.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));h.element.classList.add("filepond--load-indicator");n.ref.loadProgressIndicator=h;var y=n.appendChildView(n.createChildView(Zn,{opacity:0,align:n.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));y.element.classList.add("filepond--process-indicator");n.ref.processProgressIndicator=y;n.ref.activeStyles=[]},write:Ni,didCreateView:function e(t){Tr("CREATE_VIEW",Object.assign({},t,{view:t}))},name:"file"}),ki,Gi,Fi=C({create:function e(t){var r=t.root,n=t.props;r.ref.fileName=qn("legend");r.appendChild(r.ref.fileName);r.ref.file=r.appendChildView(r.createChildView(ji,{id:n.id}));r.ref.data=false},ignoreRect:true,write:x({DID_LOAD_ITEM:function e(t){var r=t.root,n=t.props;zn(r.ref.fileName,Bn(r.query("GET_ITEM_NAME",n.id)))}}),didCreateView:function e(t){Tr("CREATE_VIEW",Object.assign({},t,{view:t}))},tag:"fieldset",name:"file-wrapper"}),Ui={type:"spring",damping:.6,mass:7},Vi=function e(t){var r=t.root,n=t.props;[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Ui},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Ui},styles:["translateY"]}}].forEach(function(e){Bi(r,e,n.name)});r.element.classList.add("filepond--"+n.name);r.ref.scalable=null},Bi=function e(t,r,n){var i=C({name:"panel-"+r.name+" filepond--"+n,mixins:r.mixins,ignoreRectUpdate:true});var o=t.createChildView(i,r.props);t.ref[r.name]=t.appendChildView(o)},qi,zi=C({name:"panel",write:function e(t){var r=t.root,n=t.props;if(r.ref.scalable===null||n.scalable!==r.ref.scalable){r.ref.scalable=$(n.scalable)?n.scalable:true;r.element.dataset.scalable=r.ref.scalable}if(!n.height)return;var i=r.ref.top.rect.element;var o=r.ref.bottom.rect.element;var a=Math.max(i.height+o.height,n.height);r.ref.center.translateY=i.height;r.ref.center.scaleY=(a-i.height-o.height)/100;r.ref.bottom.translateY=a-o.height},create:Vi,ignoreRect:true,mixins:{apis:["height","scalable"]}}),Yi=function e(t){var r=t.map(function(e){return e.id});var n=undefined;return{setIndex:function e(t){n=t},getIndex:function e(){return n},getItemIndex:function e(t){return r.indexOf(t.id)}}},Hi={type:"spring",stiffness:.75,damping:.45,mass:10},Wi="spring",Xi={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},Qi,Zi=x({DID_UPDATE_PANEL_HEIGHT:function e(t){var r=t.root,n=t.action;r.height=n.height}}),Ki=x({DID_GRAB_ITEM:function e(t){var r=t.root,n=t.props;n.dragOrigin={x:r.translateX,y:r.translateY}},DID_DRAG_ITEM:function e(t){var r=t.root;r.element.dataset.dragState="drag"},DID_DROP_ITEM:function e(t){var r=t.root,n=t.props;n.dragOffset=null;n.dragOrigin=null;r.element.dataset.dragState="drop"}},function(e){var t=e.root,r=e.actions,n=e.props,i=e.shouldOptimize;if(t.element.dataset.dragState==="drop"){if(t.scaleX<=1){t.element.dataset.dragState="idle"}}var o=r.concat().filter(function(e){return/^DID_/.test(e.type)}).reverse().find(function(e){return Xi[e.type]});if(o&&o.type!==n.currentState){n.currentState=o.type;t.element.dataset.filepondItemState=Xi[n.currentState]||""}var a=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");if(!a){Zi({root:t,actions:r,props:n});if(!t.height&&t.ref.container.rect.element.height>0){t.height=t.ref.container.rect.element.height}}else if(!i){t.height=t.rect.element.width*a}if(i){t.ref.panel.height=null}t.ref.panel.height=t.height}),$i=C({create:function e(t){var u=t.root,c=t.props;u.ref.handleClick=function(e){return u.dispatch("DID_ACTIVATE_ITEM",{id:c.id})};u.element.id="filepond--item-"+c.id;u.element.addEventListener("click",u.ref.handleClick);u.ref.container=u.appendChildView(u.createChildView(Fi,{id:c.id}));u.ref.panel=u.appendChildView(u.createChildView(zi,{name:"item-panel"}));u.ref.panel.height=null;c.markedForRemoval=false;if(!u.query("GET_ALLOW_REORDER"))return;u.element.dataset.dragState="idle";var r=function e(t){if(!t.isPrimary)return;var n=false;var i={x:t.pageX,y:t.pageY};c.dragOrigin={x:u.translateX,y:u.translateY};c.dragCenter={x:t.offsetX,y:t.offsetY};var o=Yi(u.query("GET_ACTIVE_ITEMS"));u.dispatch("DID_GRAB_ITEM",{id:c.id,dragState:o});var r=function e(t){if(!t.isPrimary)return;t.stopPropagation();t.preventDefault();c.dragOffset={x:t.pageX-i.x,y:t.pageY-i.y};var r=c.dragOffset.x*c.dragOffset.x+c.dragOffset.y*c.dragOffset.y;if(r>16&&!n){n=true;u.element.removeEventListener("click",u.ref.handleClick)}u.dispatch("DID_DRAG_ITEM",{id:c.id,dragState:o})};var a=function e(t){if(!t.isPrimary)return;document.removeEventListener("pointermove",r);document.removeEventListener("pointerup",e);c.dragOffset={x:t.pageX-i.x,y:t.pageY-i.y};u.dispatch("DID_DROP_ITEM",{id:c.id,dragState:o});if(n){setTimeout(function(){return u.element.addEventListener("click",u.ref.handleClick)},0)}};document.addEventListener("pointermove",r);document.addEventListener("pointerup",a)};u.element.addEventListener("pointerdown",r)},write:Ki,destroy:function e(t){var r=t.root,n=t.props;r.element.removeEventListener("click",r.ref.handleClick);r.dispatch("RELEASE_ITEM",{query:n.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:Wi,scaleY:Wi,translateX:Hi,translateY:Hi,opacity:{type:"tween",duration:150}}}}),Ji=function e(t,r,n){if(!n)return;var i=t.rect.element.width;var o=r.length;var a=null;if(o===0||n.top<r[0].rect.element.top)return-1;var u=r[0];var c=u.rect.element;var s=c.marginLeft+c.marginRight;var l=c.width+s;var f=Math.round(i/l);if(f===1){for(var p=0;p<o;p++){var d=r[p];var v=d.rect.outer.top+d.rect.element.height*.5;if(n.top<v){return p}}return o}var h=c.marginTop+c.marginBottom;var y=c.height+h;for(var m=0;m<o;m++){var E=m%f;var g=Math.floor(m/f);var _=E*l;var b=g*y;var T=b-c.marginTop;var I=_+l;var O=b+y+c.marginBottom;if(n.top<O&&n.top>T){if(n.left<I){return m}else if(m!==o-1){a=m}else{a=null}}}if(a!==null){return a}return o},eo={height:0,width:0,get getHeight(){return this.height},set setHeight(e){if(this.height===0||e===0)this.height=e},get getWidth(){return this.width},set setWidth(e){if(this.width===0||e===0)this.width=e},setDimensions:function e(t,r){if(this.height===0||t===0)this.height=t;if(this.width===0||r===0)this.width=r}},to,ro,no=function e(t,r,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;if(t.dragOffset){t.translateX=null;t.translateY=null;t.translateX=t.dragOrigin.x+t.dragOffset.x;t.translateY=t.dragOrigin.y+t.dragOffset.y;t.scaleX=1.025;t.scaleY=1.025}else{t.translateX=r;t.translateY=n;if(Date.now()>t.spawnDate){if(t.opacity===0){io(t,r,n,i,o)}t.scaleX=1;t.scaleY=1;t.opacity=1}}},io=function e(t,r,n,i,o){if(t.interactionMethod===Se.NONE){t.translateX=null;t.translateX=r;t.translateY=null;t.translateY=n}else if(t.interactionMethod===Se.DROP){t.translateX=null;t.translateX=r-i*20;t.translateY=null;t.translateY=n-o*10;t.scaleX=.8;t.scaleY=.8}else if(t.interactionMethod===Se.BROWSE){t.translateY=null;t.translateY=n-30}else if(t.interactionMethod===Se.API){t.translateX=null;t.translateX=r-30;t.translateY=null}},oo,ao=function e(t){return t.rect.element.height+t.rect.element.marginBottom*.5+t.rect.element.marginTop*.5},uo=function e(t){return t.rect.element.width+t.rect.element.marginLeft*.5+t.rect.element.marginRight*.5},co,so=x({DID_ADD_ITEM:function e(t){var r=t.root,n=t.action;var i=n.id,o=n.index,a=n.interactionMethod;r.ref.addIndex=o;var u=Date.now();var c=u;var s=1;if(a!==Se.NONE){s=0;var l=r.query("GET_ITEM_INSERT_INTERVAL");var f=u-r.ref.lastItemSpanwDate;c=f<l?u+(l-f):u}r.ref.lastItemSpanwDate=c;r.appendChildView(r.createChildView($i,{spawnDate:c,id:i,opacity:s,interactionMethod:a}),o)},DID_REMOVE_ITEM:function e(t){var r=t.root,n=t.action;var i=n.id;var o=r.childViews.find(function(e){return e.id===i});if(!o){return}o.scaleX=.9;o.scaleY=.9;o.opacity=0;o.markedForRemoval=true},DID_DRAG_ITEM:function e(t){var p=t.root,r=t.action;var n=r.id,i=r.dragState;var o=p.query("GET_ITEM",{id:n});var d=p.childViews.find(function(e){return e.id===n});var a=p.childViews.length;var u=i.getItemIndex(o);if(!d)return;var v={x:d.dragOrigin.x+d.dragOffset.x+d.dragCenter.x,y:d.dragOrigin.y+d.dragOffset.y+d.dragCenter.y};var c=ao(d);var s=uo(d);var l=Math.floor(p.rect.outer.width/s);if(l>a)l=a;var f=Math.floor(a/l+1);eo.setHeight=c*f;eo.setWidth=s*l;var h={y:Math.floor(v.y/c),x:Math.floor(v.x/s),getGridIndex:function e(){if(v.y>eo.getHeight||v.y<0||v.x>eo.getWidth||v.x<0)return u;return this.y*l+this.x},getColIndex:function e(){var t=p.query("GET_ACTIVE_ITEMS");var r=p.childViews.filter(function(e){return e.rect.element.height});var n=t.map(function(t){return r.find(function(e){return e.id===t.id})});var i=n.findIndex(function(e){return e===d});var o=ao(d);var a=n.length;var u=a;var c=0;var s=0;var l=0;for(var f=0;f<a;f++){c=ao(n[f]);l=s;s=l+c;if(v.y<s){if(i>f){if(v.y<l+o){u=f;break}continue}u=f;break}}return u}};var y=l>1?h.getGridIndex():h.getColIndex();p.dispatch("MOVE_ITEM",{query:d,index:y});var m=i.getIndex();if(m===undefined||m!==y){i.setIndex(y);if(m===undefined)return;p.dispatch("DID_REORDER_ITEMS",{items:p.query("GET_ACTIVE_ITEMS"),origin:u,target:y})}}}),lo,fo,po=C({create:function e(t){var r=t.root;s(r.element,"role","list");r.ref.lastItemSpanwDate=Date.now()},write:function e(t){var r=t.root,n=t.props,i=t.actions,s=t.shouldOptimize;so({root:r,props:n,actions:i});var o=n.dragCoordinates;var a=r.rect.element.width;var u=r.childViews.filter(function(e){return e.rect.element.height});var c=r.query("GET_ACTIVE_ITEMS").map(function(t){return u.find(function(e){return e.id===t.id})}).filter(function(e){return e});var l=o?Ji(r,c,o):null;var f=r.ref.addIndex||null;r.ref.addIndex=null;var p=0;var d=0;var v=0;if(c.length===0)return;var h=c[0].rect.element;var y=h.marginTop+h.marginBottom;var m=h.marginLeft+h.marginRight;var E=h.width+m;var g=h.height+y;var _=Math.round(a/E);if(_===1){var b=0;var T=0;c.forEach(function(e,t){if(l){var r=t-l;if(r===-2){T=-y*.25}else if(r===-1){T=-y*.75}else if(r===0){T=y*.75}else if(r===1){T=y*.25}else{T=0}}if(s){e.translateX=null;e.translateY=null}if(!e.markedForRemoval){no(e,0,b+T)}var n=e.rect.element.height+y;var i=n*(e.markedForRemoval?e.opacity:1);b+=i})}else{var I=0;var O=0;c.forEach(function(e,t){if(t===l){p=1}if(t===f){v+=1}if(e.markedForRemoval&&e.opacity<.5){d-=1}var r=t+v+p+d;var n=r%_;var i=Math.floor(r/_);var o=n*E;var a=i*g;var u=Math.sign(o-I);var c=Math.sign(a-O);I=o;O=a;if(e.markedForRemoval)return;if(s){e.translateX=null;e.translateY=null}no(e,o,a,u,c)})}},tag:"ul",name:"list",didWriteView:function e(t){var r=t.root;r.childViews.filter(function(e){return e.markedForRemoval&&e.opacity===0&&e.resting}).forEach(function(e){e._destroy();r.removeChildView(e)})},filterFrameActionsForChild:function e(t,r){return r.filter(function(e){if(e.data&&e.data.id){return t.id===e.data.id}return true})},mixins:{apis:["dragCoordinates"]}}),vo,ho,yo,mo=x({DID_DRAG:function e(t){var r=t.root,n=t.props,i=t.action;if(!r.query("GET_ITEM_INSERT_LOCATION_FREEDOM"))return;n.dragCoordinates={left:i.position.scopeLeft-r.ref.list.rect.element.left,top:i.position.scopeTop-(r.rect.outer.top+r.rect.element.marginTop+r.rect.element.scrollTop)}},DID_END_DRAG:function e(t){var r=t.props;r.dragCoordinates=null}}),Eo,go=C({create:function e(t){var r=t.root,n=t.props;r.ref.list=r.appendChildView(r.createChildView(po));n.dragCoordinates=null;n.overflowing=false},write:function e(t){var r=t.root,n=t.props,i=t.actions;mo({root:r,props:n,actions:i});r.ref.list.dragCoordinates=n.dragCoordinates;if(n.overflowing&&!n.overflow){n.overflowing=false;r.element.dataset.state="";r.height=null}if(n.overflow){var o=Math.round(n.overflow);if(o!==r.height){n.overflowing=true;r.element.dataset.state="overflow";r.height=o}}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),_o=function e(t,r,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";if(n){s(t,r,i)}else{t.removeAttribute(r)}},bo=function e(t){if(!t||t.value===""){return}try{t.value=""}catch(e){}if(t.value){var r=qn("form");var n=t.parentNode;var i=t.nextSibling;r.appendChild(t);r.reset();if(i){n.insertBefore(t,i)}else{n.appendChild(t)}}},To=function e(t){var r=t.root,n=t.props;r.element.id="filepond--browser-"+n.id;s(r.element,"name",r.query("GET_NAME"));s(r.element,"aria-controls","filepond--assistant-"+n.id);s(r.element,"aria-labelledby","filepond--drop-label-"+n.id);Io({root:r,action:{value:r.query("GET_ACCEPTED_FILE_TYPES")}});Oo({root:r,action:{value:r.query("GET_ALLOW_MULTIPLE")}});wo({root:r,action:{value:r.query("GET_ALLOW_DIRECTORIES_ONLY")}});Ro({root:r});So({root:r,action:{value:r.query("GET_REQUIRED")}});Do({root:r,action:{value:r.query("GET_CAPTURE_METHOD")}});r.ref.handleChange=function(e){if(!r.element.value){return}var t=Array.from(r.element.files).map(function(e){e._relativePath=e.webkitRelativePath;return e});setTimeout(function(){n.onload(t);bo(r.element)},250)};r.element.addEventListener("change",r.ref.handleChange)},Io=function e(t){var r=t.root,n=t.action;if(!r.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE"))return;_o(r.element,"accept",!!n.value,n.value?n.value.join(","):"")},Oo=function e(t){var r=t.root,n=t.action;_o(r.element,"multiple",n.value)},wo=function e(t){var r=t.root,n=t.action;_o(r.element,"webkitdirectory",n.value)},Ro=function e(t){var r=t.root;var n=r.query("GET_DISABLED");var i=r.query("GET_ALLOW_BROWSE");var o=n||!i;_o(r.element,"disabled",o)},So=function e(t){var r=t.root,n=t.action;if(!n.value){_o(r.element,"required",false)}else if(r.query("GET_TOTAL_ITEMS")===0){_o(r.element,"required",true)}},Do=function e(t){var r=t.root,n=t.action;_o(r.element,"capture",!!n.value,n.value===true?"":n.value)},Po=function e(t){var r=t.root;var n=r.element;if(r.query("GET_TOTAL_ITEMS")>0){_o(n,"required",false);_o(n,"name",false)}else{_o(n,"name",true,r.query("GET_NAME"));var i=r.query("GET_CHECK_VALIDITY");if(i){n.setCustomValidity("")}if(r.query("GET_REQUIRED")){_o(n,"required",true)}}},Ao,Co=C({tag:"input",name:"browser",ignoreRect:true,ignoreRectUpdate:true,attributes:{type:"file"},create:To,destroy:function e(t){var r=t.root;r.element.removeEventListener("change",r.ref.handleChange)},write:x({DID_LOAD_ITEM:Po,DID_REMOVE_ITEM:Po,DID_THROW_ITEM_INVALID:function e(t){var r=t.root;var n=r.query("GET_CHECK_VALIDITY");if(!n)return;r.element.setCustomValidity(r.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:Ro,DID_SET_ALLOW_BROWSE:Ro,DID_SET_ALLOW_DIRECTORIES_ONLY:wo,DID_SET_ALLOW_MULTIPLE:Oo,DID_SET_ACCEPTED_FILE_TYPES:Io,DID_SET_CAPTURE_METHOD:Do,DID_SET_REQUIRED:So})}),Mo={ENTER:13,SPACE:32},Lo=function e(t){var r=t.root,n=t.props;var i=qn("label");s(i,"for","filepond--browser-"+n.id);s(i,"id","filepond--drop-label-"+n.id);s(i,"aria-hidden","true");r.ref.handleKeyDown=function(e){var t=e.keyCode===Mo.ENTER||e.keyCode===Mo.SPACE;if(!t)return;e.preventDefault();r.ref.label.click()};r.ref.handleClick=function(e){var t=e.target===i||i.contains(e.target);if(t)return;r.ref.label.click()};i.addEventListener("keydown",r.ref.handleKeyDown);r.element.addEventListener("click",r.ref.handleClick);No(i,n.caption);r.appendChild(i);r.ref.label=i},No=function e(t,r){t.innerHTML=r;var n=t.querySelector(".filepond--label-action");if(n){s(n,"tabindex","0")}return r},xo=C({name:"drop-label",ignoreRect:true,create:Lo,destroy:function e(t){var r=t.root;r.ref.label.addEventListener("keydown",r.ref.handleKeyDown);r.element.removeEventListener("click",r.ref.handleClick)},write:x({DID_SET_LABEL_IDLE:function e(t){var r=t.root,n=t.action;No(r.ref.label,n.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),jo=C({name:"drip-blob",ignoreRect:true,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),ko=function e(t){var r=t.root;var n=r.rect.element.width*.5;var i=r.rect.element.height*.5;r.ref.blob=r.appendChildView(r.createChildView(jo,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:n,translateY:i}))},Go,Fo,Uo,Vo=function e(t){var r=t.root,n=t.props,i=t.actions;Bo({root:r,props:n,actions:i});var o=r.ref.blob;if(i.length===0&&o&&o.opacity===0){r.removeChildView(o);r.ref.blob=null}},Bo=x({DID_DRAG:function e(t){var r=t.root,n=t.action;if(!r.ref.blob){ko({root:r});return}r.ref.blob.translateX=n.position.scopeLeft;r.ref.blob.translateY=n.position.scopeTop;r.ref.blob.scaleX=1;r.ref.blob.scaleY=1;r.ref.blob.opacity=1},DID_DROP:function e(t){var r=t.root;if(!r.ref.blob){return}r.ref.blob.scaleX=2.5;r.ref.blob.scaleY=2.5;r.ref.blob.opacity=0},DID_END_DRAG:function e(t){var r=t.root;if(!r.ref.blob){return}r.ref.blob.opacity=0}}),qo=C({ignoreRect:true,ignoreRectUpdate:true,name:"drip",write:Vo}),zo,Yo=function e(t,r){return t.ref.fields[r]},Ho=function e(t){t.query("GET_ACTIVE_ITEMS").forEach(function(e){if(!t.ref.fields[e.id])return;t.element.appendChild(t.ref.fields[e.id])})},Wo=function e(t){var r=t.root;return Ho(r)},Xo,Qo,Zo,Ko,$o,Jo=x({DID_SET_DISABLED:function e(t){var r=t.root;r.element.disabled=r.query("GET_DISABLED")},DID_ADD_ITEM:function e(t){var r=t.root,n=t.action;var i=qn("input");i.type="hidden";i.name=r.query("GET_NAME");i.disabled=r.query("GET_DISABLED");r.ref.fields[n.id]=i;Ho(r)},DID_LOAD_ITEM:function e(t){var r=t.root,n=t.action;var i=Yo(r,n.id);if(!i||n.serverFileReference===null)return;i.value=n.serverFileReference},DID_REMOVE_ITEM:function e(t){var r=t.root,n=t.action;var i=Yo(r,n.id);if(!i)return;i.parentNode.removeChild(i);delete r.ref.fields[n.id]},DID_DEFINE_VALUE:function e(t){var r=t.root,n=t.action;var i=Yo(r,n.id);if(!i)return;if(n.value===null){i.removeAttribute("value")}else{i.value=n.value}Ho(r)},DID_REORDER_ITEMS:Wo,DID_SORT_ITEMS:Wo}),ea=C({tag:"fieldset",name:"data",create:function e(t){var r=t.root;return r.ref.fields={}},write:Jo,ignoreRect:true}),ta=function e(t){return"getRootNode"in t?t.getRootNode():document},ra=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],na=["css","csv","html","txt"],ia={zip:"zip|compressed",epub:"application/epub+zip"},oa=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";t=t.toLowerCase();if(ra.includes(t)){return"image/"+(t==="jpg"?"jpeg":t==="svg"?"svg+xml":t)}if(na.includes(t)){return"text/"+t}return ia[t]||""},aa=function e(n){return new Hu(function(e,t){var r=ya(n);if(r.length&&!ua(n)){return e(r)}ca(n).then(e)})},ua=function e(t){if(t.files)return t.files.length>0;return false},ca=function e(n){return new Hu(function(r,e){var t=(n.items?Array.from(n.items):[]).filter(function(e){return sa(e)}).map(function(e){return la(e)});if(!t.length){r(n.files?Array.from(n.files):[]);return}Hu.all(t).then(function(e){var t=[];e.forEach(function(e){t.push.apply(t,e)});r(t.filter(function(e){return e}).map(function(e){if(!e._relativePath)e._relativePath=e.webkitRelativePath;return e}))}).catch(console.error)})},sa=function e(t){if(va(t)){var r=ha(t);if(r){return r.isFile||r.isDirectory}}return t.kind==="file"},la=function e(r){return new Hu(function(e,t){if(da(r)){fa(ha(r)).then(e).catch(t);return}e([r.getAsFile()])})},fa=function e(r){return new Hu(function(t,i){var o=[];var a=0;var u=0;var c=function e(){if(u===0&&a===0){t(o)}};var e=function n(e){a++;var r=e.createReader();var t=function t(){r.readEntries(function(e){if(e.length===0){a--;c();return}e.forEach(function(r){if(r.isDirectory){n(r)}else{u++;r.file(function(e){var t=pa(e);if(r.fullPath)t._relativePath=r.fullPath;o.push(t);u--;c()})}});t()},i)};t()};e(r)})},pa=function e(t){if(t.type.length)return t;var r=t.lastModifiedDate;var n=t.name;t=t.slice(0,t.size,oa(Yr(t.name)));t.name=n;t.lastModifiedDate=r;return t},da=function e(t){return va(t)&&(ha(t)||{}).isDirectory},va=function e(t){return"webkitGetAsEntry"in t},ha=function e(t){return t.webkitGetAsEntry()},ya=function e(t){var r=[];try{r=Ea(t);if(r.length){return r}r=ma(t)}catch(e){}return r},ma=function e(t){var r=t.getData("url");if(typeof r==="string"&&r.length){return[r]}return[]},Ea=function e(t){var r=t.getData("text/html");if(typeof r==="string"&&r.length){var n=r.match(/src\s*=\s*"(.+?)"/);if(n){return[n[1]]}}return[]},ga=[],_a=function e(t){return{pageLeft:t.pageX,pageTop:t.pageY,scopeLeft:t.offsetX||t.layerX,scopeTop:t.offsetY||t.layerY}},ba=function e(t,r,n){var i=Ta(r);var o={element:t,filterElement:n,state:null,ondrop:function e(){},onenter:function e(){},ondrag:function e(){},onexit:function e(){},onload:function e(){},allowdrop:function e(){}};o.destroy=i.addListener(o);return o},Ta=function e(t){var r=ga.find(function(e){return e.element===t});if(r){return r}var n=Ia(t);ga.push(n);return n},Ia=function e(r){var n=[];var i={dragenter:Da,dragover:Pa,dragleave:Ca,drop:Aa};var o={};m(i,function(e,t){o[e]=t(r,n);r.addEventListener(e,o[e],false)});var a={element:r,addListener:function e(t){n.push(t);return function(){n.splice(n.indexOf(t),1);if(n.length===0){ga.splice(ga.indexOf(a),1);m(i,function(e){r.removeEventListener(e,o[e],false)})}}}};return a},Oa=function e(t,r){if(!("elementFromPoint"in t)){t=document}return t.elementFromPoint(r.x,r.y)},wa=function e(t,r){var n=ta(r);var i=Oa(n,{x:t.pageX-window.pageXOffset,y:t.pageY-window.pageYOffset});return i===r||r.contains(i)},Ra=null,Sa=function e(t,r){try{t.dropEffect=r}catch(e){}},Da=function e(t,r){return function(n){n.preventDefault();Ra=n.target;r.forEach(function(e){var t=e.element,r=e.onenter;if(wa(n,t)){e.state="enter";r(_a(n))}})}},Pa=function e(t,r){return function(l){l.preventDefault();var f=l.dataTransfer;aa(f).then(function(c){var s=false;r.some(function(e){var t=e.filterElement,r=e.element,n=e.onenter,i=e.onexit,o=e.ondrag,a=e.allowdrop;Sa(f,"copy");var u=a(c);if(!u){Sa(f,"none");return}if(wa(l,r)){s=true;if(e.state===null){e.state="enter";n(_a(l));return}e.state="over";if(t&&!u){Sa(f,"none");return}o(_a(l))}else{if(t&&!s){Sa(f,"none")}if(e.state){e.state=null;i(_a(l))}}})})}},Aa=function e(t,r){return function(u){u.preventDefault();var e=u.dataTransfer;aa(e).then(function(a){r.forEach(function(e){var t=e.filterElement,r=e.element,n=e.ondrop,i=e.onexit,o=e.allowdrop;e.state=null;if(t&&!wa(u,r))return;if(!o(a))return i(_a(u));n(_a(u),a)})})}},Ca=function e(t,n){return function(r){if(Ra!==r.target){return}n.forEach(function(e){var t=e.onexit;e.state=null;t(_a(r))})}},Ma=function e(t,n,r){t.classList.add("filepond--hopper");var i=r.catchesDropsOnPage,o=r.requiresDropOnElement,a=r.filterItems,u=a===void 0?function(e){return e}:a;var c=ba(t,i?document.documentElement:t,o);var s="";var l="";c.allowdrop=function(e){return n(u(e))};c.ondrop=function(e,t){var r=u(t);if(!n(r)){f.ondragend(e);return}l="drag-drop";f.onload(r,e)};c.ondrag=function(e){f.ondrag(e)};c.onenter=function(e){l="drag-over";f.ondragstart(e)};c.onexit=function(e){l="drag-exit";f.ondragend(e)};var f={updateHopperState:function e(){if(s!==l){t.dataset.hopperState=l;s=l}},onload:function e(){},ondragstart:function e(){},ondrag:function e(){},ondragend:function e(){},destroy:function e(){c.destroy()}};return f},La=false,Na=[],xa=function e(t){var r=document.activeElement;if(r&&/textarea|input/i.test(r.nodeName)){var n=false;var i=r;while(i!==document.body){if(i.classList.contains("filepond--root")){n=true;break}i=i.parentNode}if(!n)return}aa(t.clipboardData).then(function(t){if(!t.length){return}Na.forEach(function(e){return e(t)})})},ja=function e(t){if(Na.includes(t)){return}Na.push(t);if(La){return}La=true;document.addEventListener("paste",xa)},ka=function e(t){ur(Na,Na.indexOf(t));if(Na.length===0){document.removeEventListener("paste",xa);La=false}},Ga=function e(){var t=function e(t){r.onload(t)};var r={destroy:function e(){ka(t)},onload:function e(){}};ja(t);return r},Fa,Ua=null,Va=null,Ba=[],qa=function e(t,r){t.element.textContent=r},za=function e(t){t.element.textContent=""},Ya=function e(t,r,n){var i=t.query("GET_TOTAL_ITEMS");qa(t,n+" "+r+", "+i+" "+(i===1?t.query("GET_LABEL_FILE_COUNT_SINGULAR"):t.query("GET_LABEL_FILE_COUNT_PLURAL")));clearTimeout(Va);Va=setTimeout(function(){za(t)},1500)},Ha=function e(t){return t.element.parentNode.contains(document.activeElement)},Wa,Xa,Qa,Za=function e(t){var r=t.root,n=t.action;var i=r.query("GET_ITEM",n.id);var o=i.filename;var a=r.query("GET_LABEL_FILE_PROCESSING_ABORTED");qa(r,o+" "+a)},Ka=function e(t){var r=t.root,n=t.action;var i=r.query("GET_ITEM",n.id);var o=i.filename;qa(r,n.status.main+" "+o+" "+n.status.sub)},$a=C({create:function e(t){var r=t.root,n=t.props;r.element.id="filepond--assistant-"+n.id;s(r.element,"role","status");s(r.element,"aria-live","polite");s(r.element,"aria-relevant","additions")},ignoreRect:true,ignoreRectUpdate:true,write:x({DID_LOAD_ITEM:function e(t){var r=t.root,n=t.action;if(!Ha(r)){return}r.element.textContent="";var i=r.query("GET_ITEM",n.id);Ba.push(i.filename);clearTimeout(Ua);Ua=setTimeout(function(){Ya(r,Ba.join(", "),r.query("GET_LABEL_FILE_ADDED"));Ba.length=0},750)},DID_REMOVE_ITEM:function e(t){var r=t.root,n=t.action;if(!Ha(r)){return}var i=n.item;Ya(r,i.filename,r.query("GET_LABEL_FILE_REMOVED"))},DID_COMPLETE_ITEM_PROCESSING:function e(t){var r=t.root,n=t.action;var i=r.query("GET_ITEM",n.id);var o=i.filename;var a=r.query("GET_LABEL_FILE_PROCESSING_COMPLETE");qa(r,o+" "+a)},DID_ABORT_ITEM_PROCESSING:Za,DID_REVERT_ITEM_PROCESSING:Za,DID_THROW_ITEM_REMOVE_ERROR:Ka,DID_THROW_ITEM_LOAD_ERROR:Ka,DID_THROW_ITEM_INVALID:Ka,DID_THROW_ITEM_PROCESSING_ERROR:Ka}),tag:"span",name:"assistant"}),Ja=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"-";return t.replace(new RegExp(r+".","g"),function(e){return e.charAt(1).toUpperCase()})},eu=function e(o){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:16;var u=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var c=Date.now();var s=null;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++){t[r]=arguments[r]}clearTimeout(s);var n=Date.now()-c;var i=function e(){c=Date.now();o.apply(void 0,t)};if(n<a){if(!u){s=setTimeout(i,a-n)}}else{i()}}},tu=1e6,ru=function e(t){return t.preventDefault()},nu,iu=function e(t){var i=t.root,r=t.props,n=t.actions;du({root:i,props:r,actions:n});n.filter(function(e){return/^DID_SET_STYLE_/.test(e.type)}).filter(function(e){return!U(e.data.value)}).map(function(e){var t=e.type,r=e.data;var n=Ja(t.substr(8).toLowerCase(),"_");i.element.dataset[n]=r.value;i.invalidateLayout()});if(i.rect.element.hidden)return;if(i.rect.element.width!==i.ref.widthPrevious){i.ref.widthPrevious=i.rect.element.width;i.ref.widthUpdated()}var o=i.ref.bounds;if(!o){o=i.ref.bounds=uu(i);i.element.removeChild(i.ref.measure);i.ref.measure=null}var a=i.ref,u=a.hopper,c=a.label,s=a.list,l=a.panel;if(u){u.updateHopperState()}var f=i.query("GET_PANEL_ASPECT_RATIO");var p=i.query("GET_ALLOW_MULTIPLE");var d=i.query("GET_TOTAL_ITEMS");var v=p?i.query("GET_MAX_FILES")||tu:1;var h=d===v;var y=n.find(function(e){return e.type==="DID_ADD_ITEM"});if(h&&y){var m=y.data.interactionMethod;c.opacity=0;if(p){c.translateY=-40}else{if(m===Se.API){c.translateX=40}else if(m===Se.BROWSE){c.translateY=40}else{c.translateY=30}}}else if(!h){c.opacity=1;c.translateX=0;c.translateY=0}var E=ou(i);var g=au(i);var _=c.rect.element.height;var b=!p||h?0:_;var T=h?s.rect.element.marginTop:0;var I=d===0?0:s.rect.element.marginBottom;var O=b+T+g.visual+I;var w=b+T+g.bounds+I;s.translateY=Math.max(0,b-s.rect.element.marginTop)-E.top;if(f){var R=i.rect.element.width;var S=R*f;if(f!==i.ref.previousAspectRatio){i.ref.previousAspectRatio=f;i.ref.updateHistory=[]}var D=i.ref.updateHistory;D.push(R);var P=2;if(D.length>P*2){var A=D.length;var C=A-10;var M=0;for(var L=A;L>=C;L--){if(D[L]===D[L-2]){M++}if(M>=P){return}}}l.scalable=false;l.height=S;var N=S-b-(I-E.bottom)-(h?T:0);if(g.visual>N){s.overflow=N}else{s.overflow=null}i.height=S}else if(o.fixedHeight){l.scalable=false;var x=o.fixedHeight-b-(I-E.bottom)-(h?T:0);if(g.visual>x){s.overflow=x}else{s.overflow=null}}else if(o.cappedHeight){var j=O>=o.cappedHeight;var k=Math.min(o.cappedHeight,O);l.scalable=true;l.height=j?k:k-E.top-E.bottom;var G=k-b-(I-E.bottom)-(h?T:0);if(O>o.cappedHeight&&g.visual>G){s.overflow=G}else{s.overflow=null}i.height=Math.min(o.cappedHeight,w-E.top-E.bottom)}else{var F=d>0?E.top+E.bottom:0;l.scalable=true;l.height=Math.max(_,O-F);i.height=Math.max(_,w-F)}},ou=function e(t){var r=t.ref.list.childViews[0].childViews[0];return r?{top:r.rect.element.marginTop,bottom:r.rect.element.marginBottom}:{top:0,bottom:0}},au=function e(t){var r=0;var n=0;var i=t.ref.list;var o=i.childViews[0];var a=o.childViews.filter(function(e){return e.rect.element.height});var u=t.query("GET_ACTIVE_ITEMS").map(function(t){return a.find(function(e){return e.id===t.id})}).filter(function(e){return e});if(u.length===0)return{visual:r,bounds:n};var c=o.rect.element.width;var s=Ji(o,u,i.dragCoordinates);var l=u[0].rect.element;var f=l.marginTop+l.marginBottom;var p=l.marginLeft+l.marginRight;var d=l.width+p;var v=l.height+f;var h=typeof s!=="undefined"&&s>=0?1:0;var y=u.find(function(e){return e.markedForRemoval&&e.opacity<.45})?-1:0;var m=u.length+h+y;var E=Math.round(c/d);if(E===1){u.forEach(function(e){var t=e.rect.element.height+f;n+=t;r+=t*e.opacity})}else{n=Math.ceil(m/E)*v;r=n}return{visual:r,bounds:n}},uu=function e(t){var r=t.ref.measureHeight||null;var n=parseInt(t.style.maxHeight,10)||null;var i=r===0?null:r;return{cappedHeight:n,fixedHeight:i}},cu=function e(t,r){var n=t.query("GET_ALLOW_REPLACE");var i=t.query("GET_ALLOW_MULTIPLE");var o=t.query("GET_TOTAL_ITEMS");var a=t.query("GET_MAX_FILES");var u=r.length;if(!i&&u>1){return true}a=i?a:n?a:1;var c=ie(a);if(c&&o+u>a){t.dispatch("DID_THROW_MAX_FILES",{source:r,error:pn("warning",0,"Max files")});return true}return false},su=function e(t,r,n){var i=t.childViews[0];return Ji(i,r,{left:n.scopeLeft-i.rect.element.left,top:n.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},lu=function e(o){var t=o.query("GET_ALLOW_DROP");var r=o.query("GET_DISABLED");var n=t&&!r;if(n&&!o.ref.hopper){var i=Ma(o.element,function(e){if(cu(o,e))return false;var t=o.query("GET_BEFORE_DROP_FILE")||function(){return true};var r=o.query("GET_DROP_VALIDATION");return r?e.every(function(e){return Tr("ALLOW_HOPPER_ITEM",e,{query:o.query}).every(function(e){return e===true})&&t(e)}):true},{filterItems:function e(t){var r=o.query("GET_IGNORED_FILES");return t.filter(function(e){if(Sn(e)){return!r.includes(e.name.toLowerCase())}return true})},catchesDropsOnPage:o.query("GET_DROP_ON_PAGE"),requiresDropOnElement:o.query("GET_DROP_ON_ELEMENT")});i.onload=function(e,t){var r=o.ref.list.childViews[0];var n=r.childViews.filter(function(e){return e.rect.element.height});var i=o.query("GET_ACTIVE_ITEMS").map(function(t){return n.find(function(e){return e.id===t.id})}).filter(function(e){return e});o.dispatch("ADD_ITEMS",{items:e,index:su(o.ref.list,i,t),interactionMethod:Se.DROP});o.dispatch("DID_DROP",{position:t});o.dispatch("DID_END_DRAG",{position:t})};i.ondragstart=function(e){o.dispatch("DID_START_DRAG",{position:e})};i.ondrag=eu(function(e){o.dispatch("DID_DRAG",{position:e})});i.ondragend=function(e){o.dispatch("DID_END_DRAG",{position:e})};o.ref.hopper=i;o.ref.drip=o.appendChildView(o.createChildView(qo))}else if(!n&&o.ref.hopper){o.ref.hopper.destroy();o.ref.hopper=null;o.removeChildView(o.ref.drip)}},fu=function e(r,t){var n=r.query("GET_ALLOW_BROWSE");var i=r.query("GET_DISABLED");var o=n&&!i;if(o&&!r.ref.browser){r.ref.browser=r.appendChildView(r.createChildView(Co,Object.assign({},t,{onload:function e(t){if(cu(r,t))return false;r.dispatch("ADD_ITEMS",{items:t,index:-1,interactionMethod:Se.BROWSE})}})),0)}else if(!o&&r.ref.browser){r.removeChildView(r.ref.browser);r.ref.browser=null}},pu=function e(t){var r=t.query("GET_ALLOW_PASTE");var n=t.query("GET_DISABLED");var i=r&&!n;if(i&&!t.ref.paster){t.ref.paster=Ga();t.ref.paster.onload=function(e){t.dispatch("ADD_ITEMS",{items:e,index:-1,interactionMethod:Se.PASTE})}}else if(!i&&t.ref.paster){t.ref.paster.destroy();t.ref.paster=null}},du=x({DID_SET_ALLOW_BROWSE:function e(t){var r=t.root,n=t.props;fu(r,n)},DID_SET_ALLOW_DROP:function e(t){var r=t.root;lu(r)},DID_SET_ALLOW_PASTE:function e(t){var r=t.root;pu(r)},DID_SET_DISABLED:function e(t){var r=t.root,n=t.props;lu(r);pu(r);fu(r,n);var i=r.query("GET_DISABLED");if(i){r.element.dataset.disabled="disabled"}else{r.element.removeAttribute("data-disabled")}}}),vu=C({name:"root",read:function e(t){var r=t.root;if(r.ref.measure){r.ref.measureHeight=r.ref.measure.offsetHeight}},create:function e(t){var n=t.root,r=t.props;var i=n.query("GET_ID");if(i){n.element.id=i}var o=n.query("GET_CLASS_NAME");if(o){o.split(" ").filter(function(e){return e.length}).forEach(function(e){n.element.classList.add(e)})}n.ref.label=n.appendChildView(n.createChildView(xo,Object.assign({},r,{translateY:null,caption:n.query("GET_LABEL_IDLE")})));n.ref.list=n.appendChildView(n.createChildView(go,{translateY:null}));n.ref.panel=n.appendChildView(n.createChildView(zi,{name:"panel-root"}));n.ref.assistant=n.appendChildView(n.createChildView($a,Object.assign({},r)));n.ref.data=n.appendChildView(n.createChildView(ea,Object.assign({},r)));n.ref.measure=qn("div");n.ref.measure.style.height="100%";n.element.appendChild(n.ref.measure);n.ref.bounds=null;n.query("GET_STYLES").filter(function(e){return!U(e.value)}).map(function(e){var t=e.name,r=e.value;n.element.dataset[t]=r});n.ref.widthPrevious=null;n.ref.widthUpdated=eu(function(){n.ref.updateHistory=[];n.dispatch("DID_RESIZE_ROOT")},250);n.ref.previousAspectRatio=null;n.ref.updateHistory=[];var a=window.matchMedia("(pointer: fine) and (hover: hover)").matches;var u="PointerEvent"in window;if(n.query("GET_ALLOW_REORDER")&&u&&!a){n.element.addEventListener("touchmove",ru,{passive:false});n.element.addEventListener("gesturestart",ru)}},write:iu,destroy:function e(t){var r=t.root;if(r.ref.paster){r.ref.paster.destroy()}if(r.ref.hopper){r.ref.hopper.destroy()}r.element.removeEventListener("touchmove",ru);r.element.removeEventListener("gesturestart",ru)},mixins:{styles:["height"]}}),hu=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=null;var n=wr();var a=L(Te(n),[Gr,Re(n)],[Vn,we(n)]);a.dispatch("SET_OPTIONS",{options:t});var i=function e(){if(document.hidden)return;a.dispatch("KICK")};document.addEventListener("visibilitychange",i);var o=null;var u=false;var c=false;var s=null;var l=null;var f=function e(){if(!u){u=true}clearTimeout(o);o=setTimeout(function(){u=false;s=null;l=null;if(c){c=false;a.dispatch("DID_STOP_RESIZE")}},500)};window.addEventListener("resize",f);var p=vu(a,{id:De()});var d=false;var v=false;var h={_read:function e(){if(u){l=window.innerWidth;if(!s){s=l}if(!c&&l!==s){a.dispatch("DID_START_RESIZE");c=true}}if(v&&d){d=p.element.offsetParent===null}if(d)return;p._read();v=p.rect.element.hidden},_write:function e(t){var r=a.processActionQueue().filter(function(e){return!/^SET_/.test(e.type)});if(d&&!r.length)return;g(r);d=p._write(t,r,c);dr(a.query("GET_ITEMS"));if(d){a.processDispatchQueue()}}};var y=function e(n){return function(e){var t={type:n};if(!e){return t}if(e.hasOwnProperty("error")){t.error=e.error?Object.assign({},e.error):null}if(e.status){t.status=Object.assign({},e.status)}if(e.file){t.output=e.file}if(e.source){t.file=e.source}else if(e.item||e.id){var r=e.item?e.item:a.query("GET_ITEM",e.id);t.file=r?pr(r):null}if(e.items){t.items=e.items.map(pr)}if(/progress/.test(n)){t.progress=e.progress}if(e.hasOwnProperty("origin")&&e.hasOwnProperty("target")){t.origin=e.origin;t.target=e.target}return t}};var m={DID_DESTROY:y("destroy"),DID_INIT:y("init"),DID_THROW_MAX_FILES:y("warning"),DID_INIT_ITEM:y("initfile"),DID_START_ITEM_LOAD:y("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:y("addfileprogress"),DID_LOAD_ITEM:y("addfile"),DID_THROW_ITEM_INVALID:[y("error"),y("addfile")],DID_THROW_ITEM_LOAD_ERROR:[y("error"),y("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[y("error"),y("removefile")],DID_PREPARE_OUTPUT:y("preparefile"),DID_START_ITEM_PROCESSING:y("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:y("processfileprogress"),DID_ABORT_ITEM_PROCESSING:y("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:y("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:y("processfiles"),DID_REVERT_ITEM_PROCESSING:y("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[y("error"),y("processfile")],DID_REMOVE_ITEM:y("removefile"),DID_UPDATE_ITEMS:y("updatefiles"),DID_ACTIVATE_ITEM:y("activatefile"),DID_REORDER_ITEMS:y("reorderfiles")};var E=function e(t){var r=Object.assign({pond:M},t);delete r.type;p.element.dispatchEvent(new CustomEvent("FilePond:"+t.type,{detail:r,bubbles:true,cancelable:true,composed:true}));var n=[];if(t.hasOwnProperty("error")){n.push(t.error)}if(t.hasOwnProperty("file")){n.push(t.file)}var i=["type","error","file"];Object.keys(t).filter(function(e){return!i.includes(e)}).forEach(function(e){return n.push(t[e])});M.fire.apply(M,[t.type].concat(n));var o=a.query("GET_ON"+t.type.toUpperCase());if(o){o.apply(void 0,n)}};var g=function e(t){if(!t.length)return;t.filter(function(e){return m[e.type]}).forEach(function(t){var e=m[t.type];(Array.isArray(e)?e:[e]).forEach(function(e){if(t.type==="DID_INIT_ITEM"){E(e(t.data))}else{setTimeout(function(){E(e(t.data))},0)}})})};var _=function e(t){return a.dispatch("SET_OPTIONS",{options:t})};var b=function e(t){return a.query("GET_ACTIVE_ITEM",t)};var T=function e(t){return new Hu(function(r,n){a.dispatch("REQUEST_ITEM_PREPARE",{query:t,success:function e(t){r(t)},failure:function e(t){n(t)}})})};var I=function e(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new Hu(function(t,e){R([{source:r,options:n}],{index:n.index}).then(function(e){return t(e&&e[0])}).catch(e)})};var O=function e(t){return t.file&&t.id};var w=function e(t,r){if(typeof t==="object"&&!O(t)&&!r){r=t;t=undefined}a.dispatch("REMOVE_ITEM",Object.assign({},r,{query:t}));return a.query("GET_ACTIVE_ITEM",t)===null};var R=function e(){for(var t=arguments.length,o=new Array(t),r=0;r<t;r++){o[r]=arguments[r]}return new Hu(function(e,t){var r=[];var n={};if(G(o[0])){r.push.apply(r,o[0]);Object.assign(n,o[1]||{})}else{var i=o[o.length-1];if(typeof i==="object"&&!(i instanceof Blob)){Object.assign(n,o.pop())}r.push.apply(r,o)}a.dispatch("ADD_ITEMS",{items:r,index:n.index,interactionMethod:Se.API,success:e,failure:t})})};var S=function e(){return a.query("GET_ACTIVE_ITEMS")};var D=function e(t){return new Hu(function(r,n){a.dispatch("REQUEST_ITEM_PROCESSING",{query:t,success:function e(t){r(t)},failure:function e(t){n(t)}})})};var P=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}var i=Array.isArray(r[0])?r[0]:r;var o=i.length?i:S();return Hu.all(o.map(T))};var A=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}var i=Array.isArray(r[0])?r[0]:r;if(!i.length){var o=S().filter(function(e){return!(e.status===vr.IDLE&&e.origin===hr.LOCAL)&&e.status!==vr.PROCESSING&&e.status!==vr.PROCESSING_COMPLETE&&e.status!==vr.PROCESSING_REVERT_ERROR});return Hu.all(o.map(D))}return Hu.all(i.map(D))};var C=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}var i=Array.isArray(r[0])?r[0]:r;var o;if(typeof i[i.length-1]==="object"){o=i.pop()}else if(Array.isArray(r[0])){o=r[1]}var a=S();if(!i.length)return Hu.all(a.map(function(e){return w(e,o)}));var u=i.map(function(e){return N(e)?a[e]?a[e].id:null:e}).filter(function(e){return e});return u.map(function(e){return w(e,o)})};var M=Object.assign({},sr(),{},h,{},Oe(a,n),{setOptions:_,addFile:I,addFiles:R,getFile:b,processFile:D,prepareFile:T,removeFile:w,moveFile:function e(t,r){return a.dispatch("MOVE_ITEM",{query:t,index:r})},getFiles:S,processFiles:A,removeFiles:C,prepareFiles:P,sort:function e(t){return a.dispatch("SORT",{compare:t})},browse:function e(){var t=p.element.querySelector("input[type=file]");if(t){t.click()}},destroy:function e(){M.fire("destroy",p.element);a.dispatch("ABORT_ALL");p._destroy();window.removeEventListener("resize",f);document.removeEventListener("visibilitychange",i);a.dispatch("DID_DESTROY")},insertBefore:function e(t){return j(p.element,t)},insertAfter:function e(t){return k(p.element,t)},appendTo:function e(t){return t.appendChild(p.element)},replaceElement:function e(t){j(p.element,t);t.parentNode.removeChild(t);r=t},restoreElement:function e(){if(!r){return}k(r,p.element);p.element.parentNode.removeChild(p.element);r=null},isAttachedTo:function e(t){return p.element===t||r===t},element:{get:function e(){return p.element}},status:{get:function e(){return a.query("GET_STATUS")}}});a.dispatch("DID_INIT");return B(M)},yu=function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r={};m(wr(),function(e,t){r[e]=t[0]});var n=hu(Object.assign({},r,{},t));return n},mu=function e(t){return t.charAt(0).toLowerCase()+t.slice(1)},Eu=function e(t){return Ja(t.replace(/^data-/,""))},gu=function e(u,t){m(t,function(o,a){m(u,function(e,t){var r=new RegExp(o);var n=r.test(e);if(!n){return}delete u[e];if(a===false){return}if(ee(a)){u[a]=t;return}var i=a.group;if(de(a)&&!u[i]){u[i]={}}u[i][mu(e.replace(r,""))]=t});if(a.mapping){e(u[a.group],a.mapping)}})},_u=function e(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=[];m(n.attributes,function(e){r.push(n.attributes[e])});var i=r.filter(function(e){return e.name}).reduce(function(e,t){var r=s(n,t.name);e[Eu(t.name)]=r===t.name?true:r;return e},{});gu(i,t);return i},bu=function e(t){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":false,"^files$":false};Tr("SET_ATTRIBUTE_TO_OPTION_MAP",n);var i=Object.assign({},r);var o=_u(t.nodeName==="FIELDSET"?t.querySelector("input[type=file]"):t,n);Object.keys(o).forEach(function(e){if(de(o[e])){if(!de(i[e])){i[e]={}}Object.assign(i[e],o[e])}else{i[e]=o[e]}});i.files=(r.files||[]).concat(Array.from(t.querySelectorAll("input:not([type=file])")).map(function(e){return{source:e.value,options:{type:e.dataset.type}}}));var a=yu(i);if(t.files){Array.from(t.files).forEach(function(e){a.addFile(e)})}a.replaceElement(t);return a},Tu=function e(){return t(arguments.length<=0?undefined:arguments[0])?bu.apply(void 0,arguments):yu.apply(void 0,arguments)},Iu=["fire","_read","_write"],Ou=function e(t){var r={};lr(t,r,Iu);return r},wu=function e(t,r){return t.replace(/(?:{([a-zA-Z]+)})/g,function(e,t){return r[t]})},Ru=function e(t){var r=new Blob(["(",t.toString(),")()"],{type:"application/javascript"});var n=URL.createObjectURL(r);var o=new Worker(n);return{transfer:function e(t,r){},post:function e(t,r,n){var i=De();o.onmessage=function(e){if(e.data.id===i){r(e.data.message)}};o.postMessage({id:i,message:t},n)},terminate:function e(){o.terminate();URL.revokeObjectURL(n)}}},Su=function e(n){return new Hu(function(e,t){var r=new Image;r.onload=function(){e(r)};r.onerror=function(e){t(e)};r.src=n})},Du=function e(t,r){var n=t.slice(0,t.size,t.type);n.lastModifiedDate=t.lastModifiedDate;n.name=r;return n},Pu=function e(t){return Du(t,t.name)},Au=[],Cu=function e(t){if(Au.includes(t)){return}Au.push(t);var r=t({addFilter:Ir,utils:{Type:gr,forin:m,isString:ee,isFile:Sn,toNaturalFileSize:ei,replaceInString:wu,getExtensionFromFilename:Yr,getFilenameWithoutExtension:wn,guesstimateMimeType:oa,getFileFromBlob:Qr,getFilenameFromURL:zr,createRoute:x,createWorker:Ru,createView:C,createItemAPI:pr,loadImage:Su,copyFile:Pu,renameFile:Du,createBlob:Kr,applyFilterChain:br,text:zn,getNumericAspectRatioFromString:Pr},views:{fileActionButton:Jn}});Or(r.options)},Mu=function e(){return Object.prototype.toString.call(window.operamini)==="[object OperaMini]"},Lu=function e(){return"Promise"in window},Nu=function e(){return"slice"in Blob.prototype},xu=function e(){return"URL"in window&&"createObjectURL"in window.URL},ju=function e(){return"visibilityState"in document},ku=function e(){return"performance"in window},Gu=function e(){return"supports"in(window.CSS||{})},Fu=function e(){return/MSIE|Trident/.test(window.navigator.userAgent)},Uu=function(){var e=c()&&!Mu()&&ju()&&Lu()&&Nu()&&xu()&&ku()&&(Gu()||Fu());return function(){return e}}(),Vu={apps:[]},Bu="filepond",qu=function e(){};if(i.Status={},i.FileStatus={},i.FileOrigin={},i.OptionTypes={},i.create=qu,i.destroy=qu,i.parse=qu,i.find=qu,i.registerPlugin=qu,i.getOptions=qu,i.setOptions=qu,Uu()){M(function(){Vu.apps.forEach(function(e){return e._read()})},function(t){Vu.apps.forEach(function(e){return e._write(t)})});var zu=function e(){document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Uu,create:i.create,destroy:i.destroy,parse:i.parse,find:i.find,registerPlugin:i.registerPlugin,setOptions:i.setOptions}}));document.removeEventListener("DOMContentLoaded",e)};if(document.readyState!=="loading"){setTimeout(function(){return zu()},0)}else{document.addEventListener("DOMContentLoaded",zu)}var Yu=function e(){return m(wr(),function(e,t){i.OptionTypes[e]=t[1]})};i.Status=Object.assign({},Cr);i.FileOrigin=Object.assign({},hr);i.FileStatus=Object.assign({},vr);i.OptionTypes={};Yu();i.create=function e(){var t=Tu.apply(void 0,arguments);t.on("destroy",i.destroy);Vu.apps.push(t);return Ou(t)};i.destroy=function e(t){var r=Vu.apps.findIndex(function(e){return e.isAttachedTo(t)});if(r>=0){var n=Vu.apps.splice(r,1)[0];n.restoreElement();return true}return false};i.parse=function e(t){var r=Array.from(t.querySelectorAll("."+Bu));var n=r.filter(function(t){return!Vu.apps.find(function(e){return e.isAttachedTo(t)})});return n.map(function(e){return i.create(e)})};i.find=function e(t){var r=Vu.apps.find(function(e){return e.isAttachedTo(t)});if(!r){return null}return Ou(r)};i.registerPlugin=function e(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++){r[n]=arguments[n]}r.forEach(Cu);Yu()};i.getOptions=function e(){var r={};m(wr(),function(e,t){r[e]=t[0]});return r};i.setOptions=function e(t){if(de(t)){Vu.apps.forEach(function(e){e.setOptions(t)});Rr(t)}return i.getOptions()}}i.supported=Uu,Object.defineProperty(i,"__esModule",{value:true})}(t)}).call(this,r(12))},,,,,,,,,,,,,function(e,t,r){}]);