<<<<<<< Updated upstream
{"version":3,"sources":["webpack://OpenStadComponents/webpack/bootstrap","webpack://OpenStadComponents/./node_modules/custom-event-polyfill/polyfill.js","webpack://OpenStadComponents/./node_modules/es6-promise-promise/index.js","webpack://OpenStadComponents/./node_modules/es6-promise/dist/es6-promise.js","webpack://OpenStadComponents/./node_modules/merge/merge.js","webpack://OpenStadComponents/./node_modules/process/browser.js","webpack://OpenStadComponents/(webpack)/buildin/global.js","webpack://OpenStadComponents/(webpack)/buildin/module.js","webpack://OpenStadComponents/./node_modules/whatwg-fetch/fetch.js","webpack://OpenStadComponents/./src/component/index.jsx","webpack://OpenStadComponents/./src/forms/component/default-input.jsx","webpack://OpenStadComponents/./src/forms/component/form-field.jsx","webpack://OpenStadComponents/./src/forms/component/form.jsx","webpack://OpenStadComponents/./src/forms/component/htmlarea.jsx","webpack://OpenStadComponents/./src/forms/component/image-upload.jsx","webpack://OpenStadComponents/./src/forms/component/input-with-counter.jsx","webpack://OpenStadComponents/./src/forms/component/postcode.jsx","webpack://OpenStadComponents/./src/forms/component/select.jsx","webpack://OpenStadComponents/./src/forms/component/slider.jsx","webpack://OpenStadComponents/./src/forms/component/textarea.jsx","webpack://OpenStadComponents/./src/forms/component/textinput.jsx","webpack://OpenStadComponents/./src/forms/css/default.less","webpack://OpenStadComponents/./src/forms/index.jsx","webpack://OpenStadComponents/./src/idea-details/component/idea-details.jsx","webpack://OpenStadComponents/./src/idea-details/component/vote-button.jsx","webpack://OpenStadComponents/./src/idea-details/css/default.less","webpack://OpenStadComponents/./src/idea-details/index.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/filterbar.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/idea-form.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/ideas-list.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/ideas-on-map.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/info-block.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/map.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/search.jsx","webpack://OpenStadComponents/./src/ideas-on-map/css/default.less","webpack://OpenStadComponents/./src/ideas-on-map/index.jsx","webpack://OpenStadComponents/./src/libs/css/default.less","webpack://OpenStadComponents/./src/libs/index.jsx","webpack://OpenStadComponents/./src/libs/lib/api/get-headers.js","webpack://OpenStadComponents/./src/libs/lib/api/index.js","webpack://OpenStadComponents/./src/libs/lib/local-storage.js","webpack://OpenStadComponents/./src/libs/lib/react-template.js","webpack://OpenStadComponents/./src/libs/lib/session-storage.js","webpack://OpenStadComponents/./src/libs/lib/user/get-jwt.js","webpack://OpenStadComponents/./src/libs/lib/user/get-user.js","webpack://OpenStadComponents/./src/libs/lib/user/index.js","webpack://OpenStadComponents/./src/libs/lib/user/logout.js","webpack://OpenStadComponents/./src/nlmap/component/map.jsx","webpack://OpenStadComponents/./src/nlmap/css/default.less","webpack://OpenStadComponents/./src/nlmap/index.jsx","webpack://OpenStadComponents/./src/nlmap/lib/amaps-cluster-icon.js","webpack://OpenStadComponents/./src/reactions/component/reaction-form.jsx","webpack://OpenStadComponents/./src/reactions/component/reaction.jsx","webpack://OpenStadComponents/./src/reactions/component/reactions.jsx","webpack://OpenStadComponents/./src/reactions/css/default.less","webpack://OpenStadComponents/./src/reactions/index.jsx","webpack://OpenStadComponents/vertx (ignored)","webpack://OpenStadComponents/external \"React\"","webpack://OpenStadComponents/external \"ReactDOM\""],"names":["OpenStadComponent","props","self","attributes","Object","keys","forEach","key","attribute","name","value","config","JSON","parse","err","divId","id","parseInt","Math","random","window","prevProps","prevState","React","Component","OpenStadComponentDefaultInput","defaultConfig","choices","placeholder","disabled","required","merge","recursive","state","error","onChange","showErrors","isValid","setState","data","validate","OpenStadComponentFormField","inputType","validateAction","changeAction","title","description","toLowerCase","undefined","handleOnChange","bind","input","titleHTML","descriptionHTML","__html","fieldHTML","el","instance","OpenStadComponentForm","intro","fields","values","firstInvalid","field","scrollIntoView","behavior","introHTML","fieldsHTML","length","map","fieldConfig","i","OpenStadComponentHTMLArea","filterHTML","innerHTML","replace","e","command","args","preventDefault","stopPropagation","document","execCommand","onKeyUp","onFocus","onBlur","executeAction","prompt","EditButton","cmd","evt","arg","OpenStadComponentSelect","imageserver","process","fetch","_loadedFiles","files","loadNextFile","file","element","createElement","src","async","onload","body","appendChild","fileUploaderInit","imageuploader","getFiles","images","image","serverId","containerElement","querySelector","FilePond","registerPlugin","FilePondPluginImagePreview","FilePondPluginFileValidateSize","FilePondPluginFileValidateType","FilePondPluginFilePoster","filePondSettings","acceptedFileTypes","allowFileSizeValidation","maxFileSize","maxFiles","allowBrowse","server","imageResizeTargetWidth","imageResizeTargetHeight","imageCropAspectRatio","labelIdle","labelInvalidField","labelFileWaitingForSize","labelFileSizeNotAvailable","labelFileCountSingular","labelFileCountPlural","labelFileLoading","labelFileAdded","labelFileLoadError","labelFileRemoved","labelFileRemoveError","labelFileProcessing","labelFileProcessingComplete","labelFileProcessingAborted","labelFileProcessingError","labelFileProcessingRevertError","labelTapToCancel","labelTapToRetry","labelTapToUndo","labelButtonRemoveItem","labelButtonAbortItemLoad","labelButtonRetryItemLoad","labelButtonAbortItemProcessing","labelButtonUndoItemProcessing","labelButtonRetryItemProcessing","labelButtonProcessItem","create","sortableInstance","pondEl","addEventListener","detail","console","log","fileUploaderUpdateCurrentInput","formfields","addFiles","push","url","errorHTML","FormfieldInputWithCounter","minLength","maxLength","focused","valueLength","useKey","warning","showWarning","counter","inputHTML","onInputFocus","onInputBlur","onInputKeyUp","OpenStadComponentPostcode","match","choice","Slider","touched","handleChange","event","target","min","max","range","progInRange","step","className","transform","calcProgress","doTouch","Form","FormField","ImageUpload","InputWithCounter","Postcode","Select","Text","Textarea","IdeasDetails","siteId","ideaId","user","api","headers","isUserLoggedIn","argument","isActive","showVoteButtons","labels","idea","storedListener","onReactionStored","deletedListener","onReactionDeleted","fetchData","removeEventListener","editIdeaLink","location","href","CustomEvent","dispatchEvent","argCount","OpenStadComponentLibs","getHeaders","then","response","ok","Error","json","posterImage","extraData","localStorage","get","hash","set","role","method","afterDeleteIdeaLink","labelHTML","label","color","backgroundColor","text","voteButtonsHTML","opinion","yes","editButtonsHTML","dispatchEditIdeaClick","confirm","deleteIdea","modBreakHTML","modBreak","modBreakDateHumanized","reactionsCountHTML","reactionsHTML","eval","titleField","backgroundImage","encodeURIComponent","nickName","fullName","firstName","lastName","createDateHumanized","theme","summary","VoteButton","busy","votePending","doVote","remove","loginUrl","stringify","change","userVote","alert","message","value000","value00","value0","OpenStadComponentIdeaDetails","renderElement","elem","ReactDOM","render","Filterbar","types","areas","assign","selectedType","selectedArea","mobileActiveSelector","hideMobileActiveSelector","find","area","handleTypeChange","handleAreaChange","which","showMobileActiveSelector","areasHTML","areasButtonHTML","toggleMobileActiveSelector","areaSelector","typeSelector","type","resetTypeAndArea","resetButton","IdeasForm","titleMinLength","titleMaxLength","summaryMinLength","summaryMaxLength","descriptionMinLength","descriptionMaxLength","summaryField","descriptionField","imageField","address","coordinates","lat","lng","dispatchUpdateEditIdea","style","display","formValues","form","getValues","validateIdea","showFormErrorsWarning","formErrorsWarningHTML","formHTML","submitIdea","submitButton","IdeasList","sortOptions","showSortButton","defaultSortOrder","onIdeaClick","currentSortOrder","ideas","sortOrder","center","sort","a","b","ranking","Date","createdAt","getTime","_distance","sqrt","pow","slice","updateIdeas","sortSelector","setSortOrder","option","height","titleHML","typeDef","entry","listicon","html","voteCountHTML","argcountHTML","content","ignoreReactionsForIdeaIds","RegExp","OpenStadComponentIdeasOnMap","typeField","canAddNewIdeas","formIntro","requiredUserRole","mobilePreviewLoggedInHTML","mobilePreviewNotLoggedInHTML","doSearchFunction","doSearch","mapicon","visibleIdeas","status","mobileState","currentIdea","editIdea","selectedIdea","selectedLocation","on","onChangeMapBoundaries","onMapClick","onMarkerClick","onClusterClick","onChangeTypeFilter","onUpdateSelectedIdea","onCloseSelectedLocation","onUpdateEditIdea","onSelectedIdeaClick","onNewIdeaClick","onClickMobileSwitcher","onIdeaLiked","onEditIdeaClick","onIdeaDeleted","onNewIdeaStored","showIdeaDetails","showIdeaSelected","markers","marker","removeMarker","filter","addIdea","setBoundsAndCenter","setNewIdea","setSelectedIdea","invalidateSize","showMarkers","hideMarkers","exception","next","searchValue","callback","searchValueLc","searchResult","locations","titlelLc","summaryLc","onClick","docs","found","weergavenaam","onClickAddress","centroide_ll","panTo","L","LatLng","latlng","getVisibleIdeas","setSelectedLocation","ideaform","handleLocationChange","getPointInfo","_display","isPointInPolygon","polygon","fadeMarkers","infoblock","x","unfadeAllMarkers","forceSelectLocation","newIdea","updateFading","scrollTo","showIdeaForm","setTimeout","setFilter","infoHTML","mobilePopupHTML","Kans","Knelpunt","ideadetails","hideIdeaDetails","hideIdeaForm","contentHTML","addButton","loginButton","loginLink","newIdeaButton","reactTemplate","filterbar","InfoBlock","noSelectionHTML","selectionActiveLoggedInHTML","selectionInactiveLoggedInHTML","selectionActiveNotLoggedInHTML","selectionInactiveNotLoggedInHTML","eventTarget","list","newIdeaHTML","selectedIdeaHTML","titleAddition","mobileSwitcherHTML","mobileTitle","dispatchNewIdeaClick","dispatchCloseSelectedLocation","dispatchSelectedIdeaClick","dispatchUpdateSelectedIdea","defaultBlockHTML","dispatchClickMobileSwitcher","dispatchOnIdeaClick","Map","clustering","maxClusterRadius","showCoverageOnHover","autoZoomAndCenter","onMapClusterAnimationEnd","typename","icondef","icon","width","anchor","divIcon","iconSize","point","iconAnchor","addMarker","visible","getBounds","contains","getLatLng","selectedLocationMarker","updateMarker","doNotCluster","points","showMarker","_latlng","hideMarker","isFaded","visibleParent","markerClusterGroup","getVisibleParent","ignore","getAllChildMarkers","m","setOpacity","OpenStadComponentNLMap","Search","doSearchx","showSuggestions","updateSearchValue","updateSearchResult","inputfield","focus","suggestionsHTML","suggestions","result","$0","onSuggestionClick","hideSuggestions","handleButtonClick","sessionStorage","jwt","getJWT","OpenStadComponentAPI","oscLocalStorage","getItem","setItem","removeItem","arguments","matches","regEx","exec","oscSessionStorage","search","OpenStadComponentUser","getUser","logout","latitude","longitude","zoom","zoomposition","disableDefaultUI","variant","createMap","mapIsReady","rel","amaps","nlmaps","iconCreateFunction","amapsCreateClusterIcon","onClusterAnimationEnd","addLayer","createCutoutPolygon","centerOn","editorMarker","position","markerData","index","indexOf","splice","removeLayer","newData","newLatLng","setLatLng","cluster","count","getChildCount","bounds","getCenter","smallest","y","sin","cos","bearing","atan2","PI","concat","delta1","delta2","outerBox","polygonStyle","Array","isArray","poly","latLngBounds","fitBounds","addTo","filterFuntion","filterFunction","applyFilter","inside","j","xi","yi","xj","yj","intersect","bagApiUrl1","bagApiUrl2","results","landelijk_id","colors","total","tmp","soFar","myColor","perc","angle","OpenStadComponentReactionForm","argumentId","isBusy","userRole","canSubmit","parentId","sentiment","onSubmit","messages","submitButtonHTML","submitForm","OpenStadComponentReaction","isMenuActive","isReplyFromActive","editMode","onNewReactionStored","onReactionEdited","what","can","edit","isClosed","reply","canDelete","isDeleted","canLike","hasUserVoted","reaction","menuHTML","canEdit","showMenu","submitDelete","toggleEditForm","editForm","likeButtonHTML","submitLike","replyButtonHTML","replyFormHTML","canReply","toggleReplyForm","repliesHTML","reactions","OpenStadComponentReactions","scrollToNewReaction","closedText","getElementById","reactionFormHTML"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,mBAAmB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC;AACA,CAAC;;;;;;;;;;;;ACpDD,iBAAiB,mBAAO,CAAC,mEAAa;;;;;;;;;;;;ACAtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,KAA4D;AAChE,IAAI,SAC+B;AACnC,CAAC,qBAAqB;;AAEtB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iFAAiF;;AAEjF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;;AAEhD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,mBAAC,CAAC,cAAO;AACzB;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA,CAAC,yCAAyC,UAAc;AACxD;AACA,CAAC;AACD;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,IAAI;AACd;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,uCAAuC;AACxD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,MAAM;AAChB,UAAU,OAAO;AACjB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAU,MAAM;AAChB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,qBAAqB,YAAY;AACjC;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,IAAI;AACd;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA,UAAU,SAAS;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA,YAAY,SAAS;AACrB,YAAY,SAAS;AACrB;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,YAAY,SAAS;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;AACD,oC;;;;;;;;;;;;ACjoCA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,gBAAgB,WAAW;;AAE3B;;AAEA,GAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAI;;AAEJ;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,mBAAmB,WAAW;;AAE9B;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,YAAY;;AAEZ;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA,CAAC,EAAE,KAA0B,oE;;;;;;;;;;;;AChL7B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,qDAAqD;AACrD,OAAO;AACP;AACA,OAAO;AACP,4EAA4E;AAC5E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,qBAAqB;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,qCAAqC,0BAA0B;AAC/D;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,6BAA6B,0BAA0B,eAAe;AACtE;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","file":"ideas-on-map.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/ideas-on-map/index.jsx\");\n","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {};\n      params.bubbles = !!params.bubbles;\n      params.cancelable = !!params.cancelable;\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n","module.exports = require('es6-promise').Promise;\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   3.3.1\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  return typeof x === 'function' || typeof x === 'object' && x !== null;\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (!Array.isArray) {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n} else {\n  _isArray = Array.isArray;\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  return function () {\n    vertxNext(flush);\n  };\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = r('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  _resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        _resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      _reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      _reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    _reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return _resolve(promise, value);\n    }, function (reason) {\n      return _reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$) {\n  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$ === GET_THEN_ERROR) {\n      _reject(promise, GET_THEN_ERROR.error);\n    } else if (then$$ === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$)) {\n      handleForeignThenable(promise, maybeThenable, then$$);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction _resolve(promise, value) {\n  if (promise === value) {\n    _reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction _reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      _reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      _resolve(promise, value);\n    } else if (failed) {\n      _reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      _reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      _resolve(promise, value);\n    }, function rejectPromise(reason) {\n      _reject(promise, reason);\n    });\n  } catch (e) {\n    _reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this._input = input;\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate();\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    _reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n};\n\nEnumerator.prototype._enumerate = function () {\n  var length = this.length;\n  var _input = this._input;\n\n  for (var i = 0; this._state === PENDING && i < length; i++) {\n    this._eachEntry(_input[i], i);\n  }\n};\n\nEnumerator.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$ = c.resolve;\n\n  if (resolve$$ === resolve) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$) {\n        return resolve$$(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$(entry), i);\n  }\n};\n\nEnumerator.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      _reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  _reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise.all = all;\nPromise.race = race;\nPromise.resolve = resolve;\nPromise.reject = reject;\nPromise._setScheduler = setScheduler;\nPromise._setAsap = setAsap;\nPromise._asap = asap;\n\nPromise.prototype = {\n  constructor: Promise,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nfunction polyfill() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise;\n}\n\npolyfill();\n// Strange compat..\nPromise.polyfill = polyfill;\nPromise.Promise = Promise;\n\nreturn Promise;\n\n})));\n//# sourceMappingURL=es6-promise.map","/*!\r\n * @name JavaScript/NodeJS Merge v1.2.1\r\n * @author yeikos\r\n * @repository https://github.com/yeikos/js.merge\r\n\r\n * Copyright 2014 yeikos - MIT license\r\n * https://raw.github.com/yeikos/js.merge/master/LICENSE\r\n */\r\n\r\n;(function(isNode) {\r\n\r\n\t/**\r\n\t * Merge one or more objects \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tvar Public = function(clone) {\r\n\r\n\t\treturn merge(clone === true, false, arguments);\r\n\r\n\t}, publicName = 'merge';\r\n\r\n\t/**\r\n\t * Merge two or more objects recursively \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tPublic.recursive = function(clone) {\r\n\r\n\t\treturn merge(clone === true, true, arguments);\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Clone the input removing any reference\r\n\t * @param mixed input\r\n\t * @return mixed\r\n\t */\r\n\r\n\tPublic.clone = function(input) {\r\n\r\n\t\tvar output = input,\r\n\t\t\ttype = typeOf(input),\r\n\t\t\tindex, size;\r\n\r\n\t\tif (type === 'array') {\r\n\r\n\t\t\toutput = [];\r\n\t\t\tsize = input.length;\r\n\r\n\t\t\tfor (index=0;index<size;++index)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t} else if (type === 'object') {\r\n\r\n\t\t\toutput = {};\r\n\r\n\t\t\tfor (index in input)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Merge two objects recursively\r\n\t * @param mixed input\r\n\t * @param mixed extend\r\n\t * @return mixed\r\n\t */\r\n\r\n\tfunction merge_recursive(base, extend) {\r\n\r\n\t\tif (typeOf(base) !== 'object')\r\n\r\n\t\t\treturn extend;\r\n\r\n\t\tfor (var key in extend) {\r\n\r\n\t\t\tif (typeOf(base[key]) === 'object' && typeOf(extend[key]) === 'object') {\r\n\r\n\t\t\t\tbase[key] = merge_recursive(base[key], extend[key]);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbase[key] = extend[key];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn base;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Merge two or more objects\r\n\t * @param bool clone\r\n\t * @param bool recursive\r\n\t * @param array argv\r\n\t * @return object\r\n\t */\r\n\r\n\tfunction merge(clone, recursive, argv) {\r\n\r\n\t\tvar result = argv[0],\r\n\t\t\tsize = argv.length;\r\n\r\n\t\tif (clone || typeOf(result) !== 'object')\r\n\r\n\t\t\tresult = {};\r\n\r\n\t\tfor (var index=0;index<size;++index) {\r\n\r\n\t\t\tvar item = argv[index],\r\n\r\n\t\t\t\ttype = typeOf(item);\r\n\r\n\t\t\tif (type !== 'object') continue;\r\n\r\n\t\t\tfor (var key in item) {\r\n\r\n\t\t\t\tif (key === '__proto__') continue;\r\n\r\n\t\t\t\tvar sitem = clone ? Public.clone(item[key]) : item[key];\r\n\r\n\t\t\t\tif (recursive) {\r\n\r\n\t\t\t\t\tresult[key] = merge_recursive(result[key], sitem);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tresult[key] = sitem;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Get type of variable\r\n\t * @param mixed input\r\n\t * @return string\r\n\t *\r\n\t * @see http://jsperf.com/typeofvar\r\n\t */\r\n\r\n\tfunction typeOf(input) {\r\n\r\n\t\treturn ({}).toString.call(input).slice(8, -1).toLowerCase();\r\n\r\n\t}\r\n\r\n\tif (isNode) {\r\n\r\n\t\tmodule.exports = Public;\r\n\r\n\t} else {\r\n\r\n\t\twindow[publicName] = Public;\r\n\r\n\t}\r\n\r\n})(typeof module === 'object' && module && typeof module.exports === 'object' && module.exports);","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class OpenStadComponent extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n    let self = this;\n\n    if (props.attributes) {\n      Object.keys(props.attributes).forEach((key) => {\n        let attribute = props.attributes[key];\n        self[attribute.name] = attribute.value;\n      });\n    }\n\n    self.config = self.config || props.config;\n\n    if (self.config) {\n      try {\n        self.config = JSON.parse(self.config);\n      } catch (err) {}\n    }\n\n    self.divId = self.divId || ( self.config && self.config.divId ) || props.id || `openstad-component-${  parseInt( 100000000 * Math.random() )}`;\n    \n    window[self.divId] = this;\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n    // let event = new Event('isReady');\n    // self.isReady = true;\n    // self.instance.dispatchEvent(event);\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nexport default class OpenStadComponentDefaultInput extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      choices: [],\n\t\t\tname: '',\n      placeholder: '',\n      disabled: false,\n      required: false,\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n      value: props.value,\n      error: null,\n\t\t};\n\n    this.onChange = props.onChange;\n\n  }\n\n\tvalidate({ showErrors }) {\n\t\tlet isValid = this.config.required ? !!this.state.value : true;\n    let error = '';\n    if (!isValid && showErrors) error = true;\n    this.setState({ isValid, error })\n\t\treturn isValid;\n\t}\n\n\thandleOnChange(data) {\n\t\tlet self = this;\n    data = data || {};\n\t\tself.setState(data, () => {\n      self.validate({});\n    })\n\t\tif (typeof self.onChange == 'function') {\n\t\t\tself.onChange({ name: self.config.name, value: data.value });\n\t\t}\n\t}\n\n}\n","import merge from 'merge';\n\n'use strict';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\nimport OpenStadComponentImageUpload from './image-upload.jsx';\nimport OpenStadComponentInputWithCounter from './input-with-counter.jsx';\nimport OpenStadComponentPostcode from './postcode.jsx';\nimport OpenStadComponentSelect from './select.jsx';\nimport OpenStadComponentText from './textinput.jsx';\nimport OpenStadComponentTextArea from './textarea.jsx';\n\nexport default class OpenStadComponentFormField extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      inputType: null,\n\n      validateAction: null,\n      changeAction: null,\n      required: false,\n\n      title: null,\n      description: null,\n      choices: [],\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n    self.config.name = self.config.name || self.config.title.toLowerCase();\n\n    self.state = {\n      value: props.value || undefined,\n\t\t};\n\n    self.handleOnChange = self.handleOnChange.bind(self);\n\n    self.onChange = props.onChange;\n\n  }\n  \n\tvalidate({ showErrors }) {\n    return this.input ? this.input.validate({ showErrors }) : true;\n\t}\n\n\thandleOnChange(data) {\n    // console.log(\"form field change\", data);\n\t\tif (typeof this.onChange == 'function') {\n\t\t\tthis.onChange(data);\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let titleHTML = null;\n    if (self.config.title) {\n      titleHTML = <h3 className=\"osc-form-title\">{self.config.title}</h3>\n    }\n\n    let descriptionHTML = null;\n    if (self.config.description) {\n      descriptionHTML = <div className=\"osc-form-description\" dangerouslySetInnerHTML={{ __html: self.config.description }}></div>\n    }\n\n    let fieldHTML = null;\n\n    switch (self.config.inputType) {\n\n      case 'html-with-counter':\n      case 'htmlarea-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ ...self.config, inputType: 'htmlarea' }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'image-upload':\n        fieldHTML = <OpenStadComponentImageUpload config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'input-with-counter':\n      case 'text-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ inputType: 'input', ...self.config }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'postcode':\n        fieldHTML = <OpenStadComponentPostcode config={self.config} onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'select':\n      case 'multiple-choice':\n        fieldHTML = <OpenStadComponentSelect config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'text':\n        fieldHTML = <OpenStadComponentText config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'textarea':\n        fieldHTML = <OpenStadComponentTextArea config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'textarea-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ ...self.config, inputType: 'textarea' }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      default:\n    }\n\n    return (\n\t\t\t<div id={self.id} ref={el => (self.instance = el)} className=\"osc-form-field\">\n\t\t\t\t{titleHTML}\n\t\t\t\t{descriptionHTML}\n\t\t\t\t{fieldHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\n\n'use strict';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentFormField from './form-field.jsx';\n\nexport default class OpenStadComponentForm extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      // validateAction: null,\n      // submitAction: null,\n      title: null,\n      intro: null,\n      fields: [],\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n      values: props.values|| {},\n\t\t};\n\n    self.handleOnChange = self.handleOnChange.bind(this);\n\n    self.fields = [];\n\n  }\n  \n\tgetValues() {\n    return this.state.values;\n\t}\n\n\tvalidate({ showErrors }) {\n    let self= this;\n    let isValid = true;\n    let firstInvalid = null\n    self.fields.forEach((field) => {\n      if (!field.validate({ showErrors })) {\n        isValid = false;\n        if (!firstInvalid) firstInvalid = field;\n      }\n    });\n\n    if (firstInvalid && firstInvalid.instance && firstInvalid.instance.scrollIntoView) firstInvalid.instance.scrollIntoView({behavior: 'smooth'});\n    // console.log(isValid);\n    return isValid;    \n\n\t}\n\n\thandleOnChange(data) {\n    // console.log(\"formchange\", data);\n    let self = this;\n    let values = { ...this.state.values };\n    values[data.name] = data.value;\n\t\tthis.setState({ values });\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let titleHTML = null;\n    if (self.config.title) {\n      titleHTML = <h2 className=\"osc-form-title\">{self.config.title}</h2>\n    }\n\n    let introHTML = null;\n    if (self.config.intro) {\n      introHTML = <div className=\"osc-form-intro\" dangerouslySetInnerHTML={{ __html: self.config.intro }}></div>\n    }\n\n    let fieldsHTML = null;\n    if (self.config.fields && self.config.fields.length) {\n      fieldsHTML =\n        <div className=\"osc-form-fields\">\n          { self.config.fields.map((fieldConfig, i) => {\n            return <OpenStadComponentFormField config={fieldConfig} onChange={self.handleOnChange} ref={el => (self.input = el)} key={`osc-form-field-${i}`}  ref={el => { self.fields[i] = el; }}/>\n          })}\n        </div>\n    }\n\n    return (\n\t\t\t<div id={self.divId} className=\"osc-form\" ref={el => (self.instance = el)}>\n\t\t\t\t{titleHTML}\n\t\t\t\t{introHTML}\n\t\t\t\t{fieldsHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// TODO: it is probably not ok to write your own html editor, but after intergrating ckeditor or react-rte the build was (more than) twice as large; a bettter solution must be possible\n\n'use strict';\n\nexport default class OpenStadComponentHTMLArea extends React.Component  {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: this.props.value,\n\t  };\n    \n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    let value = this.props.value;\n    value = this.filterHTML(value);\n    this.input.innerHTML = value;\n  }\n\n  filterHTML(value) {\n    value = value.replace(/<(\\/?\\s*(?:a [^>]+|a|b|i|strong|em|p|div|br|ul|li)\\s*\\/?)>/g, \"[[[$1]]]\");\n    value = value.replace(/<[^>]+>/g, \"\");\n    value = value.replace(/\\[\\[\\[([^\\]]+)\\]\\]\\]/g, \"<$1>\");\n    return value;\n  }\n\n  executeAction(e, command, args) {\n    e.preventDefault()\n    e.stopPropagation();\n    document.execCommand(command,false,args);\n    this.onKeyUp();\n  }\n  \n  onFocus(e) {\n    if (this.props.onFocus) {\n      this.props.onFocus(e);\n    }\n  }\n\n  onBlur(e) {\n    if (this.props.onBlur) {\n      this.props.onBlur(e);\n    }\n    if (this.props.onChange) {\n      this.props.onChange({ value: this.state.value });\n    }\n  }\n\n  onKeyUp() {\n    let value = this.input.innerHTML;\n    value = this.filterHTML(value);\n    this.setState({ value })\n    if (this.props.onKeyUp) {\n      this.props.onKeyUp(value);\n    }\n  }\n  \n  render () {\n    return (\n      <div className=\"osc-html-editor\">\n        <div className=\"osc-html-editor-buttons\">\n          <div className=\"osc-html-editor-button osc-html-editor-button-bold\" onMouseDown={e => this.executeAction(e, 'bold')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-italic\" onMouseDown={e => this.executeAction(e, 'italic')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-insertunorderedlist\" onMouseDown={e => this.executeAction(e, 'insertunorderedlist')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-createlink\" onMouseDown={e => this.executeAction(e, 'createlink', prompt('Lank naar','http://'))}>&nbsp;</div>\n        </div>\n        <div className=\"osc-html-editor-content\" contentEditable={true}\n             onFocus={ e => this.onFocus(e)}\n             onBlur={ e => this.onBlur(e)}\n             onKeyUp={ e => this.onKeyUp()}\n             // dangerouslySetInnerHTML={{ __html: this.state.value }}\n             ref={el => (this.input = el)}\n        />\n      </div>\n    );\n  }\n\n}\n\nfunction EditButton(props) {\n  return (\n    <button\n      key={props.cmd}\n      onMouseDown={evt => {\n        evt.preventDefault(); // Avoids loosing focus from the editable area\n        document.execCommand(props.cmd, false, props.arg); // Send the command to the browser\n      }}\n    >\n      {props.name || props.cmd}\n    </button>\n  );\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n\t\t\timageserver: {\n\t\t\t\tprocess: '',\n\t\t\t\tfetch: ''\n\t\t\t},\n    };\n\t\tthis.config = merge.recursive(defaultConfig, this.props.config, this.config || {});\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    // filepond files\n\t\tthis._loadedFiles = 0;\n    this.files = [\n      \"https://unpkg.com/filepond/dist/filepond.js\",\n      \"https://unpkg.com/filepond-polyfill/dist/filepond-polyfill.js\",\n      \"https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js\",\n      \"https://unpkg.com/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js\",\n      \"https://unpkg.com/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.js\",\n      \"https://unpkg.com/filepond-plugin-file-poster/dist/filepond-plugin-file-poster.js\",\n    ];\n    this.loadNextFile();\n\t}\n  \n  loadNextFile() {\n    var self = this;\n    var file = self.files[self._loadedFiles];\n    if (file) {\n\t\t\tlet element;\n\t\t\telement = document.createElement('script');\n\t\t\telement.src = file;\n\t\t\telement.async = true;\n\t\t\tif (element) {\n\t\t\t\telement.onload = function() {\n          self.loadNextFile();\n\t\t\t\t}\n\t\t\t\tdocument.body.appendChild(element);\n\t\t\t}\n    }\n\t\tif (self._loadedFiles == self.files.length) {\n      self.fileUploaderInit()\n    }\n\t\tself._loadedFiles++;\n  }\n\n  validate() {\n    let isValid = true;\n\t\tif ( this.imageuploader && this.imageuploader.getFiles ) {\n\t\t\tvar images = this.imageuploader.getFiles();\n\t\t\timages.forEach(function(image) {\n\t\t\t\tif (!image.serverId) {\n\t\t\t\t\tisValid = false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n    return isValid;\n  }\n\n  fileUploaderInit() {\n\n    let self = this;\n\n\t\tvar containerElement = document.querySelector('.osc-image-upload-container');\n\t\tif (containerElement) {\n\t\t\tFilePond.registerPlugin(FilePondPluginImagePreview);\n\t\t\tFilePond.registerPlugin(FilePondPluginFileValidateSize);\n\t\t\tFilePond.registerPlugin(FilePondPluginFileValidateType);\n\t\t\tFilePond.registerPlugin(FilePondPluginFilePoster);\n\n\t\t\t// FilePond.setOptions({\n\t\t\t//   server: 'https://image-server2.openstadsdeel.nl/image/?access_token=MHhfb5U0m8vquAR81p',\n\t\t\t// });\n      \n\t\t\tvar filePondSettings = {\n\t\t\t\t// set allowed file types with mime types\n\t\t\t\tacceptedFileTypes: ['image/*'],\n\t\t\t\tallowFileSizeValidation: true,\n\t\t\t\tmaxFileSize: '8mb',\n\t\t\t\tname: 'image',\n\t\t\t\tmaxFiles: 3,\n\t\t\t\tallowBrowse: true,\n\t\t\t\tfiles: [],\n\t\t\t\tserver: {\n\t\t\t\t\tprocess: this.config.imageserver.process,\n\t\t\t\t\tfetch: this.config.imageserver.fetch,\n\t\t\t\t},\n\t\t\t\timageResizeTargetWidth: 80,\n\t\t\t\timageResizeTargetHeight: 80,\n\t\t\t\timageCropAspectRatio: '1:1',\n\t\t\t\tlabelIdle: \"Sleep afbeelding(en) naar deze plek of <span class='filepond--label-action'>KLIK HIER</span>\",\n\t\t\t\tlabelInvalidField: \"Field contains invalid files\",\n\t\t\t\tlabelFileWaitingForSize: \"Wachtend op grootte\",\n\t\t\t\tlabelFileSizeNotAvailable: \"Grootte niet beschikbaar\",\n\t\t\t\tlabelFileCountSingular: \"Bestand in lijst\",\n\t\t\t\tlabelFileCountPlural: \"Bestanden in lijst\",\n\t\t\t\tlabelFileLoading: \"Laden\",\n\t\t\t\tlabelFileAdded: \"Toegevoegd\", // assistive only\n\t\t\t\tlabelFileLoadError: \"Fout bij het uploaden\",\n\t\t\t\tlabelFileRemoved: \"Verwijderd\", // assistive only\n\t\t\t\tlabelFileRemoveError: \"Fout bij het verwijderen\",\n\t\t\t\tlabelFileProcessing: \"Laden\",\n\t\t\t\tlabelFileProcessingComplete: \"Afbeelding geladen\",\n\t\t\t\tlabelFileProcessingAborted: \"Upload cancelled\",\n\t\t\t\tlabelFileProcessingError: \"Error during upload\",\n\t\t\t\tlabelFileProcessingRevertError: \"Error during revert\",\n\t\t\t\tlabelTapToCancel: \"tap to cancel\",\n\t\t\t\tlabelTapToRetry: \"tap to retry\",\n\t\t\t\tlabelTapToUndo: \"tap to undo\",\n\t\t\t\tlabelButtonRemoveItem: \"Verwijderen\",\n\t\t\t\tlabelButtonAbortItemLoad: \"Abort\",\n\t\t\t\tlabelButtonRetryItemLoad: \"Retry\",\n\t\t\t\tlabelButtonAbortItemProcessing: \"Verwijder\",\n\t\t\t\tlabelButtonUndoItemProcessing: \"Undo\",\n\t\t\t\tlabelButtonRetryItemProcessing: \"Retry\",\n\t\t\t\tlabelButtonProcessItem: \"Upload\"\n\t\t\t}\n\n      self.imageuploader = FilePond.create(containerElement, filePondSettings);\n\t\t\tvar sortableInstance;\n\t\t\tvar pondEl = document.querySelector('.filepond--root');\n\n      // tmp\n      //self.state.value = [\"https://image-server.staging.openstadsdeel.nl/image/85ef5669d9a5db2f0ec2adb6310620be\"]\n      //self.props.handleFieldChange(self.props.name, self.state.value )\n\n\t\t\tdocument.querySelector('.filepond--root').addEventListener('FilePond:processfile', e => {\n\t\t\t\tif (e.detail && e.detail.error) {\n\t\t\t\t\tconsole.log('Error uploding file: ', e.detail);\n\t\t\t\t}\n\t\t\t\tself.fileUploaderUpdateCurrentInput()\n\t\t\t});\n\t\t\t\n\t\t\tdocument.querySelector('.filepond--root').addEventListener('FilePond:removefile', e => {\n\t\t\t\tif (e.detail && e.detail.error) {\n\t\t\t\t\tconsole.log('Error uploding file: ', e.detail);\n\t\t\t\t}\n\t\t\t\tself.fileUploaderUpdateCurrentInput()\n\t\t\t});\n\n\t\t\tif (self.state.formfields) {\n\t\t\t\tself.imageuploader.addFiles(self.state.formfields.images)\n\t\t\t}\n\n\t\t}\n\n\t}\n\n  fileUploaderUpdateCurrentInput() {\n    let self = this;\n\t\tself.state.value = [];\n\t\tif ( this.imageuploader && this.imageuploader.getFiles ) {\n\t\t\tvar images = this.imageuploader.getFiles();\n\t\t\timages.forEach((image) => {\n\t\t\t\ttry {\n\t\t\t\t\tvar serverId = JSON.parse(image.serverId)\n\t\t\t\t\tself.state.value.push(serverId.url)\n\t\t\t\t} catch(err) { console.log(err) }\n\t\t\t});\n\t\t}\n    self.props.onChange({name: self.config.name, value: self.state.value})\n\t}\n\n  fileUploaderUploaderAddImages(images) {\n    let self = this;\n\n\t\tif (this.imageuploader) {\n\t\t\tthis.imageuploader.addFiles(images)\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen afbeelding geupload</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-image-upload-container\">\n\t\t\t\t<input type=\"file\" className=\"imageUploader-gebiedstool filepond-gebiedstool\"/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n//import CKEditor from '@ckeditor/ckeditor5-react';\n//import ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport HTMLArea from './htmlarea.jsx';\n\n'use strict';\n\nexport default class FormfieldInputWithCounter extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\t\tself.id = props.id || 'osc-formfields-plaintext-with-counter-' + parseInt( 1000000 * Math.random() )\n\n\t\tself.defaultConfig = {\n\t\t\tname: 'tekst',\n\t\t\tinputType: 'input',\n\t\t\tminLength: 5,\n\t\t\tmaxLength: 10,\n      placeholder: '',\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n\t\t\tfocused: false,\n      value: props.value || '',\n\t\t\tvalueLength: props.value && props.value.length || 0,\n\t\t};\n\n    self.key = props.useKey || ( self.id || 'osc-input-with-counter-' ) + parseInt( 10000000 * Math.random );\n\n    this.onChange = props.onChange;\n\n    self.handleOnChange = self.handleOnChange.bind(this)\n\n  }\n\n\tisValid() {\n\t\tlet state = {};\n\t\tstate.isValid = true;\n\t\tstate.warning = null;\n\t\tif (this.state.valueLength < this.config.minLength) {\n\t\t\tstate.warning = `Je tekst is te kort`;\n\t\t\tstate.isValid = false;\n\t\t}\n\t\tif (this.state.valueLength > this.config.maxLength) {\n\t\t\tstate.warning = `Je tekst is te lang`;\n\t\t\tstate.isValid = false;\n\t\t}\n\t\tthis.setState(state)\n\t\treturn state.isValid;\n  }\n\n\tvalidate() {\n\t\tthis.setState({ showWarning: true })\n\t\treturn this.isValid();\n\t}\n  \n\thandleOnChange(data) {\n    data = data || {};\n\t\tthis.setState(data)\n\t\tif (typeof this.onChange == 'function') {\n\t\t\tthis.onChange({ name: this.config.name, value: data.value });\n\t\t}\n\t}\n\n\tonInputFocus() {\n\t\tlet state = {};\n\t\tstate.focused = true;\n\t\tstate.showWarning = false;\n\t\tthis.setState(state)\n\t}\n\n\tonInputBlur() {\n\t\tlet state = {};\n\t\tstate.focused = false;\n\t\tthis.setState(state)\n\t}\n\n\tonInputKeyUp(value) {\n\t\tlet state = {};\n\t\tstate.value = value || this.input.value;\n\t\tlet valueLength = state.value.length;\n\t\tstate.valueLength = valueLength;\n\t\tstate.isValid = valueLength >= this.config.minLength && valueLength <= this.config.maxLength;\n\t\tthis.setState(state)\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n\t\tlet counter = null;\n\t\tlet warning = null;\n\t\tif (self.state.focused) {\n\t\t\tif (self.state.valueLength < self.config.minLength) {\n\t\t\t\tcounter = (<div className=\"osc-form-counter osc-form-error\">Nog minimaal <span className=\"\">{self.config.minLength - self.state.valueLength}</span> tekens</div>)\n\t\t\t} else {\n\t\t\t\tlet error = self.state.valueLength > self.config.maxLength ? 'osc-form-error' : '';\n\t\t\t\tcounter = (<div className={'osc-form-counter ' + error}>Je hebt nog <span className=\"\">{self.config.maxLength - self.state.valueLength}</span> tekens over.</div>)\n\t\t\t}\n\t\t}\n\n\t\tif (self.state.showWarning && self.state.warning) {\n\t\t\twarning = (<div className=\"osc-form-warning\" ref={ el => this['form-warning'] = el  }>{self.state.warning}</div>)\n\t\t}\n\n    let inputHTML = null;\n\n    switch(self.config.inputType) {\n        \n      case 'htmlarea':\n        inputHTML = (\n          <HTMLArea\n            value={this.state.value}\n            onChange={self.handleOnChange}\n            onFocus={e => self.onInputFocus(e)}\n            onBlur={e => self.onInputBlur(e)}\n            onKeyUp={e => self.onInputKeyUp(e)}\n          />\n        );\n        // inputHTML = (\n        //   <CKEditor\n        //     editor={ ClassicEditor }\n        //     config={{ toolbar: [ 'h3', 'bold', 'italic', 'link' ] }}\n        //     data={this.props.value}\n        //     onInit={ editor => {\n        //       // TODO: betere selector\n        //       document.querySelector('.ck-content').addEventListener('keyup', function(e) {\n        //         self.onInputKeyUp(e, editor.getData())\n        //       })\n        //     }}\n        //     onChange={( event, editor ) => self.handleOnChange({ value: editor.getData() })}\n        //     onFocus={e => self.onInputFocus(e)}\n        //     onBlur={e => self.onInputBlur(e)}\n        //   />\n        // );\n        break;\n        \n      case 'textarea':\n        inputHTML = (\n\t\t\t\t  <textarea key={self.key} ref={el => (self.input = el)} value={this.state.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} onKeyUp={e => self.onInputKeyUp()} onFocus={e => self.onInputFocus(e)} onBlur={e => self.onInputBlur(e)}></textarea>\n        );\n        break;\n\n      case 'input':\n      default:\n        inputHTML = (\n\t\t\t\t  <input key={self.key} ref={el => (self.input = el)} value={this.state.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} onKeyUp={e => self.onInputKeyUp()} onFocus={e => self.onInputFocus(e)} onBlur={e => self.onInputBlur(e)}></input>\n        );\n\n    }\n\t\t\n    return (\n\t\t\t<div id={self.id} ref={el => (self.instance = el)} className=\"osc-input-with-counter\">\n\t\t\t\t<div className=\"osc-form-feedback\">\n\t\t\t\t\t{inputHTML}\n\t\t\t\t\t{counter}\n\t\t\t\t\t{warning}\n\t\t\t\t</div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentPostcode extends OpenStadComponentDefaultInput {\n\n\tvalidate({ showErrors }) {\n    \n\t\tlet isValid = true;\n    let error = '';\n    if (!this.state.value || !this.state.value.match(/^\\s*\\d{4}\\s*[a-zA-Z][a-zA-Z]\\s*$/)) {\n      isValid = false;\n      if (showErrors) error = 'Dit is geen postcode';\n    }\n    if (this.config.required && !this.state.value) {\n      isValid = false;\n      if (showErrors) error = 'Je hebt nog niets ingevuld';\n    }\n    this.setState({ isValid, error })\n\t\treturn isValid;\n\t}\n\n  render() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">{self.state.error}</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textinput\">\n\t\t\t  <input type=\"text\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n  componentDidMount() {\n    // init value\n    let value = this.state.value || ( this.config.choices[0] && this.config.choices[0].value );\n    this.handleOnChange({ value })\n  }\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen keuze gemaakt</div>)\n    }\n\n    return (\n\t\t\t<div className=\"osc-select\">\n\t\t\t  <select value={this.state.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}>\n          {self.config.choices.map( choice => {\n            return <option value={choice.value} key={choice.value}>{choice.description || choice.title || choice.value}</option>\n          })}\n        </select>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import React from \"react\"\n\nclass Slider extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      value: this.props.value,\n      touched: this.props.touched || false,\n    }\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  handleChange(event) {\n    const { value } = event.target\n\n    if(typeof this.props.onChange === 'function'){\n      this.props.onChange(value)\n    }\n    \n    this.setState({value, touched: true})\n  }\n\n  doTouch() {\n\n    if(typeof this.props.onChange === 'function'){\n      this.props.onChange(50)\n    }\n\n    this.setState({touched: true})\n\n  }\n\n  calcProgress(min, max, value) {\n    const range = max - min\n    const progInRange = value - min\n    return ((progInRange*2)/range)-1\n  }\n\n  render(){\n    let self = this;\n    const { value, touched } = self.state\n    const { min, max, step } = self.props\n    return(\n      <div className={`${self.props.className} osc-slider`}>\n        <div className=\"osc-slider-track-container\">\n          <div className=\"osc-slider-track\"></div>\n          <div className=\"osc-slider-track-progress-container\">\n            <div className=\"osc-slider-track-progress\" style={{ transform: 'scaleX(' + self.calcProgress(min, max, value) + ')' }}></div>\n          </div>\n          <div className=\"osc-slider-track-dot-end osc-slider-track-dot-left\"></div>\n          <div className=\"osc-slider-track-dot-start osc-slider-track-dot-center\"></div>\n          <div className=\"osc-slider-track-dot-end osc-slider-track-dot-right\"></div>\n        </div>\n        <input type='range' min={min} max={max} step={step} value={value} onClick={() => { if (!touched) self.doTouch(); } } onChange={self.handleChange} className={touched ? 'osc-slider-input-range' : 'osc-slider-input-range osc-slider-untouched'} ref={el => (self.input = el)}/>\n      </div>\n    )\n  }\n}\n\nexport default Slider;\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog niets ingevuld</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textarea\">\n\t\t\t  <textarea value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}>{this.state.value}</textarea>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog niets ingevuld</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textinput\">\n\t\t\t  <input type=\"text\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\n//import 'core-js/es/map';\n//import 'core-js/es/set';\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport Form from './component/form.jsx';\nimport FormField from './component/form-field.jsx';\nimport ImageUpload from './component/image-upload.jsx';\nimport InputWithCounter from './component/input-with-counter.jsx';\nimport Postcode from './component/postcode.jsx';\nimport Select from './component/select.jsx';\nimport Text from './component/textinput.jsx';\nimport Textarea from './component/textarea.jsx';\nimport Slider from './component/slider.jsx';\nexport default {\n  Form,\n  FormField,\n  ImageUpload,\n  InputWithCounter,\n  Postcode,\n  Select,\n  Text,\n  Textarea,\n  Slider,\n}\n\n// render the base element\n// function renderElement( elem, config ) {\n//   let attributes = elem.attributes;\n//   ReactDOM.render( <OpenStadComponentReactions attributes={attributes} config={config}/>, elem)\n// }\n// export {renderElement}\n\n","import merge from 'merge';\nimport React from 'react';\nimport VoteButton from './vote-button.jsx';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentReactions from '../../reactions/index.jsx';\n\n'use strict';\n\nexport default class IdeasDetails extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      user: {},\n\t\t\tapi: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      argument: {\n        isActive: true,\n      },\n      showVoteButtons: true,\n      labels: {},\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      idea: this.props.idea,\n    };\n        \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n    \n\t\tself.storedListener = function(event) {\n      self.onReactionStored(event.detail);\n    }\n    document.addEventListener('osc-reaction-stored', self.storedListener);\n\n\t\tself.deletedListener = function(event) {\n      self.onReactionDeleted(event.detail);\n    }\n    document.addEventListener('osc-reaction-deleted', self.deletedListener);\n\n    self.fetchData();\n\n\t}\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-reaction-stored', this.storedListener);\n\t\tdocument.removeEventListener('osc-reaction-deleted', this.deletedListener);\n  }\n\n  dispatchEditIdeaClick(e) {\n    e.stopPropagation();\n    if ( this.config.editIdeaLink ) {\n      document.location.href = this.config.editIdeaLink;\n    } else {\n\t\t  var event = new window.CustomEvent('osc-edit-idea-click', { detail: this.state.idea });\n\t\t  document.dispatchEvent(event);\n    }\n  };\n  \n  onReactionStored(data) {\n    this.state.idea.argCount++;\n    this.setState({ idea: this.state.idea });\n  }\n\n  onReactionDeleted(data) {\n    this.state.idea.argCount--;\n    this.setState({ idea: this.state.idea });\n  }\n\n  fetchData() {\n\n    let self = this;\n\n    let ideaId = self.config.ideaId || (this.state.idea && this.state.idea.id);\n\n    if (!ideaId) return;\n\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea/${ ideaId }?includeVoteCount=1&includeArguments=1&includeUser=1&includeUserVote=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\t\t\n    fetch(url, { headers })\n      .then((response) => {\n        if (!response.ok) throw Error('Error fechting detail');\n        return response.json();\n      })\n      .then( json => {\n\n        let idea = json;\n        idea.image = (idea.posterImage && idea.posterImage.key) || (idea.extraData && idea.extraData.images && idea.extraData.images[0]) || \"https://stemvanwest.amsterdam.nl/img/placeholders/idea.jpg\";\n        self.setState({ idea }, function() {\n          if(OpenStadComponentLibs.localStorage.get('osc-reactions-login-pending')) {\n            window.location.hash = `#reactions`;\n            OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', false)\n          }\n        });\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  deleteIdea() {\n\n    let self = this;\n\n    if (!( self.config.user && self.config.user.role && self.config.user.role == 'admin' )) return;\n    if (!( this.state.idea || this.state.idea.id )) return;\n\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea/${ this.state.idea.id }`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let ideaId = this.state.idea.id; // backup\n\t\t\n    fetch(url, {\n      method: 'DELETE',\n      headers\n    })\n      .then((response) => {\n        if (!response.ok) throw Error('Error deleting idea');\n        return response.json();\n      })\n      .then( json => {\n        if ( this.config.afterDeleteIdeaLink ) {\n          document.location.href = this.config.afterDeleteIdeaLink;\n        } else {\n\t\t      var event = new window.CustomEvent('osc-idea-deleted', { detail: { ideaId } });\n\t\t      document.dispatchEvent(event);\n        }\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n\trender() {\n\n    let self = this;\n    let idea = self.state.idea;\n\n    if (!idea) return null;\n\n    let labelHTML = null;\n    if (self.config.labels && self.props.label && self.config.labels[ self.props.label ]) {\n      // console.log(self.config.labels[ self.props.label ]);\n      let color = self.config.labels[ self.props.label ].color || 'white';\n      let backgroundColor = self.config.labels[ self.props.label ].backgroundColor || '#164995';\n      let text = self.config.labels[ self.props.label ].text;\n      labelHTML = (\n        <div className=\"ocs-idea-label\" style={{ color, backgroundColor }}>{text}</div>\n      );\n    }\n\n    let voteButtonsHTML = null;\n    if (self.config.showVoteButtons) {\n      voteButtonsHTML = (\n        <div className=\"osc-details-vote-buttons-container\">\n          <h3>Likes</h3>\n          <VoteButton config={{ text: 'eens', opinion: 'yes', api: this.config.api, user: this.config.user, siteId: this.config.siteId }} idea={this.state.idea} name=\"likebutton\" value={idea.yes}/>\n        </div>\n      );\n    }\n\n    let editButtonsHTML = null;\n    if ( self.config.user && self.config.user.role && self.config.user.role == 'admin' ) {\n      editButtonsHTML = (\n        <div className=\"osc-editbuttons-container\">\n          <button className=\"osc-idea-details-editbutton osc-edit\" onClick={(event) => self.dispatchEditIdeaClick(event)}>Bewerk idee</button>\n          <button className=\"osc-idea-details-editbutton osc-delete\" onClick={(event) => { if ( confirm('Weet je het zeker') ) self.deleteIdea(event) }}>Verwijder idee</button>\n        </div>\n      );\n\n    }\n\n    let modBreakHTML = null;\n    if (idea && idea.modBreak) {\n      modBreakHTML= (\n        <div className=\"osc-modbreak\">\n          {idea.modBreakDateHumanized}<br/>\n          <br/>\n          {idea.modBreak}\n        </div>\n      );\n    }\n\n    let reactionsCountHTML = null;\n    if ( self.config.argument.isActive ) {\n      reactionsCountHTML = (\n        <div>\n          <h3>Reacties</h3>\n          <a href=\"#reactions\" className=\"osc-no-of-reactions\">{idea.argCount || 0} reacties</a>\n        </div>\n      );\n    }\n\n    let reactionsHTML = null;\n    if ( self.config.argument.isActive ) {\n      reactionsHTML = (\n        <div>\n\t\t\t    <div id=\"reactions\" className=\"osc-reactions-header\"><h3>{self.config.argument.title || 'Reacties'}</h3></div>\n          <OpenStadComponentReactions config={{ ...self.config.argument, title: undefined, api: self.config.api, user: self.config.user, siteId: self.config.siteId, ideaId: idea.id }}/>\n        </div>\n      );\n    }\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-idea-details'} ref={el => (self.instance = el)}>\n\n\t\t\t  <div className=\"osc-spacer\"></div>\n\n\t\t\t  <div className=\"osc-idea-details-container\">\n\t\t\t    <div className=\"osc-idea-details\">\n\n\t\t\t\t    <h2>{eval(`idea.${self.config.titleField}`)}</h2>\n\n            <div className=\"osc-details-image-and-stats\">\n\n              <div className=\"osc-image-container\">\n                <div className=\"osc-image\" style={{ backgroundImage: `url(${idea.image})` }}></div>\n              </div>\n\n              {labelHTML}\n\n              <div className=\"osc-details-sharebuttons\">\n                <ul>\n\t\t\t\t\t\t\t    <li><a className=\"osc-share-facebook\" target=\"_blank\" href={ 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.location.href) }>Facebook</a></li>\n\t\t\t\t\t\t\t    <li><a className=\"osc-share-twitter\" target=\"_blank\" href={ 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.location.href) }>Twitter</a></li>\n\t\t\t\t\t\t\t    <li><a className=\"osc-share-email\" target=\"_blank\" href={ 'mailto:?subject=' + encodeURIComponent(eval(`idea.${self.config.titleField}`)) + '&body=' + encodeURIComponent(document.location.href)}>Email</a></li>\n\t\t\t\t\t\t\t    <li><a className=\"osc-share-whatsapp\" target=\"_blank\" href={ 'https://wa.me/?text=' + encodeURIComponent(document.location.href) }>WhatsApp</a></li>\n\t\t\t\t\t\t    </ul>\n              </div>\n\n              <div className=\"osc-details-stats\">\n\n                {voteButtonsHTML}\n\n                {reactionsCountHTML}\n\n                {editButtonsHTML}\n\n              </div>\n\n            </div>\n\n            <p className=\"\">\n              <span className=\"ocs-gray-text\">Door </span>{idea.user.nickName || idea.user.fullName || idea.user.firstName +' ' + idea.user.lastName}\n              <span className=\"ocs-gray-text\"> op </span>{idea.createDateHumanized}\n\t\t\t\t\t\t  <span className=\"ocs-gray-text\">&nbsp;&nbsp;|&nbsp;&nbsp;</span>\n\t\t\t\t\t\t  <span className=\"ocs-gray-text\">Thema: </span>{idea.extraData.theme}\n            </p>\n\n            {modBreakHTML}\n\n            <p className=\"osc-details-summary\">{idea.summary}</p>\n\n            <p className=\"osc-details-description\" dangerouslySetInnerHTML={{ __html: idea.description }}></p>\n\n\t\t\t    </div>\n          {reactionsHTML}\n\n\t\t\t    <div className=\"osc-bottom-spacer\"></div>\n\n        </div>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\n'use strict';\n\nexport default class VoteButton extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      name: 'likebutton',\n      backgroundColor: '#164995',\n      color: '#fff',\n      text: 'like',\n      opinion: 'yes',\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      value: this.props.value,\n      busy: false,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    // return from anonymous login\n    let votePending = OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-vote-pending');\n    if (votePending) {\n\t\t\tthis.doVote();\n      OpenStadComponentLibs.localStorage.remove('osc-ideas-on-map-vote-pending');\n\t\t}\n  }\n\n  doVote(e) {\n\n    if (e) e.stopPropagation();\n\n    if (this.state.busy) return;\n    this.setState({ busy: true });\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${ self.config.siteId }/vote`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    // if (!self.config.api.isUserLoggedIn) url += '?useOauth=anonymous'\n    if (!( self.config.user && self.config.user.role )) {\n      OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-vote-pending', true );\n      let loginUrl =  '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) + '&useOauth=anonymous';\n      return document.location.href = loginUrl;\n    }\n\n    fetch(url, {\n      method: 'post',\n      headers,\n      body: JSON.stringify({\n        ideaId: self.props.idea.id,\n        opinion: self.config.opinion,\n      })\n    })\n      .then((response) => {\n        if (!response.ok) throw Error('Stemmen is niet gelukt')\n        return response.json();\n      })\n      .then( json => {\n\n        let change = json.length ? 1 : -1;\n        let value = self.state.value + change;\n        self.setState({ value })\n\n        self.props.idea.userVote = json.length && json || null;\n\n        this.setState({ busy: false });\n\n\t\t    var event = new window.CustomEvent('osc-idea-liked', { detail: { ideaId: self.props.idea.id, change } });\n\t\t    document.dispatchEvent(event);\n\n      })\n      .catch((err) => {\n        alert(err.message);\n      });\n    \n  }\n\n\trender() {\n\n    let self = this;\n\n    let value = parseInt(self.state.value) || 0;\n\n\t  let value000 = parseInt(value/100) || 0;\n\t  let value00  = parseInt(( value - 100 * value000 )/10) || 0;\n\t  let value0   = value - value000 * 100 - value00 * 10;\n\n    return (\n\t    <div id={self.id} className={self.props.className || 'osc-vote-button osc-number-button'} ref={el => (self.instance = el)}>\n\t\t    <div className=\"osc-number-plates\" style={{ color: this.config.color, backgroundColor: this.config.backgroundColor }}>\n\t\t\t    <div id={`${this.config.name}-number-plate-000`} className=\"osc-number-plate\">{value000}</div>\n\t\t\t    <div id={`${this.config.name}-number-plate-00`} className=\"osc-number-plate\">{value00}</div>\n\t\t\t    <div id={`${this.config.name}-number-plate-0`} className=\"osc-number-plate\">{value0}</div>\n\t\t    </div>\n        <div className={`osc-number-button-text ${this.config.name}-name ${this.props.idea.userVote ? ' ocs-user-has-voted' : ''} ${this.state.busy ? ' ocs-busy' : ''}`} style={{ color: this.config.color, backgroundColor: this.config.backgroundColor }} onClick={ (e) => self.doVote(e) }>\n\t\t\t    {self.config.text}\n\t\t    </div>\n        <div className=\"osc-clear-both\"></div>\n\t    </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeaDetails from './component/idea-details.jsx';\n\n// render elements\nOpenStadComponentIdeaDetails.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeaDetails attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeaDetails as default,\n  OpenStadComponentIdeaDetails as IdeaDetails,\n};\n\n","import React from 'react';\nimport Search from './search.jsx';\n\n'use strict';\n\nexport default class Filterbar extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      types: ( props.config && props.config.types ) || [],\n      areas: ( props.config && props.config.areas ) || [],\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n\n    this.state = {\n      selectedType: undefined,\n      types: this.config.types,\n      selectedArea: undefined,\n      areas: this.config.areas,\n      mobileActiveSelector: null,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  handleTypeChange(value) {\n\n    this.setState({ selectedType: value });\n    this.hideMobileActiveSelector()\n\n\t\t// dispatch an event\n\t\tvar event = new window.CustomEvent('typeFilterUpdate', { detail: { value: value } });\n\t\tdocument.dispatchEvent(event);\n\n  }\n\n  setAreaValue(value) {\n    this.setState({ selectedArea: value });\n  }\n\n  handleAreaChange(value) {\n\n    this.setState({ selectedArea: value });\n    this.hideMobileActiveSelector()\n\n\t\t// dispatch an event\n\t\tvar event = new window.CustomEvent('areaFilterUpdate', { detail: { value: this.state.areas.find(area => value == area.value) } });\n\t\tdocument.dispatchEvent(event);\n\n  }\n\n  resetTypeAndArea() {\n    this.handleTypeChange(0)\n    this.handleAreaChange(0)\n    this.hideMobileActiveSelector()\n  }\n\n  toggleMobileActiveSelector(which) {\n    if (this.state.mobileActiveSelector != which) {\n      this.showMobileActiveSelector(which);\n    } else {\n      this.hideMobileActiveSelector();\n    }\n  }\n\n  showMobileActiveSelector(which) {\n    this.setState({ mobileActiveSelector: which });\n  }\n\n  hideMobileActiveSelector() {\n    this.setState({ mobileActiveSelector: null });\n  }\n\n\trender() {\n\n    let self = this;\n\n    let areasHTML = null;\n    let areasButtonHTML = null;\n    // TODO: niet state maar config\n    if (self.state.areas && self.state.areas.length) {\n      areasButtonHTML = (\n        <div className=\"osc-area-selector-button\" onClick={() => self.toggleMobileActiveSelector('area')}></div>\n      );\n      areasHTML = (\n          <div className={`osc-area-selector-container${self.state.mobileActiveSelector == 'area' ? ' osc-is-active' : ''}`}>\n            <select value={self.state.selectedArea} onChange={() => self.handleAreaChange( self.areaSelector.value )} className=\"osc-default-select osc-margin-right osc-area-selector\" ref={el => (self.areaSelector = el)}>\n              <option value=\"0\">Alle gebieden</option>;\n              { self.state.areas.map((area, i) => {\n                return <option key={'area-option-' + i}>{ area.name }</option>;\n              })}\n            </select>\n          </div>\n      );\n    }\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-filterbar'} ref={el => (self.instance = el)}>\n\n        <div className=\"osc-search-container\">\n          <div className=\"osc-search-button\" onClick={() => self.toggleMobileActiveSelector('search')}></div>\n\t\t\t\t  <Search config={{ ...this.config }} className={`osc-search${self.state.mobileActiveSelector == 'search' ? ' osc-is-active' : ''}`}/>\n        </div>\n\n        <div className=\"osc-selectors-container osc-align-right-container\">\n\n          <div className={`osc-type-selector-button${ self.state.selectedType && self.state.selectedType != '0'  ? ' osc-active' : '' }`} onClick={() => self.toggleMobileActiveSelector('type')}></div>\n          <div className={`osc-type-selector-container${self.state.mobileActiveSelector == 'type' ? ' osc-is-active' : ''}`}>\n            <select value={self.state.selectedType} onChange={() => self.handleTypeChange( self.typeSelector.value )} className=\"osc-default-select osc-margin-right osc-type-selector\" ref={el => (self.typeSelector = el)}>\n              <option value=\"0\">Alle thema's</option>;\n              { self.state.types.map((type, i) => {\n                return <option key={'type-option-' + i}>{ type.name }</option>;\n              })}\n            </select>\n          </div>\n\n          {areasButtonHTML}\n          {areasHTML}\n\n          <button value=\"reset\" onClick={() => self.resetTypeAndArea()} className=\"osc-button osc-reset-button\" ref={el => (self.resetButton = el)}>Alles tonen</button>\n          \n\t\t\t  </div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n// import OpenStadComponentImageUpload from './openstad-component-formelements/image-upload.jsx';\n// import OpenStadComponentFormelementsInputWithCounter from './openstad-component-formelements/input-with-counter.jsx';\n\n'use strict';\n\nexport default class IdeasForm extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      user: {},\n\t\t\tideaId: null,\n      titleMinLength: 10,\n      titleMaxLength: 20,\n      summaryMinLength: 20,\n      summaryMaxLength: 140,\n      descriptionMinLength: 140,\n      descriptionMaxLength: 5000,\n      fields: [],\n    };\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    let fields = self.config.fields;\n\n    if (!self.props.idea.extraData) self.props.idea.extraData = {};\n\n    if (fields) {\n\n      let state = { formfields: {\n        id: self.props.idea.id || '',\n        user: self.props.idea.user || {},\n      }};\n      fields.forEach((field) => {\n        if (field.name) {\n          state.formfields[field.name] = eval('self.props.idea.' + field.name);\n          field.value = eval('self.props.idea.' + field.name);\n        }\n      });\n      self.state = state;\n\n      let titleField = fields.find(field => field.name == 'title');\n      if (titleField) {\n\t\t    titleField.minLength = self.config.titleMinLength;\n\t\t    titleField.maxLength = self.config.titleMaxLength;\n      }\n\n      let summaryField = fields.find(field => field.name == 'summary');\n      if (summaryField) {\n\t\t    summaryField.minLength = self.config.summaryMinLength;\n\t\t    summaryField.maxLength = self.config.summaryMaxLength;\n      }\n\n      let descriptionField = fields.find(field => field.name == 'description');\n      if (descriptionField) {\n\t\t    descriptionField.minLength = self.config.descriptionMinLength;\n\t\t    descriptionField.maxLength = self.config.descriptionMaxLength;\n      }\n\n      let imageField = fields.find(field => field.inputType == 'image-upload'); // TODO: multiple images?\n      if (imageField) {\n\t\t    imageField.imageserver = self.config.imageserver;\n      }\n\n      // dit moet anders want nu tekent hij er elke keer 1 bij\n      // if (self.config.user && self.config.user.role == 'admin') {\n      //   self.config.fields.push({\n      //     name: \"modBreak\",\n      //     title: \"Moderator reactie\",\n      //     value: state.formfields.modBreak,\n      //     inputType: \"textarea-with-counter\",\n\t\t\t//     minLength: 0,\n\t\t\t//     maxLength: 2000,\n      //   })\n      // }\n\n    }\n    \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n  }\n\n  // todo: als hanlefieldchange met meerder waarden in een { key: value } formaat gaat werken dan kan deze weg\n  handleLocationChange({location, address}) {\n    let state = { ...this.state };\n    state.formfields['location'] = { coordinates: [ location.lat, location.lng ] };\n    state.formfields['address'] = address;\n    this.setState(state)\n    this.dispatchUpdateEditIdea(state.formfields)\n  }\n\n  dispatchUpdateEditIdea(idea) {\n\t\tvar event = new window.CustomEvent('updateEditIdea', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  validateIdea() {\n\n    var self = this;\n    \n\t  var isValid = true;\n\n\t  // location\n\t  if (self.state.formfields['location']) {\n\t\t\tself['form-warning-location'].style.display = 'none';\n\t\t} else {\n\t\t\tself['form-warning-location'].style.display = 'block';\n\t\t\tisValid = false;\n\t\t}\n\n\t  // // images\n\t  // if (!self.imageField.validate()) {\n\t\t//   self['form-warning-image'].style.display = 'block';\n\t\t//   isValid = false;\n\t  // } else {\n\t\t//   self['form-warning-image'].style.display = 'none';\n    // }\n\n\t  return isValid;\n\n  }\n\n  submitIdea() {\n\n    let self = this;\n\n    let formValues = self.form.getValues();\n    // console.log(formValues);\n\n    let isValid = self.form.validate({ showErrors: true });\n\n\t  if ( !isValid  || !self.validateIdea() ) { // validateIdea doet nog locatie en images\n      self.setState({ showFormErrorsWarning: true });\n      return;\n    }\n\n    self.setState({ showFormErrorsWarning: false });\n\n\t  if (!self.config.api.isUserLoggedIn) return alert('Je bent niet ingelogd');\n\n\t  var url = self.config.api.url + '/api/site/' + self.config.siteId + '/idea';\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n\n    let body = {\n      location: JSON.stringify({ \"type\": \"Point\", ...self.state.formfields['location'] }),\n    };\n    Object.keys(formValues).forEach(key => {\n      let match = key.match(/^extraData\\.(.+)/)\n      if (match) {\n        if (!body.extraData) body.extraData = {};\n        body.extraData[match[1]] = formValues[key];\n      } else {\n        body[key] = formValues[key];\n      }\n    });\n\n    // if ( self.config.user && self.config.user.role == 'admin' ) {\n    //   body.modBreak = self.state.formfields['modBreak'];\n    // }\n\n    console.log('--------------------');\n    console.log(body);\n\n    let method = 'POST';\n    if (typeof this.state.formfields.id == 'number') {\n      method = 'PUT';\n      url = url + '/' + this.state.formfields.id;\n    }\n\n    fetch(url, {\n      method,\n      headers,\n      body: JSON.stringify(body) // body data type must match \"Content-Type\" header\n    })\n      .then((response) => {\n        if (!response.ok) throw Error(response)\n        return response.json();\n      })\n      .then( json => {\n\t\t    var event = new window.CustomEvent('newIdeaStored', { detail: { idea: json } });\n\t\t    document.dispatchEvent(event);\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n  \n\trender() {\n\n    let self = this;\n\n    let formErrorsWarningHTML = null;\n    if (self.state.showFormErrorsWarning) {\n      formErrorsWarningHTML = (\n        <div className=\"osc-form-errors-warning\">\n          Niet alle velden zijn correct ingevuld. Scroll naar boven om te zien wat er mis gaat.\n        </div>\n      );\n    }\n\n    let formHTML = null;\n    formHTML = (\n      <OpenStadComponentForms.Form config={ self.config }  ref={(el) => { self.form = el;}}/>\n    )\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-idea-form'} ref={el => (self.instance = el)}>\n\n\t\t\t  <div className=\"osc-spacer\"></div>\n\n        <form className=\"osc-form\">\n\n\t\t\t\t  <h1>Nieuw punt toevoegen</h1>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n              Naam\n\t\t\t\t\t  </h2>\n            {self.state.formfields.user && self.state.formfields.user.fullName}\n          </div>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n            Een locatie vlakbij\n\t\t\t\t\t  </h2>\n            {self.state.formfields.address || 'Geen adres gevonden'}\n\t\t\t\t\t\t<div className=\"osc-form-warning\" style={{ display: 'none' }} ref={ el => this['form-warning-location'] = el  }>Geen locatie geselecteerd</div>\n          </div>\n\n          {formHTML}\n\n          <br/>\n          {formErrorsWarningHTML}\n          <br/>\n          <a className=\"osc-button osc-button-blue\" onClick={() => self.submitIdea()} ref={el => (self.submitButton = el)}>Versturen</a>\n          <br/>\n          <br/>\n          <br/>\n\n        </form>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class IdeasList extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      types: [],\n      titleField: 'title',\n      summaryField: 'summary',\n      // sortOptions: [{ value: 'random', name: 'Random' }, { value: 'ranking', name: 'Ranking' }, { value: 'newest', name: 'Nieuwste eerst' }, { value: 'oldest', name: 'Oudste eerst' }, { value: 'distance', name: 'Afstand' }],\n      sortOptions: [{ value: 'newest', name: 'Nieuwste eerst' }, { value: 'oldest', name: 'Oudste eerst' }],\n      showSortButton: true,\n      idea: {\n        showVoteButtons: true,\n      },\n      defaultSortOrder: 'newest',\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n\t\tthis.config.onIdeaClick = this.config.onIdeaClick || this.onIdeaClick.bind(this);\n\n    this.state = {\n      currentSortOrder: this.config.defaultSortOrder,\n      ideas: this.props.ideas || [],\n      showSortButton: this.config.showSortButton,\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  updateIdeas({ ideas = this.state.ideas, sortOrder = this.state.currentSortOrder, showSortButton = this.state.showSortButton, center = { lat: 52.37104644463586, lng: 4.900402911007405 }, maxLength }) {\n\n    let self = this;\n    let state = { ...self.state };\n\n\t\tswitch(sortOrder){\n\t\t\tcase 'ranking':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.ranking - a.ranking });\n\t\t\t\tbreak;\n\t\t\tcase 'newest':\n\t\t\t\tideas = ideas.sort( function(a,b) { return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime() });\n\t\t\t\tbreak;\n\t\t\tcase 'oldest':\n\t\t\t\tideas = ideas.sort( function(a,b) { return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime() });\n\t\t\t\tbreak;\n\t\t\tcase 'distance':\n\t\t\t\tideas = ideas\n          .map( idea => { idea._distance = Math.sqrt( Math.pow( idea.location.coordinates[0] - center.lat, 2 ) + Math.pow( idea.location.coordinates[1] - center.lng, 2 ) ); return idea; } )\n          .sort( function(a,b) { return a._distance - b._distance })\n\t\t\t\tbreak;\n\t\t\tcase 'random':\n\t\t\tdefault:\n\t\t\t\tideas = ideas.sort( function(a,b) { return Math.random() - 0.5 });\n\t\t\t\tbreak;\n\t\t}\n\n    state.ideas = maxLength ? ideas.slice(0, maxLength): ideas;\n\n    state.showSortButton = showSortButton;\n\n    self.setState(state);\n\n  }\n\n  setSortOrder({ sortOrder }) {\n    this.setState({\n      ...this.state,\n      currentSortOrder: sortOrder\n    }, function() {\n      this.updateIdeas({ sortOrder })\n    });\n  }\n\n  onIdeaClick(e) {\n    // placeholder\n  }\n\n\trender() {\n\n    let self = this;\n\n    let sortSelector = null;\n    if (this.state.showSortButton) {\n      sortSelector = (\n        <div className=\"osc-sort osc-align-right-container osc-margin-right\">\n          Sorteer op:&nbsp;&nbsp;&nbsp;&nbsp;\n          <select value={self.state.currentSortOrder} onChange={() => self.setSortOrder({ sortOrder: self.sortSelector.value })} className=\"osc-default-select\" ref={el => (self.sortSelector = el)}>\n            { self.config.sortOptions.map((option, i) => {\n              return <option value={ option.value } key={'sort-option-' + i}>{ option.name }</option>;\n            })}\n          </select>\n        </div>\n      );\n    } else {\n      sortSelector = (<div style={{height: 20}}></div>)\n    }\n\n    let titleHML = (<h3 className=\"osc-title\">{self.props.title} ({self.state.ideas.length})</h3>);\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-ideas-list'} ref={el => (self.instance = el)}>\n\n        {sortSelector}\n\n        {titleHML}\n\n        { self.state.ideas.map((idea, i) => {\n          if (!idea) {\n            console.log('idea is undef', i, self.state.ideas);\n          }\n          let typeDef = self.config.types.find(entry => idea.extraData && entry.name == idea.extraData.theme); // TODO: use typefield\n          if (!typeDef || !typeDef.listicon) { typeDef = { listicon: { html: '' } }; } // console.log(idea.extraData.theme + ' niet gevonden'); }\n          let voteCountHTML = null;\n          if (this.config.idea.showVoteButtons) {\n            voteCountHTML = (\n              <div className=\"osc-likes\">\n                {idea.yes || 0}\n              </div>);\n          }\n          let argcountHTML = null;\n          if (this.config.argument.isActive && !this.config.content.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`))) {\n            argcountHTML = (\n              <div className=\"osc-reactions\">\n                {idea.argCount || 0}\n              </div>);\n          }\n          return (\n            <div className=\"osc-info-block-ideas-list-idea\" onClick={(event) => self.config.onIdeaClick(event, idea)} key={'info-block-' + i}>\n              <div className=\"osc-content\">\n                <div className=\"osc-image\" style={{ backgroundImage: `url(${idea.image})` }}></div>\n                <h4 className=\"osc-title\">{ eval(`idea.${self.config.titleField}`) }</h4>\n                <div className=\"osc-summary\">\n                  { eval(`idea.${self.config.summaryField}`) }\n                </div>\n                <div className=\"osc-stats\">\n                  {voteCountHTML}\n                  {argcountHTML}\n                  <div className=\"osc-type\">\n                    <div className=\"osc-type-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"osc-clear-both\"></div>\n            </div>\n          );\n        })}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Filterbar from './filterbar.jsx';\nimport InfoBlock from './info-block.jsx';\nimport IdeaForm from './idea-form.jsx';\nimport Map from './map.jsx';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentIdeaDetails from '../../idea-details/index.jsx';\n\n// TODO: clean up; ik gebruikte eerst setNewIdea en setSelected, maar nu onNewIdeaClick en onSelectedIdeaClick; trek dat gelijk\n\n'use strict';\n\nexport default class OpenStadComponentIdeasOnMap extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tvar self = this;\n\n\t\t// config\n\t\tself.defaultConfig = {\n\t\t\ttitle: 'Inzendingen',\n      types: [],\n      typeField: 'extraData.theme',// null,\n\n      // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n      // currentPolygon: undefined,\n      // areas: [\n      //  { name: \"Heel West\",\n      //    value: \"Heel West\",\n      //    polygon: [{ \"lng\": 4.8353454, \"lat\": 52.3731265 }, { \"lng\": 4.8422025, \"lat\": 52.3721002 }, { \"lng\": 4.8421761, \"lat\": 52.3695836 }, { \"lng\": 4.8455807, \"lat\": 52.3696369 }, { \"lng\": 4.8476385, \"lat\": 52.369853 }, { \"lng\": 4.8477361, \"lat\": 52.3695885 }, { \"lng\": 4.8484176, \"lat\": 52.369697 }, { \"lng\": 4.8504835, \"lat\": 52.3653302 }, { \"lng\": 4.8504956, \"lat\": 52.3643692 }, { \"lng\": 4.8501587, \"lat\": 52.3638376 }, { \"lng\": 4.8494487, \"lat\": 52.3633001 }, { \"lng\": 4.8495059, \"lat\": 52.3610989 }, { \"lng\": 4.8489152, \"lat\": 52.3608149 }, { \"lng\": 4.8487824, \"lat\": 52.3578658 }, { \"lng\": 4.8504012, \"lat\": 52.3578553 }, { \"lng\": 4.8518982, \"lat\": 52.357844 }, { \"lng\": 4.8538275, \"lat\": 52.3581295 }, { \"lng\": 4.854723, \"lat\": 52.3578629 }, { \"lng\": 4.854635, \"lat\": 52.3577532 }, { \"lng\": 4.85436, \"lat\": 52.3572975 }, { \"lng\": 4.8540881, \"lat\": 52.3564026 }, { \"lng\": 4.8547969, \"lat\": 52.3562758 }, { \"lng\": 4.8698903, \"lat\": 52.3601067 }, { \"lng\": 4.8699397, \"lat\": 52.3600231 }, { \"lng\": 4.8714122, \"lat\": 52.3603737 }, { \"lng\": 4.8712647, \"lat\": 52.3605634 }, { \"lng\": 4.8715288, \"lat\": 52.3605997 }, { \"lng\": 4.8716826, \"lat\": 52.3604277 }, { \"lng\": 4.8738605, \"lat\": 52.3608533 }, { \"lng\": 4.8738525, \"lat\": 52.3610213 }, { \"lng\": 4.8740097, \"lat\": 52.3610407 }, { \"lng\": 4.8741351, \"lat\": 52.3608935 }, { \"lng\": 4.8750611, \"lat\": 52.3608041 }, { \"lng\": 4.8756501, \"lat\": 52.3606138 }, { \"lng\": 4.876429, \"lat\": 52.3607996 }, { \"lng\": 4.8765642, \"lat\": 52.3606177 }, { \"lng\": 4.876929, \"lat\": 52.3606957 }, { \"lng\": 4.8768495, \"lat\": 52.360911 }, { \"lng\": 4.8771709, \"lat\": 52.3609696 }, { \"lng\": 4.8774, \"lat\": 52.3607583 }, { \"lng\": 4.8819952, \"lat\": 52.3620427 }, { \"lng\": 4.8813956, \"lat\": 52.3630818 }, { \"lng\": 4.8808146, \"lat\": 52.3634904 }, { \"lng\": 4.8793708, \"lat\": 52.3643261 }, { \"lng\": 4.8792691, \"lat\": 52.3649574 }, { \"lng\": 4.8787082, \"lat\": 52.3658206 }, { \"lng\": 4.8775395, \"lat\": 52.3667815 }, { \"lng\": 4.8767523, \"lat\": 52.3685117 }, { \"lng\": 4.8754901, \"lat\": 52.3697867 }, { \"lng\": 4.8745065, \"lat\": 52.3718772 }, { \"lng\": 4.8745782, \"lat\": 52.3725454 }, { \"lng\": 4.8753796, \"lat\": 52.373407 }, { \"lng\": 4.8755899, \"lat\": 52.3743025 }, { \"lng\": 4.8799131, \"lat\": 52.3813052 }, { \"lng\": 4.8796339, \"lat\": 52.3819128 }, { \"lng\": 4.880478, \"lat\": 52.3822531 }, { \"lng\": 4.8818058, \"lat\": 52.3843528 }, { \"lng\": 4.882637, \"lat\": 52.3854107 }, { \"lng\": 4.8846503, \"lat\": 52.3883466 }, { \"lng\": 4.8857963, \"lat\": 52.3881476 }, { \"lng\": 4.8911796, \"lat\": 52.3884502 }, { \"lng\": 4.8937804, \"lat\": 52.3886712 }, { \"lng\": 4.8956658, \"lat\": 52.3888313 }, { \"lng\": 4.8927982, \"lat\": 52.3933453 }, { \"lng\": 4.8850924, \"lat\": 52.398824 }, { \"lng\": 4.8762366, \"lat\": 52.3945287 }, { \"lng\": 4.8726422, \"lat\": 52.3948206 }, { \"lng\": 4.8719896, \"lat\": 52.3947192 }, { \"lng\": 4.8719508, \"lat\": 52.3952766 }, { \"lng\": 4.8715979, \"lat\": 52.39538 }, { \"lng\": 4.8667403, \"lat\": 52.393136 }, { \"lng\": 4.8643092, \"lat\": 52.3927072 }, { \"lng\": 4.8627057, \"lat\": 52.3938521 }, { \"lng\": 4.8603441, \"lat\": 52.3949382 }, { \"lng\": 4.858593, \"lat\": 52.3952782 }, { \"lng\": 4.8569204, \"lat\": 52.3953667 }, { \"lng\": 4.8569896, \"lat\": 52.3938363 }, { \"lng\": 4.8573172, \"lat\": 52.3938424 }, { \"lng\": 4.8574043, \"lat\": 52.3920751 }, { \"lng\": 4.8589526, \"lat\": 52.3912226 }, { \"lng\": 4.8592744, \"lat\": 52.3905434 }, { \"lng\": 4.8592929, \"lat\": 52.3887899 }, { \"lng\": 4.8449045, \"lat\": 52.3887733 }, { \"lng\": 4.8451066, \"lat\": 52.3850658 }, { \"lng\": 4.8446526, \"lat\": 52.3850638 }, { \"lng\": 4.8390117, \"lat\": 52.3850241 }, { \"lng\": 4.8392807, \"lat\": 52.3829687 }, { \"lng\": 4.838548, \"lat\": 52.3808766 }, { \"lng\": 4.836707, \"lat\": 52.3763581 }, { \"lng\": 4.8353454, \"lat\": 52.3731265 }] },\n      //  { name: \"De Baarsjes\",\n      //    value: \"De Baarsjes\",\n      //    polygon: [{\"lng\":4.8558724,\"lat\":52.374202},{\"lng\":4.8577714,\"lat\":52.3681953},{\"lng\":4.8582878,\"lat\":52.3648623},{\"lng\":4.8592819,\"lat\":52.3648966},{\"lng\":4.8598228,\"lat\":52.364783},{\"lng\":4.8613989,\"lat\":52.3664539},{\"lng\":4.8661845,\"lat\":52.3717538},{\"lng\":4.8664001,\"lat\":52.3721596},{\"lng\":4.8663889,\"lat\":52.372566},{\"lng\":4.865846,\"lat\":52.3733281},{\"lng\":4.8646717,\"lat\":52.3734961},{\"lng\":4.8641583,\"lat\":52.3750737},{\"lng\":4.8640923,\"lat\":52.3752839},{\"lng\":4.8559599,\"lat\":52.3743342},{\"lng\":4.8558724,\"lat\":52.374202}] },\n      //  { name: \"Oud West\",\n      //    value: \"Oud West\",\n      //    polygon: [{\"lng\":4.8546816,\"lat\":52.3568634},{\"lng\":4.855041,\"lat\":52.3563261},{\"lng\":4.858839,\"lat\":52.3572696},{\"lng\":4.8625458,\"lat\":52.3582427},{\"lng\":4.8646701,\"lat\":52.3588487},{\"lng\":4.868731,\"lat\":52.3597955},{\"lng\":4.8703188,\"lat\":52.3601231},{\"lng\":4.8717136,\"lat\":52.3604376},{\"lng\":4.8738218,\"lat\":52.3609651},{\"lng\":4.8763055,\"lat\":52.3607226},{\"lng\":4.8776842,\"lat\":52.3608635},{\"lng\":4.878167,\"lat\":52.3610044},{\"lng\":4.8812676,\"lat\":52.3618856},{\"lng\":4.8807043,\"lat\":52.3623966},{\"lng\":4.8798675,\"lat\":52.3633663},{\"lng\":4.8795778,\"lat\":52.3639428},{\"lng\":4.8792613,\"lat\":52.3644931},{\"lng\":4.8791272,\"lat\":52.3650598},{\"lng\":4.8787785,\"lat\":52.3656691},{\"lng\":4.8779202,\"lat\":52.3663734},{\"lng\":4.8773838,\"lat\":52.366809},{\"lng\":4.8772336,\"lat\":52.3676312},{\"lng\":4.8769385,\"lat\":52.3681389},{\"lng\":4.8754311,\"lat\":52.3697536},{\"lng\":4.8746211,\"lat\":52.3714043},{\"lng\":4.8744494,\"lat\":52.3720594},{\"lng\":4.8744602,\"lat\":52.3723083},{\"lng\":4.8752166,\"lat\":52.3729895},{\"lng\":4.8745943,\"lat\":52.3731762},{\"lng\":4.870925,\"lat\":52.3724033},{\"lng\":4.8680175,\"lat\":52.3717974},{\"lng\":4.8665959,\"lat\":52.3715648},{\"lng\":4.8654211,\"lat\":52.3703825},{\"lng\":4.8641176,\"lat\":52.3689905},{\"lng\":4.8628623,\"lat\":52.3676443},{\"lng\":4.8616499,\"lat\":52.3662554},{\"lng\":4.8604268,\"lat\":52.3648862},{\"lng\":4.8602505,\"lat\":52.3647431},{\"lng\":4.8591448,\"lat\":52.3634056},{\"lng\":4.8580772,\"lat\":52.3621247},{\"lng\":4.8575783,\"lat\":52.3615515},{\"lng\":4.857117,\"lat\":52.3604245},{\"lng\":4.856248,\"lat\":52.3592681},{\"lng\":4.8555345,\"lat\":52.3580035},{\"lng\":4.855299,\"lat\":52.357674},{\"lng\":4.855269,\"lat\":52.3576447},{\"lng\":4.855115,\"lat\":52.3574166},{\"lng\":4.8549071,\"lat\":52.3571512},{\"lng\":4.85479,\"lat\":52.3570018},{\"lng\":4.8546816,\"lat\":52.3568634}] },\n      // ],\n\n      titleField: 'title',\n      summaryField: 'summary',\n      // areaField: self.config.areaField || 'extraData.gebied',\n      user: {},\n      api: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      idea: {\n        canAddNewIdeas: true,\n        showVoteButtons: true,\n        titleMinLength: 10,\n        titleMaxLength: 20,\n        summaryMinLength: 20,\n        summaryMaxLength: 140,\n        descriptionMinLength: 140,\n        descriptionMaxLength: 5000,\n      },\n      argument: {\n        isActive: true,\n        descriptionMinLength: 30,\n        descriptionMaxLength: 500,\n        formIntro: 'Mijn reactie op deze inzending is ...',\n        placeholder: '',\n        requiredUserRole: 'member',\n      },\n      content: {\n        mobilePreviewLoggedInHTML: 'Een locatie vlakbij <h4>{address}</h4>{addButton}',\n        mobilePreviewNotLoggedInHTML: 'Een locatie vlakbij <h4>{address}</h4><div>Wilt u een nieuw punt toevoegen? Dan moet u eerst <a href=\"{loginLink}\">inloggen</a>.</div>',\n      },\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    // defaults\n    self.config.doSearchFunction = self.config.doSearchFunction || self.doSearch.bind(self);\n\n    // tmp\n    if (self.config.types && self.config.types.length) {\n      self.config.types.forEach((entry) => {\n        if (entry.value && !entry.name) {\n          entry.name = entry.value;\n        }\n        if (entry.mapicon && typeof entry.mapicon == 'string') {\n          try {\n            entry.mapicon = JSON.parse(entry.mapicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n        if (entry.listicon && typeof entry.listicon == 'string') {\n          try {\n            entry.listicon = JSON.parse(entry.listicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n      });\n    }\n\n    self.state = {\n      ideas: [],\n      visibleIdeas: [],\n      status: 'default', // default, idea-selected, location-selected, idea-details, idea-form\n      mobileState: 'closed',\n      // oud\n      currentIdea: null,\n      editIdea: null,\n      // new, maar nog niet overal gebruikt\n      selectedIdea: null,\n      selectedLocation: null,\n    }\n    \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // when the map is ready\n\t\tdocument.addEventListener('osc-map-is-ready', function(e) {\n\n      // fetch the data\n      self.fetchData({});\n\n      // handle map changes\n      self.map.map.on('zoomend', function() {\n        self.onChangeMapBoundaries();\n      });\n      self.map.map.on('moveend', function() {\n        self.onChangeMapBoundaries();\n      });\n\n    });\n\n    // map events\n\t\tdocument.addEventListener('osc-map-click', function(event) {\n      self.onMapClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-map-marker-click', function(event) {\n      self.onMarkerClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-map-cluster-click', function(event) {\n      self.onClusterClick(event.detail);\n    });\n    \n    // handle filter changes\n\t\tdocument.addEventListener('typeFilterUpdate', function(event) {\n      self.onChangeTypeFilter(event.detail.value);\n    });\n    // document.addEventListener('areaFilterUpdate', function(event) {\n    //   self.onChangeAreaFilter(event.detail.value);\n    // });\n\n    // handle infoblock changes\n\t\tdocument.addEventListener('updateSelectedIdea', function(event) {\n      self.onUpdateSelectedIdea(event.detail.idea);\n    });\n\t\tdocument.addEventListener('closeSelectedLocation', function(event) {\n      self.onCloseSelectedLocation(event.detail.idea);\n    });\n\t\tdocument.addEventListener('updateEditIdea', function(event) {\n      self.onUpdateEditIdea(event.detail.idea);\n    });\n\t\tdocument.addEventListener('ideaClick', function(event) {\n      self.onIdeaClick(event.detail.idea);\n    });\n\t\tdocument.addEventListener('selectedIdeaClick', function(event) {\n      self.onSelectedIdeaClick(event.detail.idea);\n    });\n\t\tdocument.addEventListener('newIdeaClick', function(event) {\n      self.onNewIdeaClick();\n    });\n\t\tdocument.addEventListener('clickMobileSwitcher', function(event) {\n      self.onClickMobileSwitcher();\n    });\n\n    // details changes\n\t\tdocument.addEventListener('osc-idea-liked', function(event) {\n      self.onIdeaLiked(event.detail);\n    });\n\t\tdocument.addEventListener('osc-reaction-stored', function(event) {\n      self.onReactionStored(event.detail);\n    });\n\t\tdocument.addEventListener('osc-reaction-deleted', function(event) {\n      self.onReactionDeleted(event.detail);\n    });\n\t\tdocument.addEventListener('osc-edit-idea-click', function(event) {\n      self.onEditIdeaClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-idea-deleted', function(event) {\n      self.onIdeaDeleted(event.detail);\n    });\n\n    // form changes\n\t\tdocument.addEventListener('newIdeaStored', function(event) {\n      self.onNewIdeaStored(event.detail.idea);\n    });\n    \n\t}\n\n  fetchData({ showIdeaDetails, showIdeaSelected }) {\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea?includeVoteCount=1&includeArguments=1&includeUser=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    // remove existing\n    while(self.map.markers.length > 0) {\n      let marker = self.map.markers[0];\n      self.map.removeMarker(marker)\n    }\n    self.map.markers = [];\n\n    fetch(url, {\n      headers,\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then( json => {\n        showIdeaDetails = showIdeaDetails || OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-details'); //  document.location.hash.replace(/.*details=(\\d+).*/, \"$1\");\n        showIdeaSelected = showIdeaSelected || OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-selected'); // document.location.hash.replace(/.*selected=(\\d+).*/, \"$1\");\n        let ideas = json.filter( idea => idea.location )\n        ideas.map( idea => {\n          if ( idea.id == showIdeaDetails) {\n            showIdeaDetails = idea;\n          }\n          if ( idea.id == showIdeaSelected) showIdeaSelected = idea;\n          idea.image = (idea.posterImage && idea.posterImage.key) || (idea.extraData && idea.extraData.images && idea.extraData.images[0]) || \"https://stemvanwest.amsterdam.nl/img/placeholders/idea.jpg\";\n          self.map.addIdea(idea);\n\t\t\t\t});\n\n        self.map.setBoundsAndCenter();\n\n        self.setState({ ideas }, function () {\n          // self.setSelectedLocation({ lat: 52.37104644463586, lng: 4.900402911007405 })\n          // return setTimeout(function(){ self.showIdeaForm() }, 500)\n          if (typeof showIdeaSelected == 'object' && showIdeaSelected != null) {\n\t\t\t\t\t\tself.setNewIdea(null);\n\t\t\t\t\t\tself.setSelectedIdea(showIdeaSelected);\n            self.setState({ status: 'idea-selected', currentIdea: showIdeaSelected }, function() {\n              // todo: dit zou hij zelf via state moeten doen\n              self.map.map.invalidateSize();\n              self.map.showMarkers(self.map.markers)\n              self.setSelectedIdea(self.state.currentIdea)\n            });\n          }\n          if (typeof showIdeaDetails == 'object' && showIdeaDetails != null) {\n\t\t\t\t\t\tself.setSelectedIdea(showIdeaDetails);\n\t\t\t\t\t\tself.setNewIdea(null);\n\t\t\t\t\t  self.showIdeaDetails(showIdeaDetails);\n          }\n          self.onChangeMapBoundaries();\n\n          // dev form\n          // if (!showIdeaSelected) {\n\t\t\t\t\t//   self.setSelectedIdea(null);\n\t\t\t\t\t//   self.setNewIdea({ location: { coordinates: [52.37104644463586, 4.900402911007405] }, title: \"Rutrum tincidunt\", type: \"Kans\", theme: \"Overig\", summary: \"rutrum tincidunt, dui sapien feugiat justo, eget egestas ligula nulla nec erat.\", description: \"rutrum tincidunt, dui sapien feugiat justo, eget egestas ligula nulla nec erat. maecenas tempus tempor eros. donec a justo. curabitur tellus. pellentesque risus. fusce at arcu. ut lacinia mi vel lectus. phasellus imperdiet. fusce luctus lacus a odio. in et turpis at libero tristique vulputate. sed varius ipsum. suspendisse potenti. suspendisse potenti. donec tempus arcu quis metus.\"});\n\t\t\t\t\t//   self.showIdeaForm();\n\t\t\t\t\t// }\n          // einde dev form\n\t\t\t\t});\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  showIdeaDetails(idea) {\n    let self = this;\n    self.setSelectedIdea(idea);\n    OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', idea && idea.id );\n    OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', null);\n    // self.infoblock.setState({ mobileState: self.state.mobileState = 'opened' })\n    self.setState({ status: 'idea-details', currentIdea: idea }, function() {\n    // self.setState({ status: 'idea-details', currentIdea: idea, mobileState: self.state.mobileState = 'opened' }, function() {\n      self.map.map.invalidateSize();\n      self.map.hideMarkers({ exception: { location: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] } } })\n    });\n  }\n\n  hideIdeaDetails() {\n    let self = this;\n    self.setState({ status: 'idea-selected' }, function() {\n      // todo: dit zou hij zelf via state moeten doen\n      self.map.map.invalidateSize();\n      self.map.showMarkers(self.map.markers)\n      self.setSelectedIdea(self.state.currentIdea)\n    });\n  }\n\n  showIdeaForm(idea, next) {\n    let self = this;\n    self.setState({ status: 'idea-form', editIdea: idea }, function() {\n      self.map.map.invalidateSize();\n      self.map.hideMarkers({ exception: { location: idea && { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] } || self.map.selectedLocation } })\n      if (next) next();\n    });\n  }\n\n  hideIdeaForm() {\n    let self = this;\n    if (this.state.editIdea && typeof this.state.editIdea.id == 'number') {\n      let idea = self.state.ideas.find(idea => idea.id == self.state.editIdea.id)\n      self.showIdeaDetails(idea)\n    } else {\n      self.setState({ status: 'location-selected' }, function() {\n        // todo: dit zou hij zelf via state moeten doen\n        self.map.map.invalidateSize();\n        self.map.showMarkers(self.map.markers)\n        self.setNewIdea(self.state.editIdea)\n      });\n    }\n  }\n\n\tdoSearch(searchValue, callback) {\n\n\t\tlet self = this;\n    let searchValueLc = searchValue.toLowerCase();\n\n\t\tlet searchResult = { ideas: [], locations: [] };\n\n    // search in ideas\n\t\tthis.state.ideas.forEach((idea) => {\n\t\t\tlet title = eval(`idea.${self.config.titleField}`) || '';\n      let titlelLc = title.toLowerCase();\n\t\t\tlet summary = eval(`idea.${self.config.summaryField}`) || '';\n      let summaryLc = summary.toLowerCase();\n\t\t\tif (titlelLc.match(searchValueLc) || summaryLc.match(searchValueLc)) {\n\t\t\t\tsearchResult.ideas.push({\n\t\t\t\t\ttext: title,\n\t\t\t\t\tonClick: function() {\n            self.onUpdateSelectedIdea(idea)\n          },\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n    // search for addresses\n    fetch('https://geodata.nationaalgeoregister.nl/locatieserver/v3/suggest?rows=5&fq=gemeentenaam:amsterdam&fq=*:*&q=' + searchValueLc, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n\t\t\t.then((response) => {\n\t\t\t\treturn response.json();\n\t\t\t})\n      .then( json => {\n        if (json && json.response && json.response.docs && json.response.docs.length) {\n          searchResult.locations = json.response.docs.map( found => { return {\n\t\t\t\t\t\ttext: found.weergavenaam,\n\t\t\t\t\t\tonClick: function() { onClickAddress(found.id) },\n\t\t\t\t\t}});\n        }\n        callback(searchValue, searchResult)\n      })\n      .catch((err) => {\n        console.log('Search failed:', err);\n        callback(searchValue, searchResult)\n      });\n    \n    function onClickAddress(id) {\n      fetch('https://geodata.nationaalgeoregister.nl/locatieserver/v3/lookup?fq=gemeentenaam:amsterdam&&id=' + id, {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n\t\t\t  .then((response) => {\n\t\t\t\t  return response.json();\n\t\t\t  })\n        .then( json => {\n          if (json && json.response && json.response.docs && json.response.docs[0]) {\n            let centroide_ll = json.response.docs[0].centroide_ll;\n            let match = centroide_ll.match(/POINT\\((\\d+\\.\\d+) (\\d+\\.\\d+)\\)/);\n            self.map.map.panTo(new L.LatLng(match[2], match[1]));\n            self.onMapClick({ latlng: { lat: match[2], lng: match[1] } }, true)\n          }\n        })\n        .catch((err) => {\n          console.log('Search failed:', err);\n          callback(searchValue, searchResult)\n        });\n      \n    }\n\t\t\n\t}\n\n  // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n  // setCurrentPolygon(polygon) {\n  //   let state = { ...this.state };\n  //   state.currentPolygon = polygon ? this.map.createCutoutPolygon(polygon): undefined;\n  //   this.setState(state);\n  // }\n\n  // removeCurrentPolygon() {\n  //   this.map.removePolygon(this.state.currentPolygon)\n  //   let state = { ...this.state };\n  //   state.currentPolygon = undefined;\n  //   this.setState(state);\n  // }\n\n  getVisibleIdeas() {\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n      return this.state.visibleIdeas;\n    } else {\n      let visibleIdeas = this.map.getVisibleIdeas()\n      this.setState({ visibleIdeas });\n      return visibleIdeas;\n    }\n  }\n\n  setSelectedLocation(location) {\n    let self = this;\n    self.map.setSelectedLocation(location)\n    if (self.ideaform) {\n      if (!location) return;\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t\tself.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t\tlet address = json && json._display || 'Geen adres gevonden';\n\t\t\t\tself.state.editIdea.address = address;\n\t\t\t\tself.ideaform.handleLocationChange({ location, address: address });\n\t\t\t})\n    }\n  }\n\n  setNewIdea(idea) {\n    let self = this;\n    if (idea) idea.isPointInPolygon = idea.location && self.map.isPointInPolygon( { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, self.config.map.polygon )\n    self.setState({ editIdea: idea }, function() {\n      if (idea) {\n        self.map.fadeMarkers({exception: [idea.location]});\n        self.setSelectedLocation({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] });  \n        if (self.infoblock) {\n          self.setState({ editIdea: self.state.editIdea });\n          self.infoblock.setNewIdea({ ...self.state.editIdea, address: 'Bezig met adresgegevens ophalen...' });\n          self.map.getPointInfo({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, null, function(json, marker) {\n            let address = json && json._display || 'Geen adres gevonden';\n            let editIdea = self.state.editIdea;\n            editIdea.address = address;\n            self.setState({ editIdea });\n            self.infoblock.setNewIdea({ ...self.state.editIdea, address });\n          })\n          //self.infoblock.updateIdeas({ ideas: self.getVisibleIdeas().filter( x => x.id != idea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n          self.infoblock.updateIdeas({ ideas: self.state.ideas.filter( x => x.id != idea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n        }\n      } else {\n        self.map.unfadeAllMarkers();\n        self.setSelectedLocation(null);\n        if (self.infoblock) {\n          self.infoblock.setNewIdea(null);\n          self.infoblock.updateIdeas({ ideas: self.getVisibleIdeas(), showSortButton: true });\n        }\n      }\n    });\n  }\n\n  setSelectedIdea(idea) {\n    OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', idea && idea.id );\n    OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', null);\n    this.selectedIdea = idea;\n    if (idea) {\n      this.map.fadeMarkers({exception: idea});\n      if (this.infoblock) {\n        this.infoblock.setSelectedIdea(idea);\n        // this.infoblock.updateIdeas({ ideas: this.getVisibleIdeas().filter( x => x.id != idea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n        this.infoblock.updateIdeas({ ideas: this.state.ideas.filter( x => x.id != idea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n      }\n    } else {\n      this.map.unfadeAllMarkers();\n      if (this.infoblock) {\n        this.infoblock.setSelectedIdea(null);\n        this.infoblock.updateIdeas({ ideas: this.getVisibleIdeas(), showSortButton: true });\n      }\n    }\n  }\n  \n\tonMapClick(event, forceSelectLocation) {\n\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n    switch (this.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        let isPointInPolygon = this.map.isPointInPolygon( event.latlng, this.config.map.polygon );\n        if (isPointInPolygon) this.setSelectedLocation(event.latlng)\n        break;\n\n      default:\n        if (( this.selectedIdea || this.map.selectedLocation ) && !forceSelectLocation) {\n          this.setState({ ...this.state, status: 'default', currentIdea: null });\n          this.setSelectedIdea(null);\n          this.setNewIdea(null);\n          this.infoblock.updateIdeas({ ideas: this.getVisibleIdeas(), showSortButton: true });\n        } else {\n          this.setState({ ...this.state, status: 'location-selected', currentIdea: null });\n          this.setSelectedIdea(null);\n          let newIdea = { id: 'New Idea', location: { coordinates: [ event.latlng.lat, event.latlng.lng ] } };\n          this.setNewIdea(newIdea);\n          // setTimeout( function() {\n\t\t      // var event = new window.CustomEvent('newIdeaClick', { detail: { newIdea } });\n\t\t      //   document.dispatchEvent(event);\n          // }, 500 );\n        }\n        this.map.updateFading();\n        document.querySelector('#osc-ideas-on-map-info').scrollTo(0,0)\n    }\n  }\n\n\tonMarkerClick(event) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        break;\n\n      default:\n        if (this.state.editIdea) {\n          this.setState({ status: 'default', currentIdea: null });\n          this.setNewIdea(null);\n          this.setSelectedIdea(null);\n          this.setSelectedIdea(null);\n        } else {\n          this.setState({ status: 'idea-selected', currentIdea: event.target.data });\n          this.setNewIdea(null);\n          this.setSelectedIdea(event.target.data);\n        }\n        document.querySelector('#osc-ideas-on-map-info').scrollTo(0,0)\n\n    }\n  }\n\n\tonClusterClick(event) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n    this.setState({ ...this.state, status: 'default', currentIdea: null });\n    this.setNewIdea(null);\n    this.setSelectedIdea(null);\n  }\n\n  onChangeMapBoundaries() {\n    let self = this;\n    self.map.updateFading();\n    switch (self.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        break;\n\n      case 'idea-selected':\n      case 'location-selected':\n        if (self.infoblock) {\n          let selectedIdea = self.state.currentIdea || self.selectedIdea || self.state.editIdea;\n          if (selectedIdea && selectedIdea) {\n            self.infoblock.updateIdeas({ ideas: self.state.ideas.filter( x => x.id != selectedIdea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: selectedIdea.location.coordinates[0], lng: selectedIdea.location.coordinates[1] }, maxLength: 5 });\n          }\n        }\n        break;\n\n      default:\n        if (self.infoblock) {\n          self.infoblock.updateIdeas({ ideas: self.getVisibleIdeas(), showSortButton: true });\n        }\n\n    }\n  }\n\n\tonUpdateEditIdea(idea) {\n    this.setState({ ...this.state, editIdea: { ...idea }, currentIdea: idea });\n  }\n\n\tonUpdateSelectedIdea(idea) {\n    if (this.state.editIdea) this.setNewIdea(null);\n    let status = idea ? 'idea-selected' : 'default';\n    this.setState({ ...this.state, status, currentIdea: idea }, function() {\n      this.setSelectedIdea(idea);\n    });\n  }\n\n\tonCloseSelectedLocation() {\n    this.setState({ ...this.state, status: 'default', currentIdea: null }, function() {\n      this.setSelectedIdea(null);\n      this.setNewIdea(null);\n      this.setSelectedLocation(null);\n    });\n  }\n  \n  onIdeaClick(idea) {\n    // let showDetails = this.state.status == 'location-selected' || this.state.status == 'idea-selected';\n    if (this.state.editIdea) this.setNewIdea(null);\n    this.setState({ status: 'idea-selected', currentIdea: idea }, function() {\n      this.setSelectedIdea(idea);\n      // if (showDetails) this.showIdeaDetails(idea);\n      this.showIdeaDetails(idea);\n    });\n  };\n\n  onEditIdeaClick(idea) {\n    let self = this;\n    let location = { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] };\n    self.showIdeaForm(idea, () => {\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t  self.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t  let address = json && json._display || 'Geen adres gevonden';\n\t\t\t  self.state.editIdea.address = address;\n\t\t\t  self.ideaform.handleLocationChange({ location, address: address });\n\t\t  })\n    });\n  };\n\n  onIdeaDeleted(ideaId) {\n    let self = this;\n    self.setNewIdea(null);\n    self.setSelectedIdea(null);\n    self.setSelectedLocation(null);\n    self.setState({ status: 'default' }, function() {\n      self.map.map.invalidateSize();\n      self.map.setBoundsAndCenter();\n      self.fetchData({});\n    });\n  };\n\n  onDeleteIdeaClick(idea) {\n    console.log('Delete idea', idea.id);\n    alert('TODO')\n  };\n\n  onSelectedIdeaClick(idea) {\n    this.showIdeaDetails(idea);\n  };\n  \n  onNewIdeaClick() {\n    let self = this;\n    self.showIdeaForm(this.state.editIdea, () => {\n      let location = { lat: this.state.editIdea.location.coordinates[0], lng: this.state.editIdea.location.coordinates[1] };\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t  self.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t  let address = json && json._display || 'Geen adres gevonden';\n\t\t\t  self.state.editIdea.address = address;\n\t\t\t  self.ideaform.handleLocationChange({ location, address: address });\n\t\t  })\n    });\n  };\n\n\n  onNewIdeaStored(idea) {\n    let self = this;\n    self.setNewIdea(null);\n    self.fetchData({showIdeaSelected: idea.id});\n  }\n\n  onIdeaLiked(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.yes += data.change;\n  }\n\n  onReactionStored(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.argCount++;\n    setTimeout(e => { window.location.hash = `#osc-reaction-${data.id}` }, 1000);\n  }\n\n  onReactionDeleted(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.argCount--;\n  }\n  \n  onChangeTypeFilter(value) {\n    let self = this;\n    self.setSelectedIdea(null);\n    self.setNewIdea(null);\n    self.setSelectedLocation(null);\n\t  self.map.setFilter(function(marker) {\n\t\t  if (value && value !== '0') {\n\t\t\t  return marker.data && eval(`marker.data.${self.config.typeField}`) && eval(`marker.data.${self.config.typeField}`) == value;\n\t\t  } else {\n\t\t\t  return true;\n\t\t  }\n\t  })\n    self.setState({ status: 'default' })\n    self.map.setBoundsAndCenter();\n    self.onChangeMapBoundaries(); // todo: rename\n  }\n\n  // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n  // onChangeAreaFilter(area) {\n  //   let self = this;\n  //   self.setSelectedIdea(null);\n  //   self.setNewIdea(null);\n  //   self.removeCurrentPolygon();\n  //   self.setCurrentPolygon( area && area.polygon );\n  //   self.setState({ status: 'default' })\n  //   self.map.setBoundsAndCenter(area && area.polygon || self.config.map.polygon || self.map.markers);\n  // }\n\n  onClickMobileSwitcher() {\n    let self = this;\n    self.infoblock.setState({ mobileState: self.state.mobileState == 'closed' ? 'opened' : 'closed' })\n    self.setState({ mobileState: self.state.mobileState == 'closed' ? 'opened' : 'closed' }, function() {\n      self.map.map.invalidateSize();\n      if (this.state.status == 'location-selected' || this.state.status == 'idea-selected') {\n        let selectedIdea = self.state.currentIdea || self.selectedIdea || self.state.editIdea;\n        self.map.setBoundsAndCenter();\n      }\n    })\n  }\n  \n\trender() {\n\n    let infoHTML = null; // todo: ik denk dat dit naar infoblock moet\n    let filterHTML = null;\n    let mobilePopupHTML = null;\n\n    switch(this.state.status) {\n\n      case 'idea-details':\n        let config = { // TODO: niet bij elke render\n          titleField: this.config.titleField,\n          summaryField: this.config.summaryField,\n          typeField: this.config.typeField,\n          // areaField: this.config.areaField,\n          siteId: this.config.siteId,\n          user: this.config.user,\n          api: this.config.api,\n          argument: { ...this.config.argument },\n          labels: {\n            Kans: { text: 'Dit gaat goed', color: 'black', backgroundColor: '#bed200' },\n            Knelpunt: { text: 'Dit kan beter', color: 'black', backgroundColor: '#ff9100' },\n          },\n          showVoteButtons: this.config.idea.showVoteButtons,\n        };\n        config.argument.isActive = this.config.argument.isActive && !this.config.content.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${this.state.currentIdea.id}(?:\\\\D|$)`));\n        infoHTML = (\n\t\t\t    <OpenStadComponentIdeaDetails id={this.divId + '-infoblock'} config={config} idea={this.state.currentIdea} label={this.state.currentIdea.extraData.type} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.ideadetails = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <div className=\"osc-ideas-on-map-filterbar\"><div className=\"osc-backbutton\" onClick={() => this.hideIdeaDetails()}>Terug naar overzicht</div></div>\n        );\n        break;\n\n      case 'idea-form':\n        infoHTML = (\n\t\t\t    <IdeaForm id={this.divId + '-infoblock'} config={{ siteId: this.config.siteId, user: this.config.user, api: this.config.api, ...this.config.idea }} idea={{ ...this.state.editIdea, user: this.state.editIdea && this.state.editIdea.user || this.config.user }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.ideaform = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <div className=\"osc-ideas-on-map-filterbar\"><div className=\"osc-backbutton\" onClick={() => this.hideIdeaForm()}>Terug naar {this.state.editIdea && typeof this.state.editIdea.id == 'number' ? 'idee' : 'overzicht'}</div></div>\n        );\n        break;\n\n      case 'location-selected':\n      case 'idea-selected':\n        if (this.state.status == 'location-selected') {\n          if (this.state.editIdea && this.state.editIdea.isPointInPolygon) {\n\n            let contentHTML = this.config.api.isUserLoggedIn ? this.config.content.mobilePreviewLoggedInHTML : this.config.content.mobilePreviewNotLoggedInHTML;\n\n            let addButton = null; let loginButton = null; let loginLink = null;\n            if (this.config.api.isUserLoggedIn) {\n              if (this.config.idea.canAddNewIdeas) {\n                addButton = (\n                  <button className=\"osc-button osc-button-blue\" onClick={(event) => { this.onClickMobileSwitcher(event); this.onNewIdeaClick(event)} } ref={el => (self.newIdeaButton = el)}>Nieuw punt toevoegen</button>\n                );\n              }\n            } else {\n              if (this.config.idea.canAddNewIdeas) {\n                loginButton = (\n                  <button onClick={() => { document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n                );\n                loginLink = \"javascript: document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href)\";\n              }\n            }\n            \n            contentHTML = contentHTML.replace(/\\{address\\}/g, this.state.editIdea.address || '');\n            contentHTML = contentHTML.replace(/\\{loginLink\\}/g, loginLink);\n            \n            contentHTML = OpenStadComponentLibs.reactTemplate({ html: contentHTML, addButton, loginButton })\n            console.log(contentHTML);\n\n            mobilePopupHTML = (\n\t\t\t\t\t\t\t<div className=\"ocs-mobile-popup\">\n\t\t\t\t\t\t\t\t{contentHTML}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n          }\n        } else {\n          mobilePopupHTML = (\n            <div className=\"ocs-mobile-popup ocs-clickable\" onClick={ () =>  { this.setState({ mobileState: 'opened' }); this.infoblock.setState({ mobileState: 'opened' }); this.showIdeaDetails(this.state.currentIdea) } }>\n              <div className=\"osc-image\" style={{ backgroundImage: `url(${this.state.currentIdea && this.state.currentIdea.image})` }}></div>\n              { eval(this.state.currentIdea && `this.state.currentIdea.${this.config.titleField}`) }\n            </div>\n          );\n        }\n        infoHTML = (\n\t\t\t    <InfoBlock id={this.divId + '-infoblock'} config={{ api: this.config.api, title: this.config.title, titleField: this.config.titleField, summaryField: this.config.summaryField, types: this.config.types, content: this.config.content, argument: this.config.argument, idea: this.config.idea  }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.infoblock = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <Filterbar id={this.divId + '-filterbar'} config={{ types: this.config.types, areas: this.config.areas, doSearchFunction: this.config.doSearchFunction, title: this.config.title }} className=\"osc-ideas-on-map-filterbar\" ref={el => (this.filterbar = el)}/>\n        );\n        break;\n\n      default:\n        infoHTML = (\n\t\t\t    <InfoBlock id={this.divId + '-infoblock'} config={{ api: this.config.api, title: this.config.title, titleField: this.config.titleField, summaryField: this.config.summaryField, types: this.config.types, content: this.config.content, argument: this.config.argument, idea: this.config.idea  }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.infoblock = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <Filterbar id={this.divId + '-filterbar'} config={{ types: this.config.types, areas: this.config.areas, doSearchFunction: this.config.doSearchFunction, title: this.config.title }} className=\"osc-ideas-on-map-filterbar\" ref={el => (this.filterbar = el)}/>\n        );\n        mobilePopupHTML = null;\n        break;\n            \n    }\n\n    return (\n\t\t\t<div id={this.divId} className={`osc-ideas-on-map osc-ideas-on-map-${this.state.status} osc-mobile-${this.state.mobileState}`} ref={el => (this.instance = el)}>\n        {filterHTML}\n        {infoHTML}\n        <div className=\"osc-ideas-on-map-map\">\n\t\t\t\t  <Map id={this.divId + '-map'} className=\"\" config={{ ...this.config.map, types: this.config.types, typeField: this.config.typeField }} ref={el => (this.map = el)}/>\n        </div>\n        {mobilePopupHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport IdeasList from './ideas-list.jsx';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\n// TODO: na verandering op verandering denk ik dat dit een status moet gaan krijgen ipv. de new en selected versie.\n// TODO: setNewIdea refactoren naar setSelectedLocation\n// TODO: events worden via document gestuurd; dat kan ook intern\n\n'use strict';\n\nexport default class InfoBlock extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      content: {\n        noSelectionHTML: '<div class=\\\"osc-info-block-default-block\\\"><div class=\\\"osc-info-block-default-block-line osc-line-1\\\">Klik op een plek op de kaart om een nieuw punt toe te voegen.</div><div class=\\\"osc-info-block-default-block-line osc-line-2\\\">Selecteer een inzending op de kaart om meer informatie over de inzending te bekijken.</div><div class=\\\"osc-info-block-default-block-line osc-line-3\\\">Bekijk hieronder de inzendingen die nu zichtbaar zijn op de kaart.</div></div>',\n        selectionActiveLoggedInHTML: 'Ingelogd: er is een punt geselecteerd binnen de polygon, met een adres: {address} en {addButton}.',\n        selectionInactiveLoggedInHTML: 'Ingelogd: er is een punt geselecteerd buiten de polygon, met een {address}',\n        selectionActiveNotLoggedInHTML: 'Niet ingelogd: er is een punt geselecteerd binnen de polygon, met een adres: {address} en {loginButton} of <a href=\"{loginLink}\">login link</a>.',\n        selectionInactiveNotLoggedInHTML: 'Niet ingelogd: er is een punt geselecteerd buiten de polygon, met een {address}',\n        ignoreReactionsForIdeaIds: '',\n      },\n      idea: {\n        canAddNewIdeas: true,\n        showVoteButtons: true,\n      },\n      argument: {\n        isActive: true,\n      },\n\t\t};\n\n    this.config = merge.recursive(defaultConfig, this.config, props.config || {})\n\n    this.state = {\n      currentSortOrder: this.config.defaultSortOrder,\n      selectedIdea: undefined,\n      newIdea: undefined,\n      ideas: [],\n      mobileState: props.mobileState || 'closed',\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    this.eventTarget = this.config.eventTarget || this.instance;\n  }\n\n  updateIdeas({ ideas = this.state.ideas, sortOrder = this.state.currentSortOrder, showSortButton, center = { lat: 52.37104644463586, lng: 4.900402911007405 }, maxLength }) {\n    this.setState({ ideas });\n    this.list.updateIdeas({ ideas, sortOrder, showSortButton, center, maxLength });\n  }\n\n  setSelectedIdea(idea) {\n    this.setState({ ...this.state, selectedIdea: idea, newIdea: null });\n  }\n\n  setNewIdea(idea) {\n    this.setState({ ...this.state, newIdea: idea, selectedIdea: null });\n  }\n\n  dispatchUpdateSelectedIdea(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('updateSelectedIdea', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  dispatchCloseSelectedLocation(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('closeSelectedLocation', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  dispatchSelectedIdeaClick(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('selectedIdeaClick', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  };\n\n  dispatchOnIdeaClick(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('ideaClick', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  dispatchNewIdeaClick(e) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('newIdeaClick', { detail: {} });\n\t\tdocument.dispatchEvent(event);\n  };\n  \n  dispatchClickMobileSwitcher(e) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('clickMobileSwitcher', { detail: {} });\n\t\tdocument.dispatchEvent(event);\n  };\n  \n\trender() {\n\n    let self = this;\n\n    let newIdeaHTML = null;\n    let selectedIdeaHTML = null;\n    let titleAddition = '';\n    let mobileSwitcherHTML = null;\n    let mobileTitle = '';\n\n    // new idea\n    if (self.state.newIdea) {\n      let contentHTML = null; let addButton = null; let loginButton = null; let loginLink = null;\n      if (self.state.newIdea.isPointInPolygon) {\n        if (self.config.api.isUserLoggedIn) {\n          contentHTML = self.config.content.selectionActiveLoggedInHTML\n        } else {\n          contentHTML = self.config.content.selectionActiveNotLoggedInHTML\n        }\n      } else {\n        if (self.config.api.isUserLoggedIn) {\n          contentHTML = self.config.content.selectionInactiveLoggedInHTML\n        } else {\n          contentHTML = self.config.content.selectionInactiveNotLoggedInHTML\n        }\n      }\n\n      if (self.config.api.isUserLoggedIn) {\n        if (self.config.idea.canAddNewIdeas) {\n          addButton = (\n            <button className=\"osc-button osc-button-blue\" onClick={(event) => self.dispatchNewIdeaClick(event)}>Nieuw punt toevoegen</button>\n          );\n        }\n      } else {\n        if (self.config.idea.canAddNewIdeas) {\n          loginButton = (\n            <button onClick={() => { document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n          );\n          loginLink = \"javascript: document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href)\";\n        }\n      }\n\n      contentHTML = contentHTML.replace(/\\{address\\}/g, self.state.newIdea.address || '');\n      contentHTML = contentHTML.replace(/\\{loginLink\\}/g, loginLink);\n      contentHTML = OpenStadComponentLibs.reactTemplate({ html: contentHTML, addButton, loginButton })\n\n      newIdeaHTML = (\n\t\t\t  <div className=\"osc-info-block-new-idea\">\n          <button className=\"osc-close-button-black\" onClick={(event) => self.dispatchCloseSelectedLocation(event, null)} ref={el => (self.resetButton = el)}/>\n          {contentHTML}\n        </div>\n      );\n\n\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details en acties';\n    }\n\n    // selected idea\n    if (self.state.selectedIdea) {\n      let idea = self.state.selectedIdea;\n      let typeDef = self.config.types.find(entry => idea.extraData && entry.name == idea.extraData.theme);\n      if (!typeDef || !typeDef.listicon) { typeDef = { listicon: { html: '' } }; } // console.log(idea.extraData.theme + ' niet gevonden'); }\n      let voteCountHTML = null;\n      if (this.config.idea.showVoteButtons) {\n        voteCountHTML = (\n          <div className=\"osc-likes\">\n            {idea.yes || 0}\n          </div>);\n      }\n      let argcountHTML = null;\n      if (this.config.argument.isActive && !this.config.content.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`))) {\n        argcountHTML = (\n          <div className=\"osc-reactions\">\n            {idea.argCount || 0}\n          </div>);\n      }\n      selectedIdeaHTML = (\n\t\t\t  <div className=\"osc-info-block-selected-idea\" onClick={(event) => self.dispatchSelectedIdeaClick(event, self.state.selectedIdea)}>\n          <button className=\"osc-close-button-black\" onClick={(event) => self.dispatchUpdateSelectedIdea(event, null)} ref={el => (self.resetButton = el)}/>\n          <h3>Geselecteerd</h3>\n          <div className=\"osc-info-block-selected-idea-idea\">\n            <div className=\"osc-image\" style={{ backgroundImage: `url(${idea.image})` }}></div>\n            <div className=\"osc-content\">\n              <h4>{ eval(`idea.${self.config.titleField}`) }</h4>\n              <div className=\"osc-summary\">\n                { eval(`idea.${self.config.summaryField}`) }\n              </div>\n              <div className=\"osc-stats\">\n                {voteCountHTML}\n                {argcountHTML}\n                <div className=\"osc-type\">\n                  <div className=\"osc-type-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n                </div>\n              </div>\n            </div>\n            <div className=\"osc-clear-both\"></div>\n          </div>\n        </div>\n      );\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details';\n    }\n\n    if (!titleAddition) titleAddition = 'in dit gebied';\n\n    let defaultBlockHTML = null;\n    if (!newIdeaHTML && !selectedIdeaHTML) {\n      let noSelectionHTML = self.config.content.noSelectionHTML;\n      defaultBlockHTML = (\n\t\t\t  <div className=\"osc-info-block-default-block\" dangerouslySetInnerHTML={{ __html: noSelectionHTML }}></div>\n      );\n      mobileTitle = `${self.config.title} in dit gebied (${self.state.ideas && self.state.ideas.length || 0})`;\n    }\n\n    if (self.state.mobileState == 'opened') {\n      mobileTitle = 'Terug naar de kaart';\n    }\n\n    mobileSwitcherHTML = (\n      <div className=\"osc-mobile-switcher\" onClick={ e => self.dispatchClickMobileSwitcher(e) }>\n        {mobileTitle}\n      </div>\n    );\n\n    // TODO: kan de key weg uit IdeasList\n    return (\n\t\t\t<div id={self.props.id} className={self.props.className || 'osc-info-block'} ref={el => (self.instance = el)}>\n        {mobileSwitcherHTML}\n\t\t\t  <div className=\"osc-info-content\">\n          {defaultBlockHTML}\n          {newIdeaHTML}\n          {selectedIdeaHTML}\n\t\t\t    <IdeasList config={{ ...self.config, onIdeaClick: ( event, idea ) => self.dispatchOnIdeaClick(event, idea) }} ideas={self.state.ideas} title={self.config.title + ' ' + titleAddition} key={`osc-ideas-list-321`} ref={el => (self.list = el)}/>\n\t\t\t  </div>\n\t\t\t</div>\n\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport OpenStadComponentNLMap from '../../nlmap/index.jsx';\n\n'use strict';\n\nexport default class Map extends OpenStadComponentNLMap {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tthis.defaultConfig = {\n      clustering: {\n        maxClusterRadius: 100,\n        showCoverageOnHover: false,\n      },\n    };\n\t\tthis.config = merge.recursive(this.defaultConfig, this.config, props.config || {})\n\n    // tmp fallback\n    this.config.polygon = this.config.polygon;\n    this.config.autoZoomAndCenter = this.config.autoZoomAndCenter || 'polygon'\n    \n    this.ideas = [];\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    super.componentDidMount(prevProps, prevState);\n\n    let self = this;\n\t\tdocument.addEventListener('osc-map-cluster-animation-end', function(event) {\n      self.onMapClusterAnimationEnd(event.detail);\n    });\n\n  }\n  \n  addIdea(idea) {\n    let self = this;\n    self.ideas.push(idea);\n    // todo: dit moet met een iconCreate functie\n    let typename = idea && eval(`idea.${self.config.typeField}`);\n\t\tlet typeDef = self.config.types.find(entry => entry.name == typename);\n    // if (!typeDef) { console.log(typename + ' niet gevonden'); }\n\t\tlet color = typeDef && typeDef.color || '#164995';\n    let icondef = ( typeDef && ( typeDef.mapicon || typeDef.icon ) ) || { html: `<svg viewBox=\"0 0 26 26\"><circle cx=\"13\" cy=\"13\" r=\"13\" fill=\"${color}\"/></svg>`, width: 26, height: 26, anchor: [13, 13] };\n\t\tlet icon = L.divIcon({ html: icondef.html, className: 'osc-ideas-on-map-icon', iconSize: L.point(icondef.width, icondef.height), iconAnchor: icondef.anchor });\n    self.addMarker({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1], data: idea, icon });\n  }\n\n  getVisibleIdeas() {\n    let self = this;\n    let visibleIdeas = self.markers\n        .filter( marker => marker.visible && marker.data && self.map.getBounds().contains(marker.getLatLng()))\n        .map( marker => marker.data );\n    self.setState({ visibleIdeas });\n    return visibleIdeas;\n  }\n\n  setSelectedLocation(location) {\n    this.selectedLocation = location;\n    if (this.selectedLocation) {\n      if (this.selectedLocationMarker) {\n        this.updateMarker(this.selectedLocationMarker, { location });\n      } else {\n\t\t    let icon = L.divIcon({ html: '<svg width=\"39\" height=\"50\" viewBox=\"0 0 39 50\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M19.1038 0C29.6577 0 38.2075 8.46671 38.2075 18.9181C38.2075 33.1786 21.7544 47.7273 21.0432 48.3035L19.1038 50L17.1643 48.3035C16.4532 47.7273 0 33.1786 0 18.9181C0 8.46831 8.54983 0 19.1038 0ZM32.3245 18.9181C32.3083 11.6837 26.4091 5.84187 19.1038 5.82586C11.7984 5.84187 5.89922 11.6837 5.88306 18.9181C5.88306 27.3367 14.1581 37.2439 19.0876 42.1095C23.1767 38.1242 32.3245 27.993 32.3245 18.9181Z\" fill=\"#EC0000\"/><path d=\"M19.104 5.82568C26.4093 5.84169 32.3086 11.6836 32.3247 18.9179C32.3247 27.9928 23.1769 38.124 19.0879 42.1093C14.1584 37.2437 5.8833 27.3366 5.8833 18.9179C5.89946 11.6836 11.7987 5.84169 19.104 5.82568ZM25.5689 18.9179C25.5689 15.3807 22.6759 12.5158 19.104 12.5158C15.5322 12.5158 12.6391 15.3807 12.6391 18.9179C12.6391 22.455 15.5322 25.3199 19.104 25.3199C22.6759 25.3199 25.5689 22.455 25.5689 18.9179Z\" fill=\"white\"/><path d=\"M19.1038 25.3202C22.6743 25.3202 25.5687 22.4539 25.5687 18.9182C25.5687 15.3824 22.6743 12.5161 19.1038 12.5161C15.5333 12.5161 12.6389 15.3824 12.6389 18.9182C12.6389 22.4539 15.5333 25.3202 19.1038 25.3202Z\" fill=\"#EC0000\"/></svg>', className: 'osc-ideas-on-map-icon', iconSize: L.point(39, 50), iconAnchor: [20, 50] });\n        this.selectedLocationMarker = this.addMarker({ ...location, icon, doNotCluster: true });\n      }\n    } else {\n      if (this.selectedLocationMarker) {\n        this.removeMarker(this.selectedLocationMarker);\n      }\n      this.selectedLocationMarker = null;\n    }\n  }\n\n  setBoundsAndCenter(points) {\n    super.setBoundsAndCenter(points || ( this.config.autoZoomAndCenter == 'polygon' && this.config.polygon ) || this.map.markers);\n  }\n\n  showMarkers() {\n\t  var self = this;\n    self.markers.forEach((marker) => {\n      self.showMarker(marker)\n    });\n    self.setBoundsAndCenter(( self.config.autoZoomAndCenter == 'polygon' && self.config.polygon ) || self.markers);\n  }\n\n  hideMarkers({ exception }) {\n\t  var self = this;\n    if (exception) self.setBoundsAndCenter([ exception.location ]);\n    self.markers.forEach((marker) => {\n      if (!(exception && exception.location.lat == marker._latlng.lat && exception.location.lng == marker._latlng.lng)) {\n        self.hideMarker(marker)\n      }\n    });\n  }\n\n  fadeMarkers({ exception }) {\n    let self = this;\n    self.markers.forEach((marker) => {\n      if (exception && marker.data && marker.data.id && exception.id == marker.data.id) {\n        if (marker.data) marker.data.isFaded = false;\n      } else {\n        if (marker.data) marker.data.isFaded = true;\n        let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n        let ignore = visibleParent && visibleParent.getAllChildMarkers && visibleParent.getAllChildMarkers().find( m => m.data && m.data.isFaded === false );\n        if (!ignore && visibleParent) {\n          visibleParent.setOpacity(0.3);\n        }\n      }\n    });\n  }\n\n  // fix for https://github.com/Leaflet/Leaflet.markercluster/issues/177\n  updateFading() {\n    let self = this;\n    self.markers.forEach((marker) => {\n      let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n      if (visibleParent && marker.visible) {\n        let ignore = visibleParent && visibleParent.getAllChildMarkers && visibleParent.getAllChildMarkers().find( m => m.data && m.data.isFaded === false );\n        visibleParent.setOpacity(!ignore && marker.data && marker.data.isFaded ? 0.3 : 1);\n      }\n    });\n  }\n\n  unfadeAllMarkers() {\n    let self = this;\n    // markers\n    self.markers.forEach((marker) => {\n      if (marker.data) marker.data.isFaded = false;\n      let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n        if (visibleParent) {\n          visibleParent.setOpacity(1);\n        }\n    });\n  }\n\n  onMapClusterAnimationEnd() {\n    this.updateFading();\n  }\n\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class Search extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n\n    this.config.doSearchFunction = this.config.doSearchFunction || this.doSearchx.bind(this);\n\n\t\t\n    this.state = {\n\t\t\tsearchValue: '',\n\t\t\tsearchResult: { locations: [], ideas: [] },\n\t\t\tshowSuggestions: false,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  handleChange(value) {\n\n    this.updateSearchValue(value);\n\n\t\tif (value.length >=3) {\n\t\t\tthis.config.doSearchFunction(value, this.updateSearchResult.bind(this));\n\t\t}\n\n\t\t// dispatch an event\n\t\t//var event = new window.CustomEvent('typeFilterUpdate', { detail: { value: value } });\n\t\t//this.instance.dispatchEvent(event);\n\n  }\n\n  handleButtonClick(event) {\n\t\tlet self = this;\n    if (self.state.searchValue) {\n      self.setState({ searchValue: '' }, () => {\n        self.inputfield.focus();\n      });\n    }\n  }\n\n  updateSearchValue(value) {\n    this.setState({\n\t\t\tsearchValue: value,\n\t\t\tshowSuggestions: value.length >=3 ? true : false,\n\t\t});\n  }\n\n  showSuggestions() {\n    this.setState({ showSuggestions: this.state.searchValue.length >= 3 ? true : false });\n\t}\n\n\thideSuggestions() {\n\t\tlet self = this;\n\t\t// TODO: dit moet anders; het gaat er om dat de onclick op suggesties niet doorkomt omdat hij deze eerst doet\n\t\tsetTimeout(function(){self.setState({ showSuggestions: false });}, 500);\n\t}\n\n\tupdateSearchResult(searchValue, searchResult) {\n\t\t// console.log('update', searchValue, searchResult);\n    this.setState({...this.state, searchResult, showSuggestions: searchValue.length >= 3 ? true : false });\n\t}\n\n\tdoSearchx(value) {\n\t\tconsole.log('search function not defined');\n\t}\n\n  onSuggestionClick(text, event, next) {\n    this.updateSearchValue(text)\n    if (next) next(event)\n  }\n\n\trender() {\n\n    let self = this;\n\n\t\tlet suggestionsHTML = null;\n\t\tif (self.state.showSuggestions) {\n\t\t\tsuggestionsHTML = (\n\t\t\t\t<div className=\"osc-search-suggestions\" ref={el => (self.suggestions = el)}>\n\t\t\t\t\tAdressen:\n          { self.state.searchResult.locations.map((result, i) => {\n\t\t\t\t\t\tlet text = result.text.replace(new RegExp(self.state.searchValue, 'ig'), ($0) => '<strong>' + $0 + '</strong>');\n            return <div className=\"osc-search-suggestion osc-search-suggestion-idea\" onClick={ event => self.onSuggestionClick(result.text, event, result.onClick) } key={'search-result-' + i} dangerouslySetInnerHTML={{__html: text}}></div>;\n          })}\n\t\t\t\t\t<div className=\"osc-search-suggestions-hr\"/>\n\t\t\t\t\t{ this.config.title }:\n          { self.state.searchResult.ideas.map((result, i) => {\n\t\t\t\t\t\tlet text = result.text.replace(new RegExp(self.state.searchValue, 'ig'), ($0) => '<strong>' + $0 + '</strong>');\n            return <div className=\"osc-search-suggestion osc-search-suggestion-idea\" onClick={ event => self.onSuggestionClick(result.text, event, result.onClick) } key={'search-result-' + i} dangerouslySetInnerHTML={{__html: text}}></div>;\n          })}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-search'} ref={el => (self.instance = el)}>\n\n\t\t\t\t{suggestionsHTML}\n\t\t\t\t<input type=\"text\" value={this.state.searchValue} placeholder=\"Zoek op trefwoord\" onChange={() => self.handleChange( self.inputfield.value )} onBlur={() => self.hideSuggestions()} onFocus={() => self.showSuggestions()} className=\"osc-default-input osc-search-input\" ref={el => (self.inputfield = el)}/>\n        <button className={`osc-search-button${ this.state.searchValue ? ' osc-active' : '' }`} onClick={(event) => self.handleButtonClick(event)} ref={el => (self.resetButton = el)}/>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\nimport 'custom-event-polyfill';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeasOnMap from './component/ideas-on-map.jsx';\n\n// render elements\nOpenStadComponentIdeasOnMap.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeasOnMap attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeasOnMap as default,\n  OpenStadComponentIdeasOnMap as IdeasOnMap,\n};\n\n","// extracted by mini-css-extract-plugin","// polyfills\n//import 'core-js/es/map';\n//import 'core-js/es/set';\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport api from './lib/api/index.js';\nimport user from './lib/user/index.js';\nimport localStorage from './lib/local-storage.js';\nimport sessionStorage from './lib/session-storage.js';\nimport reactTemplate from './lib/react-template.js';\n\nlet OpenStadComponentLibs = {\n  api,\n  user,\n  localStorage,\n  sessionStorage,\n  reactTemplate,\n}\nexport default OpenStadComponentLibs;\n\n","import merge from 'merge';\nimport getJWT from '../user/get-jwt.js';\n\nexport default function(config) {\n\n  let headers = merge.recursive({ 'Content-type': 'application/json' }, config && config.api && config.api.headers);\n\n  let jwt = getJWT();\n  if (jwt) {\n    headers = merge.recursive({ \"X-Authorization\": \"Bearer \" + jwt }, headers);\n  }\n\n  return headers;\n  \n}\n","import getHeaders from './get-headers.js'\n\nlet OpenStadComponentAPI = {\n  getHeaders,\n}\n\nexport default OpenStadComponentAPI;\n\n","let oscLocalStorage = {};\n\noscLocalStorage.get = function(name) {\n\n\tvar value = localStorage.getItem(name);\n\n\ttry {\n\t\tvalue = JSON.parse(value);\n\t} catch(err) {}\n\n\treturn value;\n\n}\n\noscLocalStorage.set = function(name, value) {\n\n\tif ( typeof name != 'string' ) return;\n\n\tif ( typeof value == 'undefined' ) value = \"\";\n\tif ( typeof value == 'object' ) {\n\t\ttry {\n\t\t\tvalue = JSON.stringify(value);\n\t\t} catch(err) {}\n\t};\n\n\tlocalStorage.setItem( name, value );\n\n}\n\n\noscLocalStorage.remove = function(name) {\n  localStorage.removeItem(name)\n}\n\nexport default oscLocalStorage;\n","import merge from 'merge';\n\nexport default function({ html='' }) {\n\n  let args = arguments[0];\n  delete args.html;\n\n  let matches = 0;\n\n  Object.keys(args).forEach((key) => {\n\n    let regEx = new RegExp(`^(.*)\\\\{${key}\\\\}(.*)$`);\n    let match = regEx.exec(html);\n\n    if (match) {\n      matches++;\n      html = (\n        <span>\n        <span dangerouslySetInnerHTML={{ __html: match[1] }}></span>\n        {args[key]}\n        <span dangerouslySetInnerHTML={{ __html: match[2] }}></span>\n        </span>\n      );\n    }\n\n  });\n\n  if (matches == 0) html = <span dangerouslySetInnerHTML={{ __html: html }}></span>\n  return html;\n  \n}\n","let oscSessionStorage = {};\n\noscSessionStorage.get = function(name) {\n\n\tvar value = sessionStorage.getItem(name);\n\n\ttry {\n\t\tvalue = JSON.parse(value);\n\t} catch(err) {}\n\n\treturn value;\n\n}\n\noscSessionStorage.set = function(name, value) {\n\n\tif ( typeof name != 'string' ) return;\n\n\tif ( typeof value == 'undefined' ) value = \"\";\n\tif ( typeof value == 'object' ) {\n\t\ttry {\n\t\t\tvalue = JSON.stringify(value);\n\t\t} catch(err) {}\n\t};\n\n\tsessionStorage.setItem( name, value );\n\n}\n\n\noscSessionStorage.remove = function(name) {\n  sessionStorage.removeItem(name)\n}\n\nexport default oscSessionStorage;\n","import sessionStorage from '../session-storage.js'\n\nexport default function(config) {\n\n  let jwt;\n\n  // jwt in url\n  let match = window.location.search.match(/(?:\\?|&)jwt=([A-Za-z0-9-_=]+\\.[A-Za-z0-9-_=]+\\.?[A-Za-z0-9-_.+/=]*)(?:&|$)/);\n  if (match) {\n    jwt = match[1];\n    sessionStorage.set('osc-jwt', jwt);\n    let search = document.location.search.replace('jwt=' + jwt, '');\n    if (search == '?') search = '';\n    document.location.search = search;\n  }\n\n  jwt = sessionStorage.get('osc-jwt');\n\n  if (config && config.jwt) {\n    jwt = config.jwt;\n    sessionStorage.set('osc-jwt', jwt)\n  }\n\n  return jwt;\n  \n}\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nexport default function(config, next) {\n\n  next = next || function(user) {\n    console.log('getUser: next not defined.');\n    console.log(user);\n  };\n\n  let user = config.user || sessionStorage.get('osc-user');\n\n  if (user) {\n    // return user\n    return next(null, user);\n  }\n\n  // jwt\n  let jwt = getJWT(config);\n\n  if (!jwt) {\n    // return no user\n    return next(null, {});\n  }\n\n  // fetch user\n  let url = `${config.api.url  }/oauth/site/${  config.siteId  }/me`;\n  let headers = { 'X-Authorization': `Bearer ${  jwt}`, 'Content-Type': 'application/json' };\n  fetch(url, { headers } )\n    .then((response) => {\n      if (!response.ok) throw new Error('Error on fetch');\n      return response.json();\n    })\n    .then( (json) => {\n      sessionStorage.set('osc-user', json);\n      next(null, json);\n    })\n    .catch((err) => {\n      next(err);\n    });\n\n}\n","import getUser from './get-user.js'\nimport getJWT from './get-jwt.js'\nimport logout from './logout.js'\n\nlet OpenStadComponentUser = {\n  getUser,\n  getJWT,\n  logout,\n}\n\nexport default OpenStadComponentUser;\n\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nexport default function(config, next) {\n\n  next = next || function(user) {\n    console.log('logout: next not defined.');\n  }\n\n  let user = config.user || sessionStorage.get('osc-user');\n\n  if (user) {\n    // return user\n    return next(null, user);\n  }\n\n  // jwt\n  let jwt = getJWT(config);\n\n  if (!jwt) {\n    // return no user\n    return next(null, {})\n  }\n\n  // fetch user\n  let url = config.api.url + '/oauth/site/' + config.siteId + '/me';\n  let headers = { 'X-Authorization': 'Bearer ' + jwt, 'Content-Type': 'application/json' };\n  fetch(url, { headers } )\n    .then((response) => {\n      if (!response.ok) throw new Error('Error on fetch')\n      return response.json();\n    })\n    .then( json => {\n      sessionStorage.set('osc-user', json)\n      next(null, json)\n    })\n    .catch((err) => {\n      next(err)\n    });\n  \n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport OpenStadComponent from '../../component/index.jsx';\nimport amapsCreateClusterIcon from '../lib/amaps-cluster-icon.js';\n\n'use strict';\n\nexport default class OpenStadComponentNLMap extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tvar self = this;\n\n\t\t// config\n\t\tlet defaultConfig = {\n\t\t\ttarget: self.divId,\n\t\t\tstyle: 'standaard',\n\t\t\tmarker: false,\n\t\t\tsearch: false,\n\t\t\tcenter: {\n\t\t\t\tlatitude: 52.37104644463586,\n\t\t\t\tlongitude: 4.900402911007405,\n\t\t\t},\n\t\t\tzoom: 14,\n\t\t\tzoomposition     : 'bottomleft',\n\t\t\tdisableDefaultUI : true,\n\t\t\tpolygon : null,\n\t\t\tautoZoomAndCenter: false,\n\t\t};\n\t\tself.config = Object.assign(defaultConfig, self.config || {})\n\n\t\t// external css and script files\n\t\tself._loadedFiles = 0;\n\t\tself.files = [\n\t\t\t{ type: 'css', href: \"https://unpkg.com/leaflet@1.0.3/dist/leaflet.css\" },\n\t\t\t{ type: 'script', src: \"https://unpkg.com/leaflet@1.0.3/dist/leaflet.js\" },\n\t\t];\n\t\tswitch(self.config.variant) {\n\t\t\tcase \"amaps\":\n\t\t\t\t// self.files.push({ type: 'css', href: \"https://map.data.amsterdam.nl/dist/css/ams-map.css\"}); // in tegenstelling tot wat ze beloven overschrijft dit ook css buiten de map\n\t\t\t\tself.files.push({ type: 'script', src: \"https://map.data.amsterdam.nl/dist/amaps.iife.js\"});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.files.push({ type: 'css', href: \"https://nlmaps.nl/dist/assets/css/nlmaps.css\"});\n\t\t\t\tself.files.push({ type: 'script', src: \"https://nlmaps.nl/dist/nlmaps.iife.js\"});\n\t\t}\n\t\tself.files.push({ type: 'css', href: \"https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css\"  });\n\t\tself.files.push({ type: 'script', src: \"https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js\" });\n\n\t\tself.markers = self.config.markers || [];\n\t\t\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    var self = this;\n    self.loadNextFile(function() {\n      // initSingleClick();\n\t\t\t// loading script files is ready; create the map\n\t\t\tself.createMap();\n\t\t\t// dispatch an event\n\t\t\tself.mapIsReady = true;\n\t\t\tvar event = new CustomEvent('osc-map-is-ready', { detail: { id: self.divId } });\n\t\t\tdocument.dispatchEvent(event);\n    });\n\t}\n\n  loadNextFile(next) {\n    var self = this;\n    var file = self.files[self._loadedFiles];\n    if (file) {\n\t\t\tlet element;\n\t\t\tif (file.type === 'script') {\n\t\t\t\telement = document.createElement('script');\n\t\t\t\telement.src = file.src;\n\t\t\t\telement.async = true;\n\t\t\t}\n\t\t\tif (file.type === 'css') {\n\t\t\t\telement = document.createElement('link');\n\t\t\t\telement.href = file.href;\n\t\t\t\telement.rel = 'stylesheet';\n\t\t\t}\n\t\t\tif (element) {\n\t\t\t\telement.onload = function() {\n          self.loadNextFile(next);\n\t\t\t\t}\n\t\t\t\tthis.instance.appendChild(element);\n\t\t\t}\n    }\n\t\tif (self._loadedFiles == self.files.length) {\n      next()\n    }\n\t\tself._loadedFiles++;\n  }\n\n\tcreateMap() {\n\n\t\tvar self = this;\n\n\t\t// init map\n\t\tswitch(self.config.variant) {\n\t\t\tcase \"amaps\":\n\t\t\t\tself.map = amaps.createMap(self.config);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.map = nlmaps.createMap(self.config);\n\t\t}\n\n\t\t// clustering\n\t\tif (self.config.clustering && self.config.clustering.isActive && L.markerClusterGroup) {\n\t\t\tlet iconCreateFunction = self.config.clustering.iconCreateFunction || amapsCreateClusterIcon.bind(self) // ( self.config.variant == 'amaps' ? amapsCreateClusterIcon.bind(self) : self.createClusterIcon );\n\t\t\tif (iconCreateFunction && typeof iconCreateFunction == 'string') iconCreateFunction = eval(iconCreateFunction);\n\t\t\tself.markerClusterGroup = L.markerClusterGroup({iconCreateFunction, showCoverageOnHover: self.config.clustering.showCoverageOnHover, maxClusterRadius: self.config.clustering.maxClusterRadius || 80});\n\t\t\tself.markerClusterGroup.on('clusterclick', self.onClusterClick);\n\t\t\tself.markerClusterGroup.on('animationend', self.onClusterAnimationEnd);\n\t\t\tself.map.addLayer(self.markerClusterGroup);\n\t\t}\n\t\t\n\t\t// on map click\n\t\tself.map.on('click', self.onMapClick);\n\n\t\t// add polygon\n\t\tif (self.config.polygon) {\n\t\t\tself.createCutoutPolygon( self.config.polygon );\n\t\t}\n\n\t\t// add markers\n\t\tif (self.markers.length) {\n\t\t\tself.markers.forEach(function(marker) {\n\t\t\t\tself.addMarker( marker )\n\t\t\t})\n\t\t}\n\n\t  // set bounds and center\n\t  if (self.config.autoZoomAndCenter) {\n\t\t  var centerOn = ( self.config.autoZoomAndCenter == 'polygon' && self.config.polygon ) || ( self.markers && self.markers.length && self.markers );\n\t\t  if (self.editorMarker) {\n\t\t\t  if (self.editorMarker.position) {\n\t\t\t\t  centerOn = [self.editorMarker];\n\t\t\t  } else {\n\t\t\t\t  centerOn = self.config.polygon;\n\t\t\t  }\n\t\t  }\n\t\t  if (centerOn) {\n\t\t\t  self.setBoundsAndCenter( centerOn );\n\t\t  }\n\t  }\n\n\t}\n\n\taddMarkers(markerData) {\n\t\tvar self = this;\n    markerData.forEach((marker) => {\n      self.addMarker(marker)\n    });\n  }\n\n\taddMarker(markerData) {\n\n\t\tvar self = this;\n\n\t\tlet icon = markerData.icon;\n\t\tif (!icon) {\n\t\t\tlet iconCreateFunction = self.config.iconCreateFunction;\n\t\t\tif (iconCreateFunction && typeof iconCreateFunction == 'string') {\n\t\t\t\ticonCreateFunction = eval(iconCreateFunction);\n\t\t\t\ticon = iconCreateFunction();\n\t\t\t}\n\t\t}\n\n\t\tvar marker;\n\t\tif (icon) {\n\t\t\tmarker = L.marker([markerData.lat, markerData.lng], { icon });\n\t\t} else {\n\t\t\tmarker = L.marker([markerData.lat, markerData.lng]);\n\t\t}\n\n    marker.visible = true;\n\t\tmarker.data = markerData.data;\n\t\tmarker.doNotCluster = markerData.doNotCluster;\n\n\t\tif (markerData.href) {\n\t\t\tmarkerData.onClick = function() {\n\t\t\t\tdocument.location.href = markerData.href;\n\t\t\t}\n\t\t}\n\t\tlet onClick = self.onMarkerClick;\n\t\tif (onClick) {\n\t\t\tif (typeof onClick == 'string') onClick = eval(onClick);\n\t\t\t// marker.on('singleclick', onClick);\n\t\t\tmarker.on('click', onClick);\n\t\t}\n\n\t\tif (self.markerClusterGroup && !markerData.doNotCluster) {\n\t\t\tself.markerClusterGroup.addLayer(marker);\n\t\t} else {\n\t\t\tself.map.addLayer(marker);\n\t\t}\n\n\t\tself.markers.push(marker);\n\n\t\treturn marker;\n\n\t}\n\n\tremoveMarker(marker) {\n    if (!marker) return;\n    let index = this.markers.indexOf(marker);\n    if (index > -1) {\n      this.markers.splice(index, 1)\n\t\t  this.map.removeLayer(marker);\n\t\t\tthis.markerClusterGroup.removeLayer(marker);\n    }\n  }\n\n\tupdateMarker(marker, newData) {\n    if (newData.location) {\n      var newLatLng = new L.LatLng(newData.location.lat, newData.location.lng);\n      marker.setLatLng(newLatLng); \n    }\n  }\n\n\tcreateClusterIcon(cluster) {\n\t\tvar count = cluster.getChildCount();\n\t\treturn L.divIcon({ html: count, className: 'osc-nlmap-icon-cluster', iconSize: L.point(20, 20), iconAnchor: [20, 10] });\n\t}\n\n\tcreateCutoutPolygon(polygon) {\n\n\t\tvar self = this;\n\n\t\t// polygon must defined from the south west corner to work with the outer box\n\t\tvar bounds = L.polygon(polygon).getBounds();\n\t\tvar center = bounds.getCenter();\n\n\t\tvar smallest = 0; var index = 0;\n\n\t\tpolygon.forEach(function( point, i ) {\n\t\t\tvar y = Math.sin(point.lng-center.lng) * Math.cos(point.lat);\n\t\t\tvar x = Math.cos(center.lat)*Math.sin(point.lat) - Math.sin(center.lat)*Math.cos(point.lat)*Math.cos(point.lng-center.lng);\n\t\t\tvar bearing = Math.atan2(y, x) * 180 / Math.PI;\n\t\t\tif (45 - bearing < smallest) {\n\t\t\t\tsmallest = 45 - bearing;\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t});\n\n\t\tvar a = polygon.slice(0, index);\n\t\tvar b = polygon.slice(index, polygon.length);\n\t\tpolygon = b.concat(a);\n\n\t\t// outer box\n\t\t// TODO: should be calculated dynamically from the center point\n\t\tvar delta1 = 0.01;\n\t\tvar delta2 = 5;\n\t\tvar outerBox = [\n\t\t\t{lat: -90 + delta2, lng:  -180 + delta1 },\n\t\t\t{lat: -90 + delta2, lng:     0          },\n\t\t\t{lat: -90 + delta2, lng:   180 - delta1 },\n\t\t\t{lat:   0,          lng:   180 - delta1 },\n\t\t\t{lat:  90 - delta2, lng:   180 - delta1 },\n\t\t\t{lat:  90 - delta2, lng:     0          },\n\t\t\t{lat:  90 - delta2, lng:  -180 + delta1 },\n\t\t\t{lat:  90 - delta2, lng:  -180 + delta1 },\n\t\t\t{lat:   0,          lng:  -180 + delta1 },\n\t\t];\n\n\t\t// polygon style\n\t\tlet polygonStyle = Object.assign({\n\t\t\t\"color\": \"#d00\",\n\t\t\t\"fillColor\": \"#000\",\n\t\t\t\"fillOpacity\": 0.15\n\t\t}, self.config.polygonStyle);\n\n\t\tlet result = L.polygon([outerBox, polygon], polygonStyle);\n    self.map.addLayer(result);\n\n    return result;\n\n\t}\n\n  removePolygon(polygon) {\n\t  var self = this;\n    if (polygon) {\n      self.map.removeLayer(polygon);\n    }\n  }\n\n  setBoundsAndCenter( points ) {\n\n\t  var self = this;\n\n    if (!Array.isArray(points)) {\n      self.map.panTo(new L.LatLng(self.config.center.latitude, self.config.center.longitude));\n      return;\n    }\n\n\t  var poly = [];\n\t  points.forEach(function(point) {\n\t\t  if (point._latlng) {\n\t\t\t  point = point._latlng;\n\t\t  } else if (point.position) {\n\t\t\t  point = point.position.coordinates ? { lat: point.position.coordinates[0], lng: point.position.coordinates[1] }  : point.position;\n\t\t  }\n\t\t  poly.push(point);\n\t  })\n\n    if (poly.length == 1) {\n      self.map.panTo(new L.LatLng(poly[0].lat, poly[0].lng));\n    } else {\n\t    var bounds = L.latLngBounds(poly);\n\t    self.map.fitBounds(bounds);\n    }\n\n\t  // var zoom = parseInt(self.map.getZoom())\n\t  // self.map.setZoom(zoom - 1)\n\n  }\n\n  showMarkers(markers) {\n\t  var self = this;\n    markers.forEach((marker) => {\n      self.showMarker(marker);\n    });\n  }\n  \n  showMarker(marker) {\n\t  var self = this;\n    marker.visible = true;\n\t  if (self.markerClusterGroup && !marker.doNotCluster) {\n\t\t  self.markerClusterGroup.addLayer(marker);\n\t  } else {\n\t\t  marker.addTo(self.map)\n\t  }\n  }\n\n  hideMarkers(markers) {\n\t  var self = this;\n    markers.forEach((marker) => {\n      self.hideMarker(marker);\n    });\n  }\n  \n  hideMarker(marker) {\n\t  var self = this;\n    marker.visible = false;\n\t  if (self.markerClusterGroup && !marker.doNotCluster) {\n\t\t  self.markerClusterGroup.removeLayer(marker);\n\t  } else {\n\t\t  marker.remove(self.map)\n\t  }\n  }\n\n  setFilter(filterFuntion) {\n\t  var self = this;\n\t  self.filterFunction = filterFuntion;\n\t  self.applyFilter();\n  }\n\n  applyFilter() {\n\t  var self = this;\n\t  if (self.filterFunction) {\n\t\t  self.markers.forEach(function(marker) {\n\t\t\t  if ( self.filterFunction(marker) ) {\n\t\t\t\t  self.showMarker(marker);\n\t\t\t  } else {\n\t\t\t\t  self.hideMarker(marker);\n\t\t\t  }\n\t\t  });\n\t  } else {\n\t\t  self.markers.forEach(function(marker) {\n\t\t\t  self.showMarker(marker);\n\t\t  });\n\t  }\n  }\n\n  isPointInPolygon(point, polygon) {\n\n    if (!point) return false;\n    if (!polygon) return true;\n\n\t  // taken from http://pietschsoft.com/post/2008/07/02/Virtual-Earth-Polygon-Search-Is-Point-Within-Polygon\n\n    var x = point.lat, y = point.lng;\n\n    var inside = false;\n    for (var i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n        var xi = polygon[i].lat, yi = polygon[i].lng;\n        var xj = polygon[j].lat, yj = polygon[j].lng;\n\n        var intersect = ((yi > y) != (yj > y))\n            && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n        if (intersect) inside = !inside;\n    }\n\n    return inside; \n\n  }\n\n  getPointInfo(latlng, marker, next) {\n\n    // TODO: configurabel\n    var bagApiUrl1 = 'https://api.data.amsterdam.nl/bag/nummeraanduiding/?format=json&locatie=[[lat]],[[lng]],50';\n    var bagApiUrl2 = 'https://api.data.amsterdam.nl/bag/nummeraanduiding/[[id]]/?format=json';\n\n\t  var self = this;\n\n\t  latlng = latlng || {};\n\n\t  var url = bagApiUrl1\n\t\t\t  .replace(/\\[\\[lat\\]\\]/, latlng.lat)\n\t\t\t  .replace(/\\[\\[lng\\]\\]/, latlng.lng);\n\n\n\t  fetch(url)\n      .then((response) => {\n        return response.json();\n      })\n      .then( json => {\n\t\t\t  var id = json && json.results && json.results[0] && json.results[0].landelijk_id;\n\t\t\t  var url = bagApiUrl2\n\t\t\t\t\t  .replace(/\\[\\[id\\]\\]/, id)\n\t      fetch(url)\n          .then((response) => {\n            return response.json();\n          })\n          .then( json => {\n\t\t\t\t\t  json.lat = latlng.lat;\n\t\t\t\t\t  json.lng = latlng.lng;\n\t\t\t\t\t  if (next) next(json, marker);\n          })\n      })\n      .catch((err) => {\n        console.log('Zoek adres: niet goed');\n        console.log(err);\n\t\t\t  if (next) next({}, marker);\n      });\n\n  }\n\n\tonMapClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonMarkerClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-marker-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonClusterClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-cluster-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonClusterAnimationEnd(detail) {\n\t\tvar event = new CustomEvent('osc-map-cluster-animation-end', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\trender() {\n\n    return (\n\t\t\t<div id={this.divId} className={this.props.className || 'osc-nlmap'} ref={el => (this.instance = el)}>\n\t\t\t\t<div id={this.divId + '-map'}></div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentNLMap from './component/map.jsx';\n\n// render elements\nOpenStadComponentNLMap.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentNLMap attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentNLMap as default,\n  OpenStadComponentNLMap as NLMap,\n};\n\n","export default function amapsCreateClusterIcon(cluster) {\n\n  let self = this;\n  let count = cluster.getChildCount();\n  \n  // todo: configurable\n  let markers = cluster.getAllChildMarkers();\n\n  let colors = {}\n  let total = markers.length;\n  let isFaded = false;\n  markers.forEach((entry) => {\n    let type = entry.data && eval(`entry.data.${self.config.typeField}`);\n    let tmp = self.config.types.find(entry => entry.name == type);\n    let color = tmp && tmp.color || '#164995';\n    if ( type == undefined ) type = 'undef'\n    if ( !colors[color] ) colors[color] = 0;\n    colors[color]++;\n    if (entry.data && entry.data.isFaded) isFaded = true;\n  });\n\n  let html = '<svg viewBox=\"0 0 36 36\"><circle cx=\"18\" cy=\"18\" r=\"14\" fill=\"white\"/>'\n\n  let soFar = 0;\n  Object.keys(colors).forEach((key) => {\n    let myColor = key;\n    let perc = 100 * colors[key] / total;\n    let angle = (soFar / 100) * 360;\n    \n    html += `  <path\n             d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\"\n             fill=\"none\"\n             transform=\"rotate(${angle}, 18, 18)\"\n             stroke=\"${myColor}\"\n             stroke-width=\"4\"\n             stroke-dasharray=\"${perc}, 100\"\n             />`;\n    soFar = soFar + perc;\n  });\n\n  html += '<text x=\"18\" y=\"21\" text-anchor=\"middle\" class=\"openstad-component-ideas-on-map-icon openstad-component-ideas-on-map-icon-text\">' + count + '</text></svg>';\n\n  return L.divIcon({ html: html, className: 'openstad-component-ideas-on-map-icon-cluster', iconSize: L.point(36, 36), iconAnchor: [18, 18], isFaded });\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReactionForm extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n\n    self.defaultConfig = {\n      argumentId: null,\n      api: {\n        url: null,\n        headers: null,\n      },\n      user: {},\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      requiredUserRole: 'member',\n      formIntro: '',\n      placeholder: '',\n    };\n\n    self.config = merge.recursive(self.defaultConfig, props.config || {});\n    self.config.loginUrl = self.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n    \n    self.state = {\n      description: self.config.description || '',\n      isValid: false,\n      isBusy: false,\n    };\n\n  }\n\n  handleOnChange(data) {\n    data = data || {};\n    if (data.description) data.isValid = this.description.isValid();\n    this.setState(data);\n  }\n\n  canSubmit() {\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.props.user && this.props.user.role;\n    // todo: nieuwe rollen structuur\n    return  requiredUserRole == 'anonymous' && userRole  ||\n             requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' )  ||\n             requiredUserRole == 'admin' && userRole == 'admin';\n  }\n\n  submitForm() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let isValid = self.description.validate({ showWarning: true });\n      if (!isValid) {\n        self.setState({ isBusy: false, isValid: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument${   self.config.argumentId ? `/${  self.config.argumentId}` : ''}`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n      let method = self.config.argumentId ? 'PUT' : 'POST';\n\n      let body = {\n        parentId: self.config.parentId,\n        sentiment: self.config.sentiment,\n        description: self.state.description,\n      };\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n          if (typeof self.config.onSubmit == 'function') {\n            self.config.onSubmit({ description: self.state.description });\n          }\n\n          self.setState({ description: '', isBusy: false, isValid: false }, () => {\n            if (self.config.argumentId) {\n\t\t          let event = new CustomEvent('osc-reaction-edited', { detail: json });\n\t\t          document.dispatchEvent(event);\n            } else {\n\t\t          let event = new CustomEvent('osc-new-reaction-stored', { detail: json });\n\t\t          document.dispatchEvent(event);\n            }\n          });\n\n\n        })\n        .catch(function(error) {\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false, isValid: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n\n    let config = {\n      descriptionMinLength: self.config.descriptionMinLength || 30,\n      descriptionMaxLength: self.config.descriptionMaxLength || 500,\n    };\n\n    let formIntro = null;\n    if (self.config.formIntro) {\n      formIntro = (\n        <div className=\"osc-intro\">{self.config.formIntro}</div>\n      );\n    }\n\n    let submitButtonHTML = null;\n    if (self.canSubmit()) {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n\t\t\t    <button onClick={(e) => { if (!self.state.isBusy) self.submitForm(); }} className={`osc-button-blue${ !self.state.isValid || self.state.isBusy ? ' osc-disabled' : '' }`} >Verzenden</button>\n        </div>\n      );\n    } else {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n        </div>\n      );\n    }\n\n    return (\n      <div id={self.divId} className=\"\" ref={el => (self.instance = el)} >\n        {formIntro}\n        <OpenStadComponentForms.InputWithCounter disabled={this.canSubmit() ? null : true} config={{ inputType: 'textarea', minLength: config.descriptionMinLength, maxLength: config.descriptionMaxLength, placeholder: self.config.placeholder }} value={self.state.description} onChange={ data => self.handleOnChange({ description: data.value }) } ref={el => (self.description = el)}/>\n        {submitButtonHTML}\n      </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentReactionForm from './reaction-form.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReaction extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-reaction-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      title: null,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n    };\n\n    self.config = Object.assign(self.defaultConfig, props.config || {});\n\n    self.state = {\n      user: props.user,\n      isMenuActive: false,\n      isReplyFromActive: false,\n      editMode: false,\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    document.addEventListener('osc-new-reaction-stored', function(event) {\n      self.onNewReactionStored(event.detail);\n    });\n\n    document.addEventListener('osc-reaction-edited', function(event) {\n      self.onReactionEdited(event.detail);\n    });\n\n  }\n\n  showMenu() {\n    this.setState({ isMenuActive: true });\n  }\n\n  toggleReplyForm() {\n    this.setState({ isReplyFromActive: !this.state.isReplyFromActive });\n  }\n\n  toggleEditForm(what) {\n    this.setState({ editMode: !this.state.editMode });\n  }\n\n  canEdit() {\n    return this.props.data.can.edit;\n  }\n\n  canDelete() {\n    return this.props.data.can.delete;\n  }\n\n  canLike() {\n    if (this.config.isClosed) return false;\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.props.user && this.props.user.role;\n    return (( requiredUserRole == 'anonymous' && userRole ) ||\n            ( requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' ) ) ||\n            ( requiredUserRole == 'admin' && userRole == 'admin'));\n  }\n\n  canReply() {\n    return this.props.data.can.reply;\n  }\n\n  submitDelete() {\n\n    let self = this;\n\n    if (!self.canDelete()) return alert('U kunt deze reactie niet verwijderen');\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument/${  self.props.data.id}`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let body = {};\n\n    fetch(url, {\n      method: 'DELETE',\n      headers,\n      body: JSON.stringify(body),\n    })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n        self.setState({ isDeleted: true });\n\n\t\t    let event = new CustomEvent('osc-reaction-deleted', { detail: { ideaId: self.config.ideaId } });\n\t\t    document.dispatchEvent(event);\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  submitLike() {\n\n    let self = this;\n\n    if (!self.canLike()) return alert('U kunt deze reactie niet liken');\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument/${  self.props.data.id  }/vote`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let body = {};\n\n    fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(body),\n    })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n        // console.log({ yes: json.yes, hasUserVoted: json.hasUserVoted });\n        self.setState({ yes: json.yes, hasUserVoted: json.hasUserVoted });\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  onNewReactionStored(reaction) {\n    this.setState({ isMenuActive: false, isReplyFromActive: false });\n  }\n\n  onReactionEdited(reaction) {\n    if (reaction.id == this.props.data.id) {\n      this.setState({ editMode: false, isMenuActive: false });\n    }\n  }\n\n  render() {\n\n    let self = this;\n    let data = self.props.data || { can: {} };\n\n    if (data.isDeleted) return null;\n\n    let menuHTML = null;\n    if ( self.canEdit() && self.canDelete() ) {\n      menuHTML = (\n        <div className={ `osc-reaction-menu${   self.state.isMenuActive ? ' osc-reaction-hamburger-active' : ''}` } onClick={ () => { self.showMenu(); }}>\n          <a className=\"osc-reaction-delete\" title=\"Argument verwijderen\" onClick={ () => { if (confirm('Weet je het zeker?')) self.submitDelete(); } }/>\n          <a className=\"osc-reaction-edit\" title=\"Argument bewerken\" onClick={ () => self.toggleEditForm() }/>\n        </div>\n      );\n    }\n\n    let descriptionHTML = (<div className=\"osc-reaction-description\">{data.description}</div>);\n    if (self.state.editMode) {\n      descriptionHTML = (\n        <div className=\"osc-reaction-description\">\n          <OpenStadComponentReactionForm config={{ ...self.config, description: data.description, argumentId: data.id }} user={self.state.user} ref={el => (self.editForm = el)}/>\n        </div>\n      );\n    }\n\n    let likeButtonHTML = null;\n    if (!data.parentId) {\n      likeButtonHTML = (\n\t\t\t  <a className={ `osc-reaction-like-button${ ( typeof self.state.hasUserVoted != 'undefined' ? self.state.hasUserVoted : data.hasUserVoted ) ? ' osc-reaction-like-button-hasvoted' : ''}` } onClick={ () => self.submitLike() }>\n\t\t\t\t  Mee eens (<span>{( typeof self.state.yes != 'undefined' ? self.state.yes : data.yes ) | 0}</span>)\n        </a>\n      );\n    }\n\n    let replyButtonHTML = null;\n    let replyFormHTML = null;\n    if (self.canReply() && !self.config.isClosed) {\n      replyButtonHTML = (<a href=\"#\" onClick={ () => self.toggleReplyForm() } className=\"osc-reply-button\">Reageren</a>);\n      if (self.state.isReplyFromActive) {\n        let config = { ...self.config, parentId: data.id };\n        config.formIntro = '';\n        replyFormHTML = (\n\t\t\t    <div id={`osc-reaction-${data.id}`} className=\"osc-reply\">\n            <OpenStadComponentReactionForm config={config} user={self.state.user} ref={el => (self.editForm = el)}/>\n          </div>\n        );\n      }\n    }\n\n    let repliesHTML = null;\n    if (data.reactions && data.reactions.length) {\n      repliesHTML = (\n        <ul className=\"osc-reactions-list\">\n          {data.reactions.map((reaction) => {\n\n            let key = `osc-reaction-key-${   reaction.id || parseInt( 1000000 * Math.random() )}`;\n            return (\n              <li key={key}>\n                <OpenStadComponentReaction config={self.config} className=\"osc-reply\" user={self.state.user} data={reaction}/>\n              </li>\n            );\n\n          })}\n        </ul>\n      );\n    }\n\n    return (\n      <div>\n\n\t\t\t  <div id={`osc-reaction-${data.id}`} className={ self.props.className || 'osc-reaction' }>\n\n          {menuHTML}\n\n          <div className=\"osc-reaction-user\">{data.user.nickName || data.user.fullName || `${data.user.firstName } ${  data.user.lastName}`}</div>\n\t\t\t\t  <div className=\"osc-reaction-date\">{data.createDateHumanized}</div>\n          {descriptionHTML}\n\n          {likeButtonHTML}\n\t\t\t    {replyButtonHTML}\n\n\t\t    </div>\n\n\t\t\t  {replyFormHTML}\n        {repliesHTML}\n\n\t\t  </div>\n\n    );\n\n  }\n\n}\n","import React from 'react';\nimport merge from 'merge';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentReactionForm from './reaction-form.jsx';\nimport OpenStadComponentReaction from './reaction.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReactions extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-reactions-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      scrollToNewReaction: true,\n      isClosed: false,\n      closedText: null,\n      sentiment: undefined,\n      siteId: null,\n      ideaId: null,\n      title: null,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      user: null,\n      loginUrl: '',\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n      placeholder: '',\n      formIntro: '',\n    };\n\n    self.config = merge.recursive(self.defaultConfig, self.config, props.config || {});\n\n    self.state = {\n      user: self.config.user,\n      reactions: [],\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          self.fetchData();\n        });\n      });\n    } else {\n      self.fetchData();\n    }\n\n    document.addEventListener('osc-new-reaction-stored', function(event) {\n      self.onNewReactionStored(event.detail);\n    });\n\n    document.addEventListener('osc-reaction-edited', function(event) {\n      self.onReactionEdited(event.detail);\n    });\n\n    document.addEventListener('osc-reaction-deleted', function(event) {\n      self.onReactionDeleted(event.detail);\n    });\n\n  }\n\n  fetchData(next) {\n\n    let self = this;\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument?sentiment=${  self.config.sentiment  }&withUser=1&withUserVote=1&withVoteCount=1&includeReactionsOnReactions=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state };\n        state.reactions = json;\n        state.reactions.sort((a, b) => {\n          return a.createdAt < b.createdAt;\n        });\n        // console.log(state.reactions);\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  onNewReactionStored(reaction) {\n    this.fetchData(() => {\n      if (this.config.scrollToNewReaction) {\n        let element = document.getElementById(`osc-reaction-${  reaction.id}`);\n        if ( element ) document.getElementById(`osc-reaction-${  reaction.id}`).scrollIntoView();\n      }\n    });\n  }\n\n  onReactionEdited(reaction) {\n    this.fetchData();\n  }\n\n  onReactionDeleted(reaction) {\n    this.fetchData();\n  }\n\n  render() {\n\n    let self = this;\n\n    let reactions =\n      <ul className=\"osc-reactions-list\">\n        {self.state.reactions.map((reaction) => {\n\n          let key = `osc-reaction-key-${   reaction.id || parseInt( 1000000 * Math.random() )}`;\n          return (\n            <li key={key}>\n              <OpenStadComponentReaction config={self.config} user={self.state.user} data={{ ...reaction }}/>\n            </li>\n          );\n\n        })}\n      </ul>;\n\n    let title = self.config.title ? <h3>{self.config.title}</h3> : null;\n\n    let reactionFormHTML = <OpenStadComponentReactionForm config={self.config} user={self.state.user}/>;\n    if (self.config.isClosed) {\n      if (self.config.closedText) {\n        reactionFormHTML = <div className=\"osc-closed-text\">{self.config.closedText}</div>\n      } else {\n        reactionFormHTML = null\n      }\n    }\n\n    return (\n      <div id={this.id} className={self.props.className || 'osc-reactions'} ref={(el) => { this.instance = el; }} >\n\n        {title}\n\n        {reactionFormHTML}\n\n        {reactions}\n        <br/><br/>\n\n      </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentReactions from './component/reactions.jsx';\n\n// render elements\nOpenStadComponentReactions.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentReactions attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentReactions as default,\n  OpenStadComponentReactions as Reactions,\n};\n\n","/* (ignored) */","(function() { module.exports = window[\"React\"]; }());","(function() { module.exports = window[\"ReactDOM\"]; }());"],"sourceRoot":""}
=======
{"version":3,"sources":["webpack://OpenStadComponents/webpack/bootstrap","webpack://OpenStadComponents/./node_modules/custom-event-polyfill/polyfill.js","webpack://OpenStadComponents/./node_modules/es6-promise-promise/index.js","webpack://OpenStadComponents/./node_modules/es6-promise/dist/es6-promise.js","webpack://OpenStadComponents/./node_modules/merge/merge.js","webpack://OpenStadComponents/./node_modules/process/browser.js","webpack://OpenStadComponents/(webpack)/buildin/global.js","webpack://OpenStadComponents/(webpack)/buildin/module.js","webpack://OpenStadComponents/./node_modules/whatwg-fetch/fetch.js","webpack://OpenStadComponents/./src/component/index.jsx","webpack://OpenStadComponents/./src/forms/component/default-input.jsx","webpack://OpenStadComponents/./src/forms/component/form-field.jsx","webpack://OpenStadComponents/./src/forms/component/form.jsx","webpack://OpenStadComponents/./src/forms/component/htmlarea.jsx","webpack://OpenStadComponents/./src/forms/component/image-upload.jsx","webpack://OpenStadComponents/./src/forms/component/input-with-counter.jsx","webpack://OpenStadComponents/./src/forms/component/postcode.jsx","webpack://OpenStadComponents/./src/forms/component/radios.jsx","webpack://OpenStadComponents/./src/forms/component/select.jsx","webpack://OpenStadComponents/./src/forms/component/slider.jsx","webpack://OpenStadComponents/./src/forms/component/textarea.jsx","webpack://OpenStadComponents/./src/forms/component/textinput.jsx","webpack://OpenStadComponents/./src/forms/css/default.less","webpack://OpenStadComponents/./src/forms/index.jsx","webpack://OpenStadComponents/./src/idea-details/component/idea-details.jsx","webpack://OpenStadComponents/./src/idea-details/component/vote-button.jsx","webpack://OpenStadComponents/./src/idea-details/css/default.less","webpack://OpenStadComponents/./src/idea-details/index.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/filterbar.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/idea-form.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/ideas-list.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/ideas-on-map.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/info-block.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/map.jsx","webpack://OpenStadComponents/./src/ideas-on-map/component/search.jsx","webpack://OpenStadComponents/./src/ideas-on-map/css/default.less","webpack://OpenStadComponents/./src/ideas-on-map/index.jsx","webpack://OpenStadComponents/./src/libs/css/default.less","webpack://OpenStadComponents/./src/libs/index.jsx","webpack://OpenStadComponents/./src/libs/lib/api/get-headers.js","webpack://OpenStadComponents/./src/libs/lib/api/index.js","webpack://OpenStadComponents/./src/libs/lib/local-storage.js","webpack://OpenStadComponents/./src/libs/lib/react-template.js","webpack://OpenStadComponents/./src/libs/lib/session-storage.js","webpack://OpenStadComponents/./src/libs/lib/user/get-jwt.js","webpack://OpenStadComponents/./src/libs/lib/user/get-user.js","webpack://OpenStadComponents/./src/libs/lib/user/index.js","webpack://OpenStadComponents/./src/libs/lib/user/logout.js","webpack://OpenStadComponents/./src/nlmap/component/map.jsx","webpack://OpenStadComponents/./src/nlmap/css/default.less","webpack://OpenStadComponents/./src/nlmap/index.jsx","webpack://OpenStadComponents/./src/nlmap/lib/amaps-cluster-icon.js","webpack://OpenStadComponents/./src/poll/component/poll-form.jsx","webpack://OpenStadComponents/./src/poll/component/poll.jsx","webpack://OpenStadComponents/./src/poll/css/default.less","webpack://OpenStadComponents/./src/poll/index.jsx","webpack://OpenStadComponents/./src/reactions/component/reaction-form.jsx","webpack://OpenStadComponents/./src/reactions/component/reaction.jsx","webpack://OpenStadComponents/./src/reactions/component/reactions.jsx","webpack://OpenStadComponents/./src/reactions/css/default.less","webpack://OpenStadComponents/./src/reactions/index.jsx","webpack://OpenStadComponents/vertx (ignored)","webpack://OpenStadComponents/external \"React\"","webpack://OpenStadComponents/external \"ReactDOM\""],"names":["OpenStadComponent","props","self","attributes","Object","keys","forEach","key","attribute","name","value","config","JSON","parse","err","divId","id","parseInt","Math","random","window","prevProps","prevState","React","Component","OpenStadComponentDefaultInput","defaultConfig","choices","placeholder","disabled","required","merge","recursive","state","error","onChange","showErrors","isValid","setState","data","validate","OpenStadComponentFormField","inputType","validateAction","changeAction","title","description","toLowerCase","undefined","handleOnChange","bind","input","titleHTML","descriptionHTML","__html","fieldHTML","el","instance","OpenStadComponentForm","intro","fields","values","firstInvalid","field","scrollIntoView","behavior","introHTML","fieldsHTML","length","map","fieldConfig","i","OpenStadComponentHTMLArea","onKeyUpx","filterHTML","innerHTML","replace","e","command","args","preventDefault","stopPropagation","document","execCommand","onKeyUp","onFocus","onBlur","executeAction","prompt","EditButton","cmd","evt","arg","OpenStadComponentSelect","imageserver","process","fetch","_loadedFiles","files","loadNextFile","file","element","createElement","src","async","onload","body","appendChild","fileUploaderInit","imageuploader","getFiles","images","image","serverId","containerElement","querySelector","FilePond","registerPlugin","FilePondPluginImagePreview","FilePondPluginFileValidateSize","FilePondPluginFileValidateType","FilePondPluginFilePoster","filePondSettings","acceptedFileTypes","allowFileSizeValidation","maxFileSize","maxFiles","allowBrowse","server","imageResizeTargetWidth","imageResizeTargetHeight","imageCropAspectRatio","labelIdle","labelInvalidField","labelFileWaitingForSize","labelFileSizeNotAvailable","labelFileCountSingular","labelFileCountPlural","labelFileLoading","labelFileAdded","labelFileLoadError","labelFileRemoved","labelFileRemoveError","labelFileProcessing","labelFileProcessingComplete","labelFileProcessingAborted","labelFileProcessingError","labelFileProcessingRevertError","labelTapToCancel","labelTapToRetry","labelTapToUndo","labelButtonRemoveItem","labelButtonAbortItemLoad","labelButtonRetryItemLoad","labelButtonAbortItemProcessing","labelButtonUndoItemProcessing","labelButtonRetryItemProcessing","labelButtonProcessItem","create","sortableInstance","pondEl","addEventListener","detail","console","log","fileUploaderUpdateCurrentInput","formfields","addFiles","push","url","errorHTML","FormfieldInputWithCounter","minLength","maxLength","focused","valueLength","useKey","onInputFocus","onInputBlur","onInputKeyUp","warning","showWarning","counter","inputHTML","OpenStadComponentPostcode","match","OpenStadComponentRadios","choice","dangerousDescription","Slider","touched","handleChange","event","target","min","max","range","progInRange","step","className","transform","calcProgress","doTouch","Form","FormField","ImageUpload","InputWithCounter","Postcode","Radios","Select","Text","Textarea","IdeasDetails","siteId","ideaId","user","api","headers","isUserLoggedIn","argument","isActive","poll","canAddPoll","showVoteButtons","labels","idea","showPollForm","reactionStoredListener","onReactionStored","reactionDeletedListener","onReactionDeleted","pollCreatedListener","onPollCreated","pollDeletedListener","onPollDeleted","fetchData","removeEventListener","editIdeaLink","location","href","CustomEvent","dispatchEvent","argCount","hidePollForm","OpenStadComponentLibs","getHeaders","then","response","ok","Error","json","posterImage","extraData","localStorage","get","hash","set","role","method","afterDeleteIdeaLink","labelHTML","label","color","backgroundColor","text","pollHTML","addPollButtonHTML","can","edit","dispatchAddPollClick","voteButtonsHTML","opinion","yes","editButtonsHTML","dispatchEditIdeaClick","confirm","deleteIdea","modBreakHTML","modBreak","modBreakDateHumanized","reactionsCountHTML","reactionsHTML","eval","titleField","backgroundImage","encodeURIComponent","nickName","fullName","firstName","lastName","createDateHumanized","theme","summary","VoteButton","busy","votePending","doVote","remove","loginUrl","stringify","change","userVote","alert","message","value000","value00","value0","OpenStadComponentIdeaDetails","renderElement","elem","ReactDOM","render","Filterbar","types","areas","assign","selectedType","selectedArea","mobileActiveSelector","hideMobileActiveSelector","find","area","handleTypeChange","handleAreaChange","which","showMobileActiveSelector","areasHTML","areasButtonHTML","toggleMobileActiveSelector","areaSelector","typeSelector","type","resetTypeAndArea","resetButton","IdeasForm","titleMinLength","titleMaxLength","summaryMinLength","summaryMaxLength","descriptionMinLength","descriptionMaxLength","summaryField","descriptionField","imageField","address","coordinates","lat","lng","dispatchUpdateEditIdea","style","display","formValues","form","getValues","validateIdea","showFormErrorsWarning","formErrorsWarningHTML","formHTML","submitIdea","submitButton","IdeasList","sortOptions","showSortButton","defaultSortOrder","onIdeaClick","currentSortOrder","ideas","currentMouseOverIdea","sortOrder","center","sort","a","b","ranking","Date","createdAt","getTime","_distance","sqrt","pow","slice","updateIdeas","newMouseOverIdeaId","sortSelector","setSortOrder","option","height","titleHML","typeDef","entry","listicon","html","voteCountHTML","argcountHTML","content","ignoreReactionsForIdeaIds","RegExp","dispatchMouseOverListItem","dispatchMouseOutListItem","OpenStadComponentIdeasOnMap","typeField","canAddNewIdeas","formIntro","requiredUserRole","mobilePreviewLoggedInHTML","mobilePreviewNotLoggedInHTML","doSearchFunction","doSearch","mapicon","visibleIdeas","status","mobileState","currentIdea","editIdea","selectedIdea","selectedLocation","on","onChangeMapBoundaries","onMapClick","onMarkerClick","onClusterClick","onChangeTypeFilter","onUpdateSelectedIdea","onCloseSelectedLocation","onUpdateEditIdea","onSelectedIdeaClick","onNewIdeaClick","onClickMobileSwitcher","onMouseOverListItem","onMouseOutListItem","onIdeaLiked","onEditIdeaClick","onIdeaDeleted","onNewIdeaStored","showIdeaDetails","showIdeaSelected","markers","marker","removeMarker","filter","addIdea","setBoundsAndCenter","setNewIdea","setSelectedIdea","invalidateSize","showMarkers","hideMarkers","exception","next","searchValue","callback","searchValueLc","searchResult","locations","titlelLc","summaryLc","onClick","docs","found","weergavenaam","onClickAddress","centroide_ll","panTo","L","LatLng","latlng","getVisibleIdeas","setSelectedLocation","ideaform","handleLocationChange","getPointInfo","_display","isPointInPolygon","polygon","fadeMarkers","infoblock","x","unfadeAllMarkers","forceSelectLocation","newIdea","updateFading","scrollTo","showIdeaForm","setTimeout","setFilter","infoHTML","mobilePopupHTML","Kans","Knelpunt","ideadetails","hideIdeaDetails","hideIdeaForm","contentHTML","addButton","loginButton","loginLink","newIdeaButton","reactTemplate","filterbar","InfoBlock","noSelectionHTML","selectionActiveLoggedInHTML","selectionInactiveLoggedInHTML","selectionActiveNotLoggedInHTML","selectionInactiveNotLoggedInHTML","eventTarget","list","newIdeaHTML","selectedIdeaHTML","titleAddition","mobileSwitcherHTML","mobileTitle","dispatchNewIdeaClick","dispatchCloseSelectedLocation","dispatchSelectedIdeaClick","dispatchUpdateSelectedIdea","defaultBlockHTML","dispatchClickMobileSwitcher","dispatchOnIdeaClick","Map","clustering","maxClusterRadius","showCoverageOnHover","autoZoomAndCenter","onMapClusterAnimationEnd","typename","icondef","icon","width","anchor","divIcon","iconSize","point","iconAnchor","addMarker","visible","getBounds","contains","getLatLng","selectedLocationMarker","updateMarker","doNotCluster","points","keepCenter","showMarker","_latlng","hideMarker","isFaded","visibleParent","markerClusterGroup","getVisibleParent","ignore","getAllChildMarkers","m","setOpacity","OpenStadComponentNLMap","Search","doSearchx","showSuggestions","updateSearchValue","updateSearchResult","inputfield","focus","suggestionsHTML","suggestions","result","$0","onSuggestionClick","hideSuggestions","handleButtonClick","sessionStorage","jwt","getJWT","OpenStadComponentAPI","oscLocalStorage","getItem","setItem","removeItem","arguments","matches","regEx","exec","oscSessionStorage","search","OpenStadComponentUser","getUser","logout","latitude","longitude","zoom","zoomposition","disableDefaultUI","variant","createMap","mapIsReady","rel","amaps","nlmaps","iconCreateFunction","amapsCreateClusterIcon","onClusterAnimationEnd","addLayer","createCutoutPolygon","centerOn","editorMarker","position","markerData","index","indexOf","splice","removeLayer","newData","newLatLng","setLatLng","cluster","count","getChildCount","bounds","getCenter","smallest","y","sin","cos","bearing","atan2","PI","concat","delta1","delta2","outerBox","polygonStyle","Array","isArray","poly","latLngBounds","fitBounds","addTo","filterFuntion","filterFunction","applyFilter","inside","j","xi","yi","xj","yj","intersect","bagApiUrl1","bagApiUrl2","results","landelijk_id","colors","total","tmp","soFar","myColor","perc","angle","OpenStadComponentPollForm","questionMinLength","questionMaxLength","allowChoiceTitles","pollId","isBusy","question","messages","questionInput","titleInput","descriptionInput","userRole","validatedResult","canSubmit","isNew","onFinished","submitButtonHTML","submitForm","titleInputHTML","addChoice","OpenStadComponentPoll","withPercentage","allowShowResultsIfNotVoted","hideEditForm","selectedChoice","showResult","showQuestion","editMode","showVoteSucceeded","parseVoteCount","voteCount","votesAbs","votesPrc","reaction","onSubmit","questionHTML","choiceHTML","submitVote","showResultButtonHTML","setShowResult","selectChoice","resultHTML","showQuestionButtonHTML","setShowQuestion","totalVotesHTML","xx","percentageHTML","scoreHTML","showEditForm","deletePoll","voteSucceededHTML","OpenStadComponentReactionForm","argumentId","parentId","sentiment","OpenStadComponentReaction","isMenuActive","isReplyFromActive","onNewReactionStored","onReactionEdited","what","isClosed","reply","canDelete","isDeleted","canLike","hasUserVoted","menuHTML","canEdit","showMenu","submitDelete","toggleEditForm","editForm","likeButtonHTML","submitLike","replyButtonHTML","replyFormHTML","canReply","toggleReplyForm","repliesHTML","reactions","OpenStadComponentReactions","scrollToNewReaction","closedText","getElementById","reactionFormHTML"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,mBAAmB;AAChE;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC;AACA,CAAC;;;;;;;;;;;;ACpDD,iBAAiB,mBAAO,CAAC,mEAAa;;;;;;;;;;;;ACAtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,KAA4D;AAChE,IAAI,SAC+B;AACnC,CAAC,qBAAqB;;AAEtB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iFAAiF;;AAEjF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B,sBAAsB;;AAEhD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,mBAAC,CAAC,cAAO;AACzB;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA,CAAC,yCAAyC,UAAc;AACxD;AACA,CAAC;AACD;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,IAAI;AACd;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,wBAAwB;AACzC;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,uCAAuC;AACxD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,MAAM;AAChB,UAAU,OAAO;AACjB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAU,MAAM;AAChB;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,qBAAqB,YAAY;AACjC;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA,UAAU,IAAI;AACd;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA,UAAU,SAAS;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;;AAEA;AACA,YAAY,SAAS;AACrB,YAAY,SAAS;AACrB;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,YAAY,SAAS;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC;AACD,oC;;;;;;;;;;;;ACjoCA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,gBAAgB,WAAW;;AAE3B;;AAEA,GAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAI;;AAEJ;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,mBAAmB,WAAW;;AAE9B;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,YAAY;;AAEZ;;AAEA;;AAEA;;AAEA,EAAE;;AAEF;;AAEA;;AAEA,CAAC,EAAE,KAA0B,oE;;;;;;;;;;;;AChL7B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,qDAAqD;AACrD,OAAO;AACP;AACA,OAAO;AACP,4EAA4E;AAC5E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA4B,qBAAqB;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA,qCAAqC,0BAA0B;AAC/D;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,6BAA6B,0BAA0B,eAAe;AACtE;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","file":"ideas-on-map.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/ideas-on-map/index.jsx\");\n","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {};\n      params.bubbles = !!params.bubbles;\n      params.cancelable = !!params.cancelable;\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n","module.exports = require('es6-promise').Promise;\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   3.3.1\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  return typeof x === 'function' || typeof x === 'object' && x !== null;\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\nvar _isArray = undefined;\nif (!Array.isArray) {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n} else {\n  _isArray = Array.isArray;\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = undefined;\nvar customSchedulerFn = undefined;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && ({}).toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  return function () {\n    vertxNext(flush);\n  };\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var r = require;\n    var vertx = r('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = undefined;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var _arguments = arguments;\n\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n  if (_state) {\n    (function () {\n      var callback = _arguments[_state - 1];\n      asap(function () {\n        return invokeCallback(_state, child, callback, parent._result);\n      });\n    })();\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  _resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(16);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar GET_THEN_ERROR = new ErrorObject();\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    GET_THEN_ERROR.error = error;\n    return GET_THEN_ERROR;\n  }\n}\n\nfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        _resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      _reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      _reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    _reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return _resolve(promise, value);\n    }, function (reason) {\n      return _reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$) {\n  if (maybeThenable.constructor === promise.constructor && then$$ === then && maybeThenable.constructor.resolve === resolve) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$ === GET_THEN_ERROR) {\n      _reject(promise, GET_THEN_ERROR.error);\n    } else if (then$$ === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$)) {\n      handleForeignThenable(promise, maybeThenable, then$$);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction _resolve(promise, value) {\n  if (promise === value) {\n    _reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction _reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = undefined,\n      callback = undefined,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction ErrorObject() {\n  this.error = null;\n}\n\nvar TRY_CATCH_ERROR = new ErrorObject();\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = undefined,\n      error = undefined,\n      succeeded = undefined,\n      failed = undefined;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      _reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n      _resolve(promise, value);\n    } else if (failed) {\n      _reject(promise, error);\n    } else if (settled === FULFILLED) {\n      fulfill(promise, value);\n    } else if (settled === REJECTED) {\n      _reject(promise, value);\n    }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      _resolve(promise, value);\n    }, function rejectPromise(reason) {\n      _reject(promise, reason);\n    });\n  } catch (e) {\n    _reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction Enumerator(Constructor, input) {\n  this._instanceConstructor = Constructor;\n  this.promise = new Constructor(noop);\n\n  if (!this.promise[PROMISE_ID]) {\n    makePromise(this.promise);\n  }\n\n  if (isArray(input)) {\n    this._input = input;\n    this.length = input.length;\n    this._remaining = input.length;\n\n    this._result = new Array(this.length);\n\n    if (this.length === 0) {\n      fulfill(this.promise, this._result);\n    } else {\n      this.length = this.length || 0;\n      this._enumerate();\n      if (this._remaining === 0) {\n        fulfill(this.promise, this._result);\n      }\n    }\n  } else {\n    _reject(this.promise, validationError());\n  }\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n};\n\nEnumerator.prototype._enumerate = function () {\n  var length = this.length;\n  var _input = this._input;\n\n  for (var i = 0; this._state === PENDING && i < length; i++) {\n    this._eachEntry(_input[i], i);\n  }\n};\n\nEnumerator.prototype._eachEntry = function (entry, i) {\n  var c = this._instanceConstructor;\n  var resolve$$ = c.resolve;\n\n  if (resolve$$ === resolve) {\n    var _then = getThen(entry);\n\n    if (_then === then && entry._state !== PENDING) {\n      this._settledAt(entry._state, i, entry._result);\n    } else if (typeof _then !== 'function') {\n      this._remaining--;\n      this._result[i] = entry;\n    } else if (c === Promise) {\n      var promise = new c(noop);\n      handleMaybeThenable(promise, entry, _then);\n      this._willSettleAt(promise, i);\n    } else {\n      this._willSettleAt(new c(function (resolve$$) {\n        return resolve$$(entry);\n      }), i);\n    }\n  } else {\n    this._willSettleAt(resolve$$(entry), i);\n  }\n};\n\nEnumerator.prototype._settledAt = function (state, i, value) {\n  var promise = this.promise;\n\n  if (promise._state === PENDING) {\n    this._remaining--;\n\n    if (state === REJECTED) {\n      _reject(promise, value);\n    } else {\n      this._result[i] = value;\n    }\n  }\n\n  if (this._remaining === 0) {\n    fulfill(promise, this._result);\n  }\n};\n\nEnumerator.prototype._willSettleAt = function (promise, i) {\n  var enumerator = this;\n\n  subscribe(promise, undefined, function (value) {\n    return enumerator._settledAt(FULFILLED, i, value);\n  }, function (reason) {\n    return enumerator._settledAt(REJECTED, i, reason);\n  });\n};\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  _reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {function} resolver\n  Useful for tooling.\n  @constructor\n*/\nfunction Promise(resolver) {\n  this[PROMISE_ID] = nextId();\n  this._result = this._state = undefined;\n  this._subscribers = [];\n\n  if (noop !== resolver) {\n    typeof resolver !== 'function' && needsResolver();\n    this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n  }\n}\n\nPromise.all = all;\nPromise.race = race;\nPromise.resolve = resolve;\nPromise.reject = reject;\nPromise._setScheduler = setScheduler;\nPromise._setAsap = setAsap;\nPromise._asap = asap;\n\nPromise.prototype = {\n  constructor: Promise,\n\n  /**\n    The primary way of interacting with a promise is through its `then` method,\n    which registers callbacks to receive either a promise's eventual value or the\n    reason why the promise cannot be fulfilled.\n  \n    ```js\n    findUser().then(function(user){\n      // user is available\n    }, function(reason){\n      // user is unavailable, and you are given the reason why\n    });\n    ```\n  \n    Chaining\n    --------\n  \n    The return value of `then` is itself a promise.  This second, 'downstream'\n    promise is resolved with the return value of the first promise's fulfillment\n    or rejection handler, or rejected if the handler throws an exception.\n  \n    ```js\n    findUser().then(function (user) {\n      return user.name;\n    }, function (reason) {\n      return 'default name';\n    }).then(function (userName) {\n      // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n      // will be `'default name'`\n    });\n  \n    findUser().then(function (user) {\n      throw new Error('Found user, but still unhappy');\n    }, function (reason) {\n      throw new Error('`findUser` rejected and we're unhappy');\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n      // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n    });\n    ```\n    If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n  \n    ```js\n    findUser().then(function (user) {\n      throw new PedagogicalException('Upstream error');\n    }).then(function (value) {\n      // never reached\n    }).then(function (value) {\n      // never reached\n    }, function (reason) {\n      // The `PedgagocialException` is propagated all the way down to here\n    });\n    ```\n  \n    Assimilation\n    ------------\n  \n    Sometimes the value you want to propagate to a downstream promise can only be\n    retrieved asynchronously. This can be achieved by returning a promise in the\n    fulfillment or rejection handler. The downstream promise will then be pending\n    until the returned promise is settled. This is called *assimilation*.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // The user's comments are now available\n    });\n    ```\n  \n    If the assimliated promise rejects, then the downstream promise will also reject.\n  \n    ```js\n    findUser().then(function (user) {\n      return findCommentsByAuthor(user);\n    }).then(function (comments) {\n      // If `findCommentsByAuthor` fulfills, we'll have the value here\n    }, function (reason) {\n      // If `findCommentsByAuthor` rejects, we'll have the reason here\n    });\n    ```\n  \n    Simple Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let result;\n  \n    try {\n      result = findResult();\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n    findResult(function(result, err){\n      if (err) {\n        // failure\n      } else {\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findResult().then(function(result){\n      // success\n    }, function(reason){\n      // failure\n    });\n    ```\n  \n    Advanced Example\n    --------------\n  \n    Synchronous Example\n  \n    ```javascript\n    let author, books;\n  \n    try {\n      author = findAuthor();\n      books  = findBooksByAuthor(author);\n      // success\n    } catch(reason) {\n      // failure\n    }\n    ```\n  \n    Errback Example\n  \n    ```js\n  \n    function foundBooks(books) {\n  \n    }\n  \n    function failure(reason) {\n  \n    }\n  \n    findAuthor(function(author, err){\n      if (err) {\n        failure(err);\n        // failure\n      } else {\n        try {\n          findBoooksByAuthor(author, function(books, err) {\n            if (err) {\n              failure(err);\n            } else {\n              try {\n                foundBooks(books);\n              } catch(reason) {\n                failure(reason);\n              }\n            }\n          });\n        } catch(error) {\n          failure(err);\n        }\n        // success\n      }\n    });\n    ```\n  \n    Promise Example;\n  \n    ```javascript\n    findAuthor().\n      then(findBooksByAuthor).\n      then(function(books){\n        // found books\n    }).catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method then\n    @param {Function} onFulfilled\n    @param {Function} onRejected\n    Useful for tooling.\n    @return {Promise}\n  */\n  then: then,\n\n  /**\n    `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n    as the catch block of a try/catch statement.\n  \n    ```js\n    function findAuthor(){\n      throw new Error('couldn't find that author');\n    }\n  \n    // synchronous\n    try {\n      findAuthor();\n    } catch(reason) {\n      // something went wrong\n    }\n  \n    // async with promises\n    findAuthor().catch(function(reason){\n      // something went wrong\n    });\n    ```\n  \n    @method catch\n    @param {Function} onRejection\n    Useful for tooling.\n    @return {Promise}\n  */\n  'catch': function _catch(onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nfunction polyfill() {\n    var local = undefined;\n\n    if (typeof global !== 'undefined') {\n        local = global;\n    } else if (typeof self !== 'undefined') {\n        local = self;\n    } else {\n        try {\n            local = Function('return this')();\n        } catch (e) {\n            throw new Error('polyfill failed because global object is unavailable in this environment');\n        }\n    }\n\n    var P = local.Promise;\n\n    if (P) {\n        var promiseToString = null;\n        try {\n            promiseToString = Object.prototype.toString.call(P.resolve());\n        } catch (e) {\n            // silently ignored\n        }\n\n        if (promiseToString === '[object Promise]' && !P.cast) {\n            return;\n        }\n    }\n\n    local.Promise = Promise;\n}\n\npolyfill();\n// Strange compat..\nPromise.polyfill = polyfill;\nPromise.Promise = Promise;\n\nreturn Promise;\n\n})));\n//# sourceMappingURL=es6-promise.map","/*!\r\n * @name JavaScript/NodeJS Merge v1.2.1\r\n * @author yeikos\r\n * @repository https://github.com/yeikos/js.merge\r\n\r\n * Copyright 2014 yeikos - MIT license\r\n * https://raw.github.com/yeikos/js.merge/master/LICENSE\r\n */\r\n\r\n;(function(isNode) {\r\n\r\n\t/**\r\n\t * Merge one or more objects \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tvar Public = function(clone) {\r\n\r\n\t\treturn merge(clone === true, false, arguments);\r\n\r\n\t}, publicName = 'merge';\r\n\r\n\t/**\r\n\t * Merge two or more objects recursively \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tPublic.recursive = function(clone) {\r\n\r\n\t\treturn merge(clone === true, true, arguments);\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Clone the input removing any reference\r\n\t * @param mixed input\r\n\t * @return mixed\r\n\t */\r\n\r\n\tPublic.clone = function(input) {\r\n\r\n\t\tvar output = input,\r\n\t\t\ttype = typeOf(input),\r\n\t\t\tindex, size;\r\n\r\n\t\tif (type === 'array') {\r\n\r\n\t\t\toutput = [];\r\n\t\t\tsize = input.length;\r\n\r\n\t\t\tfor (index=0;index<size;++index)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t} else if (type === 'object') {\r\n\r\n\t\t\toutput = {};\r\n\r\n\t\t\tfor (index in input)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Merge two objects recursively\r\n\t * @param mixed input\r\n\t * @param mixed extend\r\n\t * @return mixed\r\n\t */\r\n\r\n\tfunction merge_recursive(base, extend) {\r\n\r\n\t\tif (typeOf(base) !== 'object')\r\n\r\n\t\t\treturn extend;\r\n\r\n\t\tfor (var key in extend) {\r\n\r\n\t\t\tif (typeOf(base[key]) === 'object' && typeOf(extend[key]) === 'object') {\r\n\r\n\t\t\t\tbase[key] = merge_recursive(base[key], extend[key]);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbase[key] = extend[key];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn base;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Merge two or more objects\r\n\t * @param bool clone\r\n\t * @param bool recursive\r\n\t * @param array argv\r\n\t * @return object\r\n\t */\r\n\r\n\tfunction merge(clone, recursive, argv) {\r\n\r\n\t\tvar result = argv[0],\r\n\t\t\tsize = argv.length;\r\n\r\n\t\tif (clone || typeOf(result) !== 'object')\r\n\r\n\t\t\tresult = {};\r\n\r\n\t\tfor (var index=0;index<size;++index) {\r\n\r\n\t\t\tvar item = argv[index],\r\n\r\n\t\t\t\ttype = typeOf(item);\r\n\r\n\t\t\tif (type !== 'object') continue;\r\n\r\n\t\t\tfor (var key in item) {\r\n\r\n\t\t\t\tif (key === '__proto__') continue;\r\n\r\n\t\t\t\tvar sitem = clone ? Public.clone(item[key]) : item[key];\r\n\r\n\t\t\t\tif (recursive) {\r\n\r\n\t\t\t\t\tresult[key] = merge_recursive(result[key], sitem);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tresult[key] = sitem;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Get type of variable\r\n\t * @param mixed input\r\n\t * @return string\r\n\t *\r\n\t * @see http://jsperf.com/typeofvar\r\n\t */\r\n\r\n\tfunction typeOf(input) {\r\n\r\n\t\treturn ({}).toString.call(input).slice(8, -1).toLowerCase();\r\n\r\n\t}\r\n\r\n\tif (isNode) {\r\n\r\n\t\tmodule.exports = Public;\r\n\r\n\t} else {\r\n\r\n\t\twindow[publicName] = Public;\r\n\r\n\t}\r\n\r\n})(typeof module === 'object' && module && typeof module.exports === 'object' && module.exports);","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class OpenStadComponent extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n    let self = this;\n\n    if (props.attributes) {\n      Object.keys(props.attributes).forEach((key) => {\n        let attribute = props.attributes[key];\n        self[attribute.name] = attribute.value;\n      });\n    }\n\n    self.config = self.config || props.config;\n\n    if (self.config) {\n      try {\n        self.config = JSON.parse(self.config);\n      } catch (err) {}\n    }\n\n    self.divId = self.divId || ( self.config && self.config.divId ) || props.id || `openstad-component-${  parseInt( 100000000 * Math.random() )}`;\n    \n    window[self.divId] = this;\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n    // let event = new Event('isReady');\n    // self.isReady = true;\n    // self.instance.dispatchEvent(event);\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentDefaultInput extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      choices: [],\n\t\t\tname: '',\n      placeholder: '',\n      disabled: false,\n      required: false,\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n      value: props.value,\n      error: null,\n\t\t};\n\n    this.onChange = props.onChange;\n\n  }\n\n\tvalidate({ showErrors }) {\n\t\tlet isValid = this.config.required ? !!this.state.value : true;\n    let error = '';\n    if (!isValid && showErrors) error = true;\n    this.setState({ isValid, error })\n\t\treturn isValid;\n\t}\n\n\thandleOnChange(data) {\n\t\tlet self = this;\n    data = data || {};\n\t\tself.setState(data, () => {\n      self.validate({});\n    })\n\t\tif (typeof self.onChange == 'function') {\n\t\t\tself.onChange({ name: self.config.name, value: data.value });\n\t\t}\n\t}\n\n}\n","import merge from 'merge';\n\n'use strict';\n\nimport OpenStadComponent from '../../component/index.jsx';\n\nimport OpenStadComponentImageUpload from './image-upload.jsx';\nimport OpenStadComponentInputWithCounter from './input-with-counter.jsx';\nimport OpenStadComponentPostcode from './postcode.jsx';\nimport OpenStadComponentSelect from './select.jsx';\nimport OpenStadComponentText from './textinput.jsx';\nimport OpenStadComponentTextArea from './textarea.jsx';\n\nexport default class OpenStadComponentFormField extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      inputType: null,\n\n      validateAction: null,\n      changeAction: null,\n      required: false,\n\n      title: null,\n      description: null,\n      choices: [],\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n    self.config.name = self.config.name || self.config.title.toLowerCase();\n\n    self.state = {\n      value: props.value || undefined,\n\t\t};\n\n    self.handleOnChange = self.handleOnChange.bind(self);\n\n    self.onChange = props.onChange;\n\n  }\n  \n\tvalidate({ showErrors }) {\n    return this.input ? this.input.validate({ showErrors }) : true;\n\t}\n\n\thandleOnChange(data) {\n    // console.log(\"form field change\", data);\n\t\tif (typeof this.onChange == 'function') {\n\t\t\tthis.onChange(data);\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let titleHTML = null;\n    if (self.config.title) {\n      titleHTML = <h3 className=\"osc-form-title\">{self.config.title}</h3>\n    }\n\n    let descriptionHTML = null;\n    if (self.config.description) {\n      descriptionHTML = <div className=\"osc-form-description\" dangerouslySetInnerHTML={{ __html: self.config.description }}></div>\n    }\n\n    let fieldHTML = null;\n\n    switch (self.config.inputType) {\n\n      case 'html-with-counter':\n      case 'htmlarea-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ ...self.config, inputType: 'htmlarea' }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'image-upload':\n        fieldHTML = <OpenStadComponentImageUpload config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'input-with-counter':\n      case 'text-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ inputType: 'input', ...self.config }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'postcode':\n        fieldHTML = <OpenStadComponentPostcode config={self.config} onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'select':\n      case 'multiple-choice':\n        fieldHTML = <OpenStadComponentSelect config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'text':\n        fieldHTML = <OpenStadComponentText config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'textarea':\n        fieldHTML = <OpenStadComponentTextArea config={self.config} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      case 'textarea-with-counter':\n        fieldHTML = <OpenStadComponentInputWithCounter config={{ ...self.config, inputType: 'textarea' }} value={ this.props.value || this.config.value } onChange={self.handleOnChange} ref={el => (self.input = el)}/>\n        break;\n\n      default:\n    }\n\n    return (\n\t\t\t<div id={self.id} ref={el => (self.instance = el)} className=\"osc-form-field\">\n\t\t\t\t{titleHTML}\n\t\t\t\t{descriptionHTML}\n\t\t\t\t{fieldHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\n\n'use strict';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentFormField from './form-field.jsx';\n\nexport default class OpenStadComponentForm extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      // validateAction: null,\n      // submitAction: null,\n      title: null,\n      intro: null,\n      fields: [],\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n      values: props.values|| {},\n\t\t};\n\n    self.handleOnChange = self.handleOnChange.bind(this);\n\n    self.fields = [];\n\n  }\n  \n\tgetValues() {\n    return this.state.values;\n\t}\n\n\tvalidate({ showErrors }) {\n    let self= this;\n    let isValid = true;\n    let firstInvalid = null\n    self.fields.forEach((field) => {\n      if (!field.validate({ showErrors })) {\n        isValid = false;\n        if (!firstInvalid) firstInvalid = field;\n      }\n    });\n\n    if (firstInvalid && firstInvalid.instance && firstInvalid.instance.scrollIntoView) firstInvalid.instance.scrollIntoView({behavior: 'smooth'});\n    // console.log(isValid);\n    return isValid;    \n\n\t}\n\n\thandleOnChange(data) {\n    // console.log(\"formchange\", data);\n    let self = this;\n    let values = { ...this.state.values };\n    values[data.name] = data.value;\n\t\tthis.setState({ values });\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let titleHTML = null;\n    if (self.config.title) {\n      titleHTML = <h2 className=\"osc-form-title\">{self.config.title}</h2>\n    }\n\n    let introHTML = null;\n    if (self.config.intro) {\n      introHTML = <div className=\"osc-form-intro\" dangerouslySetInnerHTML={{ __html: self.config.intro }}></div>\n    }\n\n    let fieldsHTML = null;\n    if (self.config.fields && self.config.fields.length) {\n      fieldsHTML =\n        <div className=\"osc-form-fields\">\n          { self.config.fields.map((fieldConfig, i) => {\n            return <OpenStadComponentFormField config={fieldConfig} onChange={self.handleOnChange} ref={el => (self.input = el)} key={`osc-form-field-${i}`}  ref={el => { self.fields[i] = el; }}/>\n          })}\n        </div>\n    }\n\n    return (\n\t\t\t<div id={self.divId} className=\"osc-form\" ref={el => (self.instance = el)}>\n\t\t\t\t{titleHTML}\n\t\t\t\t{introHTML}\n\t\t\t\t{fieldsHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// TODO: it is probably not ok to write your own html editor, but after intergrating ckeditor or react-rte the build was (more than) twice as large; a bettter solution must be possible\n\n'use strict';\n\nexport default class OpenStadComponentHTMLArea extends React.Component  {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: this.props.value,\n\t  };\n\n    this.onKeyUpx = this.onKeyUpx.bind(this);\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    let value = this.props.value;\n    value = this.filterHTML(value);\n    this.input.innerHTML = value;\n  }\n\n  filterHTML(value) {\n    value = value.replace(/<(\\/?\\s*(?:a [^>]+|a|b|i|strong|em|p|div|br|ul|li)\\s*\\/?)>/g, \"[[[$1]]]\");\n    value = value.replace(/<[^>]+>/g, \"\");\n    value = value.replace(/\\[\\[\\[([^\\]]+)\\]\\]\\]/g, \"<$1>\");\n    return value;\n  }\n\n  executeAction(e, command, args) {\n    e.preventDefault()\n    e.stopPropagation();\n    document.execCommand(command,false,args);\n    this.onKeyUp();\n  }\n  \n  onFocus(e) {\n    if (this.props.onFocus) {\n      this.props.onFocus(e);\n    }\n  }\n\n  onBlur(e) {\n    if (this.props.onBlur) {\n      this.props.onBlur(e);\n    }\n    if (this.props.onChange) {\n      this.props.onChange({ value: this.state.value });\n    }\n  }\n\n  onKeyUpx() {\n    let value = this.input.innerHTML;\n    value = this.filterHTML(value);\n    this.setState({ value })\n    if (this.props.onKeyUp) {\n      this.props.onKeyUp(value);\n    }\n  }\n  \n  render () {\n    return (\n      <div className=\"osc-html-editor\">\n        <div className=\"osc-html-editor-buttons\">\n          <div className=\"osc-html-editor-button osc-html-editor-button-bold\" onMouseDown={e => this.executeAction(e, 'bold')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-italic\" onMouseDown={e => this.executeAction(e, 'italic')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-insertunorderedlist\" onMouseDown={e => this.executeAction(e, 'insertunorderedlist')}>&nbsp;</div>\n          <div className=\"osc-html-editor-button osc-html-editor-button-createlink\" onMouseDown={e => this.executeAction(e, 'createlink', prompt('Lank naar','http://'))}>&nbsp;</div>\n        </div>\n        <div className=\"osc-html-editor-content\" contentEditable={true}\n             onFocus={ e => this.onFocus(e)}\n             onBlur={ e => this.onBlur(e)}\n             onKeyUp={ e => this.onKeyUpx()}\n             // dangerouslySetInnerHTML={{ __html: this.state.value }}\n             ref={el => (this.input = el)}\n        />\n      </div>\n    );\n  }\n\n}\n\nfunction EditButton(props) {\n  return (\n    <button\n      key={props.cmd}\n      onMouseDown={evt => {\n        evt.preventDefault(); // Avoids loosing focus from the editable area\n        document.execCommand(props.cmd, false, props.arg); // Send the command to the browser\n      }}\n    >\n      {props.name || props.cmd}\n    </button>\n  );\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n\t\t\timageserver: {\n\t\t\t\tprocess: '',\n\t\t\t\tfetch: ''\n\t\t\t},\n    };\n\t\tthis.config = merge.recursive(defaultConfig, this.props.config, this.config || {});\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    // filepond files\n\t\tthis._loadedFiles = 0;\n    this.files = [\n      \"https://unpkg.com/filepond/dist/filepond.js\",\n      \"https://unpkg.com/filepond-polyfill/dist/filepond-polyfill.js\",\n      \"https://unpkg.com/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js\",\n      \"https://unpkg.com/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js\",\n      \"https://unpkg.com/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.js\",\n      \"https://unpkg.com/filepond-plugin-file-poster/dist/filepond-plugin-file-poster.js\",\n    ];\n    this.loadNextFile();\n\t}\n  \n  loadNextFile() {\n    var self = this;\n    var file = self.files[self._loadedFiles];\n    if (file) {\n\t\t\tlet element;\n\t\t\telement = document.createElement('script');\n\t\t\telement.src = file;\n\t\t\telement.async = true;\n\t\t\tif (element) {\n\t\t\t\telement.onload = function() {\n          self.loadNextFile();\n\t\t\t\t}\n\t\t\t\tdocument.body.appendChild(element);\n\t\t\t}\n    }\n\t\tif (self._loadedFiles == self.files.length) {\n      self.fileUploaderInit()\n    }\n\t\tself._loadedFiles++;\n  }\n\n  validate() {\n    let isValid = true;\n\t\tif ( this.imageuploader && this.imageuploader.getFiles ) {\n\t\t\tvar images = this.imageuploader.getFiles();\n\t\t\timages.forEach(function(image) {\n\t\t\t\tif (!image.serverId) {\n\t\t\t\t\tisValid = false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n    return isValid;\n  }\n\n  fileUploaderInit() {\n\n    let self = this;\n\n\t\tvar containerElement = document.querySelector('.osc-image-upload-container');\n\t\tif (containerElement) {\n\t\t\tFilePond.registerPlugin(FilePondPluginImagePreview);\n\t\t\tFilePond.registerPlugin(FilePondPluginFileValidateSize);\n\t\t\tFilePond.registerPlugin(FilePondPluginFileValidateType);\n\t\t\tFilePond.registerPlugin(FilePondPluginFilePoster);\n\n\t\t\t// FilePond.setOptions({\n\t\t\t//   server: 'https://image-server2.openstadsdeel.nl/image/?access_token=MHhfb5U0m8vquAR81p',\n\t\t\t// });\n      \n\t\t\tvar filePondSettings = {\n\t\t\t\t// set allowed file types with mime types\n\t\t\t\tacceptedFileTypes: ['image/*'],\n\t\t\t\tallowFileSizeValidation: true,\n\t\t\t\tmaxFileSize: '8mb',\n\t\t\t\tname: 'image',\n\t\t\t\tmaxFiles: 3,\n\t\t\t\tallowBrowse: true,\n\t\t\t\tfiles: [],\n\t\t\t\tserver: {\n\t\t\t\t\tprocess: this.config.imageserver.process,\n\t\t\t\t\tfetch: this.config.imageserver.fetch,\n\t\t\t\t},\n\t\t\t\timageResizeTargetWidth: 80,\n\t\t\t\timageResizeTargetHeight: 80,\n\t\t\t\timageCropAspectRatio: '1:1',\n\t\t\t\tlabelIdle: \"Sleep afbeelding(en) naar deze plek of <span class='filepond--label-action'>KLIK HIER</span>\",\n\t\t\t\tlabelInvalidField: \"Field contains invalid files\",\n\t\t\t\tlabelFileWaitingForSize: \"Wachtend op grootte\",\n\t\t\t\tlabelFileSizeNotAvailable: \"Grootte niet beschikbaar\",\n\t\t\t\tlabelFileCountSingular: \"Bestand in lijst\",\n\t\t\t\tlabelFileCountPlural: \"Bestanden in lijst\",\n\t\t\t\tlabelFileLoading: \"Laden\",\n\t\t\t\tlabelFileAdded: \"Toegevoegd\", // assistive only\n\t\t\t\tlabelFileLoadError: \"Fout bij het uploaden\",\n\t\t\t\tlabelFileRemoved: \"Verwijderd\", // assistive only\n\t\t\t\tlabelFileRemoveError: \"Fout bij het verwijderen\",\n\t\t\t\tlabelFileProcessing: \"Laden\",\n\t\t\t\tlabelFileProcessingComplete: \"Afbeelding geladen\",\n\t\t\t\tlabelFileProcessingAborted: \"Upload cancelled\",\n\t\t\t\tlabelFileProcessingError: \"Error during upload\",\n\t\t\t\tlabelFileProcessingRevertError: \"Error during revert\",\n\t\t\t\tlabelTapToCancel: \"tap to cancel\",\n\t\t\t\tlabelTapToRetry: \"tap to retry\",\n\t\t\t\tlabelTapToUndo: \"tap to undo\",\n\t\t\t\tlabelButtonRemoveItem: \"Verwijderen\",\n\t\t\t\tlabelButtonAbortItemLoad: \"Abort\",\n\t\t\t\tlabelButtonRetryItemLoad: \"Retry\",\n\t\t\t\tlabelButtonAbortItemProcessing: \"Verwijder\",\n\t\t\t\tlabelButtonUndoItemProcessing: \"Undo\",\n\t\t\t\tlabelButtonRetryItemProcessing: \"Retry\",\n\t\t\t\tlabelButtonProcessItem: \"Upload\"\n\t\t\t}\n\n      self.imageuploader = FilePond.create(containerElement, filePondSettings);\n\t\t\tvar sortableInstance;\n\t\t\tvar pondEl = document.querySelector('.filepond--root');\n\n      // tmp\n      //self.state.value = [\"https://image-server.staging.openstadsdeel.nl/image/85ef5669d9a5db2f0ec2adb6310620be\"]\n      //self.props.handleFieldChange(self.props.name, self.state.value )\n\n\t\t\tdocument.querySelector('.filepond--root').addEventListener('FilePond:processfile', e => {\n\t\t\t\tif (e.detail && e.detail.error) {\n\t\t\t\t\tconsole.log('Error uploding file: ', e.detail);\n\t\t\t\t}\n\t\t\t\tself.fileUploaderUpdateCurrentInput()\n\t\t\t});\n\t\t\t\n\t\t\tdocument.querySelector('.filepond--root').addEventListener('FilePond:removefile', e => {\n\t\t\t\tif (e.detail && e.detail.error) {\n\t\t\t\t\tconsole.log('Error uploding file: ', e.detail);\n\t\t\t\t}\n\t\t\t\tself.fileUploaderUpdateCurrentInput()\n\t\t\t});\n\n\t\t\tif (self.state.formfields) {\n\t\t\t\tself.imageuploader.addFiles(self.state.formfields.images)\n\t\t\t}\n\n\t\t}\n\n\t}\n\n  fileUploaderUpdateCurrentInput() {\n    let self = this;\n\t\tself.state.value = [];\n\t\tif ( this.imageuploader && this.imageuploader.getFiles ) {\n\t\t\tvar images = this.imageuploader.getFiles();\n\t\t\timages.forEach((image) => {\n\t\t\t\ttry {\n\t\t\t\t\tvar serverId = JSON.parse(image.serverId)\n\t\t\t\t\tself.state.value.push(serverId.url)\n\t\t\t\t} catch(err) { console.log(err) }\n\t\t\t});\n\t\t}\n    self.props.onChange({name: self.config.name, value: self.state.value})\n\t}\n\n  fileUploaderUploaderAddImages(images) {\n    let self = this;\n\n\t\tif (this.imageuploader) {\n\t\t\tthis.imageuploader.addFiles(images)\n\t\t}\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen afbeelding geupload</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-image-upload-container\">\n\t\t\t\t<input type=\"file\" className=\"imageUploader-gebiedstool filepond-gebiedstool\"/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n//import CKEditor from '@ckeditor/ckeditor5-react';\n//import ClassicEditor from '@ckeditor/ckeditor5-build-classic';\nimport HTMLArea from './htmlarea.jsx';\n\n'use strict';\n\nexport default class FormfieldInputWithCounter extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n\t\tlet self = this;\n\t\tself.id = props.id || 'osc-formfields-plaintext-with-counter-' + parseInt( 1000000 * Math.random() )\n\n\t\tself.defaultConfig = {\n\t\t\tname: 'tekst',\n\t\t\tinputType: 'input',\n\t\t\tminLength: 5,\n\t\t\tmaxLength: 10,\n      placeholder: '',\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    self.state = {\n\t\t\tfocused: false,\n      value: props.value || '',\n\t\t\tvalueLength: props.value && props.value.length || 0,\n\t\t};\n\n    self.key = props.useKey || ( self.id || 'osc-input-with-counter-' ) + parseInt( 10000000 * Math.random );\n\n    this.onChange = props.onChange;\n\n    self.handleOnChange = self.handleOnChange.bind(this)\n    self.onInputFocus = self.onInputFocus.bind(this)\n    self.onInputBlur = self.onInputBlur.bind(this)\n    self.onInputKeyUp = self.onInputKeyUp.bind(this)\n\n  }\n\n\tisValid() {\n\t\tlet state = {};\n\t\tstate.isValid = true;\n\t\tstate.warning = null;\n\t\tif (this.state.valueLength < this.config.minLength) {\n\t\t\tstate.warning = `De tekst is te kort`;\n\t\t\tstate.isValid = false;\n\t\t}\n\t\tif (this.state.valueLength > this.config.maxLength) {\n\t\t\tstate.warning = `De tekst is te lang`;\n\t\t\tstate.isValid = false;\n\t\t}\n\t\tthis.setState(state)\n\t\treturn state.isValid;\n  }\n\n\tvalidate() {\n\t\tthis.setState({ showWarning: true })\n\t\treturn this.isValid();\n\t}\n  \n\thandleOnChange(data) {\n    data = data || {};\n\t\tthis.setState(data)\n\t\tif (typeof this.onChange == 'function') {\n\t\t\tthis.onChange({ name: this.config.name, value: data.value });\n\t\t}\n\t}\n\n\tonInputFocus() {\n\t\tlet state = {};\n\t\tstate.focused = true;\n\t\tstate.showWarning = false;\n\t\tthis.setState(state)\n\t}\n\n\tonInputBlur() {\n\t\tlet state = {};\n\t\tstate.focused = false;\n\t\tthis.setState(state)\n\t}\n\n\tonInputKeyUp(value) {\n\t\tlet state = {};\n\t\tstate.value = value || this.input.value;\n\t\tlet valueLength = state.value.length;\n\t\tstate.valueLength = valueLength;\n\t\tstate.isValid = valueLength >= this.config.minLength && valueLength <= this.config.maxLength;\n\t\tthis.setState(state)\n\t}\n\n\trender() {\n\n\t\tlet self = this;\n\n\t\tlet counter = null;\n\t\tlet warning = null;\n\t\tif (self.state.focused) {\n\t\t\tif (self.state.valueLength < self.config.minLength) {\n\t\t\t\tcounter = (<div className=\"osc-form-counter osc-form-error\">Nog minimaal <span className=\"\">{self.config.minLength - self.state.valueLength}</span> tekens</div>)\n\t\t\t} else {\n\t\t\t\tlet error = self.state.valueLength > self.config.maxLength ? 'osc-form-error' : '';\n\t\t\t\tcounter = (<div className={'osc-form-counter ' + error}>Je hebt nog <span className=\"\">{self.config.maxLength - self.state.valueLength}</span> tekens over.</div>)\n\t\t\t}\n\t\t}\n\n\t\tif (self.state.showWarning && self.state.warning) {\n\t\t\twarning = (<div className=\"osc-form-warning\" ref={ el => this['form-warning'] = el  }>{self.state.warning}</div>)\n\t\t}\n\n    let inputHTML = null;\n\n    switch(self.config.inputType) {\n        \n      case 'htmlarea':\n        inputHTML = (\n          <HTMLArea\n            value={this.state.value}\n            onChange={self.handleOnChange}\n            onFocus={self.onInputFocus}\n            onBlur={self.onInputBlur}\n            onKeyUp={self.onInputKeyUp}\n          />\n        );\n        // inputHTML = (\n        //   <CKEditor\n        //     editor={ ClassicEditor }\n        //     config={{ toolbar: [ 'h3', 'bold', 'italic', 'link' ] }}\n        //     data={this.props.value}\n        //     onInit={ editor => {\n        //       // TODO: betere selector\n        //       document.querySelector('.ck-content').addEventListener('keyup', function(e) {\n        //         self.onInputKeyUp(e, editor.getData())\n        //       })\n        //     }}\n        //     onChange={( event, editor ) => self.handleOnChange({ value: editor.getData() })}\n        //     onFocus={e => self.onInputFocus(e)}\n        //     onBlur={e => self.onInputBlur(e)}\n        //   />\n        // );\n        break;\n        \n      case 'textarea':\n        inputHTML = (\n\t\t\t\t  <textarea key={self.key} ref={el => (self.input = el)} value={this.state.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} onKeyUp={e => self.onInputKeyUp()} onFocus={e => self.onInputFocus(e)} onBlur={e => self.onInputBlur(e)}></textarea>\n        );\n        break;\n\n      case 'input':\n      default:\n        inputHTML = (\n\t\t\t\t  <input key={self.key} ref={el => (self.input = el)} value={this.state.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} onKeyUp={e => self.onInputKeyUp()} onFocus={e => self.onInputFocus(e)} onBlur={e => self.onInputBlur(e)}></input>\n        );\n\n    }\n\t\t\n    return (\n\t\t\t<div id={self.id} ref={el => (self.instance = el)} className=\"osc-input-with-counter\">\n\t\t\t\t<div className=\"osc-form-feedback\">\n\t\t\t\t\t{inputHTML}\n\t\t\t\t\t{counter}\n\t\t\t\t\t{warning}\n\t\t\t\t</div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentPostcode extends OpenStadComponentDefaultInput {\n\n\tvalidate({ showErrors }) {\n    \n\t\tlet isValid = true;\n    let error = '';\n    if (!this.state.value || !this.state.value.match(/^\\s*\\d{4}\\s*[a-zA-Z][a-zA-Z]\\s*$/)) {\n      isValid = false;\n      if (showErrors) error = 'Dit is geen postcode';\n    }\n    if (this.config.required && !this.state.value) {\n      isValid = false;\n      if (showErrors) error = 'Je hebt nog niets ingevuld';\n    }\n    this.setState({ isValid, error })\n\t\treturn isValid;\n\t}\n\n  render() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">{self.state.error}</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textinput\">\n\t\t\t  <input type=\"text\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentRadios extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen keuze gemaakt</div>)\n    }\n\n    return (\n\t\t\t<div className=\"osc-radios\">\n        {self.config.choices.map( choice => {\n          if (choice.dangerousDescription) {\n            return <div className=\"osc-radio-container\" key={choice.value}><div className={`osc-radio-input${ self.state.value == choice.value ? ' osc-radio-input-checked' : ''}`}><input type=\"radio\" name={self.divId} value={choice.value} onChange={e => self.handleOnChange({ value: choice.value })} /></div><div className=\"osc-radio-text\" dangerouslySetInnerHTML={{ __html: choice.dangerousDescription }}/></div>\n          } else {\n            return <div className=\"osc-radio-container\" key={choice.value}><div className={`osc-radio-input${ self.state.value == choice.value ? ' osc-radio-input-checked' : ''}`}><input type=\"radio\" name={self.divId} value={choice.value} onChange={e => self.handleOnChange({ value: choice.value })} /></div><div className=\"osc-radio-text\">{choice.dangerousDescription ? null : choice.description || choice.title || choice.value}</div></div>\n          }\n        })}\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n  componentDidMount() {\n    // init value\n    let value = this.state.value || ( this.config.choices[0] && this.config.choices[0].value );\n    this.handleOnChange({ value })\n  }\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog geen keuze gemaakt</div>)\n    }\n\n    return (\n\t\t\t<div className=\"osc-select\">\n\t\t\t  <select value={this.state.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}>\n          {self.config.choices.map( choice => {\n            return <option value={choice.value} key={choice.value}>{choice.description || choice.title || choice.value}</option>\n          })}\n        </select>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import React from \"react\"\n\nclass Slider extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      value: this.props.value,\n      touched: this.props.touched || false,\n    }\n    this.handleChange = this.handleChange.bind(this)\n  }\n\n  handleChange(event) {\n    const { value } = event.target\n\n    if(typeof this.props.onChange === 'function'){\n      this.props.onChange(value)\n    }\n    \n    this.setState({value, touched: true})\n  }\n\n  doTouch() {\n\n    if(typeof this.props.onChange === 'function'){\n      this.props.onChange(50)\n    }\n\n    this.setState({touched: true})\n\n  }\n\n  calcProgress(min, max, value) {\n    const range = max - min\n    const progInRange = value - min\n    return ((progInRange*2)/range)-1\n  }\n\n  render(){\n    let self = this;\n    const { value, touched } = self.state\n    const { min, max, step } = self.props\n    return(\n      <div className={`${self.props.className} osc-slider`}>\n        <div className=\"osc-slider-track-container\">\n          <div className=\"osc-slider-track\"></div>\n          <div className=\"osc-slider-track-progress-container\">\n            <div className=\"osc-slider-track-progress\" style={{ transform: 'scaleX(' + self.calcProgress(min, max, value) + ')' }}></div>\n          </div>\n          <div className=\"osc-slider-track-dot-end osc-slider-track-dot-left\"></div>\n          <div className=\"osc-slider-track-dot-start osc-slider-track-dot-center\"></div>\n          <div className=\"osc-slider-track-dot-end osc-slider-track-dot-right\"></div>\n        </div>\n        <input type='range' min={min} max={max} step={step} value={value} onClick={() => { if (!touched) self.doTouch(); } } onChange={self.handleChange} className={touched ? 'osc-slider-input-range' : 'osc-slider-input-range osc-slider-untouched'} ref={el => (self.input = el)}/>\n      </div>\n    )\n  }\n}\n\nexport default Slider;\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog niets ingevuld</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textarea\">\n\t\t\t  <textarea value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}>{this.state.value}</textarea>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n'use strict';\n\nimport OpenStadComponentDefaultInput from './default-input.jsx';\n\nexport default class OpenStadComponentSelect extends OpenStadComponentDefaultInput {\n\n\trender() {\n\n\t\tlet self = this;\n\n    let errorHTML = null;\n    if (self.state.error) {\n      errorHTML = (<div className=\"osc-form-error\">Je hebt nog niets ingevuld</div>)\n    }\n    \n    return (\n\t\t\t<div className=\"osc-textinput\">\n\t\t\t  <input type=\"text\" value={this.props.value} disabled={this.props.disabled} placeholder={this.config.placeholder} onChange={e => self.handleOnChange({ value: self.input.value })} ref={el => (self.input = el)}/>\n        {errorHTML}\n\t\t  </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\n//import 'core-js/es/map';\n//import 'core-js/es/set';\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport Form from './component/form.jsx';\nimport FormField from './component/form-field.jsx';\nimport ImageUpload from './component/image-upload.jsx';\nimport InputWithCounter from './component/input-with-counter.jsx';\nimport Postcode from './component/postcode.jsx';\nimport Radios from './component/radios.jsx';\nimport Select from './component/select.jsx';\nimport Text from './component/textinput.jsx';\nimport Textarea from './component/textarea.jsx';\nimport Slider from './component/slider.jsx';\nexport default {\n  Form,\n  FormField,\n  ImageUpload,\n  InputWithCounter,\n  Postcode,\n  Radios,\n  Select,\n  Text,\n  Textarea,\n  Slider,\n}\n\n// render the base element\n// function renderElement( elem, config ) {\n//   let attributes = elem.attributes;\n//   ReactDOM.render( <OpenStadComponentReactions attributes={attributes} config={config}/>, elem)\n// }\n// export {renderElement}\n\n","import merge from 'merge';\nimport React from 'react';\nimport VoteButton from './vote-button.jsx';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentPoll from '../../poll/index.jsx';\nimport OpenStadComponentReactions from '../../reactions/index.jsx';\n\n'use strict';\n\nexport default class IdeasDetails extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      user: {},\n\t\t\tapi: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      argument: {\n        isActive: true,\n      },\n      poll: {\n        canAddPoll: false,\n      },\n      showVoteButtons: true,\n      labels: {},\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      idea: this.props.idea,\n      ideaId: ( props.idea && props.idea.id ) || this.config.ideaId,\n      showPollForm: false,\n    };\n        \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n    \n\t\tself.reactionStoredListener = function(event) {\n      self.onReactionStored(event.detail);\n    }\n    document.addEventListener('osc-reaction-stored', self.reactionStoredListener);\n\n\t\tself.reactionDeletedListener = function(event) {\n      self.onReactionDeleted(event.detail);\n    }\n    document.addEventListener('osc-reaction-deleted', self.reactionDeletedListener);\n    \n\t\tself.pollCreatedListener = function(event) {\n      self.onPollCreated(event.detail);\n    }\n    document.addEventListener('osc-new-poll-stored', self.pollCreatedListener);\n    \n\t\tself.pollDeletedListener = function(event) {\n      self.onPollDeleted(event.detail);\n    }\n    document.addEventListener('osc-poll-deleted', self.pollDeletedListener);\n\n    self.fetchData();\n\n\t}\n\n  componentWillUnmount() {\n\t\tdocument.removeEventListener('osc-reaction-stored', this.reactionStoredListener);\n\t\tdocument.removeEventListener('osc-reaction-deleted', this.reactionDeletedListener);\n\t\tdocument.removeEventListener('osc-new-poll-stored', this.pollCreatedListener);\n\t\tdocument.removeEventListener('osc-poll-deleted', this.pollDeletedListener);\n  }\n\n  dispatchEditIdeaClick(e) {\n    e.stopPropagation();\n    if ( this.config.editIdeaLink ) {\n      document.location.href = this.config.editIdeaLink;\n    } else {\n\t\t  var event = new window.CustomEvent('osc-edit-idea-click', { detail: this.state.idea });\n\t\t  document.dispatchEvent(event);\n    }\n  };\n\n  showPollForm() {\n    this.setState({\n      showPollForm: true\n    })\n  }\n\n  hidePollForm() {\n    this.setState({\n      showPollForm: false\n    })\n  }\n\n  dispatchAddPollClick(e) {\n    e.stopPropagation();\n    this.showPollForm();\n  }\n  \n  onReactionStored(data) {\n    this.state.idea.argCount++;\n    this.setState({ idea: this.state.idea });\n  }\n\n  onReactionDeleted(data) {\n    this.state.idea.argCount--;\n    this.setState({ idea: this.state.idea });\n  }\n\n  onPollCreated() {\n    this.hidePollForm();\n    this.fetchData();\n  }\n\n  onPollDeleted() {\n    this.fetchData();\n  }\n  \n  fetchData() {\n\n    let self = this;\n\n    let ideaId = self.state.ideaId || (this.state.idea && this.state.idea.id);\n\n    if (!ideaId) return;\n\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea/${ ideaId }?includeVoteCount=1&includeArguments=1&includeUser=1&includeUserVote=1`;\n    if (self.config.poll.canAddPoll) url += '&includePoll=1';\n\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\t\t\n    fetch(url, { headers })\n      .then((response) => {\n        if (!response.ok) throw Error('Error fechting detail');\n        return response.json();\n      })\n      .then( json => {\n\n        let idea = json;\n        idea.image = (idea.posterImage && idea.posterImage.key) || (idea.extraData && idea.extraData.images && idea.extraData.images[0]) || \"https://stemvanwest.amsterdam.nl/img/placeholders/idea.jpg\";\n        self.setState({ idea }, function() {\n          if(OpenStadComponentLibs.localStorage.get('osc-reactions-login-pending')) {\n            window.location.hash = `#reactions`;\n            OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', false)\n          }\n        });\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  deleteIdea() {\n\n    let self = this;\n\n    if (!( self.config.user && self.config.user.role && self.config.user.role == 'admin' )) return;\n    if (!( this.state.idea || this.state.idea.id )) return;\n\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea/${ this.state.idea.id }`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let ideaId = this.state.idea.id; // backup\n\t\t\n    fetch(url, {\n      method: 'DELETE',\n      headers\n    })\n      .then((response) => {\n        if (!response.ok) throw Error('Error deleting idea');\n        return response.json();\n      })\n      .then( json => {\n        if ( this.config.afterDeleteIdeaLink ) {\n          document.location.href = this.config.afterDeleteIdeaLink;\n        } else {\n\t\t      var event = new window.CustomEvent('osc-idea-deleted', { detail: { ideaId } });\n\t\t      document.dispatchEvent(event);\n        }\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n\trender() {\n\n    let self = this;\n    let idea = self.state.idea;\n\n    if (!idea) return null;\n\n    let labelHTML = null;\n    if (self.config.labels && self.props.label && self.config.labels[ self.props.label ]) {\n      // console.log(self.config.labels[ self.props.label ]);\n      let color = self.config.labels[ self.props.label ].color || 'white';\n      let backgroundColor = self.config.labels[ self.props.label ].backgroundColor || '#164995';\n      let text = self.config.labels[ self.props.label ].text;\n      labelHTML = (\n        <div className=\"ocs-idea-label\" style={{ color, backgroundColor }}>{text}</div>\n      );\n    }\n\n    let pollHTML = null;\n    let addPollButtonHTML = null;\n    if (idea.can && idea.can.edit && self.config.poll.canAddPoll) {\n      if (idea.poll || self.state.showPollForm) {\n        pollHTML = (\n        <div>\n\t\t\t    <div id=\"poll\" className=\"osc-poll-header\"><h3>{self.config.poll.title || 'Poll'}</h3></div>\n          <OpenStadComponentPoll config={{ ...self.config, ...self.config.poll, ideaId: self.state.ideaId }} poll={idea.poll}/>\n        </div>\n        )\n      } else {\n        addPollButtonHTML = (\n          <div className=\"osc-editbuttons-container\">\n            <button className=\"osc-idea-details-editbutton osc-edit\" onClick={(event) => self.dispatchAddPollClick(event)}>Add poll</button>\n          </div>\n        )\n      }\n    }\n\n    let voteButtonsHTML = null;\n    if (self.config.showVoteButtons) {\n      voteButtonsHTML = (\n        <div className=\"osc-details-vote-buttons-container\">\n          <h3>Likes</h3>\n          <VoteButton config={{ text: 'eens', opinion: 'yes', api: this.config.api, user: this.config.user, siteId: this.config.siteId }} idea={this.state.idea} name=\"likebutton\" value={idea.yes}/>\n        </div>\n      );\n    }\n\n    let editButtonsHTML = null;\n    if ( idea.can && idea.can.edit ) {\n      editButtonsHTML = (\n        <div className=\"osc-editbuttons-container\">\n          <button className=\"osc-idea-details-editbutton osc-edit\" onClick={(event) => self.dispatchEditIdeaClick(event)}>Bewerk idee</button>\n          <button className=\"osc-idea-details-editbutton osc-delete\" onClick={(event) => { if ( confirm('Weet je het zeker') ) self.deleteIdea(event) }}>Verwijder idee</button>\n        </div>\n      );\n\n    }\n\n    let modBreakHTML = null;\n    if (idea && idea.modBreak) {\n      modBreakHTML= (\n        <div className=\"osc-modbreak\">\n          {idea.modBreakDateHumanized}<br/>\n          <br/>\n          {idea.modBreak}\n        </div>\n      );\n    }\n\n    let reactionsCountHTML = null;\n    if ( self.config.argument.isActive ) {\n      reactionsCountHTML = (\n        <div>\n          <h3>Reacties</h3>\n          <a href=\"#reactions\" className=\"osc-no-of-reactions\">{idea.argCount || 0} reacties</a>\n        </div>\n      );\n    }\n\n    let reactionsHTML = null;\n    if ( self.config.argument.isActive ) {\n      reactionsHTML = (\n        <div>\n\t\t\t    <div id=\"reactions\" className=\"osc-reactions-header\"><h3>{self.config.argument.title || 'Reacties'}</h3></div>\n          <OpenStadComponentReactions config={{ ...self.config.argument, title: undefined, api: self.config.api, user: self.config.user, siteId: self.config.siteId, ideaId: idea.id }}/>\n        </div>\n      );\n    }\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-idea-details'} ref={el => (self.instance = el)}>\n\n\t\t\t  <div className=\"osc-spacer\"></div>\n\n\t\t\t  <div className=\"osc-idea-details-container\">\n\t\t\t    <div className=\"osc-idea-details\">\n\n\t\t\t\t    <h2>{eval(`idea.${self.config.titleField}`)}</h2>\n\n            <div className=\"osc-details-image-and-stats\">\n\n              <div className=\"osc-image-container\">\n                <div className=\"osc-image\" style={{ backgroundImage: `url(${idea.image})` }}></div>\n              </div>\n\n              {labelHTML}\n\n              <div className=\"osc-details-sharebuttons\">\n                <ul>\n\t\t\t\t\t\t\t    <li><a className=\"osc-share-facebook\" target=\"_blank\" href={ 'https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.location.href) }>Facebook</a></li>\n\t\t\t\t\t\t\t    <li><a className=\"osc-share-twitter\" target=\"_blank\" href={ 'https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.location.href) }>Twitter</a></li>\n\t\t\t\t\t\t\t    <li><a className=\"osc-share-email\" target=\"_blank\" href={ 'mailto:?subject=' + encodeURIComponent(eval(`idea.${self.config.titleField}`)) + '&body=' + encodeURIComponent(document.location.href)}>Email</a></li>\n\t\t\t\t\t\t\t    <li><a className=\"osc-share-whatsapp\" target=\"_blank\" href={ 'https://wa.me/?text=' + encodeURIComponent(document.location.href) }>WhatsApp</a></li>\n\t\t\t\t\t\t    </ul>\n              </div>\n\n              <div className=\"osc-details-stats\">\n                {voteButtonsHTML}\n                {reactionsCountHTML}\n                {editButtonsHTML}\n              </div>\n\n            </div>\n\n            <p className=\"\">\n              <span className=\"ocs-gray-text\">Door </span>{idea.user.nickName || idea.user.fullName || idea.user.firstName +' ' + idea.user.lastName}\n              <span className=\"ocs-gray-text\"> op </span>{idea.createDateHumanized}\n\t\t\t\t\t\t  <span className=\"ocs-gray-text\">&nbsp;&nbsp;|&nbsp;&nbsp;</span>\n\t\t\t\t\t\t  <span className=\"ocs-gray-text\">Thema: </span>{idea.extraData.theme}\n            </p>\n\n            {modBreakHTML}\n\n            <p className=\"osc-details-summary\">{idea.summary}</p>\n\n            <p className=\"osc-details-description\" dangerouslySetInnerHTML={{ __html: idea.description }}></p>\n\n            {addPollButtonHTML}\n\n\t\t\t    </div>\n\n          {pollHTML}\n\n          {reactionsHTML}\n\n\t\t\t    <div className=\"osc-bottom-spacer\"></div>\n\n        </div>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\n'use strict';\n\nexport default class VoteButton extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      name: 'likebutton',\n      backgroundColor: '#164995',\n      color: '#fff',\n      text: 'like',\n      opinion: 'yes',\n\t\t};\n\t\tthis.config = merge.recursive(defaultConfig, this.config, this.props.config || {})\n\n    this.state = {\n      value: this.props.value,\n      busy: false,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    // return from anonymous login\n    let votePending = OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-vote-pending');\n    if (votePending) {\n\t\t\tthis.doVote();\n      OpenStadComponentLibs.localStorage.remove('osc-ideas-on-map-vote-pending');\n\t\t}\n  }\n\n  doVote(e) {\n\n    if (e) e.stopPropagation();\n\n    if (this.state.busy) return;\n    this.setState({ busy: true });\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${ self.config.siteId }/vote`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    // if (!self.config.api.isUserLoggedIn) url += '?useOauth=anonymous'\n    if (!( self.config.user && self.config.user.role )) {\n      OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-vote-pending', true );\n      let loginUrl =  '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) + '&useOauth=anonymous';\n      return document.location.href = loginUrl;\n    }\n\n    fetch(url, {\n      method: 'post',\n      headers,\n      body: JSON.stringify({\n        ideaId: self.props.idea.id,\n        opinion: self.config.opinion,\n      })\n    })\n      .then((response) => {\n        if (!response.ok) throw Error('Stemmen is niet gelukt')\n        return response.json();\n      })\n      .then( json => {\n\n        let change = json.length ? 1 : -1;\n        let value = self.state.value + change;\n        self.setState({ value })\n\n        self.props.idea.userVote = json.length && json || null;\n\n        this.setState({ busy: false });\n\n\t\t    var event = new window.CustomEvent('osc-idea-liked', { detail: { ideaId: self.props.idea.id, change } });\n\t\t    document.dispatchEvent(event);\n\n      })\n      .catch((err) => {\n        alert(err.message);\n      });\n    \n  }\n\n\trender() {\n\n    let self = this;\n\n    let value = parseInt(self.state.value) || 0;\n\n\t  let value000 = parseInt(value/100) || 0;\n\t  let value00  = parseInt(( value - 100 * value000 )/10) || 0;\n\t  let value0   = value - value000 * 100 - value00 * 10;\n\n    return (\n\t    <div id={self.id} className={self.props.className || 'osc-vote-button osc-number-button'} ref={el => (self.instance = el)}>\n\t\t    <div className=\"osc-number-plates\" style={{ color: this.config.color, backgroundColor: this.config.backgroundColor }}>\n\t\t\t    <div id={`${this.config.name}-number-plate-000`} className=\"osc-number-plate\">{value000}</div>\n\t\t\t    <div id={`${this.config.name}-number-plate-00`} className=\"osc-number-plate\">{value00}</div>\n\t\t\t    <div id={`${this.config.name}-number-plate-0`} className=\"osc-number-plate\">{value0}</div>\n\t\t    </div>\n        <div className={`osc-number-button-text ${this.config.name}-name ${this.props.idea.userVote ? ' ocs-user-has-voted' : ''} ${this.state.busy ? ' ocs-busy' : ''}`} style={{ color: this.config.color, backgroundColor: this.config.backgroundColor }} onClick={ (e) => self.doVote(e) }>\n\t\t\t    {self.config.text}\n\t\t    </div>\n        <div className=\"osc-clear-both\"></div>\n\t    </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeaDetails from './component/idea-details.jsx';\n\n// render elements\nOpenStadComponentIdeaDetails.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeaDetails attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeaDetails as default,\n  OpenStadComponentIdeaDetails as IdeaDetails,\n};\n\n","import React from 'react';\nimport Search from './search.jsx';\n\n'use strict';\n\nexport default class Filterbar extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n      types: ( props.config && props.config.types ) || [],\n      areas: ( props.config && props.config.areas ) || [],\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n\n    this.state = {\n      selectedType: undefined,\n      types: this.config.types,\n      selectedArea: undefined,\n      areas: this.config.areas,\n      mobileActiveSelector: null,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  handleTypeChange(value) {\n\n    this.setState({ selectedType: value });\n    this.hideMobileActiveSelector()\n\n\t\t// dispatch an event\n\t\tvar event = new window.CustomEvent('typeFilterUpdate', { detail: { value: value } });\n\t\tdocument.dispatchEvent(event);\n\n  }\n\n  setAreaValue(value) {\n    this.setState({ selectedArea: value });\n  }\n\n  handleAreaChange(value) {\n\n    this.setState({ selectedArea: value });\n    this.hideMobileActiveSelector()\n\n\t\t// dispatch an event\n\t\tvar event = new window.CustomEvent('areaFilterUpdate', { detail: { value: this.state.areas.find(area => value == area.value) } });\n\t\tdocument.dispatchEvent(event);\n\n  }\n\n  resetTypeAndArea() {\n    this.handleTypeChange(0)\n    this.handleAreaChange(0)\n    this.hideMobileActiveSelector()\n  }\n\n  toggleMobileActiveSelector(which) {\n    if (this.state.mobileActiveSelector != which) {\n      this.showMobileActiveSelector(which);\n    } else {\n      this.hideMobileActiveSelector();\n    }\n  }\n\n  showMobileActiveSelector(which) {\n    this.setState({ mobileActiveSelector: which });\n  }\n\n  hideMobileActiveSelector() {\n    this.setState({ mobileActiveSelector: null });\n  }\n\n\trender() {\n\n    let self = this;\n\n    let areasHTML = null;\n    let areasButtonHTML = null;\n    // TODO: niet state maar config\n    if (self.state.areas && self.state.areas.length) {\n      areasButtonHTML = (\n        <div className=\"osc-area-selector-button\" onClick={() => self.toggleMobileActiveSelector('area')}></div>\n      );\n      areasHTML = (\n          <div className={`osc-area-selector-container${self.state.mobileActiveSelector == 'area' ? ' osc-is-active' : ''}`}>\n            <select value={self.state.selectedArea} onChange={() => self.handleAreaChange( self.areaSelector.value )} className=\"osc-default-select osc-margin-right osc-area-selector\" ref={el => (self.areaSelector = el)}>\n              <option value=\"0\">Alle gebieden</option>;\n              { self.state.areas.map((area, i) => {\n                return <option key={'area-option-' + i}>{ area.name }</option>;\n              })}\n            </select>\n          </div>\n      );\n    }\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-filterbar'} ref={el => (self.instance = el)}>\n\n        <div className=\"osc-search-container\">\n          <div className=\"osc-search-button\" onClick={() => self.toggleMobileActiveSelector('search')}></div>\n\t\t\t\t  <Search config={{ ...this.config }} className={`osc-search${self.state.mobileActiveSelector == 'search' ? ' osc-is-active' : ''}`}/>\n        </div>\n\n        <div className=\"osc-selectors-container osc-align-right-container\">\n\n          <div className={`osc-type-selector-button${ self.state.selectedType && self.state.selectedType != '0'  ? ' osc-active' : '' }`} onClick={() => self.toggleMobileActiveSelector('type')}></div>\n          <div className={`osc-type-selector-container${self.state.mobileActiveSelector == 'type' ? ' osc-is-active' : ''}`}>\n            <select value={self.state.selectedType} onChange={() => self.handleTypeChange( self.typeSelector.value )} className=\"osc-default-select osc-margin-right osc-type-selector\" ref={el => (self.typeSelector = el)}>\n              <option value=\"0\">Alle thema's</option>;\n              { self.state.types.map((type, i) => {\n                return <option key={'type-option-' + i}>{ type.name }</option>;\n              })}\n            </select>\n          </div>\n\n          {areasButtonHTML}\n          {areasHTML}\n\n          <button value=\"reset\" onClick={() => self.resetTypeAndArea()} className=\"osc-button osc-reset-button\" ref={el => (self.resetButton = el)}>Alles tonen</button>\n          \n\t\t\t  </div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n// import OpenStadComponentImageUpload from './openstad-component-formelements/image-upload.jsx';\n// import OpenStadComponentFormelementsInputWithCounter from './openstad-component-formelements/input-with-counter.jsx';\n\n'use strict';\n\nexport default class IdeasForm extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet self = this;\n\n\t\tself.defaultConfig = {\n      user: {},\n\t\t\tideaId: null,\n      titleMinLength: 10,\n      titleMaxLength: 20,\n      summaryMinLength: 20,\n      summaryMaxLength: 140,\n      descriptionMinLength: 140,\n      descriptionMaxLength: 5000,\n      fields: [],\n    };\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    let fields = self.config.fields;\n\n    if (!self.props.idea.extraData) self.props.idea.extraData = {};\n\n    if (fields) {\n\n      let state = { formfields: {\n        id: self.props.idea.id || '',\n        user: self.props.idea.user || {},\n      }};\n      fields.forEach((field) => {\n        if (field.name) {\n          state.formfields[field.name] = eval('self.props.idea.' + field.name);\n          field.value = eval('self.props.idea.' + field.name);\n        }\n      });\n      self.state = state;\n\n      let titleField = fields.find(field => field.name == 'title');\n      if (titleField) {\n\t\t    titleField.minLength = self.config.titleMinLength;\n\t\t    titleField.maxLength = self.config.titleMaxLength;\n      }\n\n      let summaryField = fields.find(field => field.name == 'summary');\n      if (summaryField) {\n\t\t    summaryField.minLength = self.config.summaryMinLength;\n\t\t    summaryField.maxLength = self.config.summaryMaxLength;\n      }\n\n      let descriptionField = fields.find(field => field.name == 'description');\n      if (descriptionField) {\n\t\t    descriptionField.minLength = self.config.descriptionMinLength;\n\t\t    descriptionField.maxLength = self.config.descriptionMaxLength;\n      }\n\n      let imageField = fields.find(field => field.inputType == 'image-upload'); // TODO: multiple images?\n      if (imageField) {\n\t\t    imageField.imageserver = self.config.imageserver;\n      }\n\n      // dit moet anders want nu tekent hij er elke keer 1 bij\n      // if (self.config.user && self.config.user.role == 'admin') {\n      //   self.config.fields.push({\n      //     name: \"modBreak\",\n      //     title: \"Moderator reactie\",\n      //     value: state.formfields.modBreak,\n      //     inputType: \"textarea-with-counter\",\n\t\t\t//     minLength: 0,\n\t\t\t//     maxLength: 2000,\n      //   })\n      // }\n\n    }\n    \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n  }\n\n  // todo: als hanlefieldchange met meerder waarden in een { key: value } formaat gaat werken dan kan deze weg\n  handleLocationChange({location, address}) {\n    let state = { ...this.state };\n    state.formfields['location'] = { coordinates: [ location.lat, location.lng ] };\n    state.formfields['address'] = address;\n    this.setState(state)\n    this.dispatchUpdateEditIdea(state.formfields)\n  }\n\n  dispatchUpdateEditIdea(idea) {\n\t\tvar event = new window.CustomEvent('updateEditIdea', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  validateIdea() {\n\n    var self = this;\n    \n\t  var isValid = true;\n\n\t  // location\n\t  if (self.state.formfields['location']) {\n\t\t\tself['form-warning-location'].style.display = 'none';\n\t\t} else {\n\t\t\tself['form-warning-location'].style.display = 'block';\n\t\t\tisValid = false;\n\t\t}\n\n\t  // // images\n\t  // if (!self.imageField.validate()) {\n\t\t//   self['form-warning-image'].style.display = 'block';\n\t\t//   isValid = false;\n\t  // } else {\n\t\t//   self['form-warning-image'].style.display = 'none';\n    // }\n\n\t  return isValid;\n\n  }\n\n  submitIdea() {\n\n    let self = this;\n\n    let formValues = self.form.getValues();\n    // console.log(formValues);\n\n    let isValid = self.form.validate({ showErrors: true });\n\n\t  if ( !isValid  || !self.validateIdea() ) { // validateIdea doet nog locatie en images\n      self.setState({ showFormErrorsWarning: true });\n      return;\n    }\n\n    self.setState({ showFormErrorsWarning: false });\n\n\t  if (!self.config.api.isUserLoggedIn) return alert('Je bent niet ingelogd');\n\n\t  var url = self.config.api.url + '/api/site/' + self.config.siteId + '/idea';\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n\n    let body = {\n      location: JSON.stringify({ \"type\": \"Point\", ...self.state.formfields['location'] }),\n    };\n    Object.keys(formValues).forEach(key => {\n      let match = key.match(/^extraData\\.(.+)/)\n      if (match) {\n        if (!body.extraData) body.extraData = {};\n        body.extraData[match[1]] = formValues[key];\n      } else {\n        body[key] = formValues[key];\n      }\n    });\n\n    // if ( self.config.user && self.config.user.role == 'admin' ) {\n    //   body.modBreak = self.state.formfields['modBreak'];\n    // }\n\n    console.log('--------------------');\n    console.log(body);\n\n    let method = 'POST';\n    if (typeof this.state.formfields.id == 'number') {\n      method = 'PUT';\n      url = url + '/' + this.state.formfields.id;\n    }\n\n    fetch(url, {\n      method,\n      headers,\n      body: JSON.stringify(body) // body data type must match \"Content-Type\" header\n    })\n      .then((response) => {\n        if (!response.ok) throw Error(response)\n        return response.json();\n      })\n      .then( json => {\n\t\t    var event = new window.CustomEvent('newIdeaStored', { detail: { idea: json } });\n\t\t    document.dispatchEvent(event);\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n  \n\trender() {\n\n    let self = this;\n\n    let formErrorsWarningHTML = null;\n    if (self.state.showFormErrorsWarning) {\n      formErrorsWarningHTML = (\n        <div className=\"osc-form-errors-warning\">\n          Niet alle velden zijn correct ingevuld. Scroll naar boven om te zien wat er mis gaat.\n        </div>\n      );\n    }\n\n    let formHTML = null;\n    formHTML = (\n      <OpenStadComponentForms.Form config={ self.config }  ref={(el) => { self.form = el;}}/>\n    )\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-idea-form'} ref={el => (self.instance = el)}>\n\n\t\t\t  <div className=\"osc-spacer\"></div>\n\n        <form className=\"osc-form\">\n\n\t\t\t\t  <h1>Nieuw punt toevoegen</h1>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n              Naam\n\t\t\t\t\t  </h2>\n            {self.state.formfields.user && self.state.formfields.user.fullName}\n          </div>\n\n          <div className=\"osc-form-group\">\n\t\t\t\t\t  <h2>\n            Een locatie vlakbij\n\t\t\t\t\t  </h2>\n            {self.state.formfields.address || 'Geen adres gevonden'}\n\t\t\t\t\t\t<div className=\"osc-form-warning\" style={{ display: 'none' }} ref={ el => this['form-warning-location'] = el  }>Geen locatie geselecteerd</div>\n          </div>\n\n          {formHTML}\n\n          <br/>\n          {formErrorsWarningHTML}\n          <br/>\n          <a className=\"osc-button osc-button-blue\" onClick={() => self.submitIdea()} ref={el => (self.submitButton = el)}>Versturen</a>\n          <br/>\n          <br/>\n          <br/>\n\n        </form>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class IdeasList extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      types: [],\n      titleField: 'title',\n      summaryField: 'summary',\n      // sortOptions: [{ value: 'random', name: 'Random' }, { value: 'ranking', name: 'Ranking' }, { value: 'newest', name: 'Nieuwste eerst' }, { value: 'oldest', name: 'Oudste eerst' }, { value: 'distance', name: 'Afstand' }],\n      sortOptions: [{ value: 'newest', name: 'Nieuwste eerst' }, { value: 'oldest', name: 'Oudste eerst' }],\n      showSortButton: true,\n      idea: {\n        showVoteButtons: true,\n      },\n      defaultSortOrder: 'newest',\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n\t\tthis.config.onIdeaClick = this.config.onIdeaClick || this.onIdeaClick.bind(this);\n\n    this.state = {\n      currentSortOrder: this.config.defaultSortOrder,\n      ideas: this.props.ideas || [],\n      showSortButton: this.config.showSortButton,\n      currentMouseOverIdea: null,\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  updateIdeas({ ideas = this.state.ideas, sortOrder = this.state.currentSortOrder, showSortButton = this.state.showSortButton, center = { lat: 52.37104644463586, lng: 4.900402911007405 }, maxLength }) {\n\n    let self = this;\n    let state = { ...self.state };\n\n\t\tswitch(sortOrder){\n\t\t\tcase 'ranking':\n\t\t\t\tideas = ideas.sort( function(a,b) { return a.ranking - a.ranking });\n\t\t\t\tbreak;\n\t\t\tcase 'newest':\n\t\t\t\tideas = ideas.sort( function(a,b) { return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime() });\n\t\t\t\tbreak;\n\t\t\tcase 'oldest':\n\t\t\t\tideas = ideas.sort( function(a,b) { return new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime() });\n\t\t\t\tbreak;\n\t\t\tcase 'distance':\n\t\t\t\tideas = ideas\n          .map( idea => { idea._distance = Math.sqrt( Math.pow( idea.location.coordinates[0] - center.lat, 2 ) + Math.pow( idea.location.coordinates[1] - center.lng, 2 ) ); return idea; } )\n          .sort( function(a,b) { return a._distance - b._distance })\n\t\t\t\tbreak;\n\t\t\tcase 'random':\n\t\t\tdefault:\n\t\t\t\tideas = ideas.sort( function(a,b) { return Math.random() - 0.5 });\n\t\t\t\tbreak;\n\t\t}\n\n    state.ideas = maxLength ? ideas.slice(0, maxLength): ideas;\n\n    state.showSortButton = showSortButton;\n\n    self.setState(state);\n\n  }\n\n  setSortOrder({ sortOrder }) {\n    this.setState({\n      ...this.state,\n      currentSortOrder: sortOrder\n    }, function() {\n      this.updateIdeas({ sortOrder })\n    });\n  }\n\n  onIdeaClick(e) {\n    // placeholder\n  }\n\n  dispatchMouseOverListItem(e, idea) {\n    e.stopPropagation();\n    let newMouseOverIdeaId = idea.id;\n    if (!this.state.currentMouseOverIdea || newMouseOverIdeaId != this.state.currentMouseOverIdea.id) {\n      this.setState({ currentMouseOverIdea: idea.id });\n\t\t  var event = new window.CustomEvent('mouseOverListItem', { detail: { idea: idea } });\n\t\t  document.dispatchEvent(event);\n    }\n  };\n  \n  dispatchMouseOutListItem(e) {\n    e.stopPropagation();\n    if (this.state.currentMouseOverIdea) {\n      this.setState({ currentMouseOverIdea: null });\n\t\t  var event = new window.CustomEvent('mouseOutListItem', {});\n\t\t  document.dispatchEvent(event);\n    }\n  }\n\n\trender() {\n\n    let self = this;\n\n    let sortSelector = null;\n    if (this.state.showSortButton) {\n      sortSelector = (\n        <div className=\"osc-sort osc-align-right-container osc-margin-right\">\n          Sorteer op:&nbsp;&nbsp;&nbsp;&nbsp;\n          <select value={self.state.currentSortOrder} onChange={() => self.setSortOrder({ sortOrder: self.sortSelector.value })} className=\"osc-default-select\" ref={el => (self.sortSelector = el)}>\n            { self.config.sortOptions.map((option, i) => {\n              return <option value={ option.value } key={'sort-option-' + i}>{ option.name }</option>;\n            })}\n          </select>\n        </div>\n      );\n    } else {\n      sortSelector = (<div style={{height: 20}}></div>)\n    }\n\n    let titleHML = (<h3 className=\"osc-title\">{self.props.title} ({self.state.ideas.length})</h3>);\n\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-info-block-ideas-list'} ref={el => (self.instance = el)}>\n\n        {sortSelector}\n\n        {titleHML}\n\n        { self.state.ideas.map((idea, i) => {\n          if (!idea) {\n            console.log('idea is undef', i, self.state.ideas);\n          }\n          let typeDef = self.config.types.find(entry => idea.extraData && entry.name == idea.extraData.theme); // TODO: use typefield\n          if (!typeDef || !typeDef.listicon) { typeDef = { listicon: { html: '' } }; } // console.log(idea.extraData.theme + ' niet gevonden'); }\n          let voteCountHTML = null;\n          if (this.config.idea.showVoteButtons) {\n            voteCountHTML = (\n              <div className=\"osc-likes\">\n                {idea.yes || 0}\n              </div>);\n          }\n          let argcountHTML = null;\n          if (this.config.argument.isActive && !this.config.content.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`))) {\n            argcountHTML = (\n              <div className=\"osc-reactions\">\n                {idea.argCount || 0}\n              </div>);\n          }\n          return (\n            <div className={`osc-info-block-ideas-list-idea${self.state.currentMouseOverIdea && self.state.currentMouseOverIdea != idea.id ? ' osc-opacity-25' : ''}`} onClick={(event) => self.config.onIdeaClick(event, idea)} key={'info-block-' + i} onMouseOver={e => self.dispatchMouseOverListItem(e, idea)} onMouseOut={e => self.dispatchMouseOutListItem(e)}>\n              <div className=\"osc-content\">\n                <div className=\"osc-image\" style={{ backgroundImage: `url(${idea.image})` }}></div>\n                <h4 className=\"osc-title\">{ eval(`idea.${self.config.titleField}`) }</h4>\n                <div className=\"osc-summary\">\n                  { eval(`idea.${self.config.summaryField}`) }\n                </div>\n                <div className=\"osc-stats\">\n                  {voteCountHTML}\n                  {argcountHTML}\n                  <div className=\"osc-type\">\n                    <div className=\"osc-type-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"osc-clear-both\"></div>\n            </div>\n          );\n        })}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Filterbar from './filterbar.jsx';\nimport InfoBlock from './info-block.jsx';\nimport IdeaForm from './idea-form.jsx';\nimport Map from './map.jsx';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\nimport OpenStadComponentIdeaDetails from '../../idea-details/index.jsx';\n\n// TODO: clean up; ik gebruikte eerst setNewIdea en setSelected, maar nu onNewIdeaClick en onSelectedIdeaClick; trek dat gelijk\n\n'use strict';\n\nexport default class OpenStadComponentIdeasOnMap extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tvar self = this;\n\n\t\t// config\n\t\tself.defaultConfig = {\n\t\t\ttitle: 'Inzendingen',\n      types: [],\n      typeField: 'extraData.theme',// null,\n\n      // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n      // currentPolygon: undefined,\n      // areas: [\n      //  { name: \"Heel West\",\n      //    value: \"Heel West\",\n      //    polygon: [{ \"lng\": 4.8353454, \"lat\": 52.3731265 }, { \"lng\": 4.8422025, \"lat\": 52.3721002 }, { \"lng\": 4.8421761, \"lat\": 52.3695836 }, { \"lng\": 4.8455807, \"lat\": 52.3696369 }, { \"lng\": 4.8476385, \"lat\": 52.369853 }, { \"lng\": 4.8477361, \"lat\": 52.3695885 }, { \"lng\": 4.8484176, \"lat\": 52.369697 }, { \"lng\": 4.8504835, \"lat\": 52.3653302 }, { \"lng\": 4.8504956, \"lat\": 52.3643692 }, { \"lng\": 4.8501587, \"lat\": 52.3638376 }, { \"lng\": 4.8494487, \"lat\": 52.3633001 }, { \"lng\": 4.8495059, \"lat\": 52.3610989 }, { \"lng\": 4.8489152, \"lat\": 52.3608149 }, { \"lng\": 4.8487824, \"lat\": 52.3578658 }, { \"lng\": 4.8504012, \"lat\": 52.3578553 }, { \"lng\": 4.8518982, \"lat\": 52.357844 }, { \"lng\": 4.8538275, \"lat\": 52.3581295 }, { \"lng\": 4.854723, \"lat\": 52.3578629 }, { \"lng\": 4.854635, \"lat\": 52.3577532 }, { \"lng\": 4.85436, \"lat\": 52.3572975 }, { \"lng\": 4.8540881, \"lat\": 52.3564026 }, { \"lng\": 4.8547969, \"lat\": 52.3562758 }, { \"lng\": 4.8698903, \"lat\": 52.3601067 }, { \"lng\": 4.8699397, \"lat\": 52.3600231 }, { \"lng\": 4.8714122, \"lat\": 52.3603737 }, { \"lng\": 4.8712647, \"lat\": 52.3605634 }, { \"lng\": 4.8715288, \"lat\": 52.3605997 }, { \"lng\": 4.8716826, \"lat\": 52.3604277 }, { \"lng\": 4.8738605, \"lat\": 52.3608533 }, { \"lng\": 4.8738525, \"lat\": 52.3610213 }, { \"lng\": 4.8740097, \"lat\": 52.3610407 }, { \"lng\": 4.8741351, \"lat\": 52.3608935 }, { \"lng\": 4.8750611, \"lat\": 52.3608041 }, { \"lng\": 4.8756501, \"lat\": 52.3606138 }, { \"lng\": 4.876429, \"lat\": 52.3607996 }, { \"lng\": 4.8765642, \"lat\": 52.3606177 }, { \"lng\": 4.876929, \"lat\": 52.3606957 }, { \"lng\": 4.8768495, \"lat\": 52.360911 }, { \"lng\": 4.8771709, \"lat\": 52.3609696 }, { \"lng\": 4.8774, \"lat\": 52.3607583 }, { \"lng\": 4.8819952, \"lat\": 52.3620427 }, { \"lng\": 4.8813956, \"lat\": 52.3630818 }, { \"lng\": 4.8808146, \"lat\": 52.3634904 }, { \"lng\": 4.8793708, \"lat\": 52.3643261 }, { \"lng\": 4.8792691, \"lat\": 52.3649574 }, { \"lng\": 4.8787082, \"lat\": 52.3658206 }, { \"lng\": 4.8775395, \"lat\": 52.3667815 }, { \"lng\": 4.8767523, \"lat\": 52.3685117 }, { \"lng\": 4.8754901, \"lat\": 52.3697867 }, { \"lng\": 4.8745065, \"lat\": 52.3718772 }, { \"lng\": 4.8745782, \"lat\": 52.3725454 }, { \"lng\": 4.8753796, \"lat\": 52.373407 }, { \"lng\": 4.8755899, \"lat\": 52.3743025 }, { \"lng\": 4.8799131, \"lat\": 52.3813052 }, { \"lng\": 4.8796339, \"lat\": 52.3819128 }, { \"lng\": 4.880478, \"lat\": 52.3822531 }, { \"lng\": 4.8818058, \"lat\": 52.3843528 }, { \"lng\": 4.882637, \"lat\": 52.3854107 }, { \"lng\": 4.8846503, \"lat\": 52.3883466 }, { \"lng\": 4.8857963, \"lat\": 52.3881476 }, { \"lng\": 4.8911796, \"lat\": 52.3884502 }, { \"lng\": 4.8937804, \"lat\": 52.3886712 }, { \"lng\": 4.8956658, \"lat\": 52.3888313 }, { \"lng\": 4.8927982, \"lat\": 52.3933453 }, { \"lng\": 4.8850924, \"lat\": 52.398824 }, { \"lng\": 4.8762366, \"lat\": 52.3945287 }, { \"lng\": 4.8726422, \"lat\": 52.3948206 }, { \"lng\": 4.8719896, \"lat\": 52.3947192 }, { \"lng\": 4.8719508, \"lat\": 52.3952766 }, { \"lng\": 4.8715979, \"lat\": 52.39538 }, { \"lng\": 4.8667403, \"lat\": 52.393136 }, { \"lng\": 4.8643092, \"lat\": 52.3927072 }, { \"lng\": 4.8627057, \"lat\": 52.3938521 }, { \"lng\": 4.8603441, \"lat\": 52.3949382 }, { \"lng\": 4.858593, \"lat\": 52.3952782 }, { \"lng\": 4.8569204, \"lat\": 52.3953667 }, { \"lng\": 4.8569896, \"lat\": 52.3938363 }, { \"lng\": 4.8573172, \"lat\": 52.3938424 }, { \"lng\": 4.8574043, \"lat\": 52.3920751 }, { \"lng\": 4.8589526, \"lat\": 52.3912226 }, { \"lng\": 4.8592744, \"lat\": 52.3905434 }, { \"lng\": 4.8592929, \"lat\": 52.3887899 }, { \"lng\": 4.8449045, \"lat\": 52.3887733 }, { \"lng\": 4.8451066, \"lat\": 52.3850658 }, { \"lng\": 4.8446526, \"lat\": 52.3850638 }, { \"lng\": 4.8390117, \"lat\": 52.3850241 }, { \"lng\": 4.8392807, \"lat\": 52.3829687 }, { \"lng\": 4.838548, \"lat\": 52.3808766 }, { \"lng\": 4.836707, \"lat\": 52.3763581 }, { \"lng\": 4.8353454, \"lat\": 52.3731265 }] },\n      //  { name: \"De Baarsjes\",\n      //    value: \"De Baarsjes\",\n      //    polygon: [{\"lng\":4.8558724,\"lat\":52.374202},{\"lng\":4.8577714,\"lat\":52.3681953},{\"lng\":4.8582878,\"lat\":52.3648623},{\"lng\":4.8592819,\"lat\":52.3648966},{\"lng\":4.8598228,\"lat\":52.364783},{\"lng\":4.8613989,\"lat\":52.3664539},{\"lng\":4.8661845,\"lat\":52.3717538},{\"lng\":4.8664001,\"lat\":52.3721596},{\"lng\":4.8663889,\"lat\":52.372566},{\"lng\":4.865846,\"lat\":52.3733281},{\"lng\":4.8646717,\"lat\":52.3734961},{\"lng\":4.8641583,\"lat\":52.3750737},{\"lng\":4.8640923,\"lat\":52.3752839},{\"lng\":4.8559599,\"lat\":52.3743342},{\"lng\":4.8558724,\"lat\":52.374202}] },\n      //  { name: \"Oud West\",\n      //    value: \"Oud West\",\n      //    polygon: [{\"lng\":4.8546816,\"lat\":52.3568634},{\"lng\":4.855041,\"lat\":52.3563261},{\"lng\":4.858839,\"lat\":52.3572696},{\"lng\":4.8625458,\"lat\":52.3582427},{\"lng\":4.8646701,\"lat\":52.3588487},{\"lng\":4.868731,\"lat\":52.3597955},{\"lng\":4.8703188,\"lat\":52.3601231},{\"lng\":4.8717136,\"lat\":52.3604376},{\"lng\":4.8738218,\"lat\":52.3609651},{\"lng\":4.8763055,\"lat\":52.3607226},{\"lng\":4.8776842,\"lat\":52.3608635},{\"lng\":4.878167,\"lat\":52.3610044},{\"lng\":4.8812676,\"lat\":52.3618856},{\"lng\":4.8807043,\"lat\":52.3623966},{\"lng\":4.8798675,\"lat\":52.3633663},{\"lng\":4.8795778,\"lat\":52.3639428},{\"lng\":4.8792613,\"lat\":52.3644931},{\"lng\":4.8791272,\"lat\":52.3650598},{\"lng\":4.8787785,\"lat\":52.3656691},{\"lng\":4.8779202,\"lat\":52.3663734},{\"lng\":4.8773838,\"lat\":52.366809},{\"lng\":4.8772336,\"lat\":52.3676312},{\"lng\":4.8769385,\"lat\":52.3681389},{\"lng\":4.8754311,\"lat\":52.3697536},{\"lng\":4.8746211,\"lat\":52.3714043},{\"lng\":4.8744494,\"lat\":52.3720594},{\"lng\":4.8744602,\"lat\":52.3723083},{\"lng\":4.8752166,\"lat\":52.3729895},{\"lng\":4.8745943,\"lat\":52.3731762},{\"lng\":4.870925,\"lat\":52.3724033},{\"lng\":4.8680175,\"lat\":52.3717974},{\"lng\":4.8665959,\"lat\":52.3715648},{\"lng\":4.8654211,\"lat\":52.3703825},{\"lng\":4.8641176,\"lat\":52.3689905},{\"lng\":4.8628623,\"lat\":52.3676443},{\"lng\":4.8616499,\"lat\":52.3662554},{\"lng\":4.8604268,\"lat\":52.3648862},{\"lng\":4.8602505,\"lat\":52.3647431},{\"lng\":4.8591448,\"lat\":52.3634056},{\"lng\":4.8580772,\"lat\":52.3621247},{\"lng\":4.8575783,\"lat\":52.3615515},{\"lng\":4.857117,\"lat\":52.3604245},{\"lng\":4.856248,\"lat\":52.3592681},{\"lng\":4.8555345,\"lat\":52.3580035},{\"lng\":4.855299,\"lat\":52.357674},{\"lng\":4.855269,\"lat\":52.3576447},{\"lng\":4.855115,\"lat\":52.3574166},{\"lng\":4.8549071,\"lat\":52.3571512},{\"lng\":4.85479,\"lat\":52.3570018},{\"lng\":4.8546816,\"lat\":52.3568634}] },\n      // ],\n\n      titleField: 'title',\n      summaryField: 'summary',\n      // areaField: self.config.areaField || 'extraData.gebied',\n      user: {},\n      api: {\n        url: null,\n        headers: null,\n        isUserLoggedIn: false,\n      },\n      idea: {\n        canAddNewIdeas: true,\n        showVoteButtons: true,\n        titleMinLength: 10,\n        titleMaxLength: 20,\n        summaryMinLength: 20,\n        summaryMaxLength: 140,\n        descriptionMinLength: 140,\n        descriptionMaxLength: 5000,\n      },\n      argument: {\n        isActive: true,\n        descriptionMinLength: 30,\n        descriptionMaxLength: 500,\n        formIntro: 'Mijn reactie op deze inzending is ...',\n        placeholder: '',\n        requiredUserRole: 'member',\n      },\n      content: {\n        mobilePreviewLoggedInHTML: 'Een locatie vlakbij <h4>{address}</h4>{addButton}',\n        mobilePreviewNotLoggedInHTML: 'Een locatie vlakbij <h4>{address}</h4><div>Wilt u een nieuw punt toevoegen? Dan moet u eerst <a href=\"{loginLink}\">inloggen</a>.</div>',\n        ignoreReactionsForIdeaIds: '',\n      },\n\t\t};\n\t\tself.config = merge.recursive(self.defaultConfig, self.config, props.config || {})\n\n    // defaults\n    self.config.doSearchFunction = self.config.doSearchFunction || self.doSearch.bind(self);\n\n    // tmp\n    if (self.config.types && self.config.types.length) {\n      self.config.types.forEach((entry) => {\n        if (entry.value && !entry.name) {\n          entry.name = entry.value;\n        }\n        if (entry.mapicon && typeof entry.mapicon == 'string') {\n          try {\n            entry.mapicon = JSON.parse(entry.mapicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n        if (entry.listicon && typeof entry.listicon == 'string') {\n          try {\n            entry.listicon = JSON.parse(entry.listicon)\n          } catch (err) { console.log(entry); console.log(err) }\n        }\n      });\n    }\n\n    self.state = {\n      ideas: [],\n      visibleIdeas: [],\n      status: 'default', // default, idea-selected, location-selected, idea-details, idea-form\n      mobileState: 'closed',\n      // oud\n      currentIdea: null,\n      editIdea: null,\n      // new, maar nog niet overal gebruikt\n      selectedIdea: null,\n      selectedLocation: null,\n      currentMouseOverIdea: null,\n    }\n    \n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // when the map is ready\n\t\tdocument.addEventListener('osc-map-is-ready', function(e) {\n\n      // fetch the data\n      self.fetchData({});\n\n      // handle map changes\n      self.map.map.on('zoomend', function() {\n        self.onChangeMapBoundaries();\n      });\n      self.map.map.on('moveend', function() {\n        self.onChangeMapBoundaries();\n      });\n\n    });\n\n    // map events\n\t\tdocument.addEventListener('osc-map-click', function(event) {\n      self.onMapClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-map-marker-click', function(event) {\n      self.onMarkerClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-map-cluster-click', function(event) {\n      self.onClusterClick(event.detail);\n    });\n    \n    // handle filter changes\n\t\tdocument.addEventListener('typeFilterUpdate', function(event) {\n      self.onChangeTypeFilter(event.detail.value);\n    });\n    // document.addEventListener('areaFilterUpdate', function(event) {\n    //   self.onChangeAreaFilter(event.detail.value);\n    // });\n\n    // handle infoblock changes\n\t\tdocument.addEventListener('updateSelectedIdea', function(event) {\n      self.onUpdateSelectedIdea(event.detail.idea);\n    });\n\t\tdocument.addEventListener('closeSelectedLocation', function(event) {\n      self.onCloseSelectedLocation(event.detail.idea);\n    });\n\t\tdocument.addEventListener('updateEditIdea', function(event) {\n      self.onUpdateEditIdea(event.detail.idea);\n    });\n\t\tdocument.addEventListener('ideaClick', function(event) {\n      self.onIdeaClick(event.detail.idea);\n    });\n\t\tdocument.addEventListener('selectedIdeaClick', function(event) {\n      self.onSelectedIdeaClick(event.detail.idea);\n    });\n\t\tdocument.addEventListener('newIdeaClick', function(event) {\n      self.onNewIdeaClick();\n    });\n\t\tdocument.addEventListener('clickMobileSwitcher', function(event) {\n      self.onClickMobileSwitcher();\n    });\n\t\tdocument.addEventListener('mouseOverListItem', function(event) {\n      self.onMouseOverListItem(event.detail.idea);\n    });\n\t\tdocument.addEventListener('mouseOutListItem', function(event) {\n      self.onMouseOutListItem();\n    });\n\n    // details changes\n\t\tdocument.addEventListener('osc-idea-liked', function(event) {\n      self.onIdeaLiked(event.detail);\n    });\n\t\tdocument.addEventListener('osc-reaction-stored', function(event) {\n      self.onReactionStored(event.detail);\n    });\n\t\tdocument.addEventListener('osc-reaction-deleted', function(event) {\n      self.onReactionDeleted(event.detail);\n    });\n\t\tdocument.addEventListener('osc-edit-idea-click', function(event) {\n      self.onEditIdeaClick(event.detail);\n    });\n\t\tdocument.addEventListener('osc-idea-deleted', function(event) {\n      self.onIdeaDeleted(event.detail);\n    });\n\n    // form changes\n\t\tdocument.addEventListener('newIdeaStored', function(event) {\n      self.onNewIdeaStored(event.detail.idea);\n    });\n    \n\t}\n\n  fetchData({ showIdeaDetails, showIdeaSelected }) {\n\n    let self = this;\n    let url = `${ self.config.api.url }/api/site/${  self.config.siteId  }/idea?includeVoteCount=1&includeArguments=1&includeUser=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    // remove existing\n    while(self.map.markers.length > 0) {\n      let marker = self.map.markers[0];\n      self.map.removeMarker(marker)\n    }\n    self.map.markers = [];\n\n    fetch(url, {\n      headers,\n    })\n      .then((response) => {\n        return response.json();\n      })\n      .then( json => {\n        showIdeaDetails = showIdeaDetails || OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-details'); //  document.location.hash.replace(/.*details=(\\d+).*/, \"$1\");\n        showIdeaSelected = showIdeaSelected || OpenStadComponentLibs.localStorage.get('osc-ideas-on-map-selected'); // document.location.hash.replace(/.*selected=(\\d+).*/, \"$1\");\n        let ideas = json.filter( idea => idea.location )\n        ideas.map( idea => {\n          if ( idea.id == showIdeaDetails) {\n            showIdeaDetails = idea;\n          }\n          if ( idea.id == showIdeaSelected) showIdeaSelected = idea;\n          idea.image = (idea.posterImage && idea.posterImage.key) || (idea.extraData && idea.extraData.images && idea.extraData.images[0]) || \"https://stemvanwest.amsterdam.nl/img/placeholders/idea.jpg\";\n          self.map.addIdea(idea);\n\t\t\t\t});\n\n        self.map.setBoundsAndCenter();\n\n        self.setState({ ideas }, function () {\n          // self.setSelectedLocation({ lat: 52.37104644463586, lng: 4.900402911007405 })\n          // return setTimeout(function(){ self.showIdeaForm() }, 500)\n          if (typeof showIdeaSelected == 'object' && showIdeaSelected != null) {\n\t\t\t\t\t\tself.setNewIdea(null);\n\t\t\t\t\t\tself.setSelectedIdea(showIdeaSelected);\n            self.setState({ status: 'idea-selected', currentIdea: showIdeaSelected }, function() {\n              // todo: dit zou hij zelf via state moeten doen\n              self.map.map.invalidateSize();\n              self.map.showMarkers({})\n              self.setSelectedIdea(self.state.currentIdea)\n            });\n          }\n          if (typeof showIdeaDetails == 'object' && showIdeaDetails != null) {\n\t\t\t\t\t\tself.setSelectedIdea(showIdeaDetails);\n\t\t\t\t\t\tself.setNewIdea(null);\n\t\t\t\t\t  self.showIdeaDetails(showIdeaDetails);\n          }\n          self.onChangeMapBoundaries();\n\n          // dev form\n          // if (!showIdeaSelected) {\n\t\t\t\t\t//   self.setSelectedIdea(null);\n\t\t\t\t\t//   self.setNewIdea({ location: { coordinates: [52.37104644463586, 4.900402911007405] }, title: \"Rutrum tincidunt\", type: \"Kans\", theme: \"Overig\", summary: \"rutrum tincidunt, dui sapien feugiat justo, eget egestas ligula nulla nec erat.\", description: \"rutrum tincidunt, dui sapien feugiat justo, eget egestas ligula nulla nec erat. maecenas tempus tempor eros. donec a justo. curabitur tellus. pellentesque risus. fusce at arcu. ut lacinia mi vel lectus. phasellus imperdiet. fusce luctus lacus a odio. in et turpis at libero tristique vulputate. sed varius ipsum. suspendisse potenti. suspendisse potenti. donec tempus arcu quis metus.\"});\n\t\t\t\t\t//   self.showIdeaForm();\n\t\t\t\t\t// }\n          // einde dev form\n\t\t\t\t});\n\n      })\n      .catch((err) => {\n        console.log('Niet goed');\n        console.log(err);\n      });\n\n  }\n\n  showIdeaDetails(idea) {\n    let self = this;\n    self.setSelectedIdea(idea);\n    OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', idea && idea.id );\n    OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', null);\n    // self.infoblock.setState({ mobileState: self.state.mobileState = 'opened' })\n    self.setState({ status: 'idea-details', currentIdea: idea }, function() {\n    // self.setState({ status: 'idea-details', currentIdea: idea, mobileState: self.state.mobileState = 'opened' }, function() {\n      self.map.map.invalidateSize();\n      self.map.hideMarkers({ exception: { location: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] } } })\n    });\n  }\n\n  hideIdeaDetails() {\n    let self = this;\n    self.setState({ status: 'idea-selected' }, function() {\n      // todo: dit zou hij zelf via state moeten doen\n      self.map.map.invalidateSize();\n      self.map.showMarkers({})\n      self.setSelectedIdea(self.state.currentIdea)\n    });\n  }\n\n  showIdeaForm(idea, next) {\n    let self = this;\n    self.setState({ status: 'idea-form', editIdea: idea }, function() {\n      self.map.map.invalidateSize();\n      self.map.hideMarkers({ exception: { location: idea && { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] } || self.map.selectedLocation } })\n      if (next) next();\n    });\n  }\n\n  hideIdeaForm() {\n    let self = this;\n    if (this.state.editIdea && typeof this.state.editIdea.id == 'number') {\n      let idea = self.state.ideas.find(idea => idea.id == self.state.editIdea.id)\n      self.showIdeaDetails(idea)\n    } else {\n      self.setState({ status: 'location-selected' }, function() {\n        // todo: dit zou hij zelf via state moeten doen\n        self.map.map.invalidateSize();\n        self.map.showMarkers({})\n        self.setNewIdea(self.state.editIdea)\n      });\n    }\n  }\n\n\tdoSearch(searchValue, callback) {\n\n\t\tlet self = this;\n    let searchValueLc = searchValue.toLowerCase();\n\n\t\tlet searchResult = { ideas: [], locations: [] };\n\n    // search in ideas\n\t\tthis.state.ideas.forEach((idea) => {\n\t\t\tlet title = eval(`idea.${self.config.titleField}`) || '';\n      let titlelLc = title.toLowerCase();\n\t\t\tlet summary = eval(`idea.${self.config.summaryField}`) || '';\n      let summaryLc = summary.toLowerCase();\n\t\t\tif (titlelLc.match(searchValueLc) || summaryLc.match(searchValueLc)) {\n\t\t\t\tsearchResult.ideas.push({\n\t\t\t\t\ttext: title,\n\t\t\t\t\tonClick: function() {\n            self.onUpdateSelectedIdea(idea)\n          },\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n    // search for addresses\n    fetch('https://geodata.nationaalgeoregister.nl/locatieserver/v3/suggest?rows=5&fq=gemeentenaam:amsterdam&fq=*:*&q=' + searchValueLc, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n\t\t\t.then((response) => {\n\t\t\t\treturn response.json();\n\t\t\t})\n      .then( json => {\n        if (json && json.response && json.response.docs && json.response.docs.length) {\n          searchResult.locations = json.response.docs.map( found => { return {\n\t\t\t\t\t\ttext: found.weergavenaam,\n\t\t\t\t\t\tonClick: function() { onClickAddress(found.id) },\n\t\t\t\t\t}});\n        }\n        callback(searchValue, searchResult)\n      })\n      .catch((err) => {\n        console.log('Search failed:', err);\n        callback(searchValue, searchResult)\n      });\n    \n    function onClickAddress(id) {\n      fetch('https://geodata.nationaalgeoregister.nl/locatieserver/v3/lookup?fq=gemeentenaam:amsterdam&&id=' + id, {\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n\t\t\t  .then((response) => {\n\t\t\t\t  return response.json();\n\t\t\t  })\n        .then( json => {\n          if (json && json.response && json.response.docs && json.response.docs[0]) {\n            let centroide_ll = json.response.docs[0].centroide_ll;\n            let match = centroide_ll.match(/POINT\\((\\d+\\.\\d+) (\\d+\\.\\d+)\\)/);\n            self.map.map.panTo(new L.LatLng(match[2], match[1]));\n            self.onMapClick({ latlng: { lat: match[2], lng: match[1] } }, true)\n          }\n        })\n        .catch((err) => {\n          console.log('Search failed:', err);\n          callback(searchValue, searchResult)\n        });\n      \n    }\n\t\t\n\t}\n\n  // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n  // setCurrentPolygon(polygon) {\n  //   let state = { ...this.state };\n  //   state.currentPolygon = polygon ? this.map.createCutoutPolygon(polygon): undefined;\n  //   this.setState(state);\n  // }\n\n  // removeCurrentPolygon() {\n  //   this.map.removePolygon(this.state.currentPolygon)\n  //   let state = { ...this.state };\n  //   state.currentPolygon = undefined;\n  //   this.setState(state);\n  // }\n\n  getVisibleIdeas() {\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n      return this.state.visibleIdeas;\n    } else {\n      let visibleIdeas = this.map.getVisibleIdeas()\n      this.setState({ visibleIdeas });\n      return visibleIdeas;\n    }\n  }\n\n  setSelectedLocation(location) {\n    let self = this;\n    self.map.setSelectedLocation(location)\n    if (self.ideaform) {\n      if (!location) return;\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t\tself.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t\tlet address = json && json._display || 'Geen adres gevonden';\n\t\t\t\tself.state.editIdea.address = address;\n\t\t\t\tself.ideaform.handleLocationChange({ location, address: address });\n\t\t\t})\n    }\n  }\n\n  setNewIdea(idea) {\n    let self = this;\n    if (idea) idea.isPointInPolygon = idea.location && self.map.isPointInPolygon( { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, self.config.map.polygon )\n    self.setState({ editIdea: idea }, function() {\n      if (idea) {\n        self.map.fadeMarkers({exception: [idea.location]});\n        self.setSelectedLocation({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] });  \n        if (self.infoblock) {\n          self.setState({ editIdea: self.state.editIdea });\n          self.infoblock.setNewIdea({ ...self.state.editIdea, address: 'Bezig met adresgegevens ophalen...' });\n          self.map.getPointInfo({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, null, function(json, marker) {\n            let address = json && json._display || 'Geen adres gevonden';\n            let editIdea = self.state.editIdea;\n            editIdea.address = address;\n            self.setState({ editIdea });\n            self.infoblock.setNewIdea({ ...self.state.editIdea, address });\n          })\n          //self.infoblock.updateIdeas({ ideas: self.getVisibleIdeas().filter( x => x.id != idea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n          self.infoblock.updateIdeas({ ideas: self.state.ideas.filter( x => x.id != idea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n        }\n      } else {\n        self.map.unfadeAllMarkers();\n        self.setSelectedLocation(null);\n        if (self.infoblock) {\n          self.infoblock.setNewIdea(null);\n          self.infoblock.updateIdeas({ ideas: self.getVisibleIdeas(), showSortButton: true });\n        }\n      }\n    });\n  }\n\n  setSelectedIdea(idea) {\n    OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-selected', idea && idea.id );\n    OpenStadComponentLibs.localStorage.set('osc-ideas-on-map-details', null);\n    this.selectedIdea = idea;\n    if (idea) {\n      this.map.fadeMarkers({exception: idea});\n      if (this.infoblock) {\n        this.infoblock.setSelectedIdea(idea);\n        // this.infoblock.updateIdeas({ ideas: this.getVisibleIdeas().filter( x => x.id != idea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n        this.infoblock.updateIdeas({ ideas: this.state.ideas.filter( x => x.id != idea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] }, maxLength: 5 });\n      }\n    } else {\n      this.map.unfadeAllMarkers();\n      if (this.infoblock) {\n        this.infoblock.setSelectedIdea(null);\n        this.infoblock.updateIdeas({ ideas: this.getVisibleIdeas(), showSortButton: true });\n      }\n    }\n  }\n  \n\tonMapClick(event, forceSelectLocation) {\n\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n    switch (this.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        let isPointInPolygon = this.map.isPointInPolygon( event.latlng, this.config.map.polygon );\n        if (isPointInPolygon) this.setSelectedLocation(event.latlng)\n        break;\n\n      default:\n        if (( this.selectedIdea || this.map.selectedLocation ) && !forceSelectLocation) {\n          this.setState({ ...this.state, status: 'default', currentIdea: null });\n          this.setSelectedIdea(null);\n          this.setNewIdea(null);\n          this.infoblock.updateIdeas({ ideas: this.getVisibleIdeas(), showSortButton: true });\n        } else {\n          this.setState({ ...this.state, status: 'location-selected', currentIdea: null });\n          this.setSelectedIdea(null);\n          let newIdea = { id: 'New Idea', location: { coordinates: [ event.latlng.lat, event.latlng.lng ] } };\n          this.setNewIdea(newIdea);\n          // setTimeout( function() {\n\t\t      // var event = new window.CustomEvent('newIdeaClick', { detail: { newIdea } });\n\t\t      //   document.dispatchEvent(event);\n          // }, 500 );\n        }\n        this.map.updateFading();\n        document.querySelector('#osc-ideas-on-map-info').scrollTo(0,0)\n    }\n  }\n\n\tonMarkerClick(event) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (this.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        break;\n\n      default:\n        if (this.state.editIdea) {\n          this.setState({ status: 'default', currentIdea: null });\n          this.setNewIdea(null);\n          this.setSelectedIdea(null);\n          this.setSelectedIdea(null);\n        } else {\n          this.setState({ status: 'idea-selected', currentIdea: event.target.data });\n          this.setNewIdea(null);\n          this.setSelectedIdea(event.target.data);\n        }\n        document.querySelector('#osc-ideas-on-map-info').scrollTo(0,0)\n\n    }\n  }\n\n\tonClusterClick(event) {\n\n\t\tif ( this.state.mobileState == 'opened' ) { // werkt omdat hij alleen op mobiel opend kan zijn\n\t\t\tthis.infoblock.setState({ mobileState: 'closed' })\n\t\t\tthis.setState({ mobileState: 'closed' }, function() {\n\t\t\t\tthis.map.map.invalidateSize();\n\t\t\t})\n\t\t\treturn;\n\t\t}\n\n    this.setState({ ...this.state, status: 'default', currentIdea: null });\n    this.setNewIdea(null);\n    this.setSelectedIdea(null);\n  }\n\n  onChangeMapBoundaries() {\n    let self = this;\n    self.map.updateFading();\n    switch (self.state.status) {\n\n      case 'idea-details':\n        break;\n\n      case 'idea-form':\n        break;\n\n      case 'idea-selected':\n      case 'location-selected':\n        if (self.infoblock) {\n          let selectedIdea = self.state.currentIdea || self.selectedIdea || self.state.editIdea;\n          if (selectedIdea && selectedIdea) {\n            self.infoblock.updateIdeas({ ideas: self.state.ideas.filter( x => x.id != selectedIdea.id ), sortOrder: 'distance', showSortButton: false, center: { lat: selectedIdea.location.coordinates[0], lng: selectedIdea.location.coordinates[1] }, maxLength: 5 });\n          }\n        }\n        break;\n\n      default:\n        if (self.infoblock) {\n          self.infoblock.updateIdeas({ ideas: self.getVisibleIdeas(), showSortButton: true });\n        }\n\n    }\n  }\n\n\tonUpdateEditIdea(idea) {\n    this.setState({ ...this.state, editIdea: { ...idea }, currentIdea: idea });\n  }\n\n\tonUpdateSelectedIdea(idea) {\n    if (this.state.editIdea) this.setNewIdea(null);\n    let status = idea ? 'idea-selected' : 'default';\n    this.setState({ ...this.state, status, currentIdea: idea }, function() {\n      this.setSelectedIdea(idea);\n    });\n  }\n\n\tonCloseSelectedLocation() {\n    this.setState({ ...this.state, status: 'default', currentIdea: null }, function() {\n      this.setSelectedIdea(null);\n      this.setNewIdea(null);\n      this.setSelectedLocation(null);\n    });\n  }\n  \n  onIdeaClick(idea) {\n    // let showDetails = this.state.status == 'location-selected' || this.state.status == 'idea-selected';\n    if (this.state.editIdea) this.setNewIdea(null);\n    this.setState({ status: 'idea-selected', currentIdea: idea }, function() {\n      this.setSelectedIdea(idea);\n      // if (showDetails) this.showIdeaDetails(idea);\n      this.showIdeaDetails(idea);\n    });\n  };\n\n  onEditIdeaClick(idea) {\n    let self = this;\n    let location = { lat: idea.location.coordinates[0], lng: idea.location.coordinates[1] };\n    self.showIdeaForm(idea, () => {\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t  self.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t  let address = json && json._display || 'Geen adres gevonden';\n\t\t\t  self.state.editIdea.address = address;\n\t\t\t  self.ideaform.handleLocationChange({ location, address: address });\n\t\t  })\n    });\n  };\n\n  onIdeaDeleted(ideaId) {\n    let self = this;\n    self.setNewIdea(null);\n    self.setSelectedIdea(null);\n    self.setSelectedLocation(null);\n    self.setState({ status: 'default' }, function() {\n      self.map.map.invalidateSize();\n      self.map.setBoundsAndCenter();\n      self.fetchData({});\n    });\n  };\n\n  onDeleteIdeaClick(idea) {\n    console.log('Delete idea', idea.id);\n    alert('TODO')\n  };\n\n  onSelectedIdeaClick(idea) {\n    this.showIdeaDetails(idea);\n  };\n  \n  onNewIdeaClick() {\n    let self = this;\n    self.showIdeaForm(this.state.editIdea, () => {\n      let location = { lat: this.state.editIdea.location.coordinates[0], lng: this.state.editIdea.location.coordinates[1] };\n      self.ideaform.handleLocationChange({ location, address: 'Bezig met adresgegevens ophalen...' });\n\t\t  self.map.getPointInfo(location, null, function(json, marker) {\n\t\t\t  let address = json && json._display || 'Geen adres gevonden';\n\t\t\t  self.state.editIdea.address = address;\n\t\t\t  self.ideaform.handleLocationChange({ location, address: address });\n\t\t  })\n    });\n  };\n\n\n  onNewIdeaStored(idea) {\n    let self = this;\n    self.setNewIdea(null);\n    self.fetchData({showIdeaSelected: idea.id});\n  }\n\n  onIdeaLiked(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.yes += data.change;\n  }\n\n  onReactionStored(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.argCount++;\n    setTimeout(e => { window.location.hash = `#osc-reaction-${data.id}` }, 1000);\n  }\n\n  onReactionDeleted(data) {\n    let idea = this.state.ideas.find( idea => idea.id == data.ideaId );\n    idea.argCount--;\n  }\n  \n  onChangeTypeFilter(value) {\n    let self = this;\n    self.setSelectedIdea(null);\n    self.setNewIdea(null);\n    self.setSelectedLocation(null);\n\t  self.map.setFilter(function(marker) {\n\t\t  if (value && value !== '0') {\n\t\t\t  return marker.data && eval(`marker.data.${self.config.typeField}`) && eval(`marker.data.${self.config.typeField}`) == value;\n\t\t  } else {\n\t\t\t  return true;\n\t\t  }\n\t  })\n    self.setState({ status: 'default' })\n    self.map.setBoundsAndCenter();\n    self.onChangeMapBoundaries(); // todo: rename\n  }\n\n  // dit is opgezet maar wordt niet genbruikt en is daarom niet afgemaakt; latere wijzigingen maken dat dit niet meer werkt\n  // onChangeAreaFilter(area) {\n  //   let self = this;\n  //   self.setSelectedIdea(null);\n  //   self.setNewIdea(null);\n  //   self.removeCurrentPolygon();\n  //   self.setCurrentPolygon( area && area.polygon );\n  //   self.setState({ status: 'default' })\n  //   self.map.setBoundsAndCenter(area && area.polygon || self.config.map.polygon || self.map.markers);\n  // }\n\n  onMouseOverListItem(idea) {\n    this.setState({ currentMouseOverIdea: idea });\n    this.map.fadeMarkers({ exception: idea })\n    this.map.updateFading();\n  }\n\n  onMouseOutListItem(idea) {\n    this.setState({ currentMouseOverIdea: null });\n    this.map.unfadeAllMarkers()\n    if (this.selectedIdea) {\n      this.map.fadeMarkers({exception: this.selectedIdea});\n    }\n    if (this.map.selectedLocation) {\n      this.map.fadeMarkers({});\n    }\n    this.map.updateFading();\n  }\n  \n  onClickMobileSwitcher() {\n    let self = this;\n    self.infoblock.setState({ mobileState: self.state.mobileState == 'closed' ? 'opened' : 'closed' })\n    self.setState({ mobileState: self.state.mobileState == 'closed' ? 'opened' : 'closed' }, function() {\n      self.map.map.invalidateSize();\n      if (this.state.status == 'location-selected' || this.state.status == 'idea-selected') {\n        let selectedIdea = self.state.currentIdea || self.selectedIdea || self.state.editIdea;\n        self.map.setBoundsAndCenter();\n      }\n    })\n  }\n  \n\trender() {\n\n    let infoHTML = null; // todo: ik denk dat dit naar infoblock moet\n    let filterHTML = null;\n    let mobilePopupHTML = null;\n\n    switch(this.state.status) {\n\n      case 'idea-details':\n        let config = { // TODO: niet bij elke render\n          titleField: this.config.titleField,\n          summaryField: this.config.summaryField,\n          typeField: this.config.typeField,\n          // areaField: this.config.areaField,\n          siteId: this.config.siteId,\n          user: this.config.user,\n          api: this.config.api,\n          argument: { ...this.config.argument },\n          labels: {\n            Kans: { text: 'Dit gaat goed', color: 'black', backgroundColor: '#bed200' },\n            Knelpunt: { text: 'Dit kan beter', color: 'black', backgroundColor: '#ff9100' },\n          },\n          showVoteButtons: this.config.idea.showVoteButtons,\n          poll: this.config.poll,\n        };\n        config.argument.isActive = this.config.argument.isActive && !this.config.content.ignoreReactionsForIdeaIds && this.config.content.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${this.state.currentIdea.id}(?:\\\\D|$)`));\n        infoHTML = (\n\t\t\t    <OpenStadComponentIdeaDetails id={this.divId + '-infoblock'} config={config} idea={this.state.currentIdea} label={this.state.currentIdea.extraData.type} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.ideadetails = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <div className=\"osc-ideas-on-map-filterbar\"><div className=\"osc-backbutton\" onClick={() => this.hideIdeaDetails()}>Terug naar overzicht</div></div>\n        );\n        break;\n\n      case 'idea-form':\n        infoHTML = (\n\t\t\t    <IdeaForm id={this.divId + '-infoblock'} config={{ siteId: this.config.siteId, user: this.config.user, api: this.config.api, ...this.config.idea }} idea={{ ...this.state.editIdea, user: this.state.editIdea && this.state.editIdea.user || this.config.user }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.ideaform = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <div className=\"osc-ideas-on-map-filterbar\"><div className=\"osc-backbutton\" onClick={() => this.hideIdeaForm()}>Terug naar {this.state.editIdea && typeof this.state.editIdea.id == 'number' ? 'idee' : 'overzicht'}</div></div>\n        );\n        break;\n\n      case 'location-selected':\n      case 'idea-selected':\n        if (this.state.status == 'location-selected') {\n          if (this.state.editIdea && this.state.editIdea.isPointInPolygon) {\n\n            let contentHTML = this.config.api.isUserLoggedIn ? this.config.content.mobilePreviewLoggedInHTML : this.config.content.mobilePreviewNotLoggedInHTML;\n\n            let addButton = null; let loginButton = null; let loginLink = null;\n            if (this.config.api.isUserLoggedIn) {\n              if (this.config.idea.canAddNewIdeas) {\n                addButton = (\n                  <button className=\"osc-button osc-button-blue\" onClick={(event) => { this.onClickMobileSwitcher(event); this.onNewIdeaClick(event)} } ref={el => (self.newIdeaButton = el)}>Nieuw punt toevoegen</button>\n                );\n              }\n            } else {\n              if (this.config.idea.canAddNewIdeas) {\n                loginButton = (\n                  <button onClick={() => { document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n                );\n                loginLink = \"javascript: document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href)\";\n              }\n            }\n            \n            contentHTML = contentHTML.replace(/\\{address\\}/g, this.state.editIdea.address || '');\n            contentHTML = contentHTML.replace(/\\{loginLink\\}/g, loginLink);\n            \n            contentHTML = OpenStadComponentLibs.reactTemplate({ html: contentHTML, addButton, loginButton })\n\n            mobilePopupHTML = (\n\t\t\t\t\t\t\t<div className=\"ocs-mobile-popup\">\n\t\t\t\t\t\t\t\t{contentHTML}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n          }\n        } else {\n          mobilePopupHTML = (\n            <div className=\"ocs-mobile-popup ocs-clickable\" onClick={ () =>  { this.setState({ mobileState: 'opened' }); this.infoblock.setState({ mobileState: 'opened' }); this.showIdeaDetails(this.state.currentIdea) } }>\n              <div className=\"osc-image\" style={{ backgroundImage: `url(${this.state.currentIdea && this.state.currentIdea.image})` }}></div>\n              { eval(this.state.currentIdea && `this.state.currentIdea.${this.config.titleField}`) }\n            </div>\n          );\n        }\n        infoHTML = (\n\t\t\t    <InfoBlock id={this.divId + '-infoblock'} config={{ api: this.config.api, title: this.config.title, titleField: this.config.titleField, summaryField: this.config.summaryField, types: this.config.types, content: this.config.content, argument: this.config.argument, idea: this.config.idea  }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.infoblock = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <Filterbar id={this.divId + '-filterbar'} config={{ types: this.config.types, areas: this.config.areas, doSearchFunction: this.config.doSearchFunction, title: this.config.title }} className=\"osc-ideas-on-map-filterbar\" ref={el => (this.filterbar = el)}/>\n        );\n        break;\n\n      default:\n        infoHTML = (\n\t\t\t    <InfoBlock id={this.divId + '-infoblock'} config={{ api: this.config.api, title: this.config.title, titleField: this.config.titleField, summaryField: this.config.summaryField, types: this.config.types, content: this.config.content, argument: this.config.argument, idea: this.config.idea  }} id=\"osc-ideas-on-map-info\" className=\"osc-ideas-on-map-info\" mobileState={this.state.mobileState} ref={el => (this.infoblock = el)}/>\n        );\n        filterHTML = (\n\t\t\t\t  <Filterbar id={this.divId + '-filterbar'} config={{ types: this.config.types, areas: this.config.areas, doSearchFunction: this.config.doSearchFunction, title: this.config.title }} className=\"osc-ideas-on-map-filterbar\" ref={el => (this.filterbar = el)}/>\n        );\n        mobilePopupHTML = null;\n        break;\n            \n    }\n\n    return (\n\t\t\t<div id={this.divId} className={`osc-ideas-on-map osc-ideas-on-map-${this.state.status} osc-mobile-${this.state.mobileState}`} ref={el => (this.instance = el)}>\n        {filterHTML}\n        {infoHTML}\n        <div className=\"osc-ideas-on-map-map\">\n\t\t\t\t  <Map id={this.divId + '-map'} className=\"\" config={{ ...this.config.map, types: this.config.types, typeField: this.config.typeField }} ref={el => (this.map = el)}/>\n        </div>\n        {mobilePopupHTML}\n\t\t\t</div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport IdeasList from './ideas-list.jsx';\n\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\n// TODO: na verandering op verandering denk ik dat dit een status moet gaan krijgen ipv. de new en selected versie.\n// TODO: setNewIdea refactoren naar setSelectedLocation\n// TODO: events worden via document gestuurd; dat kan ook intern\n\n'use strict';\n\nexport default class InfoBlock extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tlet defaultConfig = {\n      content: {\n        noSelectionHTML: '<div class=\\\"osc-info-block-default-block\\\"><div class=\\\"osc-info-block-default-block-line osc-line-1\\\">Klik op een plek op de kaart om een nieuw punt toe te voegen.</div><div class=\\\"osc-info-block-default-block-line osc-line-2\\\">Selecteer een inzending op de kaart om meer informatie over de inzending te bekijken.</div><div class=\\\"osc-info-block-default-block-line osc-line-3\\\">Bekijk hieronder de inzendingen die nu zichtbaar zijn op de kaart.</div></div>',\n        selectionActiveLoggedInHTML: 'Ingelogd: er is een punt geselecteerd binnen de polygon, met een adres: {address} en {addButton}.',\n        selectionInactiveLoggedInHTML: 'Ingelogd: er is een punt geselecteerd buiten de polygon, met een {address}',\n        selectionActiveNotLoggedInHTML: 'Niet ingelogd: er is een punt geselecteerd binnen de polygon, met een adres: {address} en {loginButton} of <a href=\"{loginLink}\">login link</a>.',\n        selectionInactiveNotLoggedInHTML: 'Niet ingelogd: er is een punt geselecteerd buiten de polygon, met een {address}',\n        ignoreReactionsForIdeaIds: '',\n      },\n      idea: {\n        canAddNewIdeas: true,\n        showVoteButtons: true,\n      },\n      argument: {\n        isActive: true,\n      },\n\t\t};\n\n    this.config = merge.recursive(defaultConfig, this.config, props.config || {})\n\n    this.state = {\n      currentSortOrder: this.config.defaultSortOrder,\n      selectedIdea: undefined,\n      newIdea: undefined,\n      ideas: [],\n      mobileState: props.mobileState || 'closed',\n    };\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    this.eventTarget = this.config.eventTarget || this.instance;\n  }\n\n  updateIdeas({ ideas = this.state.ideas, sortOrder = this.state.currentSortOrder, showSortButton, center = { lat: 52.37104644463586, lng: 4.900402911007405 }, maxLength }) {\n    this.setState({ ideas });\n    this.list.updateIdeas({ ideas, sortOrder, showSortButton, center, maxLength });\n  }\n\n  setSelectedIdea(idea) {\n    this.setState({ ...this.state, selectedIdea: idea, newIdea: null });\n  }\n\n  setNewIdea(idea) {\n    this.setState({ ...this.state, newIdea: idea, selectedIdea: null });\n  }\n\n  dispatchUpdateSelectedIdea(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('updateSelectedIdea', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n\n  dispatchCloseSelectedLocation(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('closeSelectedLocation', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  dispatchSelectedIdeaClick(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('selectedIdeaClick', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  };\n\n  dispatchOnIdeaClick(e, idea) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('ideaClick', { detail: { idea } });\n\t\tdocument.dispatchEvent(event);\n  }\n  \n  dispatchNewIdeaClick(e) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('newIdeaClick', { detail: {} });\n\t\tdocument.dispatchEvent(event);\n  };\n  \n  dispatchClickMobileSwitcher(e) {\n    e.stopPropagation();\n\t\tvar event = new window.CustomEvent('clickMobileSwitcher', { detail: {} });\n\t\tdocument.dispatchEvent(event);\n  };\n  \n  render() {\n\n    let self = this;\n\n    let newIdeaHTML = null;\n    let selectedIdeaHTML = null;\n    let titleAddition = '';\n    let mobileSwitcherHTML = null;\n    let mobileTitle = '';\n\n    // new idea\n    if (self.state.newIdea) {\n      let contentHTML = null; let addButton = null; let loginButton = null; let loginLink = null;\n      if (self.state.newIdea.isPointInPolygon) {\n        if (self.config.api.isUserLoggedIn) {\n          contentHTML = self.config.content.selectionActiveLoggedInHTML\n        } else {\n          contentHTML = self.config.content.selectionActiveNotLoggedInHTML\n        }\n      } else {\n        if (self.config.api.isUserLoggedIn) {\n          contentHTML = self.config.content.selectionInactiveLoggedInHTML\n        } else {\n          contentHTML = self.config.content.selectionInactiveNotLoggedInHTML\n        }\n      }\n\n      if (self.config.api.isUserLoggedIn) {\n        if (self.config.idea.canAddNewIdeas) {\n          addButton = (\n            <button className=\"osc-button osc-button-blue\" onClick={(event) => self.dispatchNewIdeaClick(event)}>Nieuw punt toevoegen</button>\n          );\n        }\n      } else {\n        if (self.config.idea.canAddNewIdeas) {\n          loginButton = (\n            <button onClick={() => { document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href) }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n          );\n          loginLink = \"javascript: document.location.href = '/oauth/login?returnTo=' + encodeURIComponent(document.location.href)\";\n        }\n      }\n\n      contentHTML = contentHTML.replace(/\\{address\\}/g, self.state.newIdea.address || '');\n      contentHTML = contentHTML.replace(/\\{loginLink\\}/g, loginLink);\n      contentHTML = OpenStadComponentLibs.reactTemplate({ html: contentHTML, addButton, loginButton })\n\n      newIdeaHTML = (\n\t\t\t  <div className=\"osc-info-block-new-idea\">\n          <button className=\"osc-close-button-black\" onClick={(event) => self.dispatchCloseSelectedLocation(event, null)} ref={el => (self.resetButton = el)}/>\n          {contentHTML}\n        </div>\n      );\n\n\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details en acties';\n    }\n\n    // selected idea\n    if (self.state.selectedIdea) {\n      let idea = self.state.selectedIdea;\n      let typeDef = self.config.types.find(entry => idea.extraData && entry.name == idea.extraData.theme);\n      if (!typeDef || !typeDef.listicon) { typeDef = { listicon: { html: '' } }; } // console.log(idea.extraData.theme + ' niet gevonden'); }\n      let voteCountHTML = null;\n      if (this.config.idea.showVoteButtons) {\n        voteCountHTML = (\n          <div className=\"osc-likes\">\n            {idea.yes || 0}\n          </div>);\n      }\n      let argcountHTML = null;\n      if (this.config.argument.isActive && !this.config.content.ignoreReactionsForIdeaIds.match(new RegExp(`(?:^|\\\\D)${idea.id}(?:\\\\D|$)`))) {\n        argcountHTML = (\n          <div className=\"osc-reactions\">\n            {idea.argCount || 0}\n          </div>);\n      }\n      selectedIdeaHTML = (\n\t\t\t  <div className=\"osc-info-block-selected-idea\" onClick={(event) => self.dispatchSelectedIdeaClick(event, self.state.selectedIdea)}>\n          <button className=\"osc-close-button-black\" onClick={(event) => self.dispatchUpdateSelectedIdea(event, null)} ref={el => (self.resetButton = el)}/>\n          <h3>Geselecteerd</h3>\n          <div className=\"osc-info-block-selected-idea-idea\">\n            <div className=\"osc-image\" style={{ backgroundImage: `url(${idea.image})` }}></div>\n            <div className=\"osc-content\">\n              <h4>{ eval(`idea.${self.config.titleField}`) }</h4>\n              <div className=\"osc-summary\">\n                { eval(`idea.${self.config.summaryField}`) }\n              </div>\n              <div className=\"osc-stats\">\n                {voteCountHTML}\n                {argcountHTML}\n                <div className=\"osc-type\">\n                  <div className=\"osc-type-content\" dangerouslySetInnerHTML={{ __html: typeDef.listicon.html }}></div>\n                </div>\n              </div>\n            </div>\n            <div className=\"osc-clear-both\"></div>\n          </div>\n        </div>\n      );\n      titleAddition = 'in de buurt';\n      mobileTitle = 'Meer details';\n    }\n\n    if (!titleAddition) titleAddition = 'in dit gebied';\n\n    let defaultBlockHTML = null;\n    if (!newIdeaHTML && !selectedIdeaHTML) {\n      let noSelectionHTML = self.config.content.noSelectionHTML;\n      defaultBlockHTML = (\n\t\t\t  <div className=\"osc-info-block-default-block\" dangerouslySetInnerHTML={{ __html: noSelectionHTML }}></div>\n      );\n      mobileTitle = `${self.config.title} in dit gebied (${self.state.ideas && self.state.ideas.length || 0})`;\n    }\n\n    if (self.state.mobileState == 'opened') {\n      mobileTitle = 'Terug naar de kaart';\n    }\n\n    mobileSwitcherHTML = (\n      <div className=\"osc-mobile-switcher\" onClick={ e => self.dispatchClickMobileSwitcher(e) }>\n        {mobileTitle}\n      </div>\n    );\n\n    // TODO: kan de key weg uit IdeasList\n    return (\n\t\t\t<div id={self.props.id} className={self.props.className || 'osc-info-block'} ref={el => (self.instance = el)}>\n        {mobileSwitcherHTML}\n\t\t\t  <div className=\"osc-info-content\">\n          {defaultBlockHTML}\n          {newIdeaHTML}\n          {selectedIdeaHTML}\n\t\t\t    <IdeasList config={{ ...self.config, onIdeaClick: ( event, idea ) => self.dispatchOnIdeaClick(event, idea) }} ideas={self.state.ideas} title={self.config.title + ' ' + titleAddition} key={`osc-ideas-list-321`} ref={el => (self.list = el)}/>\n\t\t\t  </div>\n\t\t\t</div>\n\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport OpenStadComponentNLMap from '../../nlmap/index.jsx';\n\n'use strict';\n\nexport default class Map extends OpenStadComponentNLMap {\n\n  constructor(props) {\n\n    super(props);\n\n\t\t// config\n\t\tthis.defaultConfig = {\n      clustering: {\n        maxClusterRadius: 100,\n        showCoverageOnHover: false,\n      },\n    };\n\t\tthis.config = merge.recursive(this.defaultConfig, this.config, props.config || {})\n\n    // tmp fallback\n    this.config.polygon = this.config.polygon;\n    this.config.autoZoomAndCenter = this.config.autoZoomAndCenter || 'polygon'\n    \n    this.ideas = [];\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\n    super.componentDidMount(prevProps, prevState);\n\n    let self = this;\n\t\tdocument.addEventListener('osc-map-cluster-animation-end', function(event) {\n      self.onMapClusterAnimationEnd(event.detail);\n    });\n\n  }\n  \n  addIdea(idea) {\n    let self = this;\n    self.ideas.push(idea);\n    // todo: dit moet met een iconCreate functie\n    let typename = idea && eval(`idea.${self.config.typeField}`);\n\t\tlet typeDef = self.config.types.find(entry => entry.name == typename);\n    // if (!typeDef) { console.log(typename + ' niet gevonden'); }\n\t\tlet color = typeDef && typeDef.color || '#164995';\n    let icondef = ( typeDef && ( typeDef.mapicon || typeDef.icon ) ) || { html: `<svg viewBox=\"0 0 26 26\"><circle cx=\"13\" cy=\"13\" r=\"13\" fill=\"${color}\"/></svg>`, width: 26, height: 26, anchor: [13, 13] };\n\t\tlet icon = L.divIcon({ html: icondef.html, className: 'osc-ideas-on-map-icon', iconSize: L.point(icondef.width, icondef.height), iconAnchor: icondef.anchor });\n    self.addMarker({ lat: idea.location.coordinates[0], lng: idea.location.coordinates[1], data: idea, icon });\n  }\n\n  getVisibleIdeas() {\n    let self = this;\n    let visibleIdeas = self.markers\n        .filter( marker => marker.visible && marker.data && self.map.getBounds().contains(marker.getLatLng()))\n        .map( marker => marker.data );\n    self.setState({ visibleIdeas });\n    return visibleIdeas;\n  }\n\n  setSelectedLocation(location) {\n    this.selectedLocation = location;\n    if (this.selectedLocation) {\n      if (this.selectedLocationMarker) {\n        this.updateMarker(this.selectedLocationMarker, { location });\n      } else {\n\t\t    let icon = L.divIcon({ html: '<svg width=\"39\" height=\"50\" viewBox=\"0 0 39 50\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M19.1038 0C29.6577 0 38.2075 8.46671 38.2075 18.9181C38.2075 33.1786 21.7544 47.7273 21.0432 48.3035L19.1038 50L17.1643 48.3035C16.4532 47.7273 0 33.1786 0 18.9181C0 8.46831 8.54983 0 19.1038 0ZM32.3245 18.9181C32.3083 11.6837 26.4091 5.84187 19.1038 5.82586C11.7984 5.84187 5.89922 11.6837 5.88306 18.9181C5.88306 27.3367 14.1581 37.2439 19.0876 42.1095C23.1767 38.1242 32.3245 27.993 32.3245 18.9181Z\" fill=\"#EC0000\"/><path d=\"M19.104 5.82568C26.4093 5.84169 32.3086 11.6836 32.3247 18.9179C32.3247 27.9928 23.1769 38.124 19.0879 42.1093C14.1584 37.2437 5.8833 27.3366 5.8833 18.9179C5.89946 11.6836 11.7987 5.84169 19.104 5.82568ZM25.5689 18.9179C25.5689 15.3807 22.6759 12.5158 19.104 12.5158C15.5322 12.5158 12.6391 15.3807 12.6391 18.9179C12.6391 22.455 15.5322 25.3199 19.104 25.3199C22.6759 25.3199 25.5689 22.455 25.5689 18.9179Z\" fill=\"white\"/><path d=\"M19.1038 25.3202C22.6743 25.3202 25.5687 22.4539 25.5687 18.9182C25.5687 15.3824 22.6743 12.5161 19.1038 12.5161C15.5333 12.5161 12.6389 15.3824 12.6389 18.9182C12.6389 22.4539 15.5333 25.3202 19.1038 25.3202Z\" fill=\"#EC0000\"/></svg>', className: 'osc-ideas-on-map-icon', iconSize: L.point(39, 50), iconAnchor: [20, 50] });\n        this.selectedLocationMarker = this.addMarker({ ...location, icon, doNotCluster: true });\n      }\n    } else {\n      if (this.selectedLocationMarker) {\n        this.removeMarker(this.selectedLocationMarker);\n      }\n      this.selectedLocationMarker = null;\n    }\n  }\n\n  setBoundsAndCenter(points) {\n    super.setBoundsAndCenter(points || ( this.config.autoZoomAndCenter == 'polygon' && this.config.polygon ) || this.map.markers);\n  }\n\n  showMarkers({ keepCenter=false }) {\n    console.log('keepCenter', keepCenter);\n\t  var self = this;\n    self.markers.forEach((marker) => {\n      self.showMarker(marker)\n    });\n    // if (!keepCenter) self.setBoundsAndCenter(( self.config.autoZoomAndCenter == 'polygon' && self.config.polygon ) || self.markers);\n  }\n\n  hideMarkers({ exception }) {\n\t  var self = this;\n    if (exception) self.setBoundsAndCenter([ exception.location ]);\n    self.markers.forEach((marker) => {\n      if (!(exception && exception.location.lat == marker._latlng.lat && exception.location.lng == marker._latlng.lng)) {\n        self.hideMarker(marker)\n      }\n    });\n  }\n\n  fadeMarkers({ exception }) {\n    console.log(exception && exception.id);\n    let self = this;\n    self.markers.forEach((marker) => {\n      if (exception && marker.data && marker.data.id && exception.id == marker.data.id) {\n        if (marker.data) marker.data.isFaded = false;\n      } else {\n        if (marker.data) marker.data.isFaded = true;\n        let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n        let ignore = visibleParent && visibleParent.getAllChildMarkers && visibleParent.getAllChildMarkers().find( m => m.data && m.data.isFaded === false );\n        if (!ignore && visibleParent) {\n          visibleParent.setOpacity(0.3);\n        }\n      }\n    });\n  }\n\n  // fix for https://github.com/Leaflet/Leaflet.markercluster/issues/177\n  updateFading() {\n    let self = this;\n    self.markers.forEach((marker) => {\n      let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n      if (visibleParent && marker.visible) {\n        let ignore = visibleParent && visibleParent.getAllChildMarkers && visibleParent.getAllChildMarkers().find( m => m.data && m.data.isFaded === false );\n        visibleParent.setOpacity(!ignore && marker.data && marker.data.isFaded ? 0.3 : 1);\n      }\n    });\n  }\n\n  unfadeAllMarkers() {\n    let self = this;\n    // markers\n    self.markers.forEach((marker) => {\n      if (marker.data) marker.data.isFaded = false;\n      let visibleParent = self.markerClusterGroup && self.markerClusterGroup.getVisibleParent(marker);\n        if (visibleParent) {\n          visibleParent.setOpacity(1);\n        }\n    });\n  }\n\n  onMapClusterAnimationEnd() {\n    this.updateFading();\n  }\n\n}\n","import React from 'react';\n\n'use strict';\n\nexport default class Search extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tlet defaultConfig = {\n\t\t};\n\t\tthis.config = Object.assign(defaultConfig, this.props.config || {})\n\n    this.config.doSearchFunction = this.config.doSearchFunction || this.doSearchx.bind(this);\n\n\t\t\n    this.state = {\n\t\t\tsearchValue: '',\n\t\t\tsearchResult: { locations: [], ideas: [] },\n\t\t\tshowSuggestions: false,\n    }\n\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n\t}\n\n  handleChange(value) {\n\n    this.updateSearchValue(value);\n\n\t\tif (value.length >=3) {\n\t\t\tthis.config.doSearchFunction(value, this.updateSearchResult.bind(this));\n\t\t}\n\n\t\t// dispatch an event\n\t\t//var event = new window.CustomEvent('typeFilterUpdate', { detail: { value: value } });\n\t\t//this.instance.dispatchEvent(event);\n\n  }\n\n  handleButtonClick(event) {\n\t\tlet self = this;\n    if (self.state.searchValue) {\n      self.setState({ searchValue: '' }, () => {\n        self.inputfield.focus();\n      });\n    }\n  }\n\n  updateSearchValue(value) {\n    this.setState({\n\t\t\tsearchValue: value,\n\t\t\tshowSuggestions: value.length >=3 ? true : false,\n\t\t});\n  }\n\n  showSuggestions() {\n    this.setState({ showSuggestions: this.state.searchValue.length >= 3 ? true : false });\n\t}\n\n\thideSuggestions() {\n\t\tlet self = this;\n\t\t// TODO: dit moet anders; het gaat er om dat de onclick op suggesties niet doorkomt omdat hij deze eerst doet\n\t\tsetTimeout(function(){self.setState({ showSuggestions: false });}, 500);\n\t}\n\n\tupdateSearchResult(searchValue, searchResult) {\n\t\t// console.log('update', searchValue, searchResult);\n    this.setState({...this.state, searchResult, showSuggestions: searchValue.length >= 3 ? true : false });\n\t}\n\n\tdoSearchx(value) {\n\t\tconsole.log('search function not defined');\n\t}\n\n  onSuggestionClick(text, event, next) {\n    this.updateSearchValue(text)\n    if (next) next(event)\n  }\n\n\trender() {\n\n    let self = this;\n\n\t\tlet suggestionsHTML = null;\n\t\tif (self.state.showSuggestions) {\n\t\t\tsuggestionsHTML = (\n\t\t\t\t<div className=\"osc-search-suggestions\" ref={el => (self.suggestions = el)}>\n\t\t\t\t\tAdressen:\n          { self.state.searchResult.locations.map((result, i) => {\n\t\t\t\t\t\tlet text = result.text.replace(new RegExp(self.state.searchValue, 'ig'), ($0) => '<strong>' + $0 + '</strong>');\n            return <div className=\"osc-search-suggestion osc-search-suggestion-idea\" onClick={ event => self.onSuggestionClick(result.text, event, result.onClick) } key={'search-result-' + i} dangerouslySetInnerHTML={{__html: text}}></div>;\n          })}\n\t\t\t\t\t<div className=\"osc-search-suggestions-hr\"/>\n\t\t\t\t\t{ this.config.title }:\n          { self.state.searchResult.ideas.map((result, i) => {\n\t\t\t\t\t\tlet text = result.text.replace(new RegExp(self.state.searchValue, 'ig'), ($0) => '<strong>' + $0 + '</strong>');\n            return <div className=\"osc-search-suggestion osc-search-suggestion-idea\" onClick={ event => self.onSuggestionClick(result.text, event, result.onClick) } key={'search-result-' + i} dangerouslySetInnerHTML={{__html: text}}></div>;\n          })}\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\t\n    return (\n\t\t\t<div id={self.id} className={self.props.className || 'osc-search'} ref={el => (self.instance = el)}>\n\n\t\t\t\t{suggestionsHTML}\n\t\t\t\t<input type=\"text\" value={this.state.searchValue} placeholder=\"Zoek op trefwoord\" onChange={() => self.handleChange( self.inputfield.value )} onBlur={() => self.hideSuggestions()} onFocus={() => self.showSuggestions()} className=\"osc-default-input osc-search-input\" ref={el => (self.inputfield = el)}/>\n        <button className={`osc-search-button${ this.state.searchValue ? ' osc-active' : '' }`} onClick={(event) => self.handleButtonClick(event)} ref={el => (self.resetButton = el)}/>\n\n\t\t\t</div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\nimport 'custom-event-polyfill';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentIdeasOnMap from './component/ideas-on-map.jsx';\n\n// render elements\nOpenStadComponentIdeasOnMap.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentIdeasOnMap attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentIdeasOnMap as default,\n  OpenStadComponentIdeasOnMap as IdeasOnMap,\n};\n\n","// extracted by mini-css-extract-plugin","// polyfills\n//import 'core-js/es/map';\n//import 'core-js/es/set';\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport api from './lib/api/index.js';\nimport user from './lib/user/index.js';\nimport localStorage from './lib/local-storage.js';\nimport sessionStorage from './lib/session-storage.js';\nimport reactTemplate from './lib/react-template.js';\n\nlet OpenStadComponentLibs = {\n  api,\n  user,\n  localStorage,\n  sessionStorage,\n  reactTemplate,\n}\nexport default OpenStadComponentLibs;\n\n","import merge from 'merge';\nimport getJWT from '../user/get-jwt.js';\n\nexport default function(config) {\n\n  let headers = merge.recursive({ 'Content-type': 'application/json' }, config && config.api && config.api.headers);\n\n  let jwt = getJWT();\n  if (jwt) {\n    headers = merge.recursive({ \"X-Authorization\": \"Bearer \" + jwt }, headers);\n  }\n\n  return headers;\n  \n}\n","import getHeaders from './get-headers.js'\n\nlet OpenStadComponentAPI = {\n  getHeaders,\n}\n\nexport default OpenStadComponentAPI;\n\n","let oscLocalStorage = {};\n\noscLocalStorage.get = function(name) {\n\n\tvar value = localStorage.getItem(name);\n\n\ttry {\n\t\tvalue = JSON.parse(value);\n\t} catch(err) {}\n\n\treturn value;\n\n}\n\noscLocalStorage.set = function(name, value) {\n\n\tif ( typeof name != 'string' ) return;\n\n\tif ( typeof value == 'undefined' ) value = \"\";\n\tif ( typeof value == 'object' ) {\n\t\ttry {\n\t\t\tvalue = JSON.stringify(value);\n\t\t} catch(err) {}\n\t};\n\n\tlocalStorage.setItem( name, value );\n\n}\n\n\noscLocalStorage.remove = function(name) {\n  localStorage.removeItem(name)\n}\n\nexport default oscLocalStorage;\n","import merge from 'merge';\n\nexport default function({ html='' }) {\n\n  let args = arguments[0];\n  delete args.html;\n\n  let matches = 0;\n\n  Object.keys(args).forEach((key) => {\n\n    let regEx = new RegExp(`^(.*)\\\\{${key}\\\\}(.*)$`);\n    let match = regEx.exec(html);\n\n    if (match) {\n      matches++;\n      html = (\n        <span>\n        <span dangerouslySetInnerHTML={{ __html: match[1] }}></span>\n        {args[key]}\n        <span dangerouslySetInnerHTML={{ __html: match[2] }}></span>\n        </span>\n      );\n    }\n\n  });\n\n  if (matches == 0) html = <span dangerouslySetInnerHTML={{ __html: html }}></span>\n  return html;\n  \n}\n","let oscSessionStorage = {};\n\noscSessionStorage.get = function(name) {\n\n\tvar value = sessionStorage.getItem(name);\n\n\ttry {\n\t\tvalue = JSON.parse(value);\n\t} catch(err) {}\n\n\treturn value;\n\n}\n\noscSessionStorage.set = function(name, value) {\n\n\tif ( typeof name != 'string' ) return;\n\n\tif ( typeof value == 'undefined' ) value = \"\";\n\tif ( typeof value == 'object' ) {\n\t\ttry {\n\t\t\tvalue = JSON.stringify(value);\n\t\t} catch(err) {}\n\t};\n\n\tsessionStorage.setItem( name, value );\n\n}\n\n\noscSessionStorage.remove = function(name) {\n  sessionStorage.removeItem(name)\n}\n\nexport default oscSessionStorage;\n","import sessionStorage from '../session-storage.js'\n\nexport default function(config) {\n\n  let jwt;\n\n  // jwt in url\n  let match = window.location.search.match(/(?:\\?|&)jwt=([A-Za-z0-9-_=]+\\.[A-Za-z0-9-_=]+\\.?[A-Za-z0-9-_.+/=]*)(?:&|$)/);\n  if (match) {\n    jwt = match[1];\n    sessionStorage.set('osc-jwt', jwt);\n    let search = document.location.search.replace('jwt=' + jwt, '');\n    if (search == '?') search = '';\n    document.location.search = search;\n  }\n\n  jwt = sessionStorage.get('osc-jwt');\n\n  if (config && config.jwt) {\n    jwt = config.jwt;\n    sessionStorage.set('osc-jwt', jwt)\n  }\n\n  return jwt;\n  \n}\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nexport default function(config, next) {\n\n  next = next || function(user) {\n    console.log('getUser: next not defined.');\n    console.log(user);\n  };\n\n  let user = config.user || sessionStorage.get('osc-user');\n\n  if (user) {\n    // return user\n    return next(null, user);\n  }\n\n  // jwt\n  let jwt = getJWT(config);\n\n  if (!jwt) {\n    // return no user\n    return next(null, {});\n  }\n\n  // fetch user\n  let url = `${config.api.url  }/oauth/site/${  config.siteId  }/me`;\n  let headers = { 'X-Authorization': `Bearer ${  jwt}`, 'Content-Type': 'application/json' };\n  fetch(url, { headers } )\n    .then((response) => {\n      if (!response.ok) throw new Error('Error on fetch');\n      return response.json();\n    })\n    .then( (json) => {\n      sessionStorage.set('osc-user', json);\n      next(null, json);\n    })\n    .catch((err) => {\n      next(err);\n    });\n\n}\n","import getUser from './get-user.js'\nimport getJWT from './get-jwt.js'\nimport logout from './logout.js'\n\nlet OpenStadComponentUser = {\n  getUser,\n  getJWT,\n  logout,\n}\n\nexport default OpenStadComponentUser;\n\n","import sessionStorage from '../session-storage.js';\nimport getJWT from './get-jwt.js';\n\nexport default function(config, next) {\n\n  next = next || function(user) {\n    console.log('logout: next not defined.');\n  }\n\n  let user = config.user || sessionStorage.get('osc-user');\n\n  if (user) {\n    // return user\n    return next(null, user);\n  }\n\n  // jwt\n  let jwt = getJWT(config);\n\n  if (!jwt) {\n    // return no user\n    return next(null, {})\n  }\n\n  // fetch user\n  let url = config.api.url + '/oauth/site/' + config.siteId + '/me';\n  let headers = { 'X-Authorization': 'Bearer ' + jwt, 'Content-Type': 'application/json' };\n  fetch(url, { headers } )\n    .then((response) => {\n      if (!response.ok) throw new Error('Error on fetch')\n      return response.json();\n    })\n    .then( json => {\n      sessionStorage.set('osc-user', json)\n      next(null, json)\n    })\n    .catch((err) => {\n      next(err)\n    });\n  \n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport OpenStadComponent from '../../component/index.jsx';\nimport amapsCreateClusterIcon from '../lib/amaps-cluster-icon.js';\n\n'use strict';\n\nexport default class OpenStadComponentNLMap extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n\t\tvar self = this;\n\n\t\t// config\n\t\tlet defaultConfig = {\n\t\t\ttarget: self.divId,\n\t\t\tstyle: 'standaard',\n\t\t\tmarker: false,\n\t\t\tsearch: false,\n\t\t\tcenter: {\n\t\t\t\tlatitude: 52.37104644463586,\n\t\t\t\tlongitude: 4.900402911007405,\n\t\t\t},\n\t\t\tzoom: 14,\n\t\t\tzoomposition     : 'bottomleft',\n\t\t\tdisableDefaultUI : true,\n\t\t\tpolygon : null,\n\t\t\tautoZoomAndCenter: false,\n\t\t};\n\t\tself.config = Object.assign(defaultConfig, self.config || {})\n\n\t\t// external css and script files\n\t\tself._loadedFiles = 0;\n\t\tself.files = [\n\t\t\t{ type: 'css', href: \"https://unpkg.com/leaflet@1.0.3/dist/leaflet.css\" },\n\t\t\t{ type: 'script', src: \"https://unpkg.com/leaflet@1.0.3/dist/leaflet.js\" },\n\t\t];\n\t\tswitch(self.config.variant) {\n\t\t\tcase \"amaps\":\n\t\t\t\t// self.files.push({ type: 'css', href: \"https://map.data.amsterdam.nl/dist/css/ams-map.css\"}); // in tegenstelling tot wat ze beloven overschrijft dit ook css buiten de map\n\t\t\t\tself.files.push({ type: 'script', src: \"https://map.data.amsterdam.nl/dist/amaps.iife.js\"});\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.files.push({ type: 'css', href: \"https://nlmaps.nl/dist/assets/css/nlmaps.css\"});\n\t\t\t\tself.files.push({ type: 'script', src: \"https://nlmaps.nl/dist/nlmaps.iife.js\"});\n\t\t}\n\t\tself.files.push({ type: 'css', href: \"https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css\"  });\n\t\tself.files.push({ type: 'script', src: \"https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js\" });\n\n\t\tself.markers = self.config.markers || [];\n\t\t\n  }\n\n\tcomponentDidMount(prevProps, prevState) {\n    var self = this;\n    self.loadNextFile(function() {\n      // initSingleClick();\n\t\t\t// loading script files is ready; create the map\n\t\t\tself.createMap();\n\t\t\t// dispatch an event\n\t\t\tself.mapIsReady = true;\n\t\t\tvar event = new CustomEvent('osc-map-is-ready', { detail: { id: self.divId } });\n\t\t\tdocument.dispatchEvent(event);\n    });\n\t}\n\n  loadNextFile(next) {\n    var self = this;\n    var file = self.files[self._loadedFiles];\n    if (file) {\n\t\t\tlet element;\n\t\t\tif (file.type === 'script') {\n\t\t\t\telement = document.createElement('script');\n\t\t\t\telement.src = file.src;\n\t\t\t\telement.async = true;\n\t\t\t}\n\t\t\tif (file.type === 'css') {\n\t\t\t\telement = document.createElement('link');\n\t\t\t\telement.href = file.href;\n\t\t\t\telement.rel = 'stylesheet';\n\t\t\t}\n\t\t\tif (element) {\n\t\t\t\telement.onload = function() {\n          self.loadNextFile(next);\n\t\t\t\t}\n\t\t\t\tthis.instance.appendChild(element);\n\t\t\t}\n    }\n\t\tif (self._loadedFiles == self.files.length) {\n      next()\n    }\n\t\tself._loadedFiles++;\n  }\n\n\tcreateMap() {\n\n\t\tvar self = this;\n\n\t\t// init map\n\t\tswitch(self.config.variant) {\n\t\t\tcase \"amaps\":\n\t\t\t\tself.map = amaps.createMap(self.config);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tself.map = nlmaps.createMap(self.config);\n\t\t}\n\n\t\t// clustering\n\t\tif (self.config.clustering && self.config.clustering.isActive && L.markerClusterGroup) {\n\t\t\tlet iconCreateFunction = self.config.clustering.iconCreateFunction || amapsCreateClusterIcon.bind(self) // ( self.config.variant == 'amaps' ? amapsCreateClusterIcon.bind(self) : self.createClusterIcon );\n\t\t\tif (iconCreateFunction && typeof iconCreateFunction == 'string') iconCreateFunction = eval(iconCreateFunction);\n\t\t\tself.markerClusterGroup = L.markerClusterGroup({iconCreateFunction, showCoverageOnHover: self.config.clustering.showCoverageOnHover, maxClusterRadius: self.config.clustering.maxClusterRadius || 80});\n\t\t\tself.markerClusterGroup.on('clusterclick', self.onClusterClick);\n\t\t\tself.markerClusterGroup.on('animationend', self.onClusterAnimationEnd);\n\t\t\tself.map.addLayer(self.markerClusterGroup);\n\t\t}\n\t\t\n\t\t// on map click\n\t\tself.map.on('click', self.onMapClick);\n\n\t\t// add polygon\n\t\tif (self.config.polygon) {\n\t\t\tself.createCutoutPolygon( self.config.polygon );\n\t\t}\n\n\t\t// add markers\n\t\tif (self.markers.length) {\n\t\t\tself.markers.forEach(function(marker) {\n\t\t\t\tself.addMarker( marker )\n\t\t\t})\n\t\t}\n\n\t  // set bounds and center\n\t  if (self.config.autoZoomAndCenter) {\n\t\t  var centerOn = ( self.config.autoZoomAndCenter == 'polygon' && self.config.polygon ) || ( self.markers && self.markers.length && self.markers );\n\t\t  if (self.editorMarker) {\n\t\t\t  if (self.editorMarker.position) {\n\t\t\t\t  centerOn = [self.editorMarker];\n\t\t\t  } else {\n\t\t\t\t  centerOn = self.config.polygon;\n\t\t\t  }\n\t\t  }\n\t\t  if (centerOn) {\n\t\t\t  self.setBoundsAndCenter( centerOn );\n\t\t  }\n\t  }\n\n\t}\n\n\taddMarkers(markerData) {\n\t\tvar self = this;\n    markerData.forEach((marker) => {\n      self.addMarker(marker)\n    });\n  }\n\n\taddMarker(markerData) {\n\n\t\tvar self = this;\n\n\t\tlet icon = markerData.icon;\n\t\tif (!icon) {\n\t\t\tlet iconCreateFunction = self.config.iconCreateFunction;\n\t\t\tif (iconCreateFunction && typeof iconCreateFunction == 'string') {\n\t\t\t\ticonCreateFunction = eval(iconCreateFunction);\n\t\t\t\ticon = iconCreateFunction();\n\t\t\t}\n\t\t}\n\n\t\tvar marker;\n\t\tif (icon) {\n\t\t\tmarker = L.marker([markerData.lat, markerData.lng], { icon });\n\t\t} else {\n\t\t\tmarker = L.marker([markerData.lat, markerData.lng]);\n\t\t}\n\n    marker.visible = true;\n\t\tmarker.data = markerData.data;\n\t\tmarker.doNotCluster = markerData.doNotCluster;\n\n\t\tif (markerData.href) {\n\t\t\tmarkerData.onClick = function() {\n\t\t\t\tdocument.location.href = markerData.href;\n\t\t\t}\n\t\t}\n\t\tlet onClick = self.onMarkerClick;\n\t\tif (onClick) {\n\t\t\tif (typeof onClick == 'string') onClick = eval(onClick);\n\t\t\t// marker.on('singleclick', onClick);\n\t\t\tmarker.on('click', onClick);\n\t\t}\n\n\t\tif (self.markerClusterGroup && !markerData.doNotCluster) {\n\t\t\tself.markerClusterGroup.addLayer(marker);\n\t\t} else {\n\t\t\tself.map.addLayer(marker);\n\t\t}\n\n\t\tself.markers.push(marker);\n\n\t\treturn marker;\n\n\t}\n\n\tremoveMarker(marker) {\n    if (!marker) return;\n    let index = this.markers.indexOf(marker);\n    if (index > -1) {\n      this.markers.splice(index, 1)\n\t\t  this.map.removeLayer(marker);\n\t\t\tthis.markerClusterGroup.removeLayer(marker);\n    }\n  }\n\n\tupdateMarker(marker, newData) {\n    if (newData.location) {\n      var newLatLng = new L.LatLng(newData.location.lat, newData.location.lng);\n      marker.setLatLng(newLatLng); \n    }\n  }\n\n\tcreateClusterIcon(cluster) {\n\t\tvar count = cluster.getChildCount();\n\t\treturn L.divIcon({ html: count, className: 'osc-nlmap-icon-cluster', iconSize: L.point(20, 20), iconAnchor: [20, 10] });\n\t}\n\n\tcreateCutoutPolygon(polygon) {\n\n\t\tvar self = this;\n\n\t\t// polygon must defined from the south west corner to work with the outer box\n\t\tvar bounds = L.polygon(polygon).getBounds();\n\t\tvar center = bounds.getCenter();\n\n\t\tvar smallest = 0; var index = 0;\n\n\t\tpolygon.forEach(function( point, i ) {\n\t\t\tvar y = Math.sin(point.lng-center.lng) * Math.cos(point.lat);\n\t\t\tvar x = Math.cos(center.lat)*Math.sin(point.lat) - Math.sin(center.lat)*Math.cos(point.lat)*Math.cos(point.lng-center.lng);\n\t\t\tvar bearing = Math.atan2(y, x) * 180 / Math.PI;\n\t\t\tif (45 - bearing < smallest) {\n\t\t\t\tsmallest = 45 - bearing;\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t});\n\n\t\tvar a = polygon.slice(0, index);\n\t\tvar b = polygon.slice(index, polygon.length);\n\t\tpolygon = b.concat(a);\n\n\t\t// outer box\n\t\t// TODO: should be calculated dynamically from the center point\n\t\tvar delta1 = 0.01;\n\t\tvar delta2 = 5;\n\t\tvar outerBox = [\n\t\t\t{lat: -90 + delta2, lng:  -180 + delta1 },\n\t\t\t{lat: -90 + delta2, lng:     0          },\n\t\t\t{lat: -90 + delta2, lng:   180 - delta1 },\n\t\t\t{lat:   0,          lng:   180 - delta1 },\n\t\t\t{lat:  90 - delta2, lng:   180 - delta1 },\n\t\t\t{lat:  90 - delta2, lng:     0          },\n\t\t\t{lat:  90 - delta2, lng:  -180 + delta1 },\n\t\t\t{lat:  90 - delta2, lng:  -180 + delta1 },\n\t\t\t{lat:   0,          lng:  -180 + delta1 },\n\t\t];\n\n\t\t// polygon style\n\t\tlet polygonStyle = Object.assign({\n\t\t\t\"color\": \"#d00\",\n\t\t\t\"fillColor\": \"#000\",\n\t\t\t\"fillOpacity\": 0.15\n\t\t}, self.config.polygonStyle);\n\n\t\tlet result = L.polygon([outerBox, polygon], polygonStyle);\n    self.map.addLayer(result);\n\n    return result;\n\n\t}\n\n  removePolygon(polygon) {\n\t  var self = this;\n    if (polygon) {\n      self.map.removeLayer(polygon);\n    }\n  }\n\n  setBoundsAndCenter( points ) {\n\n\t  var self = this;\n\n    if (!Array.isArray(points)) {\n      self.map.panTo(new L.LatLng(self.config.center.latitude, self.config.center.longitude));\n      return;\n    }\n\n\t  var poly = [];\n\t  points.forEach(function(point) {\n\t\t  if (point._latlng) {\n\t\t\t  point = point._latlng;\n\t\t  } else if (point.position) {\n\t\t\t  point = point.position.coordinates ? { lat: point.position.coordinates[0], lng: point.position.coordinates[1] }  : point.position;\n\t\t  }\n\t\t  poly.push(point);\n\t  })\n\n    if (poly.length == 1) {\n      self.map.panTo(new L.LatLng(poly[0].lat, poly[0].lng));\n    } else {\n\t    var bounds = L.latLngBounds(poly);\n\t    self.map.fitBounds(bounds);\n    }\n\n\t  // var zoom = parseInt(self.map.getZoom())\n\t  // self.map.setZoom(zoom - 1)\n\n  }\n\n  showMarkers(markers) {\n\t  var self = this;\n    markers.forEach((marker) => {\n      self.showMarker(marker);\n    });\n  }\n  \n  showMarker(marker) {\n\t  var self = this;\n    marker.visible = true;\n\t  if (self.markerClusterGroup && !marker.doNotCluster) {\n\t\t  self.markerClusterGroup.addLayer(marker);\n\t  } else {\n\t\t  marker.addTo(self.map)\n\t  }\n  }\n\n  hideMarkers(markers) {\n\t  var self = this;\n    markers.forEach((marker) => {\n      self.hideMarker(marker);\n    });\n  }\n  \n  hideMarker(marker) {\n\t  var self = this;\n    marker.visible = false;\n\t  if (self.markerClusterGroup && !marker.doNotCluster) {\n\t\t  self.markerClusterGroup.removeLayer(marker);\n\t  } else {\n\t\t  marker.remove(self.map)\n\t  }\n  }\n\n  setFilter(filterFuntion) {\n\t  var self = this;\n\t  self.filterFunction = filterFuntion;\n\t  self.applyFilter();\n  }\n\n  applyFilter() {\n\t  var self = this;\n\t  if (self.filterFunction) {\n\t\t  self.markers.forEach(function(marker) {\n\t\t\t  if ( self.filterFunction(marker) ) {\n\t\t\t\t  self.showMarker(marker);\n\t\t\t  } else {\n\t\t\t\t  self.hideMarker(marker);\n\t\t\t  }\n\t\t  });\n\t  } else {\n\t\t  self.markers.forEach(function(marker) {\n\t\t\t  self.showMarker(marker);\n\t\t  });\n\t  }\n  }\n\n  isPointInPolygon(point, polygon) {\n\n    if (!point) return false;\n    if (!polygon) return true;\n\n\t  // taken from http://pietschsoft.com/post/2008/07/02/Virtual-Earth-Polygon-Search-Is-Point-Within-Polygon\n\n    var x = point.lat, y = point.lng;\n\n    var inside = false;\n    for (var i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n        var xi = polygon[i].lat, yi = polygon[i].lng;\n        var xj = polygon[j].lat, yj = polygon[j].lng;\n\n        var intersect = ((yi > y) != (yj > y))\n            && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n        if (intersect) inside = !inside;\n    }\n\n    return inside; \n\n  }\n\n  getPointInfo(latlng, marker, next) {\n\n    // TODO: configurabel\n    var bagApiUrl1 = 'https://api.data.amsterdam.nl/bag/nummeraanduiding/?format=json&locatie=[[lat]],[[lng]],50';\n    var bagApiUrl2 = 'https://api.data.amsterdam.nl/bag/nummeraanduiding/[[id]]/?format=json';\n\n\t  var self = this;\n\n\t  latlng = latlng || {};\n\n\t  var url = bagApiUrl1\n\t\t\t  .replace(/\\[\\[lat\\]\\]/, latlng.lat)\n\t\t\t  .replace(/\\[\\[lng\\]\\]/, latlng.lng);\n\n\n\t  fetch(url)\n      .then((response) => {\n        return response.json();\n      })\n      .then( json => {\n\t\t\t  var id = json && json.results && json.results[0] && json.results[0].landelijk_id;\n\t\t\t  var url = bagApiUrl2\n\t\t\t\t\t  .replace(/\\[\\[id\\]\\]/, id)\n\t      fetch(url)\n          .then((response) => {\n            return response.json();\n          })\n          .then( json => {\n\t\t\t\t\t  json.lat = latlng.lat;\n\t\t\t\t\t  json.lng = latlng.lng;\n\t\t\t\t\t  if (next) next(json, marker);\n          })\n      })\n      .catch((err) => {\n        console.log('Zoek adres: niet goed');\n        console.log(err);\n\t\t\t  if (next) next({}, marker);\n      });\n\n  }\n\n\tonMapClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonMarkerClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-marker-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonClusterClick(detail) {\n\t\tvar event = new CustomEvent('osc-map-cluster-click', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\tonClusterAnimationEnd(detail) {\n\t\tvar event = new CustomEvent('osc-map-cluster-animation-end', { detail });\n\t\tdocument.dispatchEvent(event);\n  }\n\n\trender() {\n\n    return (\n\t\t\t<div id={this.divId} className={this.props.className || 'osc-nlmap'} ref={el => (this.instance = el)}>\n\t\t\t\t<div id={this.divId + '-map'}></div>\n\t\t\t</div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentNLMap from './component/map.jsx';\n\n// render elements\nOpenStadComponentNLMap.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentNLMap attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentNLMap as default,\n  OpenStadComponentNLMap as NLMap,\n};\n\n","export default function amapsCreateClusterIcon(cluster) {\n\n  let self = this;\n  let count = cluster.getChildCount();\n  \n  // todo: configurable\n  let markers = cluster.getAllChildMarkers();\n\n  let colors = {}\n  let total = markers.length;\n  let isFaded = false;\n  markers.forEach((entry) => {\n    let type = entry.data && eval(`entry.data.${self.config.typeField}`);\n    let tmp = self.config.types.find(entry => entry.name == type);\n    let color = tmp && tmp.color || '#164995';\n    if ( type == undefined ) type = 'undef'\n    if ( !colors[color] ) colors[color] = 0;\n    colors[color]++;\n    if (entry.data && entry.data.isFaded) isFaded = true;\n  });\n\n  let html = '<svg viewBox=\"0 0 36 36\"><circle cx=\"18\" cy=\"18\" r=\"14\" fill=\"white\"/>'\n\n  let soFar = 0;\n  Object.keys(colors).forEach((key) => {\n    let myColor = key;\n    let perc = 100 * colors[key] / total;\n    let angle = (soFar / 100) * 360;\n    \n    html += `  <path\n             d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\"\n             fill=\"none\"\n             transform=\"rotate(${angle}, 18, 18)\"\n             stroke=\"${myColor}\"\n             stroke-width=\"4\"\n             stroke-dasharray=\"${perc}, 100\"\n             />`;\n    soFar = soFar + perc;\n  });\n\n  html += '<text x=\"18\" y=\"21\" text-anchor=\"middle\" class=\"openstad-component-ideas-on-map-icon openstad-component-ideas-on-map-icon-text\">' + count + '</text></svg>';\n\n  return L.divIcon({ html: html, className: 'openstad-component-ideas-on-map-icon-cluster', iconSize: L.point(36, 36), iconAnchor: [18, 18], isFaded });\n\n}\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentPollForm extends OpenStadComponent {\n\n  constructor(props) {\n\n    super(props);\n\n    let self = this;\n\n    self.defaultConfig = {\n      user: {},\n      questionMinLength: 30,\n      questionMaxLength: 500,\n      titleMinLength: 30,\n      titleMaxLength: 500,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      allowChoiceTitles: true,\n    };\n\n    self.config = merge.recursive(self.defaultConfig, props.config || {});\n\n    self.state = {\n      user: props.user,\n      pollId: props.pollId,\n      poll: props.poll,\n      isBusy: false,\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          if ( !self.state.poll ) self.fetchData();\n        });\n      });\n    } else {\n      if ( !self.state.poll ) self.fetchData();\n    }\n\n  }\n\n  fetchData(next) {\n\n    let self = this;\n    if (!self.state.pollId) {\n      return self.setState({ poll: {\n        question: '',\n        choices: { \"1\": {}, \"2\": {} },\n      }});\n    }\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/poll/${ self.config.pollId }?withUser=1&withVotes=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state };\n        state.poll = json;\n\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  validatedResult() {\n\n    let self = this;\n    let poll = self.state.poll;\n\n    let questionInput = self['question-input'];\n    let isValid = questionInput.validate();\n    let result = { question: questionInput.state.value, choices: {} };\n\n    Object.keys(poll.choices).forEach((key) => {\n      let titleInput = self[`title-input-${key}`];\n      let descriptionInput = self[`description-input-${key}`];\n      if (!( titleInput && titleInput.state.value ) && !descriptionInput.state.value) return;\n      result.choices[key] = {};\n      if (self.config.allowChoiceTitles && titleInput.state.value) {\n        result.choices[key].title = titleInput.state.value;\n        if (!titleInput.validate()) isValid = false;\n      }\n      if (descriptionInput.state.value) {\n        result.choices[key].description = descriptionInput.state.value;\n        if (!descriptionInput.validate()) isValid = false;\n      }\n    });\n\n    if (!isValid) return null;\n    if (Object.keys(result.choices).length < 2) return null;\n    return result;\n\n  }\n\n  handleOnChange(data) {\n\n    let self = this;\n    let poll = { ...self.state.poll };\n\n    if (data.choice) {\n      poll.choices[ data.choice.id ] = {\n        title: self.config.allowChoiceTitles && data.choice.title,\n        description: data.choice.description,\n      }\n    }\n\n    if (data.question) {\n      poll.question = data.question;\n    }\n\n    this.setState({ poll }, () => {\n    });\n\n  }\n\n  addChoice() {\n    let self = this;\n    let poll = { ...self.state.poll };\n    let keys = Object.keys(poll.choices).sort();\n    let key = parseInt( keys[keys.length-1] ) + 1;\n    poll.choices[ key ] = {};\n    self.setState({ poll })\n  }\n\n  canSubmit() {\n    if (this.state.poll && this.state.poll.can) {\n      return this.state.poll.can.edit;\n    } else {\n      let requiredUserRole = this.config.requiredUserRole;\n      let userRole = this.props.user && this.props.user.role;\n      // todo: owner; dus dit moet anders\n      // todo: nieuwe rollen structuur\n      return  requiredUserRole == 'anonymous' && userRole  ||\n        requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' )  ||\n        requiredUserRole == 'admin' && userRole == 'admin';\n    }\n  }\n\n  submitForm() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let validatedResult = self.validatedResult();\n      if (!validatedResult) {\n        self.setState({ isBusy: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let isNew = true;\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll`;\n      let method = 'POST';\n      if (self.state.poll && self.state.poll.id) {\n        url += `/${ self.state.poll.id }`;\n        method = 'PUT';\n        isNew = false;\n      }\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n      let body = validatedResult;\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n\t\t      let event = new CustomEvent('osc-new-poll-stored', { detail: json });\n          if (!isNew) event = new CustomEvent('osc-poll-edited', { detail: json });\n\n\t\t      document.dispatchEvent(event);\n          if (typeof self.config.onFinished == 'function') {\n            self.config.onFinished(validatedResult);\n          }\n\n        })\n        .catch(function(error) {\n          console.log(error);\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n    let poll = self.state.poll || {};\n\n    let formIntro = null;\n    if (self.config.formIntro) {\n      formIntro = (\n        <div className=\"osc-intro\">{self.config.formIntro}</div>\n      );\n    }\n    \n    let submitButtonHTML = null;\n    if (self.canSubmit()) {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button className=\"osc-button-blue\" onClick={() => { if (self.config.onFinished) self.config.onFinished(); }}>Terug</button>\n\t\t\t    <button onClick={(e) => { if (!self.state.isBusy) self.submitForm(); }} className={`osc-button-blue osc-margin-left${ self.state.isBusy ? ' osc-disabled' : '' }`} >Verzenden</button>\n        </div>\n      );\n    } else {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button className=\"osc-button-blue\" onClick={() => { if (self.config.onFinished) self.config.onFinished(); }}>Terug</button>\n          <button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button osc-margin-left\">Inloggen</button>\n        </div>\n      );\n    }\n\n    return (\n      <div id={self.divId} className=\"osc-form\" ref={el => (self.instance = el)} >\n        {formIntro}\n\n        <h4>Vraag</h4>\n        <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.questionMinLength, maxLength: self.config.questionMaxLength, placeholder: 'Vraag' }} value={poll.question} onChange={ data => self.handleOnChange({ question: data.value }) } ref={el => (self[`question-input`] = el)}/>\n\n        <h4>Keuzemogelijkheden</h4>\n        <ol className=\"osc-poll-form-choices\">\n          {poll && poll.choices && Object.keys(poll.choices).sort().map((key) => {\n            let choice = poll.choices[key];\n            let titleInputHTML = null;\n            if (self.config.allowChoiceTitles) titleInputHTML = <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.titleMinLength, maxLength: self.config.titleMaxLength, placeholder: 'Titel' }} value={choice.title} onChange={ data => self.handleOnChange({ choice: { id: key, title: data.value } }) } ref={el => (self[`title-input-${key}`] = el)}/>;\n            return (\n              <li className=\"osc-poll-form-choice\" key={`osc-key-${key}`}>\n                {titleInputHTML}\n                <OpenStadComponentForms.InputWithCounter config={{ inputType: 'text', minLength: self.config.descriptionMinLength, maxLength: self.config.descriptionMaxLength, placeholder: 'Beschrijving' }} value={choice.description} onChange={ data => self.handleOnChange({ choice: { id: key, description: data.value } }) } ref={el => (self[`description-input-${key}`] = el)}/>\n              </li>\n            );\n          })}\n        </ol>\n\n        <a className=\"osc-add-choice-button\" onClick={ e => this.addChoice() }>Nog een keuzemogelijkheid toevoegen</a>\n        \n        {submitButtonHTML}\n\n      </div>\n    );\n\n  }\n\n}\n","import React from 'react';\nimport merge from 'merge';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\nimport OpenStadComponentPollForm from './poll-form.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentPoll extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-poll-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      title: null, // hoort niet hier\n      titleMinLength: 30,\n      titleMaxLength: 500,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      user: null,\n      loginUrl: '',\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n      withPercentage: true,\n      allowChoiceTitles: true,\n      allowShowResultsIfNotVoted: false,\n    };\n\n    self.config = merge.recursive(self.defaultConfig, self.config, props.config || {});\n    self.hideEditForm = self.hideEditForm.bind(self);\n\n    self.state = {\n      user: self.config.user,\n      poll: props.poll,\n      pollId: ( props.poll && props.poll.id ) || self.config.pollId,\n      selectedChoice: null,\n      showResult: false,\n      showQuestion: false,\n      editMode: false,\n      showVoteSucceeded: false,\n    };\n\n    if (self.state.poll) {\n      self.parseVoteCount(self.state.poll);\n      if (self.state.poll.userVote) {\n        self.state.selectedChoice = self.state.poll.userVote;\n      }\n    }\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    console.log('++');\n    console.log(self.state.poll);\n    console.log(self.config.ideaId);\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          if (!self.state.poll && self.config.ideaId) self.fetchData();\n        });\n      });\n    } else {\n      if (!self.state.poll && self.config.ideaId) self.fetchData();\n    }\n\n    // document.addEventListener('osc-new-reaction-stored', function(event) {\n    //   self.onNewPolltored(event.detail);\n    // });\n\n  }\n\n  fetchData(next) {\n\n    let self = this;\n\n    if (!self.state.pollId) {\n      // no data: show new poll form\n      return self.setState({ editMode: true }, () =>{\n      })\n    }\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/poll/${ self.state.pollId }?withUser=1&withUserVote=1&withVoteCount=1&withVotes=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state, showResult: false, showQuestion: false, };\n        state.poll = json;\n        state.pollId = json.id;\n\n        self.parseVoteCount(state.poll);\n\n        if (state.poll.userVote) {\n          state.selectedChoice = state.poll.userVote;\n        }\n\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  parseVoteCount(poll) {\n    let self = this;\n    if (poll.voteCount) {\n      Object.keys(poll.choices).sort().forEach((key) => {\n        let choice = poll.choices[key];\n        choice.votesAbs = poll.voteCount[key]\n        choice.votesPrc = parseInt(100 * ( poll.voteCount[key] / poll.voteCount.total ));\n        choice.votesPrc = choice.votesPrc || 0;\n      });\n    }\n\n  }\n\n  showEditForm() {\n    this.setState({ editMode: true });\n  }\n\n  hideEditForm() {\n    this.setState({\n      editMode: false,\n    }, function() {\n      this.fetchData()\n    });\n  }\n\n  setShowResult() {\n    this.setState({ showResult: true });\n  }\n\n  setShowQuestion() {\n    this.setState({ showQuestion: true });\n  }\n\n  selectChoice(data) {\n    this.setState({ selectedChoice: data.choice });\n  }\n\n  onReactionEdited(reaction) {\n    this.fetchData();\n  }\n\n  isValid() {\n    return !!this.state.selectedChoice;\n  }\n\n  canSubmit() {\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.state.user && this.state.user.role;\n    // todo: nieuwe rollen structuur\n    return  requiredUserRole == 'anonymous' && userRole  ||\n            requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' )  ||\n            requiredUserRole == 'admin' && userRole == 'admin';\n  }\n\n  submitVote() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      if (!self.isValid()) {\n        self.setState({ isBusy: false, isValid: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll/${ self.state.poll.id }/vote`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n      let method = 'POST';\n\n      let body = {\n        choice: self.state.selectedChoice,\n      };\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n          self.fetchData( () => {\n            self.setState({ isBusy: false, showVoteSucceeded: true, }, () => {\n\t\t          let event = new CustomEvent('osc-poll-voted', { detail: json });\n\t\t          document.dispatchEvent(event);\n            });\n          });\n\n          if (typeof self.config.onSubmit == 'function') {\n            self.config.onSubmit({ description: self.state.description });\n          }\n            \n        })\n        .catch(function(error) {\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false, isValid: false });\n        });\n\n    });\n\n  }\n\n  deletePoll() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let poll = self.state.poll;\n      if (!( poll && poll.can && poll.can.delete )) return alert('U kunt deze poll niet verwijderen');\n      if (!( poll && poll.id )) return alert('U kunt deze poll niet verwijderen');\n\n      let url = `${ self.config.api && self.config.api.url }/api/site/${ self.config.siteId }/idea/${ self.config.ideaId }/poll/${ self.state.poll.id }`;\n      let method = 'DELETE';\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n      fetch(url, {\n        method,\n        headers,\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n\t\t      let event = new CustomEvent('osc-poll-deleted', { detail: json });\n\t\t      document.dispatchEvent(event);\n\n        })\n        .catch(function(error) {\n          console.log(error);\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n    let poll = self.state.poll || {};\n\n    if (self.state.editMode) {\n\n      return (\n        <div id={this.id} className={self.props.className || 'osc-poll'} ref={(el) => { this.instance = el; }} >\n          <OpenStadComponentPollForm config={{ ...self.config, onFinished: self.hideEditForm }} pollId={self.state.poll && self.state.poll.id} poll={self.state.poll} user={self.state.user}/>\n        </div>\n      );\n      \n    } else {\n\n      let questionHTML = null;\n      if (( poll && poll.choices && !poll.userVote ) || self.state.showQuestion) {\n        \n        let config = { name: \"pollChoice\", choices: [] };\n        Object.keys(poll.choices).sort().map(key => {\n          let choiceHTML = self.config.allowChoiceTitles && poll.choices[key].title ? `<h4>${poll.choices[key].title}</h4>` : '';\n          choiceHTML += poll.choices[key].description || '';\n          config.choices.push({\n            dangerousDescription: choiceHTML,\n            value: key\n          });\n        })\n\n        let submitButtonHTML = null;\n        if (self.canSubmit()) {\n          submitButtonHTML = (<button onClick={(e) => { if (!self.state.isBusy) self.submitVote(); }} className={`osc-button-blue${ !self.isValid() ? ' osc-disabled' : '' }`} >Stemmen</button>);\n        } else {\n          submitButtonHTML = (<button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-poll-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>);\n        }\n\n        let showResultButtonHTML = null;\n        if (self.config.allowShowResultsIfNotVoted &&  !(poll.userVote || self.state.showResult)) showResultButtonHTML = (<a className=\"osc-show-result-button\" onClick={ e => this.setShowResult() }>Resultaat bekijken</a>);\n\n        questionHTML = (\n          <div className=\"osc-poll-question osc-form\">\n            <OpenStadComponentForms.Radios config={config} value={self.state.selectedChoice} onChange={ data => self.selectChoice({ choice: data.value }) } ref={el => (self.description = el)}/>\n            <div className=\"osc-poll-question-buttons\">\n              {submitButtonHTML}\n              {showResultButtonHTML}\n            </div>\n          </div>\n        );\n      }\n\n      let resultHTML = null;\n      if ( poll && ( poll.userVote || self.state.showResult ) ) {\n\n        let showQuestionButtonHTML = null;\n        if (!self.state.showQuestion && !(poll && poll.choices && !poll.userVote)) showQuestionButtonHTML = (<a className=\"osc-show-question-button\" onClick={ e => this.setShowQuestion() }>Stem aanpassen</a>);\n\n        let totalVotesHTML = null;\n        if (poll.voteCount && poll.voteCount.total) {\n          let xx = poll.voteCount.total == 1 ? 'stem' : 'stemmen';\n          totalVotesHTML = <div>Totaal {poll.voteCount.total} {xx}<br/><br/></div>\n        }\n\n        resultHTML = (\n          <ul className=\"osc-choices\">\n            {Object.keys(poll.choices).sort().map(key => {\n              let choice = poll.choices[key];\n              let titleHTML = null;\n              if (self.config.allowChoiceTitles && choice.title) titleHTML = (<h4>{choice.title}</h4>);\n              let descriptionHTML = null;\n              if (choice.description) descriptionHTML = (<div>{choice.description}</div>);\n              let percentageHTML = null;\n              if (self.config.withPercentage) {\n                percentageHTML = <div className=\"osc-percentage\">{choice.votesPrc}%</div>\n              }\n              let scoreHTML = (\n                <div className=\"osc-choice-default\">\n                  {titleHTML}\n                  {descriptionHTML}\n                  <div className={`osc-choice-bar${self.config.withPercentage ? ' osc-with-percentage' : ''}`}>\n                    <div className=\"osc-choice-bar-mask\"></div>\n                    <div className=\"osc-choice-bar-progress\" style={{ width: ( choice.votesPrc || 0 ) + '%' }}></div>\n                  </div>\n                  { percentageHTML }\n                </div>\n              );\n              return (\n                <li className=\"osc-choice\" key={`osc-key-${key}`}>\n                  {scoreHTML}\n                </li>\n              );\n            })}\n            {totalVotesHTML}\n            {showQuestionButtonHTML}\n          </ul>\n        );\n      }\n\n      let editButtonsHTML = null;\n      if (self.state.poll && self.state.poll.can && self.state.poll.can.edit) {\n        editButtonsHTML =\n          <div className=\"osc-editbuttons\">\n            <button className=\"osc-editbutton osc-edit\" onClick={event => self.showEditForm()}>Bewerk poll</button>\n            <button className=\"osc-editbutton osc-delete\" onClick={event => { if (confirm('Weet u het zeker')) self.deletePoll() }}>Verwijder poll</button>\n          </div>\n      }\n\n      let voteSucceededHTML = null;\n      if (self.state.showVoteSucceeded) {\n        voteSucceededHTML = <div className=\"osc-vote-succeeded\">Uw stem is opgeslagen</div>\n      }\n\n      return (\n        <div id={this.id} className={self.props.className || 'osc-poll'} ref={(el) => { this.instance = el; }} >\n          {editButtonsHTML}\n          {voteSucceededHTML}\n          <h4>{poll.question}</h4>\n          {questionHTML}\n          {resultHTML}\n          <br/><br/>\n        </div>\n      );\n\n    }\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentPoll from './component/poll.jsx';\n\n// render elements\nOpenStadComponentPoll.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentPoll attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentPoll as default,\n  OpenStadComponentPoll as Poll,\n};\n\n","import merge from 'merge';\nimport React from 'react';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentForms from '../../forms/index.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReactionForm extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n\n    self.defaultConfig = {\n      argumentId: null,\n      api: {\n        url: null,\n        headers: null,\n      },\n      user: {},\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      requiredUserRole: 'member',\n      formIntro: '',\n      placeholder: '',\n    };\n\n    self.config = merge.recursive(self.defaultConfig, props.config || {});\n    self.config.loginUrl = self.config.loginUrl || '/oauth/login?returnTo=' + encodeURIComponent(document.location.href);\n    \n    self.state = {\n      description: self.config.description || '',\n      isValid: false,\n      isBusy: false,\n    };\n\n  }\n\n  handleOnChange(data) {\n    data = data || {};\n    if (data.description) data.isValid = this.description.isValid();\n    this.setState(data);\n  }\n\n  canSubmit() {\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.props.user && this.props.user.role;\n    // todo: nieuwe rollen structuur\n    return  requiredUserRole == 'anonymous' && userRole  ||\n             requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' )  ||\n             requiredUserRole == 'admin' && userRole == 'admin';\n  }\n\n  submitForm() {\n\n    let self = this;\n\n    self.setState({ isBusy: true }, () => {\n\n      let isValid = self.description.validate({ showWarning: true });\n      if (!isValid) {\n        self.setState({ isBusy: false, isValid: false });\n        return;\n      }\n\n      if (!self.canSubmit()) return alert('Je bent niet ingelogd');\n\n      let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument${   self.config.argumentId ? `/${  self.config.argumentId}` : ''}`;\n      let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n      let method = self.config.argumentId ? 'PUT' : 'POST';\n\n      let body = {\n        parentId: self.config.parentId,\n        sentiment: self.config.sentiment,\n        description: self.state.description,\n      };\n\n      fetch(url, {\n        method,\n        headers,\n        body: JSON.stringify(body),\n      })\n        .then( function(response) {\n          if (response.ok) {\n            return response.json();\n          }\n          throw response.text();\n        })\n        .then(function(json) {\n\n          if (typeof self.config.onSubmit == 'function') {\n            self.config.onSubmit({ description: self.state.description });\n          }\n\n          self.setState({ description: '', isBusy: false, isValid: false }, () => {\n            if (self.config.argumentId) {\n\t\t          let event = new CustomEvent('osc-reaction-edited', { detail: json });\n\t\t          document.dispatchEvent(event);\n            } else {\n\t\t          let event = new CustomEvent('osc-new-reaction-stored', { detail: json });\n\t\t          document.dispatchEvent(event);\n            }\n          });\n\n\n        })\n        .catch(function(error) {\n          error.then(function(messages) { alert(messages); return console.log(messages);} );\n          self.setState({ isBusy: false, isValid: false });\n        });\n\n    });\n\n  }\n\n  render() {\n\n    let self = this;\n\n    let config = {\n      descriptionMinLength: self.config.descriptionMinLength || 30,\n      descriptionMaxLength: self.config.descriptionMaxLength || 500,\n    };\n\n    let formIntro = null;\n    if (self.config.formIntro) {\n      formIntro = (\n        <div className=\"osc-intro\">{self.config.formIntro}</div>\n      );\n    }\n\n    let submitButtonHTML = null;\n    if (self.canSubmit()) {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n\t\t\t    <button onClick={(e) => { if (!self.state.isBusy) self.submitForm(); }} className={`osc-button-blue${ !self.state.isValid || self.state.isBusy ? ' osc-disabled' : '' }`} >Verzenden</button>\n        </div>\n      );\n    } else {\n      submitButtonHTML = (\n        <div className=\"osc-align-right-container\">\n          <button onClick={() => { OpenStadComponentLibs.localStorage.set('osc-reactions-login-pending', true); document.location.href = self.config.loginUrl; }} className=\"osc-button-blue osc-not-logged-in-button\">Inloggen</button>\n        </div>\n      );\n    }\n\n    return (\n      <div id={self.divId} className=\"\" ref={el => (self.instance = el)} >\n        {formIntro}\n        <OpenStadComponentForms.InputWithCounter disabled={this.canSubmit() ? null : true} config={{ inputType: 'textarea', minLength: config.descriptionMinLength, maxLength: config.descriptionMaxLength, placeholder: self.config.placeholder }} value={self.state.description} onChange={ data => self.handleOnChange({ description: data.value }) } ref={el => (self.description = el)}/>\n        {submitButtonHTML}\n      </div>\n    );\n\n  }\n\n}\n","import merge from 'merge';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentReactionForm from './reaction-form.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReaction extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-reaction-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      siteId: null,\n      ideaId: null,\n      title: null,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n    };\n\n    self.config = Object.assign(self.defaultConfig, props.config || {});\n\n    self.state = {\n      user: props.user,\n      isMenuActive: false,\n      isReplyFromActive: false,\n      editMode: false,\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    document.addEventListener('osc-new-reaction-stored', function(event) {\n      self.onNewReactionStored(event.detail);\n    });\n\n    document.addEventListener('osc-reaction-edited', function(event) {\n      self.onReactionEdited(event.detail);\n    });\n\n  }\n\n  showMenu() {\n    this.setState({ isMenuActive: true });\n  }\n\n  toggleReplyForm() {\n    this.setState({ isReplyFromActive: !this.state.isReplyFromActive });\n  }\n\n  toggleEditForm(what) {\n    this.setState({ editMode: !this.state.editMode });\n  }\n\n  canEdit() {\n    return this.props.data.can.edit;\n  }\n\n  canDelete() {\n    return this.props.data.can.delete;\n  }\n\n  canLike() {\n    if (this.config.isClosed) return false;\n    let requiredUserRole = this.config.requiredUserRole;\n    let userRole = this.props.user && this.props.user.role;\n    return (( requiredUserRole == 'anonymous' && userRole ) ||\n            ( requiredUserRole == 'member' && ( userRole == 'member' || userRole == 'admin' ) ) ||\n            ( requiredUserRole == 'admin' && userRole == 'admin'));\n  }\n\n  canReply() {\n    return this.props.data.can.reply;\n  }\n\n  submitDelete() {\n\n    let self = this;\n\n    if (!self.canDelete()) return alert('U kunt deze reactie niet verwijderen');\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument/${  self.props.data.id}`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let body = {};\n\n    fetch(url, {\n      method: 'DELETE',\n      headers,\n      body: JSON.stringify(body),\n    })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n        self.setState({ isDeleted: true });\n\n\t\t    let event = new CustomEvent('osc-reaction-deleted', { detail: { ideaId: self.config.ideaId } });\n\t\t    document.dispatchEvent(event);\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  submitLike() {\n\n    let self = this;\n\n    if (!self.canLike()) return alert('U kunt deze reactie niet liken');\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument/${  self.props.data.id  }/vote`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    let body = {};\n\n    fetch(url, {\n      method: 'POST',\n      headers,\n      body: JSON.stringify(body),\n    })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n        // console.log({ yes: json.yes, hasUserVoted: json.hasUserVoted });\n        self.setState({ yes: json.yes, hasUserVoted: json.hasUserVoted });\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  onNewReactionStored(reaction) {\n    this.setState({ isMenuActive: false, isReplyFromActive: false });\n  }\n\n  onReactionEdited(reaction) {\n    if (reaction.id == this.props.data.id) {\n      this.setState({ editMode: false, isMenuActive: false });\n    }\n  }\n\n  render() {\n\n    let self = this;\n    let data = self.props.data || { can: {} };\n\n    if (data.isDeleted) return null;\n\n    let menuHTML = null;\n    if ( self.canEdit() && self.canDelete() ) {\n      menuHTML = (\n        <div className={ `osc-reaction-menu${   self.state.isMenuActive ? ' osc-reaction-hamburger-active' : ''}` } onClick={ () => { self.showMenu(); }}>\n          <a className=\"osc-reaction-delete\" title=\"Argument verwijderen\" onClick={ () => { if (confirm('Weet je het zeker?')) self.submitDelete(); } }/>\n          <a className=\"osc-reaction-edit\" title=\"Argument bewerken\" onClick={ () => self.toggleEditForm() }/>\n        </div>\n      );\n    }\n\n    let descriptionHTML = (<div className=\"osc-reaction-description\">{data.description}</div>);\n    if (self.state.editMode) {\n      descriptionHTML = (\n        <div className=\"osc-reaction-description\">\n          <OpenStadComponentReactionForm config={{ ...self.config, description: data.description, argumentId: data.id }} user={self.state.user} ref={el => (self.editForm = el)}/>\n        </div>\n      );\n    }\n\n    let likeButtonHTML = null;\n    if (!data.parentId) {\n      likeButtonHTML = (\n\t\t\t  <a className={ `osc-reaction-like-button${ ( typeof self.state.hasUserVoted != 'undefined' ? self.state.hasUserVoted : data.hasUserVoted ) ? ' osc-reaction-like-button-hasvoted' : ''}` } onClick={ () => self.submitLike() }>\n\t\t\t\t  Mee eens (<span>{( typeof self.state.yes != 'undefined' ? self.state.yes : data.yes ) | 0}</span>)\n        </a>\n      );\n    }\n\n    let replyButtonHTML = null;\n    let replyFormHTML = null;\n    if (self.canReply() && !self.config.isClosed) {\n      replyButtonHTML = (<a href=\"#\" onClick={ () => self.toggleReplyForm() } className=\"osc-reply-button\">Reageren</a>);\n      if (self.state.isReplyFromActive) {\n        let config = { ...self.config, parentId: data.id };\n        config.formIntro = '';\n        replyFormHTML = (\n\t\t\t    <div id={`osc-reaction-${data.id}`} className=\"osc-reply\">\n            <OpenStadComponentReactionForm config={config} user={self.state.user} ref={el => (self.editForm = el)}/>\n          </div>\n        );\n      }\n    }\n\n    let repliesHTML = null;\n    if (data.reactions && data.reactions.length) {\n      repliesHTML = (\n        <ul className=\"osc-reactions-list\">\n          {data.reactions.map((reaction) => {\n\n            let key = `osc-reaction-key-${   reaction.id || parseInt( 1000000 * Math.random() )}`;\n            return (\n              <li key={key}>\n                <OpenStadComponentReaction config={self.config} className=\"osc-reply\" user={self.state.user} data={reaction}/>\n              </li>\n            );\n\n          })}\n        </ul>\n      );\n    }\n\n    return (\n      <div>\n\n\t\t\t  <div id={`osc-reaction-${data.id}`} className={ self.props.className || 'osc-reaction' }>\n\n          {menuHTML}\n\n          <div className=\"osc-reaction-user\">{data.user.nickName || data.user.fullName || `${data.user.firstName } ${  data.user.lastName}`}</div>\n\t\t\t\t  <div className=\"osc-reaction-date\">{data.createDateHumanized}</div>\n          {descriptionHTML}\n\n          {likeButtonHTML}\n\t\t\t    {replyButtonHTML}\n\n\t\t    </div>\n\n\t\t\t  {replyFormHTML}\n        {repliesHTML}\n\n\t\t  </div>\n\n    );\n\n  }\n\n}\n","import React from 'react';\nimport merge from 'merge';\n\nimport OpenStadComponent from '../../component/index.jsx';\nimport OpenStadComponentLibs from '../../libs/index.jsx';\n\nimport OpenStadComponentReactionForm from './reaction-form.jsx';\nimport OpenStadComponentReaction from './reaction.jsx';\n\n'use strict';\n\nexport default class OpenStadComponentReactions extends OpenStadComponent {\n\n  constructor(props) {\n    super(props);\n\n    let self = this;\n    self.id = props.id || `osc-reactions-${  parseInt( 1000000 * Math.random() )}`;\n\n    self.defaultConfig = {\n      scrollToNewReaction: true,\n      isClosed: false,\n      closedText: null,\n      sentiment: undefined,\n      siteId: null,\n      ideaId: null,\n      title: null,\n      descriptionMinLength: 30,\n      descriptionMaxLength: 500,\n      user: null,\n      loginUrl: '',\n      api: {\n        url: null,\n        headers: null,\n      },\n      requiredUserRole: 'member',\n      placeholder: '',\n      formIntro: '',\n    };\n\n    self.config = merge.recursive(self.defaultConfig, self.config, props.config || {});\n\n    self.state = {\n      user: self.config.user,\n      reactions: [],\n    };\n\n  }\n\n  componentDidMount(prevProps, prevState) {\n\n    let self = this;\n\n    // user\n    if (!( self.state.user && self.state.user.role )) {\n      OpenStadComponentLibs.user.getUser({ user: self.config.user, jwt: self.config.jwt, siteId: self.config.siteId, api: self.config.api }, (err, user) => {\n        self.setState({ user }, () => {\n          self.fetchData();\n        });\n      });\n    } else {\n      self.fetchData();\n    }\n\n    document.addEventListener('osc-new-reaction-stored', function(event) {\n      self.onNewReactionStored(event.detail);\n    });\n\n    document.addEventListener('osc-reaction-edited', function(event) {\n      self.onReactionEdited(event.detail);\n    });\n\n    document.addEventListener('osc-reaction-deleted', function(event) {\n      self.onReactionDeleted(event.detail);\n    });\n\n  }\n\n  fetchData(next) {\n\n    let self = this;\n\n    let url = `${self.config.api && self.config.api.url   }/api/site/${  self.config.siteId  }/idea/${  self.config.ideaId  }/argument?sentiment=${  self.config.sentiment  }&withUser=1&withUserVote=1&withVoteCount=1&includeReactionsOnReactions=1`;\n    let headers = OpenStadComponentLibs.api.getHeaders(self.config);\n\n    fetch(url, { headers })\n      .then( function(response) {\n        if (response.ok) {\n          return response.json();\n        }\n        throw response.text();\n      })\n      .then(function(json) {\n\n        let state = { ...self.state };\n        state.reactions = json;\n        state.reactions.sort((a, b) => {\n          return a.createdAt < b.createdAt;\n        });\n        // console.log(state.reactions);\n        self.setState(state, function() {\n          if (next) return next();\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n        error.then(function(messages) { return console.log(messages);} );\n      });\n\n  }\n\n  onNewReactionStored(reaction) {\n    this.fetchData(() => {\n      if (this.config.scrollToNewReaction) {\n        let element = document.getElementById(`osc-reaction-${  reaction.id}`);\n        if ( element ) document.getElementById(`osc-reaction-${  reaction.id}`).scrollIntoView();\n      }\n    });\n  }\n\n  onReactionEdited(reaction) {\n    this.fetchData();\n  }\n\n  onReactionDeleted(reaction) {\n    this.fetchData();\n  }\n\n  render() {\n\n    let self = this;\n\n    let reactions =\n      <ul className=\"osc-reactions-list\">\n        {self.state.reactions.map((reaction) => {\n\n          let key = `osc-reaction-key-${   reaction.id || parseInt( 1000000 * Math.random() )}`;\n          return (\n            <li key={key}>\n              <OpenStadComponentReaction config={self.config} user={self.state.user} data={{ ...reaction }}/>\n            </li>\n          );\n\n        })}\n      </ul>;\n\n    let title = self.config.title ? <h3>{self.config.title}</h3> : null;\n\n    let reactionFormHTML = <OpenStadComponentReactionForm config={self.config} user={self.state.user}/>;\n    if (self.config.isClosed) {\n      if (self.config.closedText) {\n        reactionFormHTML = <div className=\"osc-closed-text\">{self.config.closedText}</div>\n      } else {\n        reactionFormHTML = null\n      }\n    }\n\n    return (\n      <div id={this.id} className={self.props.className || 'osc-reactions'} ref={(el) => { this.instance = el; }} >\n\n        {title}\n\n        {reactionFormHTML}\n\n        {reactions}\n        <br/><br/>\n\n      </div>\n    );\n\n  }\n\n}\n","// extracted by mini-css-extract-plugin","// polyfills\nimport 'whatwg-fetch';\n\n// react\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// import css to make sure it is generated in the result\nimport './css/default.less';\n\n// the module\nimport OpenStadComponentReactions from './component/reactions.jsx';\n\n// render elements\nOpenStadComponentReactions.renderElement = function renderElement( elem, config ) {\n  let attributes = elem.attributes;\n\tReactDOM.render( <OpenStadComponentReactions attributes={attributes} config={config}/>, elem)\n}\n\nexport {\n  OpenStadComponentReactions as default,\n  OpenStadComponentReactions as Reactions,\n};\n\n","/* (ignored) */","(function() { module.exports = window[\"React\"]; }());","(function() { module.exports = window[\"ReactDOM\"]; }());"],"sourceRoot":""}
>>>>>>> Stashed changes
